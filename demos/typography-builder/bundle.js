!function(){"use strict";class t{#t;#e;#n="";#i="Arial";#s=48;#r=!1;#o=20;#a="#ffffff";#l="#ffffff";#c=1;#h=null;#p=0;#u=0;#d=0;#v=0;#m=null;#f="#000000";#g=null;#w=0;#b=document.createElement("canvas");#_=this.#b.getContext("2d");constructor(t,e){this.#t=t,this.#e=e}static create(e,n){return new t(e,n)}text(t){return this.#n=t,this}fontFamily(t){return this.#i=t,this}fontSize(t){return this.#s=t,this.#r=!1,this}autoFontSize(t=!0){return this.#r=t,this}padding(t){return this.#o=t,this}fillStyle(t){return this.#a=t,this}strokeStyle(t,e=1){return this.#l=t,this.#c=e,this}glow(t,e,n=0,i=0){return this.#h=t,this.#p=e,this.#u=n,this.#d=i,this}blur(t){return this.#v=t,this}innerGlow(t,e){return this.#g=t,this.#w=e,this}gradient(t){return this.#m=t,this}background(t){return this.#f=t,this}#y(t,e,n){let i=10,s=i,r=0,o=0;const a=this.#_,l=this.#o;for(;a.font=`${i}px ${this.#i}`,r=a.measureText(t).width,o=i,!(r>e-2*l||o>n-2*l);)s=i,i+=2;return s}#x(){if(this.#r){return`${this.#y(this.#n,this.#t,this.#e)}px ${this.#i}`}return`${this.#s}px ${this.#i}`}#C(){const t=document.createElement("canvas");t.width=this.#t,t.height=this.#e;const e=t.getContext("2d");e.clearRect(0,0,t.width,t.height);const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const i=n.getContext("2d");i.fillStyle=this.#f,i.fillRect(0,0,n.width,n.height),this.#h&&this.#p>0&&(i.shadowColor=this.#h,i.shadowBlur=this.#p,i.shadowOffsetX=this.#u,i.shadowOffsetY=this.#d),i.font=this.#x(),i.textAlign="center",i.textBaseline="middle";const s=n.width/2,r=n.height/2;if(this.#m){const t=i.createLinearGradient(0,0,n.width,0);this.#m.forEach(((e,n)=>{t.addColorStop(n/(this.#m.length-1),e)})),i.fillStyle=t}else i.fillStyle=this.#a;if(i.fillText(this.#n,s,r),this.#c>0&&(i.strokeStyle=this.#l,i.lineWidth=this.#c,i.strokeText(this.#n,s,r)),i.shadowColor="transparent",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0,i.filter="none",this.#v>0&&(i.filter=`blur(${this.#v}px)`,i.drawImage(n,0,0),i.filter="none"),e.drawImage(n,0,0),this.#g&&this.#w>0){const t=document.createElement("canvas");t.width=n.width,t.height=n.height;const i=t.getContext("2d");i.font=this.#x(),i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff",i.fillText(this.#n,n.width/2,n.height/2);const s=i.getImageData(0,0,n.width,n.height),r=document.createElement("canvas");r.width=n.width,r.height=n.height;const o=r.getContext("2d");o.fillStyle=this.#a,o.fillRect(0,0,n.width,n.height),o.font=this.#x(),o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.#g,o.fillText(this.#n,n.width/2,n.height/2);const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const l=a.getContext("2d");l.filter=`blur(${this.#w}px)`,l.drawImage(r,0,0),l.filter="none",o.clearRect(0,0,n.width,n.height),o.drawImage(a,0,0);const c=o.getImageData(0,0,n.width,n.height);for(let t=0;t<c.data.length;t+=4)0===s.data[t+3]&&(c.data[t+3]=0);o.putImageData(c,0,0),e.drawImage(r,0,0)}return t}toCanvas(){return this.#C()}}function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(i)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,...n){if(null==t){for(const t of n)t(void 0);return e}const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function h(t,e,n,i){if(t){const s=p(t,e,n,i);return t[0](s)}}function p(t,e,i,s){return t[1]&&s?n(i.ctx.slice(),t[1](s(e))):i.ctx}function u(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|s[i];return t}return e.dirty|s}return e.dirty}function d(t,e,n,i,s,r){if(s){const o=p(e,n,i,r);t.p(o,s)}}function v(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function f(t,e){const n={};e=new Set(e);for(const i in t)e.has(i)||"$"===i[0]||(n[i]=t[i]);return n}function g(t,e,n){return t.set(n),e}const w="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function b(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode&&t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function C(){return x(" ")}function P(){return x("")}function E(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function k(t,e,n,i){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let $,V;function L(){if(void 0===$){$=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){$=!0}}return $}function S(t,e,n){t.classList.toggle(e,!!n)}function A(t){V=t}function M(){if(!V)throw new Error("Function called outside component initialization");return V}function j(t){M().$$.on_mount.push(t)}function D(t){M().$$.on_destroy.push(t)}function O(){const t=M();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}(e,n,{cancelable:i});return s.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function z(t,e){return M().$$.context.set(t,e),e}function B(t){return M().$$.context.get(t)}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const I=[],T=[];let N=[];const R=[],q=Promise.resolve();let U=!1;function K(){U||(U=!0,q.then(W))}function H(t){N.push(t)}function G(t){R.push(t)}const Y=new Set;let X=0;function W(){if(0!==X)return;const t=V;do{try{for(;X<I.length;){const t=I[X];X++,A(t),Z(t.$$)}}catch(t){throw I.length=0,X=0,t}for(A(null),I.length=0,X=0;T.length;)T.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];Y.has(e)||(Y.add(e),e())}N.length=0}while(I.length);for(;R.length;)R.pop()();U=!1,Y.clear(),A(t)}function Z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const Q=new Set;let J;function tt(){J={r:0,c:[],p:J}}function et(){J.r||r(J.c),J=J.p}function nt(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function it(t,e,n,i){if(t&&t.o){if(Q.has(t))return;Q.add(t),J.c.push((()=>{Q.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}function st(t){return void 0!==t?.length?t:Array.from(t)}function rt(t,e){const n={},i={},s={$$scope:1};let r=t.length;for(;r--;){const o=t[r],a=e[r];if(a){for(const t in o)t in a||(i[t]=1);for(const t in a)s[t]||(n[t]=a[t],s[t]=1);t[r]=a}else for(const t in o)s[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function ot(t){return"object"==typeof t&&null!==t?t:{}}function at(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function lt(t){t&&t.c()}function ct(t,e,n){const{fragment:s,after_update:a}=t.$$;s&&s.m(e,n),H((()=>{const e=t.$$.on_mount.map(i).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(H)}function ht(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];N.forEach((i=>-1===t.indexOf(i)?e.push(i):n.push(i))),n.forEach((t=>t())),N=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,n,i,o,a,l,c=null,h=[-1]){const p=V;A(t);const u=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:s(),dirty:h,skip_bound:!1,root:n.target||p.$$.root};c&&c(u.root);let d=!1;if(u.ctx=i?i(t,n.props||{},((e,n,...i)=>{const s=i.length?i[0]:n;return u.ctx&&a(u.ctx[e],u.ctx[e]=s)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](s),d&&function(t,e){-1===t.$$.dirty[0]&&(I.push(t),K(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],u.update(),d=!0,r(u.before_update),u.fragment=!!o&&o(u.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);u.fragment&&u.fragment.l(t),t.forEach(_)}else u.fragment&&u.fragment.c();n.intro&&nt(t.$$.fragment),ct(t,n.target,n.anchor),W()}A(p)}class ut{$$=void 0;$$set=void 0;$destroy(){ht(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const dt=[];function vt(t,n=e){let i;const s=new Set;function r(e){if(a(t,e)&&(t=e,i)){const e=!dt.length;for(const e of s)e[1](),dt.push(e,t);if(e){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}function o(e){r(e(t))}return{set:r,update:o,subscribe:function(a,l=e){const c=[a,l];return s.add(c),1===s.size&&(i=n(r,o)||e),a(t),()=>{s.delete(c),0===s.size&&i&&(i(),i=null)}}}}const mt=Object.freeze({ARIAL:"Arial",VERDANA:"Verdana",TIMES_NEW_ROMAN:"Times New Roman"}),ft=[{text:"Arial",value:mt.ARIAL},{text:"Verdana",value:mt.VERDANA},{text:"Times New Roman",value:mt.TIMES_NEW_ROMAN}];const gt=function(){const t={text:"Hello World",fontFamily:mt.ARIAL,fontSizeAuto:!0,fontSizeManual:48,padding:20,fillStyle:"#0000ff",strokeStyle:"#000099",strokeWidth:3,glowColor:"#0000cc",glowSize:10,shadowOffsetX:0,shadowOffsetY:0,blurAmount:3,innerGlowColor:"#000044",innerGlowBlur:0,backgroundColor:"#000000",gradientColors:["#000066","#0000ff","#000066"],useGradient:!1},{subscribe:e,set:n,update:i}=vt({...t});return{subscribe:e,set:n,update:i,setText:t=>i((e=>({...e,text:t}))),setFontFamily:t=>i((e=>({...e,fontFamily:t}))),setFontSizeAuto:t=>i((e=>({...e,fontSizeAuto:t}))),setFontSizeManual:t=>i((e=>({...e,fontSizeManual:t}))),setPadding:t=>i((e=>({...e,padding:t}))),setFillStyle:t=>i((e=>({...e,fillStyle:t}))),setStrokeStyle:t=>i((e=>({...e,strokeStyle:t}))),setStrokeWidth:t=>i((e=>({...e,strokeWidth:t}))),setGlowColor:t=>i((e=>({...e,glowColor:t}))),setGlowSize:t=>i((e=>({...e,glowSize:t}))),setShadowOffsetX:t=>i((e=>({...e,shadowOffsetX:t}))),setShadowOffsetY:t=>i((e=>({...e,shadowOffsetY:t}))),setBlurAmount:t=>i((e=>({...e,blurAmount:t}))),setInnerGlowColor:t=>i((e=>({...e,innerGlowColor:t}))),setInnerGlowBlur:t=>i((e=>({...e,innerGlowBlur:t}))),setBackgroundColor:t=>i((e=>({...e,backgroundColor:t}))),setGradientColors:t=>i((e=>({...e,gradientColors:t}))),setUseGradient:t=>i((e=>({...e,useGradient:t}))),reset:()=>n({...t})}}();function wt(t){return null==t}function bt(t){return null!==t&&"object"==typeof t}function _t(t){return null!==t&&"object"==typeof t}function yt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xt(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce(((n,i)=>{const s=t[i],r=e[i];return _t(s)&&_t(r)?Object.assign(Object.assign({},n),{[i]:xt(s,r)}):Object.assign(Object.assign({},n),{[i]:i in e?r:s})}),{})}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const Ct={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Pt{static alreadyDisposed(){return new Pt({type:"alreadydisposed"})}static notBindable(){return new Pt({type:"notbindable"})}static notCompatible(t,e){return new Pt({type:"notcompatible",context:{id:`${t}.${e}`}})}static propertyNotFound(t){return new Pt({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new Pt({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=Ct[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class Et{constructor(t,e){this.obj_=t,this.key=e}static isBindable(t){return null!==t&&("object"==typeof t||"function"==typeof t)}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,e){const n=this.read();if(!Et.isBindable(n))throw Pt.notBindable();if(!(t in n))throw Pt.propertyNotFound(t);n[t]=e}}class kt{constructor(){this.observers_={}}on(t,e,n){var i;let s=this.observers_[t];return s||(s=this.observers_[t]=[]),s.push({handler:e,key:null!==(i=null==n?void 0:n.key)&&void 0!==i?i:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.key!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}class $t{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new kt,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,s=this.rawValue_;(!this.equals_(s,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:i,sender:this}))}}class Vt{constructor(t){this.emitter=new kt,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}class Lt{constructor(t){this.emitter=new kt,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function St(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new $t(t,e):new Vt(t)}class At{constructor(t){this.emitter=new kt,this.valMap_=t;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:St(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new At(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}class Mt{constructor(t){this.values=At.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class jt{constructor(t){this.values=At.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let i=t;return wt(n)||(i=Math.max(i,n)),wt(e)||(i=Math.min(i,e)),i}}class Dt{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}class Ot{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const zt={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Bt{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=zt[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ft={"+":t=>t,"-":t=>-t,"~":t=>~t};class It{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ft[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Tt(t){return(e,n)=>{for(let i=0;i<t.length;i++){const s=t[i](e,n);if(""!==s)return s}return""}}function Nt(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Rt(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function qt(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=Rt(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const s=Rt(t,e+=1);return""===s?"":i+s}(t,e);return""===i?"":n+i}function Ut(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+Rt(t,e)}const Kt=Tt([function(t,e){const n=Ut(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const s=Rt(t,e);return n+i+s+qt(t,e+=s.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=Rt(t,e);return e+=i.length,""===i?"":n+i+qt(t,e)},function(t,e){const n=Ut(t,e);return e+=n.length,""===n?"":n+qt(t,e)}]);const Ht=Tt([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),Gt=Tt([Ht,Kt]);function Yt(t,e){var n;return null!==(n=function(t,e){const n=Gt(t,e);return e+=n.length,""===n?null:{evaluable:new Ot(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=Zt(t,e);if(!i)return null;e=i.cursor,e+=Nt(t,e).length;const s=t.substr(e,1);return e+=s.length,")"!==s?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function Xt(t,e,n){n+=Nt(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=Nt(e,n).length,operator:i}):null}const Wt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(n,i)=>{const s=t(n,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const s=Xt(e,n,i);if(!s)break;i=s.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,r=new Bt(s.operator,r,o.evaluable)}return r?{cursor:i,evaluable:r}:null}}(t,e)),(function t(e,n){const i=Yt(e,n);if(i)return i;const s=e.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;const r=t(e,n);return r?{cursor:n=r.cursor,evaluable:new It(s,r.evaluable)}:null}));function Zt(t,e){return e+=Nt(t,e).length,Wt(t,e)}function Qt(t){var e;const n=function(t){const e=Zt(t,0);return e?e.cursor+Nt(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function Jt(t){if("number"==typeof t)return t;if("string"==typeof t){const e=Qt(t);if(!wt(e))return e}return 0}function te(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ee(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)}function ne(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ie(t,e,n){return Math.min(Math.max(t,e),n)}function se(t,e){return(t%e+e)%e}function re(t,e){return wt(t.step)?Math.max(ne(e),2):ne(t.step)}function oe(t){var e;return null!==(e=t.step)&&void 0!==e?e:1}function ae(t,e){var n;const i=Math.abs(null!==(n=t.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function le(t,e){return wt(t.step)?null:new Dt(t.step,e)}function ce(t){return wt(t.max)||wt(t.min)?wt(t.max)&&wt(t.min)?null:new jt({max:t.max,min:t.min}):new Mt({max:t.max,min:t.min})}function he(t,e){var n,i,s;return{formatter:null!==(n=t.format)&&void 0!==n?n:te(re(t,e)),keyScale:null!==(i=t.keyScale)&&void 0!==i?i:oe(t),pointerScale:null!==(s=t.pointerScale)&&void 0!==s?s:ae(t,e)}}function pe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function ue(t){return{constraint:t.constraint,textProps:At.fromObject(he(t.params,t.initialValue))}}class de{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class ve{constructor(t){this.target=t}}class me extends ve{constructor(t,e,n){super(t),this.value=e,this.last=null==n||n}}class fe extends ve{constructor(t,e){super(t),this.expanded=e}}class ge extends ve{constructor(t,e){super(t),this.index=e}}class we extends ve{constructor(t,e){super(t),this.native=e}}class be extends de{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new kt,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const e=this.controller.value;this.emitter_.emit("change",new me(this,e.binding.target.read(),t.options.last))}}function _e(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function ye(t){return{custom:e=>_e(e)(t),boolean:_e((t=>"boolean"==typeof t?t:void 0))(t),number:_e((t=>"number"==typeof t?t:void 0))(t),string:_e((t=>"string"==typeof t?t:void 0))(t),function:_e((t=>"function"==typeof t?t:void 0))(t),constant:e=>_e((t=>t===e?e:void 0))(t),raw:_e((t=>t))(t),object:e=>_e((t=>{var n;if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const s=(0,e[i])(t[i]);return s.succeeded?Object.assign(Object.assign({},n),{[i]:s.value}):void 0}),{})}(t,e)}))(t),array:e=>_e((t=>{var n;if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}))(t)}}const xe={optional:ye(!0),required:ye(!1)};function Ce(t,e){const n=e(xe),i=xe.required.object(n)(t);return i.succeeded?i.value:void 0}function Pe(t,e,n,i){if(e&&!e(t))return!1;const s=Ce(t,n);return!!s&&i(s)}function Ee(t,e){var n;return xt(null!==(n=null==t?void 0:t())&&void 0!==n?n:{},e)}function ke(t){return"value"in t}function $e(t){if(!bt(t)||!("binding"in t))return!1;const e=t.binding;return!!bt(n=e)&&"target"in n;var n}const Ve="http://www.w3.org/2000/svg";function Le(t){t.offsetHeight}function Se(t){return void 0!==t.ontouchstart}function Ae(){return globalThis.document}const Me={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function je(t,e){const n=t.createElementNS(Ve,"svg");return n.innerHTML=Me[e],n}function De(t,e,n){t.insertBefore(e,t.children[n])}function Oe(t){t.parentElement&&t.parentElement.removeChild(t)}function ze(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function Be(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Fe(t,e){t.emitter.on("change",(t=>{e(t.rawValue)})),e(t.rawValue)}function Ie(t,e,n){Fe(t.value(e),n)}const Te="tp";function Ne(t){return(e,n)=>[Te,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}const Re=Ne("lbl");class qe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Re()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Re("l")),Ie(e.props,"label",(e=>{wt(e)?this.element.classList.add(Re(void 0,"nol")):(this.element.classList.remove(Re(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(Re("v")),this.element.appendChild(i),this.valueElement=i}}class Ue{constructor(t,e){this.props=e.props,this.valueController=e.valueController,this.viewProps=e.valueController.viewProps,this.view=new qe(t,{props:e.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Pe(t,null,(t=>({label:t.optional.string})),(t=>(this.props.set("label",t.label),!0)))}exportProps(){return Ee(null,{label:this.props.get("label")})}}const Ke=Ne(""),He={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Ge{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((t=>{e.classList.remove(Ke(void 0,He[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(Ke(void 0,He[t]))}))})),this.viewProps.handleDispose((()=>{Oe(e)}))}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Pe(t,null,(t=>({disabled:t.required.boolean,hidden:t.required.boolean})),(t=>(this.viewProps.importState(t),!0)))}exportState(){return Ee(null,Object.assign({},this.viewProps.exportState()))}}class Ye extends Ge{constructor(t,e){if(e.value!==e.valueController.value)throw Pt.shouldNeverHappen();const n=e.valueController.viewProps,i=new Ue(t,{blade:e.blade,props:e.props,valueController:e.valueController});super(Object.assign(Object.assign({},e),{view:new qe(t,{props:e.props,viewProps:n}),viewProps:n})),this.labelController=i,this.value=e.value,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Pe(t,(e=>{var n,i,s;return super.importState(e)&&this.labelController.importProps(e)&&(null===(s=null===(i=(n=this.valueController).importProps)||void 0===i?void 0:i.call(n,t))||void 0===s||s)}),(t=>({value:t.optional.raw})),(t=>(t.value&&(this.value.rawValue=t.value),!0)))}exportState(){var t,e,n;return Ee((()=>super.exportState()),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),null!==(n=null===(e=(t=this.valueController).exportProps)||void 0===e?void 0:e.call(t))&&void 0!==n?n:{}))}}function Xe(t,e){for(;t.length<e;)t.push(void 0)}function We(t){const e=[];return Xe(e,t),e}function Ze(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}class Qe extends de{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return null!==(t=this.controller.buttonController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller.buttonController.emitter.on(t,(t=>{n(new we(this,t.nativeEvent))})),this}off(t,e){return this.controller.buttonController.emitter.off(t,e),this}}function Je(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function tn(t,e){Fe(t,(t=>{e.textContent=null!=t?t:""}))}const en=Ne("btn");class nn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(en()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(en("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(en("t")),tn(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class sn{constructor(t,e){this.emitter=new kt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new nn(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Pe(t,null,(t=>({title:t.optional.string})),(t=>(this.props.set("title",t.title),!0)))}exportProps(){return Ee(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class rn extends Ge{constructor(t,e){const n=new sn(t,{props:e.buttonProps,viewProps:e.viewProps}),i=new Ue(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:i.view,viewProps:e.viewProps}),this.buttonController=n,this.labelController=i}importState(t){return Pe(t,(t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t)),(()=>({})),(()=>!0))}exportState(){return Ee((()=>super.exportState()),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}const on=new class{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("2.0.5");function an(t){return Object.assign({core:on},t)}an({id:"button",type:"blade",accept(t){const e=Ce(t,(t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string})));return e?{params:e}:null},controller:t=>new rn(t.document,{blade:t.blade,buttonProps:At.fromObject({title:t.params.title}),labelProps:At.fromObject({label:t.params.label}),viewProps:t.viewProps}),api:t=>t.controller instanceof rn?new Qe(t.controller):null});class ln{constructor(t,e){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new kt,this.pool_=e;this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map((t=>this.pool_.createApi(t)))}addBinding(t,e,n){const i=null!=n?n:{},s=this.controller_.element.ownerDocument,r=this.pool_.createBinding(s,function(t,e){if(!Et.isBindable(t))throw Pt.notBindable();return new Et(t,e)}(t,e),i),o=this.pool_.createBindingApi(r);return this.add(o,i.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){const n=t.controller;return this.controller_.rack.add(n,e),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const e=this.controller_.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.children.forEach((t=>{var e;bt(e=t)&&"refresh"in e&&"function"==typeof e.refresh&&t.refresh()}))}onRackValueChange_(t){const e=t.bladeController,n=this.pool_.createApi(e),i=$e(e.value)?e.value.binding:null;this.emitter_.emit("change",new me(n,i?i.target.read():e.value.rawValue,t.options.last))}}class cn extends de{constructor(t,e){super(t),this.rackApi_=new ln(t.rackController,e)}refresh(){this.rackApi_.refresh()}}class hn extends Ge{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Pe(t,(t=>super.importState(t)),(t=>({children:t.required.array(t.required.raw)})),(t=>this.rackController.rack.children.every(((e,n)=>e.importState(t.children[n])))))}exportState(){return Ee((()=>super.exportState()),{children:this.rackController.rack.children.map((t=>t.exportState()))})}}function pn(t){return"rackController"in t}class un{constructor(t){this.emitter=new kt,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw Pt.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.allItems().forEach((t=>{this.cache_.delete(t)})),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function dn(t){return pn(t)?t.rackController.rack.bcSet_:null}class vn{constructor(t){var e,n;this.emitter=new kt,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=null!==(e=t.blade)&&void 0!==e?e:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new un(dn),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),t.parent=this,this.bcSet_.add(t,e)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),ke(n))n.value.emitter.on("change",this.onChildValueChange_);else if(pn(n)){const t=n.rackController.rack;if(t){const e=t.emitter;e.on("layout",this.onRackLayout_),e.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),!e)return;const n=t.item;if(ke(n))n.value.emitter.off("change",this.onChildValueChange_);else if(pn(n)){const t=n.rackController.rack;if(t){const e=t.emitter;e.off("layout",this.onRackLayout_),e.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildValueChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(ke(i)&&i.value===e)return i}return null}(this.find(ke),t.sender);if(!e)throw Pt.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class mn{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const e=new vn({blade:t.root?void 0:t.blade,viewProps:t.viewProps});e.emitter.on("add",this.onRackAdd_),e.emitter.on("remove",this.onRackRemove_),this.rack=e,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--){this.rack.children[t].viewProps.set("disposed",!0)}}))}onRackAdd_(t){t.root&&De(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Oe(t.bladeController.view.element)}}function fn(){return new At({positions:St([],{equals:yt})})}class gn extends At{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=At.createCore(e);return new gn(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!wt(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};Ie(this,"expanded",n),Ie(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function wn(t,e){e.style.height=t.styleHeight}function bn(t,e){t.value("expanded").emitter.on("beforechange",(()=>{if(t.set("completed",!1),wt(t.get("expandedHeight"))){const n=function(t,e){let n=0;return function(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Le(e),n=e.clientHeight,t.set("temporaryExpanded",null),Le(e)})),n}(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Le(e)})),t.emitter.on("change",(()=>{wn(t,e)})),wn(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class _n extends cn{constructor(t,e){super(t,e),this.emitter_=new kt,this.controller.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",new fe(this,t.sender.rawValue))})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",t)}))}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const yn=Ne("cnt");class xn{constructor(t,e){var n;this.className_=Ne(null!==(n=e.viewName)&&void 0!==n?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),yn()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ie(this.foldable_,"completed",Je(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),Ie(e.props,"title",(t=>{wt(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=t.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const r=t.createElement("div");r.classList.add(this.className_("t")),tn(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const o=t.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);const a=t.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class Cn extends hn{constructor(t,e){var n;const i=gn.create(null===(n=e.expanded)||void 0===n||n),s=new xn(t,{foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new mn({blade:e.blade,element:s.containerElement,root:e.root,viewProps:e.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,bn(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Pe(t,(t=>super.importState(t)),(t=>({expanded:t.required.boolean,title:t.optional.string})),(t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0)))}exportState(){return Ee((()=>super.exportState()),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}an({id:"folder",type:"blade",accept(t){const e=Ce(t,(t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean})));return e?{params:e}:null},controller:t=>new Cn(t.document,{blade:t.blade,expanded:t.params.expanded,props:At.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof Cn?new _n(t.controller,t.pool):null});const Pn=Ne("");function En(t,e){return Je(t,Pn(void 0,e))}class kn extends At{constructor(t){var e,n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=(n=St(this.getGlobalDisabled_()),[new Lt(n),(t,e)=>{n.setRawValue(t,e)}]),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,i;const s=null!=t?t:{};return new kn(At.createCore({disabled:null!==(e=s.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=s.hidden)&&void 0!==n&&n,parent:null!==(i=s.parent)&&void 0!==i?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){Fe(this.globalDisabled_,En(t,"disabled")),Ie(this,"hidden",En(t,"hidden"))}bindDisabled(t){Fe(this.globalDisabled_,(e=>{t.disabled=e}))}bindTabIndex(t){Fe(this.globalDisabled_,(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const $n=Ne("tbp");class Vn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add($n()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add($n("c")),this.element.appendChild(n),this.containerElement=n}}const Ln=Ne("tbi");class Sn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ln()),e.viewProps.bindClassModifiers(this.element),Ie(e.props,"selected",(t=>{t?this.element.classList.add(Ln(void 0,"sel")):this.element.classList.remove(Ln(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(Ln("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(Ln("t")),tn(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class An{constructor(t,e){this.emitter=new kt,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Sn(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Mn extends hn{constructor(t,e){const n=new Vn(t,{viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new mn({blade:e.blade,element:n.containerElement,viewProps:e.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new An(t,{props:e.itemProps,viewProps:kn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=e.props,Ie(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}importState(t){return Pe(t,(t=>super.importState(t)),(t=>({selected:t.required.boolean,title:t.required.string})),(t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0)))}exportState(){return Ee((()=>super.exportState()),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class jn extends cn{constructor(t,e){super(t,e),this.emitter_=new kt,this.onSelect_=this.onSelect_.bind(this),this.pool_=e,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",t)})),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const e=this.controller.view.element.ownerDocument,n=new Mn(e,{blade:fn(),itemProps:At.fromObject({selected:!1,title:t.title}),props:At.fromObject({selected:!1}),viewProps:kn.create()}),i=this.pool_.createApi(n);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}onSelect_(t){this.emitter_.emit("select",new ge(this,t.rawValue))}}class Dn extends cn{get title(){var t;return null!==(t=this.controller.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class On{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=St(!0),this.selectedIndex=St(-1),this.items_=[]}add(t,e){const n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const t=this.items_.findIndex((t=>t.rawValue));t<0?(this.items_.forEach(((t,e)=>{t.rawValue=0===e})),this.selectedIndex.rawValue=0):(this.items_.forEach(((e,n)=>{e.rawValue=n===t})),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex((e=>e===t.sender));this.items_.forEach(((t,n)=>{t.rawValue=n===e})),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const zn=Ne("tab");class Bn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(zn(),yn()),e.viewProps.bindClassModifiers(this.element),Fe(e.empty,Je(this.element,zn(void 0,"nop")));const n=t.createElement("div");n.classList.add(zn("t")),this.element.appendChild(n),this.itemsElement=n;const i=t.createElement("div");i.classList.add(zn("i")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(zn("c")),this.element.appendChild(s),this.contentsElement=s}}class Fn extends hn{constructor(t,e){const n=new On,i=new Bn(t,{empty:n.empty,viewProps:e.viewProps});super({blade:e.blade,rackController:new mn({blade:e.blade,element:i.contentsElement,viewProps:e.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=n}add(t,e){this.rackController.rack.add(t,e)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const e=t.bladeController;De(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const e=t.bladeController;Oe(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}an({id:"tab",type:"blade",accept(t){const e=Ce(t,(t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")})));return e&&0!==e.pages.length?{params:e}:null},controller(t){const e=new Fn(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const i=new Mn(t.document,{blade:fn(),itemProps:At.fromObject({selected:!1,title:n.title}),props:At.fromObject({selected:!1}),viewProps:kn.create()});e.add(i)})),e},api:t=>t.controller instanceof Fn?new jn(t.controller,t.pool):t.controller instanceof Mn?new Dn(t.controller,t.pool):null});class In extends be{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class Tn{constructor(){this.disabled=!1,this.emitter=new kt}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Nn{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new kt,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Rn{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function qn(t,e){if(t instanceof e)return t;if(t instanceof Rn){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class Un{constructor(t){this.values=At.fromObject({options:t})}constrain(t){const e=this.values.get("options");if(0===e.length)return t;return e.filter((e=>e.value===t)).length>0?t:e[0].value}}function Kn(t){var e;const n=xe;return Array.isArray(t)?null===(e=Ce({items:t},(t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))}))))||void 0===e?void 0:e.items:"object"==typeof t?n.required.raw(t).value:void 0}function Hn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function Gn(t){return wt(t)?null:new Un(Hn(t))}const Yn=Ne("lst");class Xn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Yn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(Yn("s")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(Yn("m")),i.appendChild(je(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,Ie(this.props_,"options",(e=>{ze(this.selectElement),e.forEach((e=>{const n=t.createElement("option");n.textContent=e.text,this.selectElement.appendChild(n)})),this.update_()}))}update_(){const t=this.props_.get("options").map((t=>t.value));this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Wn{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Xn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}importProps(t){return Pe(t,null,(t=>({options:t.required.custom(Kn)})),(t=>(this.props.set("options",Hn(t.options)),!0)))}exportProps(){return Ee(null,{options:this.props.get("options")})}}const Zn=Ne("pop");class Qn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zn()),e.viewProps.bindClassModifiers(this.element),Fe(e.shows,Je(this.element,Zn(void 0,"v")))}}class Jn{constructor(t,e){this.shows=St(!1),this.viewProps=e.viewProps,this.view=new Qn(t,{shows:this.shows,viewProps:this.viewProps})}}const ti=Ne("txt");class ei{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ti()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(ti("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class ni{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ei(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);wt(n)||(this.value.rawValue=n),this.view.refresh()}}function ii(t){return"false"!==t&&!!t}function si(t){return function(t){return String(t)}(t)}const ri=te(0);function oi(t){return ri(t)+"%"}function ai(t){return String(t)}function li(t){return t}function ci({primary:t,secondary:e,forward:n,backward:i}){let s=!1;function r(t){s||(s=!0,t(),s=!1)}t.emitter.on("change",(i=>{r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),i.options)}))})),e.emitter.on("change",(s=>{r((()=>{t.setRawValue(i(t.rawValue,e.rawValue),s.options)})),r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),s.options)}))})),r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})}))}function hi(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function pi(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function ui(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function di(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function vi(t,e){var n,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=s&&s.scrollX)&&void 0!==n?n:0)+r.left),y:t.pageY-((null!==(i=s&&s.scrollY)&&void 0!==i?i:0)+r.top)}}class mi{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new kt,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(vi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(vi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(vi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const fi=Ne("txt");class gi{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(fi(),fi(void 0,"num")),e.arrayPosition&&this.element.classList.add(fi(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(fi("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(fi()),this.inputElement.classList.add(fi("i"));const i=t.createElement("div");i.classList.add(fi("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(Ve,"svg");s.classList.add(fi("g")),this.knobElement.appendChild(s);const r=t.createElementNS(Ve,"path");r.classList.add(fi("gb")),s.appendChild(r),this.guideBodyElem_=r;const o=t.createElementNS(Ve,"path");o.classList.add(fi("gh")),s.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(Ne("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(fi(void 0,"drg"));this.element.classList.add(fi(void 0,"drg"));const e=t.rawValue/this.props_.get("pointerScale"),n=e+(e>0?-1:e<0?1:0),i=ie(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class wi{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=St(null),this.view=new gi(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new mi(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const i=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("min"),s=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("max");let r=t;return void 0!==i&&(r=Math.max(r,i)),void 0!==s&&(r=Math.min(r,s)),r}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);wt(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){const e=hi(this.props.get("keyScale"),pi(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==hi(this.props.get("keyScale"),pi(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const bi=Ne("sld");class _i{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(bi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(bi("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(bi("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=ie(ee(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class yi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new _i(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mi(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(ee(ie(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=hi(this.props.get("keyScale"),ui(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==hi(this.props.get("keyScale"),ui(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xi=Ne("sldtxt");class Ci{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(xi());const n=t.createElement("div");n.classList.add(xi("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(xi("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Pi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new yi(t,{props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new wi(t,{parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new Ci(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Pe(t,null,(t=>({max:t.required.number,min:t.required.number})),(t=>{const e=this.sliderC_.props;return e.set("max",t.max),e.set("min",t.min),!0}))}exportProps(){const t=this.sliderC_.props;return Ee(null,{max:t.get("max"),min:t.get("min")})}}const Ei={containerUnitSize:"cnt-usz"};function ki(t){return`--${Ei[t]}`}class $i{constructor(t,e){const n=Ne(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function Vi(t){return pe(t)}function Li(t){if(_t(t))return Ce(t,Vi)}function Si(t,e){if(!t)return;const n=[],i=le(t,e);i&&n.push(i);const s=ce(t);return s&&n.push(s),new Rn(n)}function Ai(t){if("inline"===t||"popup"===t)return t}function Mi(t,e){t.write(e)}const ji=Ne("ckb");class Di{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ji()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(ji("l")),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("input");i.classList.add(ji("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const s=t.createElement("div");s.classList.add(ji("w")),this.labelElement.appendChild(s);const r=je(t,"check");s.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Oi{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Di(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}an({id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=Ce(e,(t=>({options:t.optional.custom(Kn),readonly:t.optional.constant(!1)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ii,constraint:t=>function(t){const e=[],n=Gn(t.options);return n&&e.push(n),new Rn(e)}(t.params),writer:t=>Mi},controller:t=>{const e=t.document,n=t.value,i=t.constraint,s=i&&qn(i,Un);return s?new Wn(e,{props:new At({options:s.values.value("options")}),value:n,viewProps:t.viewProps}):new Oi(e,{value:n,viewProps:t.viewProps})},api:t=>"boolean"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof Wn?new In(t.controller):null});const zi=Ne("col");class Bi{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(zi()),e.foldable.bindExpandedClass(this.element,zi(void 0,"expanded")),Ie(e.foldable,"completed",Je(this.element,zi(void 0,"cpl")));const n=t.createElement("div");n.classList.add(zi("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(zi("s")),n.appendChild(i),this.swatchElement=i;const s=t.createElement("div");if(s.classList.add(zi("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(zi("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function Fi(t,e,n){const i=se(t,360),s=ie(e/100,0,1),r=ie(n/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,h,p;return[c,h,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(h+l),255*(p+l)]}function Ii(t){return[t[0],t[1],t[2]]}function Ti(t,e){return[t[0],t[1],t[2],e]}const Ni={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const i=(t%360+360)%360,s=ie(e/100,0,1),r=ie(n/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,h,p;return[c,h,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(h+l),255*(p+l)]}},hsv:{hsl:function(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:Fi},rgb:{hsl:function(t,e,n){const i=ie(t/255,0,1),s=ie(e/255,0,1),r=ie(n/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,h=0;const p=(a+o)/2;return 0!==l&&(h=l/(1-Math.abs(o+a-1)),c=i===o?(s-r)/l:s===o?2+(r-i)/l:4+(i-s)/l,c=c/6+(c<0?1:0)),[360*c,100*h,100*p]},hsv:function(t,e,n){const i=ie(t/255,0,1),s=ie(e/255,0,1),r=ie(n/255,0,1),o=Math.max(i,s,r),a=o-Math.min(i,s,r);let l;return l=0===a?0:o===i?((s-r)/a%6+6)%6*60:o===s?60*((r-i)/a+2):60*((i-s)/a+4),[l,100*(0===o?0:a/o),100*o]},rgb:(t,e,n)=>[t,e,n]}};function Ri(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function qi(t,e,n){var i;const s=Ri(e,n);return["rgb"===e?ie(t[0],0,s[0]):(r=t[0],o=s[0],r===o?o:se(r,o)),ie(t[1],0,s[1]),ie(t[2],0,s[2]),ie(null!==(i=t[3])&&void 0!==i?i:1,0,1)];var r,o}function Ui(t,e,n,i){const s=Ri(e,n),r=Ri(e,i);return t.map(((t,e)=>t/s[e]*r[e]))}function Ki(t,e,n){const i=Ui(t,e.mode,e.type,"int");return Ui(Ni[e.mode][n.mode](...i),n.mode,"int",n.type)}class Hi{static black(){return new Hi([0,0,0],"rgb")}constructor(t,e){this.type="int",this.mode=e,this.comps_=qi(t,e,this.type)}getComponents(t){return Ti(Ki(Ii(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Gi=Ne("colp");class Yi{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Gi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Gi("hsv"));const i=t.createElement("div");i.classList.add(Gi("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(Gi("h")),this.hPaletteView_=e.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);const r=t.createElement("div");if(r.classList.add(Gi("rgb")),this.textsView_=e.textsView,r.appendChild(this.textsView_.element),this.element.appendChild(r),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(Gi("a"));const i=t.createElement("div");i.classList.add(Gi("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(Gi("at")),s.appendChild(this.alphaViews_.text.element),n.appendChild(s),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Xi(t){return"int"===t?"int":"float"===t?"float":void 0}function Wi(t){return Ce(t,(t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(Xi)}),expanded:t.optional.boolean,picker:t.optional.custom(Ai),readonly:t.optional.constant(!1)})))}function Zi(t){return t?.1:1}function Qi(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}class Ji{constructor(t,e){this.type="float",this.mode=e,this.comps_=qi(t,e,this.type)}getComponents(t){return Ti(Ki(Ii(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const ts={int:(t,e)=>new Hi(t,e),float:(t,e)=>new Ji(t,e)};function es(t,e,n){return ts[n](t,e)}function ns(t,e){if(t.type===e)return t;if(function(t){return"int"===t.type}(t)&&"float"===e)return function(t){const e=t.getComponents(),n=Ri(t.mode,"int");return new Ji([ee(e[0],0,n[0],0,1),ee(e[1],0,n[1],0,1),ee(e[2],0,n[2],0,1),e[3]],t.mode)}(t);if(function(t){return"float"===t.type}(t)&&"int"===e)return function(t){const e=t.getComponents(),n=Ri(t.mode,"int");return new Hi([Math.round(ee(e[0],0,1,0,n[0])),Math.round(ee(e[1],0,1,0,n[1])),Math.round(ee(e[2],0,1,0,n[2])),e[3]],t.mode)}(t);throw Pt.shouldNeverHappen()}function is(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const ss={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function rs(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return ss[i](n)}function os(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[is(e[1],255),is(e[2],255),is(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function as(t){const e=os(t);return e?new Hi(e,"rgb"):null}function ls(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[is(e[1],255),is(e[2],255),is(e[3],255),is(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function cs(t){const e=ls(t);return e?new Hi(e,"rgb"):null}function hs(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[rs(e[1]),is(e[2],100),is(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ps(t){const e=hs(t);return e?new Hi(e,"hsl"):null}function us(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[rs(e[1]),is(e[2],100),is(e[3],100),is(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function ds(t){const e=us(t);return e?new Hi(e,"hsl"):null}function vs(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function ms(t){const e=vs(t);return e?new Hi(e,"rgb"):null}function fs(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ee(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ee(parseInt(n[4],16),0,255,0,1)]:null}function gs(t){const e=fs(t);return e?new Hi(e,"rgb"):null}function ws(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function bs(t){return e=>{const n=ws(e);return n?es(n,"rgb",t):null}}function _s(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function ys(t){return e=>{const n=_s(e);return n?es(n,"rgb",t):null}}const xs=[{parser:vs,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:fs,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:os,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:ls,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:hs,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:us,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ws,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:_s,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Cs(t,e="int"){const n=function(t){return xs.reduce(((e,{parser:n,result:i})=>e||(n(t)?i:null)),null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}function Ps(t){const e=[ms,gs,as,cs,ps,ds];"int"===t&&e.push(bs("int"),ys("int")),"float"===t&&e.push(bs("float"),ys("float"));const n=function(t){return e=>t.reduce(((t,n)=>null!==t?t:n(e)),null)}(e);return e=>{const i=n(e);return i?ns(i,t):null}}function Es(t){const e=Ps("int");if("string"!=typeof t)return Hi.black();const n=e(t);return null!=n?n:Hi.black()}function ks(t){const e=ie(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function $s(t,e="#"){return`${e}${Ii(t.getComponents("rgb")).map(ks).join("")}`}function Vs(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(ks).join("")}`}function Ls(t){const e=te(0);return`rgb(${Ii(ns(t,"int").getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Ss(t){const e=te(2),n=te(0),i=ns(t,"int").getComponents("rgb").map(((t,i)=>(3===i?e:n)(t)));return`rgba(${i.join(", ")})`}function As(t,e){const n=te("float"===e?2:0),i=["r","g","b"],s=Ii(ns(t,e).getComponents("rgb")).map(((t,e)=>`${i[e]}: ${n(t)}`));return`{${s.join(", ")}}`}function Ms(t){return e=>As(e,t)}function js(t,e){const n=te(2),i=te("float"===e?2:0),s=["r","g","b","a"],r=ns(t,e).getComponents("rgb").map(((t,e)=>`${s[e]}: ${(3===e?n:i)(t)}`));return`{${r.join(", ")}}`}function Ds(t){return e=>js(e,t)}const Os=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:$s},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Vs},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Ls},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Ss},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[te(0),oi,oi],n=Ii(ns(t,"int").getComponents("hsl")).map(((t,n)=>e[n](t)));return`hsl(${n.join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[te(0),oi,oi,te(2)],n=ns(t,"int").getComponents("hsl").map(((t,n)=>e[n](t)));return`hsla(${n.join(", ")})`}},...["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Ms(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Ds(e)}]),[])];function zs(t){return Os.reduce(((e,n)=>{return e||(i=n.format,s=t,i.alpha===s.alpha&&i.mode===s.mode&&i.notation===s.notation&&i.type===s.type?n.stringifier:null);var i,s}),null)}const Bs=Ne("apl");class Fs{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Bs()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Bs("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Bs("c")),n.appendChild(i),this.colorElem_=i;const s=t.createElement("div");s.classList.add(Bs("m")),this.element.appendChild(s),this.markerElem_=s;const r=t.createElement("div");r.classList.add(Bs("p")),this.markerElem_.appendChild(r),this.previewElem_=r,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new Hi([e[0],e[1],e[2],0],"rgb"),i=new Hi([e[0],e[1],e[2],255],"rgb"),s=["to right",Ss(n),Ss(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Ss(t);const r=ee(e[3],0,1,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class Is{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Fs(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[s,r,o]=i.getComponents("hsv");this.value.setRawValue(new Hi([s,r,o,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=hi(Zi(!0),ui(t));if(0===e)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new Hi([i,s,r,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==hi(Zi(!0),ui(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ts=Ne("coltxt");class Ns{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ts()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ts("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce(((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(Ts("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(Ts("mm")),i.appendChild(je(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Ts("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=e.inputViews,this.applyInputViews_(),Fe(e.mode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){ze(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(Ts("c")),n.appendChild(e.element),this.inputsElem_.appendChild(n)}))}}function Rs(t,e,n){const i=Ri(t,e)[n];return new Mt({min:0,max:i})}function qs(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Qt,viewProps:e.viewProps};return[0,1,2].map((i=>{const s=function(t,e,n){return new wi(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",parser:e.parser,props:At.fromObject({formatter:(i=e.colorType,te("float"===i?2:0)),keyScale:Zi(!1),pointerScale:"float"===e.colorType?.01:1}),value:St(0,{constraint:Rs(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var i}(t,n,i);return ci({primary:e.value,secondary:s.value,forward:t=>ns(t,e.colorType).getComponents(e.colorMode)[i],backward(t,n){const s=e.colorMode,r=ns(t,e.colorType).getComponents(s);r[i]=n;return ns(es(Ti(Ii(r),r[3]),s,e.colorType),"int")}}),s}))}class Us{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=St(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Ns(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e=this.colorMode.rawValue;return function(t){return"hex"!==t}(e)?qs(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(t,e){const n=new ni(t,{parser:Ps("int"),props:At.fromObject({formatter:$s}),value:St(Hi.black()),viewProps:e.viewProps});return ci({primary:e.value,secondary:n.value,forward:t=>new Hi(Ii(t.getComponents()),t.mode),backward:(t,e)=>new Hi(Ti(Ii(e.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((t=>t.view))}}const Ks=Ne("hpl");class Hs{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ks()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Ks("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Ks("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Ls(new Hi([e,100,100],"hsv"));const n=ee(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Gs{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Hs(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=ee(ie(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,s,r,o]=i.getComponents("hsv");this.value.setRawValue(new Hi([n,s,r,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=hi(Zi(!1),ui(t));if(0===e)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new Hi([i+e,s,r,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==hi(Zi(!1),ui(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ys=Ne("svp");class Xs{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ys()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(Ys("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Ys("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=function(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,s=t.getImageData(0,0,n,i),r=s.data;for(let t=0;t<i;t++)for(let s=0;s<n;s++){const o=ee(s,0,n,0,100),a=ee(t,0,i,100,0),l=Fi(e[0],o,a),c=4*(t*n+s);r[c]=l[0],r[c+1]=l[1],r[c+2]=l[2],r[c+3]=255}t.putImageData(s,0,0);const o=ee(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=ee(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class Ws{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Xs(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=ee(t.point.x,0,t.bounds.width,0,100),i=ee(t.point.y,0,t.bounds.height,100,0),[s,,,r]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Hi([s,n,i,r],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){di(t.key)&&t.preventDefault();const[e,n,i,s]=this.value.rawValue.getComponents("hsv"),r=Zi(!1),o=hi(r,ui(t)),a=hi(r,pi(t));0===o&&0===a||this.value.setRawValue(new Hi([e,n+o,i+a,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Zi(!1),n=hi(e,ui(t)),i=hi(e,pi(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Zs{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Gs(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Ws(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Is(t,{value:this.value,viewProps:this.viewProps}),text:new wi(t,{parser:Qt,props:At.fromObject({pointerScale:.01,keyScale:.1,formatter:te(2)}),value:St(0,{constraint:new Mt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ci({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,e)=>{const n=t.getComponents();return n[3]=e,new Hi(n,t.mode)}}),this.textsC_=new Us(t,{colorType:e.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Yi(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Qs=Ne("colsw");class Js{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(Qs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Qs("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(Qs("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Vs(t)}onValueChange_(){this.update_()}}class tr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Js(t,{value:this.value,viewProps:this.viewProps})}}class er{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=gn.create(e.expanded),this.swatchC_=new tr(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new ni(t,{parser:e.parser,props:At.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Bi(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Jn(t,{viewProps:this.viewProps}):null;const i=new Zs(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ci({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=Be(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!Se(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function nr(t){return Ii(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function ir(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function sr(t){return"number"!=typeof t?Hi.black():new Hi([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function rr(t){return"number"!=typeof t?Hi.black():new Hi([(e=t)>>24&255,e>>16&255,e>>8&255,ee(255&e,0,255,0,1)],"rgb");var e}function or(t,e){return"object"==typeof t&&!wt(t)&&(e in t&&"number"==typeof t[e])}function ar(t){return or(t,"r")&&or(t,"g")&&or(t,"b")}function lr(t){return ar(t)&&or(t,"a")}function cr(t){return ar(t)}function hr(t,e){if(t.mode!==e.mode)return!1;if(t.type!==e.type)return!1;const n=t.getComponents(),i=e.getComponents();for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}function pr(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function ur(t,e){return(n,i)=>{t?function(t,e,n){const i=ns(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}(n,i,e):function(t,e,n){const i=ns(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}(n,i,e)}}function dr(t){var e;return!!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha)}function vr(t){return e=>{const n=function(t,e){if(!cr(t))return ns(Hi.black(),e);if("int"===e){const e=pr(t);return new Hi(e,"rgb")}if("float"===e){const e=pr(t);return new Ji(e,"rgb")}return ns(Hi.black(),"int")}(e,t);return ns(n,"int")}}function mr(t,e){return n=>t?js(n,e):As(n,e)}an({id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!function(t){return"color"in t||"color"===t.view}(e))return null;const n=Wi(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:dr(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?rr:sr,equals:hr,writer:t=>function(t){const e=t?ir:nr;return(t,n)=>{Mi(t,e(n))}}(t.params.supportsAlpha)},controller:t=>{var e,n,i;return new er(t.document,{colorType:"int",expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:(i=t.params.supportsAlpha,i?t=>Vs(t,"0x"):t=>$s(t,"0x")),parser:Ps("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}}),an({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!cr(t))return null;const i=Wi(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{colorType:null!==(n=Qi(e))&&void 0!==n?n:"int"})}:null},binding:{reader:t=>vr(t.params.colorType),equals:hr,writer:t=>ur(lr(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const i=lr(t.initialValue);return new er(t.document,{colorType:t.params.colorType,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:mr(i,t.params.colorType),parser:Ps("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:i,value:t.value,viewProps:t.viewProps})}}),an({id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("text"===e.view)return null;const n=Cs(t,Qi(e));if(!n)return null;const i=zs(n);if(!i)return null;const s=Wi(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{format:n,stringifier:i})}:null},binding:{reader:()=>Es,equals:hr,writer:t=>{const e=function(t){const e=zs(t);return e?(t,n)=>{Mi(t,e(n))}:null}(t.params.format);if(!e)throw Pt.notBindable();return e}},controller:t=>{var e,n;return new er(t.document,{colorType:t.params.format.type,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:t.params.stringifier,parser:Ps("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class fr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}}const gr=Ne("pndtxt");class wr{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(gr()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(gr("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}class br{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>function(t,e,n){return new wi(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:St(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i))),this.acs_.forEach(((t,n)=>{ci({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t)[n],backward:(t,i)=>{const s=e.assembly.toComponents(t);return s[n]=i,e.assembly.fromComponents(s)}})})),this.view=new wr(t,{textViews:this.acs_.map((t=>t.view))})}get textControllers(){return this.acs_}}class _r extends be{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}an({id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=Ce(e,(t=>Object.assign(Object.assign({},pe(t)),{options:t.optional.custom(Kn),readonly:t.optional.constant(!1)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Jt,constraint:t=>function(t,e){const n=[],i=le(t,e);i&&n.push(i);const s=ce(t);s&&n.push(s);const r=Gn(t.options);return r&&n.push(r),new Rn(n)}(t.params,t.initialValue),writer:t=>Mi},controller:t=>{const e=t.value,n=t.constraint,i=n&&qn(n,Un);if(i)return new Wn(t.document,{props:new At({options:i.values.value("options")}),value:e,viewProps:t.viewProps});const s=he(t.params,e.rawValue),r=n&&qn(n,Mt);return r?new Pi(t.document,Object.assign(Object.assign({},(o=Object.assign(Object.assign({},s),{keyScale:St(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}),{sliderProps:new At({keyScale:o.keyScale,max:o.max,min:o.min}),textProps:new At({formatter:St(o.formatter),keyScale:o.keyScale,pointerScale:St(o.pointerScale)})})),{parser:Qt,value:e,viewProps:t.viewProps})):new wi(t.document,{parser:Qt,props:At.fromObject(s),value:e,viewProps:t.viewProps});var o},api:t=>"number"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof Pi?new _r(t.controller):t.controller.valueController instanceof Wn?new In(t.controller):null});class yr{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(wt(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const xr={toComponents:t=>t.getComponents(),fromComponents:t=>new yr(...t)},Cr=Ne("p2d");class Pr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Cr()),e.viewProps.bindClassModifiers(this.element),Fe(e.expanded,Je(this.element,Cr(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Cr("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Cr("b")),i.appendChild(je(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const s=t.createElement("div");if(s.classList.add(Cr("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Cr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Er=Ne("p2dp");class kr{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Er()),"popup"===e.layout&&this.element.classList.add(Er(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Er("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(Ve,"svg");i.classList.add(Er("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=t.createElementNS(Ve,"line");s.classList.add(Er("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const r=t.createElementNS(Ve,"line");r.classList.add(Er("ax")),r.setAttributeNS(null,"x1","50%"),r.setAttributeNS(null,"y1","0"),r.setAttributeNS(null,"x2","50%"),r.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(r);const o=t.createElementNS(Ve,"line");o.classList.add(Er("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(Er("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.props_.get("max"),i=ee(t,-n,+n,0,100),s=ee(e,-n,+n,0,100),r=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${r}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${r}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $r(t,e,n){return[hi(e[0],ui(t)),hi(e[1],pi(t))*(n?1:-1)]}class Vr{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new kr(t,{layout:e.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new mi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.props.get("max"),i=ee(t.point.x,0,t.bounds.width,-n,+n),s=ee(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new yr(i,s),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){di(t.key)&&t.preventDefault();const[e,n]=$r(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===e&&0===n||this.value.setRawValue(new yr(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=$r(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Lr{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=gn.create(e.expanded),this.popC_="popup"===e.pickerLayout?new Jn(t,{viewProps:this.viewProps}):null;const s=new Vr(t,{layout:e.pickerLayout,props:new At({invertsY:St(e.invertsY),max:St(e.max),xKeyScale:e.axes[0].textProps.value("keyScale"),yKeyScale:e.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=s,this.textC_=new br(t,{assembly:xr,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Pr(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ci({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=Be(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Se(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Sr(t){return yr.isObject(t)?new yr(t.x,t.y):new yr}function Ar(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Mr(t,e){var n,i;if(!wt(t.min)||!wt(t.max))return Math.max(Math.abs(null!==(n=t.min)&&void 0!==n?n:0),Math.abs(null!==(i=t.max)&&void 0!==i?i:0));const s=oe(t);return Math.max(10*Math.abs(s),10*Math.abs(e))}function jr(t,e){var n,i;const s=Mr(xt(t,null!==(n=t.x)&&void 0!==n?n:{}),e.x),r=Mr(xt(t,null!==(i=t.y)&&void 0!==i?i:{}),e.y);return Math.max(s,r)}function Dr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&("inverted"in e&&!!e.inverted)}an({id:"input-point2d",type:"input",accept:(t,e)=>{if(!yr.isObject(t))return null;const n=Ce(e,(t=>Object.assign(Object.assign({},Vi(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Ai),readonly:t.optional.constant(!1),x:t.optional.custom(Li),y:t.optional.object(Object.assign(Object.assign({},Vi(t)),{inverted:t.optional.boolean}))})));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Sr,constraint:t=>function(t,e){return new fr({assembly:xr,components:[Si(Object.assign(Object.assign({},t),t.x),e.x),Si(Object.assign(Object.assign({},t),t.y),e.y)]})}(t.params,t.initialValue),equals:yr.equals,writer:()=>Ar},controller:t=>{var e,n;const i=t.document,s=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new Lr(i,{axes:s.rawValue.getComponents().map(((e,n)=>{var i;return ue({constraint:r.components[n],initialValue:e,params:xt(t.params,null!==(i=o[n])&&void 0!==i?i:{})})})),expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,invertsY:Dr(t.params),max:jr(t.params,s.rawValue),parser:Qt,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:s,viewProps:t.viewProps})}});class Or{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(wt(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const zr={toComponents:t=>t.getComponents(),fromComponents:t=>new Or(...t)};function Br(t){return Or.isObject(t)?new Or(t.x,t.y,t.z):new Or}function Fr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}an({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Or.isObject(t))return null;const n=Ce(e,(t=>Object.assign(Object.assign({},Vi(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Li),y:t.optional.custom(Li),z:t.optional.custom(Li)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Br,constraint:t=>function(t,e){return new fr({assembly:zr,components:[Si(Object.assign(Object.assign({},t),t.x),e.x),Si(Object.assign(Object.assign({},t),t.y),e.y),Si(Object.assign(Object.assign({},t),t.z),e.z)]})}(t.params,t.initialValue),equals:Or.equals,writer:t=>Fr},controller:t=>{const e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z];return new br(t.document,{assembly:zr,axes:e.rawValue.getComponents().map(((e,s)=>{var r;return ue({constraint:n.components[s],initialValue:e,params:xt(t.params,null!==(r=i[s])&&void 0!==r?r:{})})})),parser:Qt,value:e,viewProps:t.viewProps})}});class Ir{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(wt(t))return!1;const e=t.x,n=t.y,i=t.z,s=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof s}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Tr={toComponents:t=>t.getComponents(),fromComponents:t=>new Ir(...t)};function Nr(t){return Ir.isObject(t)?new Ir(t.x,t.y,t.z,t.w):new Ir}function Rr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}an({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Ir.isObject(t))return null;const n=Ce(e,(t=>Object.assign(Object.assign({},Vi(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Li),x:t.optional.custom(Li),y:t.optional.custom(Li),z:t.optional.custom(Li)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Nr,constraint:t=>function(t,e){return new fr({assembly:Tr,components:[Si(Object.assign(Object.assign({},t),t.x),e.x),Si(Object.assign(Object.assign({},t),t.y),e.y),Si(Object.assign(Object.assign({},t),t.z),e.z),Si(Object.assign(Object.assign({},t),t.w),e.w)]})}(t.params,t.initialValue),equals:Ir.equals,writer:t=>Rr},controller:t=>{const e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z,t.params.w];return new br(t.document,{assembly:Tr,axes:e.rawValue.getComponents().map(((e,s)=>{var r;return ue({constraint:n.components[s],initialValue:e,params:xt(t.params,null!==(r=i[s])&&void 0!==r?r:{})})})),parser:Qt,value:e,viewProps:t.viewProps})}}),an({id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=Ce(e,(t=>({readonly:t.optional.constant(!1),options:t.optional.custom(Kn)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ai,constraint:t=>function(t){const e=[],n=Gn(t.options);return n&&e.push(n),new Rn(e)}(t.params),writer:t=>Mi},controller:t=>{const e=t.document,n=t.value,i=t.constraint,s=i&&qn(i,Un);return s?new Wn(e,{props:new At({options:s.values.value("options")}),value:n,viewProps:t.viewProps}):new ni(e,{parser:t=>t,props:At.fromObject({formatter:li}),value:n,viewProps:t.viewProps})},api:t=>"string"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof Wn?new In(t.controller):null});const qr={defaultInterval:200,defaultRows:3},Ur=Ne("mll");class Kr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Ur()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(Ur("i")),n.style.height=`calc(var(${ki("containerUnitSize")}) * ${e.rows})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Hr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Kr(t,{formatter:e.formatter,rows:e.rows,value:this.value,viewProps:this.viewProps})}}const Gr=Ne("sgl");class Yr{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Gr()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Gr("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Xr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Yr(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}an({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=Ce(e,(t=>({readonly:t.required.constant(!0),rows:t.optional.number})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ii},controller:t=>{var e;return 1===t.value.rawValue.length?new Xr(t.document,{formatter:si,value:t.value,viewProps:t.viewProps}):new Hr(t.document,{formatter:si,rows:null!==(e=t.params.rows)&&void 0!==e?e:qr.defaultRows,value:t.value,viewProps:t.viewProps})}});class Wr extends be{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const Zr=Ne("grl");class Qr{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Zr()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(Ve,"svg");n.classList.add(Zr("g")),n.style.height=`calc(var(${ki("containerUnitSize")}) * ${e.rows})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(Ve,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=t.createElement("div");s.classList.add(Zr("t"),Ne("tt")()),this.element.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:e}=this.element,n=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),r=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const l=ee(a,0,n,0,t),c=ee(o,i,s,e,0);r.push([l,c].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void o.classList.remove(Zr("t","a"));const l=ee(this.cursor_.rawValue,0,n,0,t),c=ee(a,i,s,e,0);o.style.left=`${l}px`,o.style.top=`${c}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(Zr("t","a"))||(o.classList.add(Zr("t","a"),Zr("t","in")),Le(o),o.classList.remove(Zr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Jr{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=St(-1),this.view=new Qr(t,{cursor:this.cursor_,formatter:e.formatter,rows:e.rows,props:this.props,value:this.value,viewProps:this.viewProps}),Se(t)){const t=new mi(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}importProps(t){return Pe(t,null,(t=>({max:t.required.number,min:t.required.number})),(t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0)))}exportProps(){return Ee(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:e}=this.view.element;this.cursor_.rawValue=Math.floor(ee(t.offsetX,0,e,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(ee(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function to(t){return wt(t.format)?te(2):t.format}function eo(t){return"graph"===t.view}an({id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=Ce(e,(t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string})));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>eo(t)?64:1,reader:t=>Jt},controller:t=>eo(t.params)?function(t){var e,n,i;return new Jr(t.document,{formatter:to(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:qr.defaultRows,props:At.fromObject({max:null!==(n=t.params.max)&&void 0!==n?n:100,min:null!==(i=t.params.min)&&void 0!==i?i:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new Xr(t.document,{formatter:to(t.params),value:t.value,viewProps:t.viewProps}):new Hr(t.document,{formatter:to(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:qr.defaultRows,value:t.value,viewProps:t.viewProps})}(t),api:t=>t.controller.valueController instanceof Jr?new Wr(t.controller):null}),an({id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=Ce(e,(t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ai},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new Hr(t.document,{formatter:li,rows:null!==(e=t.params.rows)&&void 0!==e?e:qr.defaultRows,value:n,viewProps:t.viewProps}):new Xr(t.document,{formatter:li,value:n,viewProps:t.viewProps})}});const no={baseBackgroundColor:"hsl(230, 7%, 17%)",baseBorderRadius:"6px",baseFontFamily:"Roboto Mono, Source Code Pro, Menlo, Courier, monospace",baseShadowColor:"rgba(0, 0, 0, 0.2)",bladeBorderRadius:"2px",bladeHorizontalPadding:"4px",bladeValueWidth:"160px",buttonBackgroundColor:"hsl(230, 7%, 70%)",buttonBackgroundColorActive:"#d6d7db",buttonBackgroundColorFocus:"#c8cad0",buttonBackgroundColorHover:"#bbbcc4",buttonForegroundColor:"hsl(230, 7%, 17%)",containerBackgroundColor:"rgba(187, 188, 196, 0.1)",containerBackgroundColorActive:"rgba(187, 188, 196, 0.25)",containerBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",containerBackgroundColorHover:"rgba(187, 188, 196, 0.15)",containerForegroundColor:"hsl(230, 7%, 75%)",containerHorizontalPadding:"4px",containerUnitSize:"20px",containerUnitSpacing:"4px",containerVerticalPadding:"4px",grooveForegroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColorActive:"rgba(187, 188, 196, 0.25)",inputBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",inputBackgroundColorHover:"rgba(187, 188, 196, 0.15)",inputForegroundColor:"hsl(230, 7%, 75%)",labelForegroundColor:"rgba(187, 188, 196, 0.7)",monitorBackgroundColor:"rgba(0, 0, 0, 0.2)",monitorForegroundColor:"rgba(187, 188, 196, 0.7)",pluginImageDraggingColor:"hsla(230, 100%, 66%, 1)"};Object.keys(no).reduce(((t,e)=>(t[e]=e,t)),{});const io=new Map([["baseBackgroundColor","--tp-base-background-color"],["baseBorderRadius","--tp-base-border-radius"],["baseFontFamily","--tp-base-font-family"],["baseShadowColor","--tp-base-shadow-color"],["bladeBorderRadius","--tp-blade-border-radius"],["bladeHorizontalPadding","--tp-blade-horizontal-padding"],["bladeValueWidth","--tp-blade-value-width"],["buttonBackgroundColor","--tp-button-background-color"],["buttonBackgroundColorActive","--tp-button-background-color-active"],["buttonBackgroundColorFocus","--tp-button-background-color-focus"],["buttonBackgroundColorHover","--tp-button-background-color-hover"],["buttonForegroundColor","--tp-button-foreground-color"],["containerBackgroundColor","--tp-container-background-color"],["containerBackgroundColorActive","--tp-container-background-color-active"],["containerBackgroundColorFocus","--tp-container-background-color-focus"],["containerBackgroundColorHover","--tp-container-background-color-hover"],["containerForegroundColor","--tp-container-foreground-color"],["containerHorizontalPadding","--tp-container-horizontal-padding"],["containerUnitSize","--tp-container-unit-size"],["containerUnitSpacing","--tp-container-unit-spacing"],["containerVerticalPadding","--tp-container-vertical-padding"],["grooveForegroundColor","--tp-groove-foreground-color"],["inputBackgroundColor","--tp-input-background-color"],["inputBackgroundColorActive","--tp-input-background-color-active"],["inputBackgroundColorFocus","--tp-input-background-color-focus"],["inputBackgroundColorHover","--tp-input-background-color-hover"],["inputForegroundColor","--tp-input-foreground-color"],["labelForegroundColor","--tp-label-foreground-color"],["monitorBackgroundColor","--tp-monitor-background-color"],["monitorForegroundColor","--tp-monitor-foreground-color"],["pluginImageDraggingColor","--tp-plugin-image-dragging-color"]]);function so(t){if(void 0!==t)return"string"==typeof t?t:lr(t)?`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`:ar(t)?`rgb(${t.r}, ${t.g}, ${t.b})`:void 0}function ro(t){if(t.startsWith("--tp-"))return t;const e=io.get(t);if(e)return e;throw new Error(`Unknown Tweakpane CSS theme map variable key: "${t}"`)}function oo(t,e){return so(void 0===t?.[e]?no[e]:t[e])}function ao(t){let e,n=`${t[0]}px`;return{c(){e=y("div"),k(e,"background",null),k(e,"height",n)},m(t,n){b(t,e,n)},p(t,i){1&i&&n!==(n=`${t[0]}px`)&&k(e,"height",n)},d(t){t&&_(e)}}}function lo(t){let n,i=t[0]>0&&ao(t);return{c(){i&&i.c(),n=P()},m(t,e){i&&i.m(t,e),b(t,n,e)},p(t,[e]){t[0]>0?i?i.p(t,e):(i=ao(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(t){t&&_(n),i&&i.d(t)}}}function co(t){return Number.parseFloat(t.replace("px",""))}function ho(t,e,n){let i,{theme:s}=e,{keysAdd:r=[]}=e,{keysSubtract:o=[]}=e,{extra:a}=e;return t.$$set=t=>{"theme"in t&&n(1,s=t.theme),"keysAdd"in t&&n(2,r=t.keysAdd),"keysSubtract"in t&&n(3,o=t.keysSubtract),"extra"in t&&n(4,a=t.extra)},t.$$.update=()=>{28&t.$$.dirty&&n(0,i=function(t,e,n=0){return t.reduce(((t,e)=>t+co(oo(s,e))),0)-e.reduce(((t,e)=>t+co(oo(s,e))),0)+n}(r,o,a))},[i,s,r,o,a]}class po extends ut{constructor(t){super(),pt(this,t,ho,lo,a,{theme:1,keysAdd:2,keysSubtract:3,extra:4})}}function uo(t){return"Pane"===t.constructor.name}function vo(t,e,n){return Math.min(Math.max(t,e),n)}function mo(t){let e=0,n=t;for(;null!==(n=n.previousElementSibling);)n.classList.contains("skip-element-index")||e++;return e}function fo(t,...e){for(const n of e)n in t&&delete t[n];return t}function go(t){t.isTrusted&&t.stopPropagation()}function wo(t,e,n,i){if(e){const s=e.querySelector(`.${n}`);if(s){const n=i?e.querySelector(`.${i}`):void 0;t?(s.removeEventListener("click",go,{capture:!0}),s.style.cursor="pointer",n&&(n.style.display="block")):(s.addEventListener("click",go,{capture:!0}),s.style.cursor="default",n&&(n.style.display="none"))}}else console.warn(`Title bar element not found with class "${n}"`)}function bo(t,e){return e.map((e=>t[e]))}function _o(t){return Boolean(t.controller.valueController?.foldable_?.valMap_?.expanded?.value_)}function yo(t){return null==t}function xo(t){return null!==t&&"object"==typeof t}function Co(t){return null!==t&&"object"==typeof t}function Po(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Eo(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce(((n,i)=>{const s=t[i],r=e[i];return Co(s)&&Co(r)?Object.assign(Object.assign({},n),{[i]:Eo(s,r)}):Object.assign(Object.assign({},n),{[i]:i in e?r:s})}),{})}function ko(t){return!!xo(t)&&"target"in t}const $o={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Vo{static alreadyDisposed(){return new Vo({type:"alreadydisposed"})}static notBindable(){return new Vo({type:"notbindable"})}static notCompatible(t,e){return new Vo({type:"notcompatible",context:{id:`${t}.${e}`}})}static propertyNotFound(t){return new Vo({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new Vo({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=$o[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}}class Lo{constructor(t,e){this.obj_=t,this.key=e}static isBindable(t){return null!==t&&("object"==typeof t||"function"==typeof t)}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,e){const n=this.read();if(!Lo.isBindable(n))throw Vo.notBindable();if(!(t in n))throw Vo.propertyNotFound(t);n[t]=e}}class So{constructor(){this.observers_={}}on(t,e,n){var i;let s=this.observers_[t];return s||(s=this.observers_[t]=[]),s.push({handler:e,key:null!==(i=null==n?void 0:n.key)&&void 0!==i?i:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.key!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}class Ao{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new So,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,s=this.rawValue_;(!this.equals_(s,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:i,sender:this}))}}class Mo{constructor(t){this.emitter=new So,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}class jo{constructor(t){this.emitter=new So,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function Do(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new Ao(t,e):new Mo(t)}class Oo{constructor(t){this.emitter=new So,this.valMap_=t;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:Do(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new Oo(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}class zo{constructor(t){this.values=Oo.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class Bo{constructor(t){this.values=Oo.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let i=t;return yo(n)||(i=Math.max(i,n)),yo(e)||(i=Math.min(i,e)),i}}class Fo{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}class Io{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const To={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class No{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=To[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ro={"+":t=>t,"-":t=>-t,"~":t=>~t};class qo{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ro[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Uo(t){return(e,n)=>{for(let i=0;i<t.length;i++){const s=t[i](e,n);if(""!==s)return s}return""}}function Ko(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Ho(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Go(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=Ho(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const s=Ho(t,e+=1);return""===s?"":i+s}(t,e);return""===i?"":n+i}function Yo(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+Ho(t,e)}const Xo=Uo([function(t,e){const n=Yo(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const s=Ho(t,e);return n+i+s+Go(t,e+=s.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=Ho(t,e);return e+=i.length,""===i?"":n+i+Go(t,e)},function(t,e){const n=Yo(t,e);return e+=n.length,""===n?"":n+Go(t,e)}]);const Wo=Uo([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),Zo=Uo([Wo,Xo]);function Qo(t,e){var n;return null!==(n=function(t,e){const n=Zo(t,e);return e+=n.length,""===n?null:{evaluable:new Io(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=ea(t,e);if(!i)return null;e=i.cursor,e+=Ko(t,e).length;const s=t.substr(e,1);return e+=s.length,")"!==s?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function Jo(t,e,n){n+=Ko(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=Ko(e,n).length,operator:i}):null}const ta=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(n,i)=>{const s=t(n,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const s=Jo(e,n,i);if(!s)break;i=s.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,r=new No(s.operator,r,o.evaluable)}return r?{cursor:i,evaluable:r}:null}}(t,e)),(function t(e,n){const i=Qo(e,n);if(i)return i;const s=e.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;const r=t(e,n);return r?{cursor:n=r.cursor,evaluable:new qo(s,r.evaluable)}:null}));function ea(t,e){return e+=Ko(t,e).length,ta(t,e)}function na(t){var e;const n=function(t){const e=ea(t,0);return e?e.cursor+Ko(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function ia(t){if("number"==typeof t)return t;if("string"==typeof t){const e=na(t);if(!yo(e))return e}return 0}function sa(t){return String(t)}function ra(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function oa(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)}function aa(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function la(t,e,n){return Math.min(Math.max(t,e),n)}function ca(t,e){return(t%e+e)%e}function ha(t,e){return yo(t.step)?Math.max(aa(e),2):aa(t.step)}function pa(t){var e;return null!==(e=t.step)&&void 0!==e?e:1}function ua(t,e){var n;const i=Math.abs(null!==(n=t.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function da(t,e){return yo(t.step)?null:new Fo(t.step,e)}function va(t){return yo(t.max)||yo(t.min)?yo(t.max)&&yo(t.min)?null:new Bo({max:t.max,min:t.min}):new zo({max:t.max,min:t.min})}function ma(t,e){var n,i,s;return{formatter:null!==(n=t.format)&&void 0!==n?n:ra(ha(t,e)),keyScale:null!==(i=t.keyScale)&&void 0!==i?i:pa(t),pointerScale:null!==(s=t.pointerScale)&&void 0!==s?s:ua(t,e)}}function fa(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function ga(t){return{constraint:t.constraint,textProps:Oo.fromObject(ma(t.params,t.initialValue))}}class wa{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}}class ba{constructor(t){this.target=t}}class _a extends ba{constructor(t,e,n){super(t),this.value=e,this.last=null==n||n}}class ya extends ba{constructor(t,e){super(t),this.expanded=e}}class xa extends ba{constructor(t,e){super(t),this.index=e}}class Ca extends ba{constructor(t,e){super(t),this.native=e}}class Pa extends wa{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new So,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.controller.value.fetch()}onValueChange_(t){const e=this.controller.value;this.emitter_.emit("change",new _a(this,e.binding.target.read(),t.options.last))}}class Ea{constructor(t,e){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new So}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}function ka(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function $a(t){return{custom:e=>ka(e)(t),boolean:ka((t=>"boolean"==typeof t?t:void 0))(t),number:ka((t=>"number"==typeof t?t:void 0))(t),string:ka((t=>"string"==typeof t?t:void 0))(t),function:ka((t=>"function"==typeof t?t:void 0))(t),constant:e=>ka((t=>t===e?e:void 0))(t),raw:ka((t=>t))(t),object:e=>ka((t=>{var n;if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const s=(0,e[i])(t[i]);return s.succeeded?Object.assign(Object.assign({},n),{[i]:s.value}):void 0}),{})}(t,e)}))(t),array:e=>ka((t=>{var n;if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}))(t)}}const Va={optional:$a(!0),required:$a(!1)};function La(t,e){const n=e(Va),i=Va.required.object(n)(t);return i.succeeded?i.value:void 0}function Sa(t,e,n,i){if(e&&!e(t))return!1;const s=La(t,n);return!!s&&i(s)}function Aa(t,e){var n;return Eo(null!==(n=null==t?void 0:t())&&void 0!==n?n:{},e)}function Ma(t){return"value"in t}function ja(t){if(!xo(t)||!("binding"in t))return!1;return ko(t.binding)}const Da="http://www.w3.org/2000/svg";function Oa(t){t.offsetHeight}function za(t){return void 0!==t.ontouchstart}function Ba(){return globalThis.document}const Fa={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Ia(t,e){const n=t.createElementNS(Da,"svg");return n.innerHTML=Fa[e],n}function Ta(t,e,n){t.insertBefore(e,t.children[n])}function Na(t){t.parentElement&&t.parentElement.removeChild(t)}function Ra(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function qa(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Ua(t,e){t.emitter.on("change",(t=>{e(t.rawValue)})),e(t.rawValue)}function Ka(t,e,n){Ua(t.value(e),n)}const Ha="tp";function Ga(t){return(e,n)=>[Ha,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}const Ya=Ga("lbl");class Xa{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ya()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ya("l")),Ka(e.props,"label",(e=>{yo(e)?this.element.classList.add(Ya(void 0,"nol")):(this.element.classList.remove(Ya(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(Ya("v")),this.element.appendChild(i),this.valueElement=i}}class Wa{constructor(t,e){this.props=e.props,this.valueController=e.valueController,this.viewProps=e.valueController.viewProps,this.view=new Xa(t,{props:e.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return Sa(t,null,(t=>({label:t.optional.string})),(t=>(this.props.set("label",t.label),!0)))}exportProps(){return Aa(null,{label:this.props.get("label")})}}const Za=Ga(""),Qa={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Ja{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{["veryfirst","first","last","verylast"].forEach((t=>{e.classList.remove(Za(void 0,Qa[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(Za(void 0,Qa[t]))}))})),this.viewProps.handleDispose((()=>{Na(e)}))}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return Sa(t,null,(t=>({disabled:t.required.boolean,hidden:t.required.boolean})),(t=>(this.viewProps.importState(t),!0)))}exportState(){return Aa(null,Object.assign({},this.viewProps.exportState()))}}class tl extends Ja{constructor(t,e){if(e.value!==e.valueController.value)throw Vo.shouldNeverHappen();const n=e.valueController.viewProps,i=new Wa(t,{blade:e.blade,props:e.props,valueController:e.valueController});super(Object.assign(Object.assign({},e),{view:new Xa(t,{props:e.props,viewProps:n}),viewProps:n})),this.labelController=i,this.value=e.value,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return Sa(t,(e=>{var n,i,s;return super.importState(e)&&this.labelController.importProps(e)&&(null===(s=null===(i=(n=this.valueController).importProps)||void 0===i?void 0:i.call(n,t))||void 0===s||s)}),(t=>({value:t.optional.raw})),(t=>(t.value&&(this.value.rawValue=t.value),!0)))}exportState(){var t,e,n;return Aa((()=>super.exportState()),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),null!==(n=null===(e=(t=this.valueController).exportProps)||void 0===e?void 0:e.call(t))&&void 0!==n?n:{}))}}function el(t){const e=Object.assign({},t);return delete e.value,e}class nl extends tl{constructor(t,e){super(t,e),this.tag=e.tag}importState(t){return Sa(t,(e=>super.importState(el(t))),(t=>({tag:t.optional.string})),(t=>(this.tag=t.tag,!0)))}exportState(){return Aa((()=>el(super.exportState())),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}class il extends nl{importState(t){return Sa(t,(t=>super.importState(t)),(t=>({binding:t.required.object({value:t.required.raw})})),(t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0)))}}function sl(t){return Ma(t)&&function(t){if(!("binding"in t))return!1;const e=t.binding;return ko(e)&&"read"in e&&"write"in e}(t.value)}function rl(t,e){for(;t.length<e;)t.push(void 0)}function ol(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}class al{constructor(t){this.emitter=new So,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=Do(function(t){const e=[];return rl(e,t),e}(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,e){this.value_.setRawValue(t,e)}fetch(){this.value_.rawValue=function(t,e){const n=[...ol(t),e];return n.length>t.length?n.splice(0,n.length-t.length):rl(n,t.length),n}(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}class ll extends nl{exportState(){return Aa((()=>super.exportState()),{binding:{readonly:!0}})}}function cl(t){return Ma(t)&&function(t){if(!("binding"in t))return!1;const e=t.binding;return ko(e)&&"read"in e&&!("write"in e)}(t.value)}class hl extends wa{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return null!==(t=this.controller.buttonController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller.buttonController.emitter.on(t,(t=>{n(new Ca(this,t.nativeEvent))})),this}off(t,e){return this.controller.buttonController.emitter.off(t,e),this}}function pl(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function ul(t,e){Ua(t,(t=>{e.textContent=null!=t?t:""}))}const dl=Ga("btn");class vl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(dl()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(dl("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(dl("t")),ul(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class ml{constructor(t,e){this.emitter=new So,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new vl(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return Sa(t,null,(t=>({title:t.optional.string})),(t=>(this.props.set("title",t.title),!0)))}exportProps(){return Aa(null,{title:this.props.get("title")})}onClick_(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}class fl extends Ja{constructor(t,e){const n=new ml(t,{props:e.buttonProps,viewProps:e.viewProps}),i=new Wa(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:i.view,viewProps:e.viewProps}),this.buttonController=n,this.labelController=i}importState(t){return Sa(t,(t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t)),(()=>({})),(()=>!0))}exportState(){return Aa((()=>super.exportState()),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class gl{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}const wl=new gl("2.0.5");function bl(t){return Object.assign({core:wl},t)}const _l=bl({id:"button",type:"blade",accept(t){const e=La(t,(t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string})));return e?{params:e}:null},controller:t=>new fl(t.document,{blade:t.blade,buttonProps:Oo.fromObject({title:t.params.title}),labelProps:Oo.fromObject({label:t.params.label}),viewProps:t.viewProps}),api:t=>t.controller instanceof fl?new hl(t.controller):null});class yl{constructor(t,e){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new So,this.pool_=e;this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map((t=>this.pool_.createApi(t)))}addBinding(t,e,n){const i=null!=n?n:{},s=this.controller_.element.ownerDocument,r=this.pool_.createBinding(s,function(t,e){if(!Lo.isBindable(t))throw Vo.notBindable();return new Lo(t,e)}(t,e),i),o=this.pool_.createBindingApi(r);return this.add(o,i.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){const n=t.controller;return this.controller_.rack.add(n,e),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){const e=this.controller_.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}refresh(){this.children.forEach((t=>{var e;xo(e=t)&&"refresh"in e&&"function"==typeof e.refresh&&t.refresh()}))}onRackValueChange_(t){const e=t.bladeController,n=this.pool_.createApi(e),i=ja(e.value)?e.value.binding:null;this.emitter_.emit("change",new _a(n,i?i.target.read():e.value.rawValue,t.options.last))}}class xl extends wa{constructor(t,e){super(t),this.rackApi_=new yl(t.rackController,e)}refresh(){this.rackApi_.refresh()}}class Cl extends Ja{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return Sa(t,(t=>super.importState(t)),(t=>({children:t.required.array(t.required.raw)})),(t=>this.rackController.rack.children.every(((e,n)=>e.importState(t.children[n])))))}exportState(){return Aa((()=>super.exportState()),{children:this.rackController.rack.children.map((t=>t.exportState()))})}}function Pl(t){return"rackController"in t}class El{constructor(t){this.emitter=new So,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw Vo.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.allItems().forEach((t=>{this.cache_.delete(t)})),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}function kl(t){return Pl(t)?t.rackController.rack.bcSet_:null}class $l{constructor(t){var e,n;this.emitter=new So,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=null!==(e=t.blade)&&void 0!==e?e:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new El(kl),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),t.parent=this,this.bcSet_.add(t,e)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),Ma(n))n.value.emitter.on("change",this.onChildValueChange_);else if(Pl(n)){const t=n.rackController.rack;if(t){const e=t.emitter;e.on("layout",this.onRackLayout_),e.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),!e)return;const n=t.item;if(Ma(n))n.value.emitter.off("change",this.onChildValueChange_);else if(Pl(n)){const t=n.rackController.rack;if(t){const e=t.emitter;e.off("layout",this.onRackLayout_),e.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildValueChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(Ma(i)&&i.value===e)return i}return null}(this.find(Ma),t.sender);if(!e)throw Vo.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Vl{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;const e=new $l({blade:t.root?void 0:t.blade,viewProps:t.viewProps});e.emitter.on("add",this.onRackAdd_),e.emitter.on("remove",this.onRackRemove_),this.rack=e,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--){this.rack.children[t].viewProps.set("disposed",!0)}}))}onRackAdd_(t){t.root&&Ta(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Na(t.bladeController.view.element)}}function Ll(){return new Oo({positions:Do([],{equals:Po})})}class Sl extends Oo{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=Oo.createCore(e);return new Sl(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!yo(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};Ka(this,"expanded",n),Ka(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Al(t,e){e.style.height=t.styleHeight}function Ml(t,e){t.value("expanded").emitter.on("beforechange",(()=>{if(t.set("completed",!1),yo(t.get("expandedHeight"))){const n=function(t,e){let n=0;return function(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),Oa(e),n=e.clientHeight,t.set("temporaryExpanded",null),Oa(e)})),n}(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),Oa(e)})),t.emitter.on("change",(()=>{Al(t,e)})),Al(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class jl extends xl{constructor(t,e){super(t,e),this.emitter_=new So,this.controller.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",new ya(this,t.sender.rawValue))})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",t)}))}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const Dl=Ga("cnt");class Ol{constructor(t,e){var n;this.className_=Ga(null!==(n=e.viewName)&&void 0!==n?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Dl()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ka(this.foldable_,"completed",pl(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),Ka(e.props,"title",(t=>{yo(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=t.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const r=t.createElement("div");r.classList.add(this.className_("t")),ul(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const o=t.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);const a=t.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class zl extends Cl{constructor(t,e){var n;const i=Sl.create(null===(n=e.expanded)||void 0===n||n),s=new Ol(t,{foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new Vl({blade:e.blade,element:s.containerElement,root:e.root,viewProps:e.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,Ml(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return Sa(t,(t=>super.importState(t)),(t=>({expanded:t.required.boolean,title:t.optional.string})),(t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0)))}exportState(){return Aa((()=>super.exportState()),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Bl=bl({id:"folder",type:"blade",accept(t){const e=La(t,(t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean})));return e?{params:e}:null},controller:t=>new zl(t.document,{blade:t.blade,expanded:t.params.expanded,props:Oo.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof zl?new jl(t.controller,t.pool):null}),Fl=Ga("");function Il(t,e){return pl(t,Fl(void 0,e))}class Tl extends Oo{constructor(t){var e,n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=(n=Do(this.getGlobalDisabled_()),[new jo(n),(t,e)=>{n.setRawValue(t,e)}]),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,i;const s=null!=t?t:{};return new Tl(Oo.createCore({disabled:null!==(e=s.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=s.hidden)&&void 0!==n&&n,parent:null!==(i=s.parent)&&void 0!==i?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){Ua(this.globalDisabled_,Il(t,"disabled")),Ka(this,"hidden",Il(t,"hidden"))}bindDisabled(t){Ua(this.globalDisabled_,(e=>{t.disabled=e}))}bindTabIndex(t){Ua(this.globalDisabled_,(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Nl=Ga("tbp");class Rl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Nl()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Nl("c")),this.element.appendChild(n),this.containerElement=n}}const ql=Ga("tbi");class Ul{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ql()),e.viewProps.bindClassModifiers(this.element),Ka(e.props,"selected",(t=>{t?this.element.classList.add(ql(void 0,"sel")):this.element.classList.remove(ql(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(ql("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(ql("t")),ul(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Kl{constructor(t,e){this.emitter=new So,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Ul(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Hl extends Cl{constructor(t,e){const n=new Rl(t,{viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:new Vl({blade:e.blade,element:n.containerElement,viewProps:e.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Kl(t,{props:e.itemProps,viewProps:Tl.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=e.props,Ka(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}importState(t){return Sa(t,(t=>super.importState(t)),(t=>({selected:t.required.boolean,title:t.required.string})),(t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0)))}exportState(){return Aa((()=>super.exportState()),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Gl extends xl{constructor(t,e){super(t,e),this.emitter_=new So,this.onSelect_=this.onSelect_.bind(this),this.pool_=e,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",t)})),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){const e=this.controller.view.element.ownerDocument,n=new Hl(e,{blade:Ll(),itemProps:Oo.fromObject({selected:!1,title:t.title}),props:Oo.fromObject({selected:!1}),viewProps:Tl.create()}),i=this.pool_.createApi(n);return this.rackApi_.add(i,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}onSelect_(t){this.emitter_.emit("select",new xa(this,t.rawValue))}}class Yl extends xl{get title(){var t;return null!==(t=this.controller.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBinding(t,e,n){return this.rackApi_.addBinding(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class Xl{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Do(!0),this.selectedIndex=Do(-1),this.items_=[]}add(t,e){const n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const t=this.items_.findIndex((t=>t.rawValue));t<0?(this.items_.forEach(((t,e)=>{t.rawValue=0===e})),this.selectedIndex.rawValue=0):(this.items_.forEach(((e,n)=>{e.rawValue=n===t})),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex((e=>e===t.sender));this.items_.forEach(((t,n)=>{t.rawValue=n===e})),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const Wl=Ga("tab");class Zl{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Wl(),Dl()),e.viewProps.bindClassModifiers(this.element),Ua(e.empty,pl(this.element,Wl(void 0,"nop")));const n=t.createElement("div");n.classList.add(Wl("t")),this.element.appendChild(n),this.itemsElement=n;const i=t.createElement("div");i.classList.add(Wl("i")),this.element.appendChild(i);const s=t.createElement("div");s.classList.add(Wl("c")),this.element.appendChild(s),this.contentsElement=s}}class Ql extends Cl{constructor(t,e){const n=new Xl,i=new Zl(t,{empty:n.empty,viewProps:e.viewProps});super({blade:e.blade,rackController:new Vl({blade:e.blade,element:i.contentsElement,viewProps:e.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=n}add(t,e){this.rackController.rack.add(t,e)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;const e=t.bladeController;Ta(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}onRackRemove_(t){if(!t.root)return;const e=t.bladeController;Na(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}const Jl=bl({id:"tab",type:"blade",accept(t){const e=La(t,(t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")})));return e&&0!==e.pages.length?{params:e}:null},controller(t){const e=new Ql(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const i=new Hl(t.document,{blade:Ll(),itemProps:Oo.fromObject({selected:!1,title:n.title}),props:Oo.fromObject({selected:!1}),viewProps:Tl.create()});e.add(i)})),e},api:t=>t.controller instanceof Ql?new Gl(t.controller,t.pool):t.controller instanceof Hl?new Yl(t.controller,t.pool):null});class tc extends Pa{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}}class ec{constructor(){this.disabled=!1,this.emitter=new So}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class nc{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new So,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ic{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function sc(t,e){if(t instanceof e)return t;if(t instanceof ic){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class rc{constructor(t){this.values=Oo.fromObject({options:t})}constrain(t){const e=this.values.get("options");if(0===e.length)return t;return e.filter((e=>e.value===t)).length>0?t:e[0].value}}function oc(t){var e;const n=Va;return Array.isArray(t)?null===(e=La({items:t},(t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))}))))||void 0===e?void 0:e.items:"object"==typeof t?n.required.raw(t).value:void 0}function ac(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function lc(t){return yo(t)?null:new rc(ac(t))}const cc=Ga("lst");class hc{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(cc()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(cc("s")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(cc("m")),i.appendChild(Ia(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,Ka(this.props_,"options",(e=>{Ra(this.selectElement),e.forEach((e=>{const n=t.createElement("option");n.textContent=e.text,this.selectElement.appendChild(n)})),this.update_()}))}update_(){const t=this.props_.get("options").map((t=>t.value));this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class pc{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new hc(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}importProps(t){return Sa(t,null,(t=>({options:t.required.custom(oc)})),(t=>(this.props.set("options",ac(t.options)),!0)))}exportProps(){return Aa(null,{options:this.props.get("options")})}}const uc=Ga("pop");class dc{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(uc()),e.viewProps.bindClassModifiers(this.element),Ua(e.shows,pl(this.element,uc(void 0,"v")))}}class vc{constructor(t,e){this.shows=Do(!1),this.viewProps=e.viewProps,this.view=new dc(t,{shows:this.shows,viewProps:this.viewProps})}}const mc=Ga("txt");class fc{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(mc()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(mc("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class gc{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new fc(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);yo(n)||(this.value.rawValue=n),this.view.refresh()}}function wc(t){return"false"!==t&&!!t}function bc(t){return function(t){return String(t)}(t)}const _c=ra(0);function yc(t){return _c(t)+"%"}function xc(t){return String(t)}function Cc(t){return t}function Pc({primary:t,secondary:e,forward:n,backward:i}){let s=!1;function r(t){s||(s=!0,t(),s=!1)}t.emitter.on("change",(i=>{r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),i.options)}))})),e.emitter.on("change",(s=>{r((()=>{t.setRawValue(i(t.rawValue,e.rawValue),s.options)})),r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),s.options)}))})),r((()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})}))}function Ec(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function kc(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function $c(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Vc(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Lc(t,e){var n,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=s&&s.scrollX)&&void 0!==n?n:0)+r.left),y:t.pageY-((null!==(i=s&&s.scrollY)&&void 0!==i?i:0)+r.top)}}class Sc{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new So,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Lc(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Lc(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Lc(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}const Ac=Ga("txt");class Mc{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ac(),Ac(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ac(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Ac("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ac()),this.inputElement.classList.add(Ac("i"));const i=t.createElement("div");i.classList.add(Ac("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(Da,"svg");s.classList.add(Ac("g")),this.knobElement.appendChild(s);const r=t.createElementNS(Da,"path");r.classList.add(Ac("gb")),s.appendChild(r),this.guideBodyElem_=r;const o=t.createElementNS(Da,"path");o.classList.add(Ac("gh")),s.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(Ga("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Ac(void 0,"drg"));this.element.classList.add(Ac(void 0,"drg"));const e=t.rawValue/this.props_.get("pointerScale"),n=e+(e>0?-1:e<0?1:0),i=la(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class jc{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=Do(null),this.view=new Mc(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Sc(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const i=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("min"),s=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("max");let r=t;return void 0!==i&&(r=Math.max(r,i)),void 0!==s&&(r=Math.min(r,s)),r}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);yo(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){const e=Ec(this.props.get("keyScale"),kc(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Ec(this.props.get("keyScale"),kc(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Dc=Ga("sld");class Oc{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Dc()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Dc("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Dc("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=la(oa(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class zc{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Oc(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sc(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(oa(la(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ec(this.props.get("keyScale"),$c(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ec(this.props.get("keyScale"),$c(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Bc=Ga("sldtxt");class Fc{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Bc());const n=t.createElement("div");n.classList.add(Bc("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Bc("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class Ic{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new zc(t,{props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new jc(t,{parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new Fc(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return Sa(t,null,(t=>({max:t.required.number,min:t.required.number})),(t=>{const e=this.sliderC_.props;return e.set("max",t.max),e.set("min",t.min),!0}))}exportProps(){const t=this.sliderC_.props;return Aa(null,{max:t.get("max"),min:t.get("min")})}}function Tc(t){return{sliderProps:new Oo({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new Oo({formatter:Do(t.formatter),keyScale:t.keyScale,pointerScale:Do(t.pointerScale)})}}const Nc={containerUnitSize:"cnt-usz"};function Rc(t){return`--${Nc[t]}`}function qc(t){return fa(t)}function Uc(t){if(Co(t))return La(t,qc)}function Kc(t,e){if(!t)return;const n=[],i=da(t,e);i&&n.push(i);const s=va(t);return s&&n.push(s),new ic(n)}function Hc(t){if("inline"===t||"popup"===t)return t}function Gc(t,e){t.write(e)}const Yc=Ga("ckb");class Xc{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Yc()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Yc("l")),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("input");i.classList.add(Yc("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const s=t.createElement("div");s.classList.add(Yc("w")),this.labelElement.appendChild(s);const r=Ia(t,"check");s.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Wc{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Xc(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}onLabelMouseDown_(t){t.preventDefault()}}const Zc=bl({id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=La(e,(t=>({options:t.optional.custom(oc),readonly:t.optional.constant(!1)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wc,constraint:t=>function(t){const e=[],n=lc(t.options);return n&&e.push(n),new ic(e)}(t.params),writer:t=>Gc},controller:t=>{const e=t.document,n=t.value,i=t.constraint,s=i&&sc(i,rc);return s?new pc(e,{props:new Oo({options:s.values.value("options")}),value:n,viewProps:t.viewProps}):new Wc(e,{value:n,viewProps:t.viewProps})},api:t=>"boolean"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof pc?new tc(t.controller):null}),Qc=Ga("col");class Jc{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Qc()),e.foldable.bindExpandedClass(this.element,Qc(void 0,"expanded")),Ka(e.foldable,"completed",pl(this.element,Qc(void 0,"cpl")));const n=t.createElement("div");n.classList.add(Qc("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Qc("s")),n.appendChild(i),this.swatchElement=i;const s=t.createElement("div");if(s.classList.add(Qc("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Qc("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function th(t,e,n){const i=ca(t,360),s=la(e/100,0,1),r=la(n/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,h,p;return[c,h,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(h+l),255*(p+l)]}function eh(t){return[t[0],t[1],t[2]]}function nh(t,e){return[t[0],t[1],t[2],e]}const ih={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const i=(t%360+360)%360,s=la(e/100,0,1),r=la(n/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,h,p;return[c,h,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(c+l),255*(h+l),255*(p+l)]}},hsv:{hsl:function(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:th},rgb:{hsl:function(t,e,n){const i=la(t/255,0,1),s=la(e/255,0,1),r=la(n/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,h=0;const p=(a+o)/2;return 0!==l&&(h=l/(1-Math.abs(o+a-1)),c=i===o?(s-r)/l:s===o?2+(r-i)/l:4+(i-s)/l,c=c/6+(c<0?1:0)),[360*c,100*h,100*p]},hsv:function(t,e,n){const i=la(t/255,0,1),s=la(e/255,0,1),r=la(n/255,0,1),o=Math.max(i,s,r),a=o-Math.min(i,s,r);let l;return l=0===a?0:o===i?((s-r)/a%6+6)%6*60:o===s?60*((r-i)/a+2):60*((i-s)/a+4),[l,100*(0===o?0:a/o),100*o]},rgb:(t,e,n)=>[t,e,n]}};function sh(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function rh(t,e,n){var i;const s=sh(e,n);return["rgb"===e?la(t[0],0,s[0]):(r=t[0],o=s[0],r===o?o:ca(r,o)),la(t[1],0,s[1]),la(t[2],0,s[2]),la(null!==(i=t[3])&&void 0!==i?i:1,0,1)];var r,o}function oh(t,e,n,i){const s=sh(e,n),r=sh(e,i);return t.map(((t,e)=>t/s[e]*r[e]))}function ah(t,e,n){const i=oh(t,e.mode,e.type,"int");return oh(ih[e.mode][n.mode](...i),n.mode,"int",n.type)}class lh{static black(){return new lh([0,0,0],"rgb")}constructor(t,e){this.type="int",this.mode=e,this.comps_=rh(t,e,this.type)}getComponents(t){return nh(ah(eh(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const ch=Ga("colp");class hh{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(ch()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ch("hsv"));const i=t.createElement("div");i.classList.add(ch("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(ch("h")),this.hPaletteView_=e.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);const r=t.createElement("div");if(r.classList.add(ch("rgb")),this.textsView_=e.textsView,r.appendChild(this.textsView_.element),this.element.appendChild(r),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(ch("a"));const i=t.createElement("div");i.classList.add(ch("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(ch("at")),s.appendChild(this.alphaViews_.text.element),n.appendChild(s),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function ph(t){return"int"===t?"int":"float"===t?"float":void 0}function uh(t){return La(t,(t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(ph)}),expanded:t.optional.boolean,picker:t.optional.custom(Hc),readonly:t.optional.constant(!1)})))}function dh(t){return t?.1:1}function vh(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}class mh{constructor(t,e){this.type="float",this.mode=e,this.comps_=rh(t,e,this.type)}getComponents(t){return nh(ah(eh(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const fh={int:(t,e)=>new lh(t,e),float:(t,e)=>new mh(t,e)};function gh(t,e,n){return fh[n](t,e)}function wh(t,e){if(t.type===e)return t;if(function(t){return"int"===t.type}(t)&&"float"===e)return function(t){const e=t.getComponents(),n=sh(t.mode,"int");return new mh([oa(e[0],0,n[0],0,1),oa(e[1],0,n[1],0,1),oa(e[2],0,n[2],0,1),e[3]],t.mode)}(t);if(function(t){return"float"===t.type}(t)&&"int"===e)return function(t){const e=t.getComponents(),n=sh(t.mode,"int");return new lh([Math.round(oa(e[0],0,1,0,n[0])),Math.round(oa(e[1],0,1,0,n[1])),Math.round(oa(e[2],0,1,0,n[2])),e[3]],t.mode)}(t);throw Vo.shouldNeverHappen()}function bh(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const _h={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function yh(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return _h[i](n)}function xh(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bh(e[1],255),bh(e[2],255),bh(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ch(t){const e=xh(t);return e?new lh(e,"rgb"):null}function Ph(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bh(e[1],255),bh(e[2],255),bh(e[3],255),bh(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Eh(t){const e=Ph(t);return e?new lh(e,"rgb"):null}function kh(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yh(e[1]),bh(e[2],100),bh(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $h(t){const e=kh(t);return e?new lh(e,"hsl"):null}function Vh(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yh(e[1]),bh(e[2],100),bh(e[3],100),bh(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Lh(t){const e=Vh(t);return e?new lh(e,"hsl"):null}function Sh(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Ah(t){const e=Sh(t);return e?new lh(e,"rgb"):null}function Mh(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),oa(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),oa(parseInt(n[4],16),0,255,0,1)]:null}function jh(t){const e=Mh(t);return e?new lh(e,"rgb"):null}function Dh(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Oh(t){return e=>{const n=Dh(e);return n?gh(n,"rgb",t):null}}function zh(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Bh(t){return e=>{const n=zh(e);return n?gh(n,"rgb",t):null}}const Fh=[{parser:Sh,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Mh,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:xh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ph,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:kh,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Vh,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Dh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:zh,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Ih(t,e="int"){const n=function(t){return Fh.reduce(((e,{parser:n,result:i})=>e||(n(t)?i:null)),null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}function Th(t){const e=[Ah,jh,Ch,Eh,$h,Lh];"int"===t&&e.push(Oh("int"),Bh("int")),"float"===t&&e.push(Oh("float"),Bh("float"));const n=function(t){return e=>t.reduce(((t,n)=>null!==t?t:n(e)),null)}(e);return e=>{const i=n(e);return i?wh(i,t):null}}function Nh(t){const e=Th("int");if("string"!=typeof t)return lh.black();const n=e(t);return null!=n?n:lh.black()}function Rh(t){const e=la(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function qh(t,e="#"){return`${e}${eh(t.getComponents("rgb")).map(Rh).join("")}`}function Uh(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Rh).join("")}`}function Kh(t){const e=ra(0);return`rgb(${eh(wh(t,"int").getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Hh(t){const e=ra(2),n=ra(0),i=wh(t,"int").getComponents("rgb").map(((t,i)=>(3===i?e:n)(t)));return`rgba(${i.join(", ")})`}function Gh(t,e){const n=ra("float"===e?2:0),i=["r","g","b"],s=eh(wh(t,e).getComponents("rgb")).map(((t,e)=>`${i[e]}: ${n(t)}`));return`{${s.join(", ")}}`}function Yh(t){return e=>Gh(e,t)}function Xh(t,e){const n=ra(2),i=ra("float"===e?2:0),s=["r","g","b","a"],r=wh(t,e).getComponents("rgb").map(((t,e)=>`${s[e]}: ${(3===e?n:i)(t)}`));return`{${r.join(", ")}}`}function Wh(t){return e=>Xh(e,t)}const Zh=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:qh},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Uh},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Kh},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Hh},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[ra(0),yc,yc],n=eh(wh(t,"int").getComponents("hsl")).map(((t,n)=>e[n](t)));return`hsl(${n.join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[ra(0),yc,yc,ra(2)],n=wh(t,"int").getComponents("hsl").map(((t,n)=>e[n](t)));return`hsla(${n.join(", ")})`}},...["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Yh(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Wh(e)}]),[])];function Qh(t){return Zh.reduce(((e,n)=>{return e||(i=n.format,s=t,i.alpha===s.alpha&&i.mode===s.mode&&i.notation===s.notation&&i.type===s.type?n.stringifier:null);var i,s}),null)}const Jh=Ga("apl");class tp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Jh()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Jh("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Jh("c")),n.appendChild(i),this.colorElem_=i;const s=t.createElement("div");s.classList.add(Jh("m")),this.element.appendChild(s),this.markerElem_=s;const r=t.createElement("div");r.classList.add(Jh("p")),this.markerElem_.appendChild(r),this.previewElem_=r,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new lh([e[0],e[1],e[2],0],"rgb"),i=new lh([e[0],e[1],e[2],255],"rgb"),s=["to right",Hh(n),Hh(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Hh(t);const r=oa(e[3],0,1,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class ep{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new tp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[s,r,o]=i.getComponents("hsv");this.value.setRawValue(new lh([s,r,o,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ec(dh(!0),$c(t));if(0===e)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new lh([i,s,r,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ec(dh(!0),$c(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const np=Ga("coltxt");class ip{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(np()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(np("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce(((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(np("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(np("mm")),i.appendChild(Ia(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(np("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=e.inputViews,this.applyInputViews_(),Ua(e.mode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){Ra(this.inputsElem_);const t=this.element.ownerDocument;this.inputViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(np("c")),n.appendChild(e.element),this.inputsElem_.appendChild(n)}))}}function sp(t,e,n){const i=sh(t,e)[n];return new zo({min:0,max:i})}function rp(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:na,viewProps:e.viewProps};return[0,1,2].map((i=>{const s=function(t,e,n){return new jc(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",parser:e.parser,props:Oo.fromObject({formatter:(i=e.colorType,ra("float"===i?2:0)),keyScale:dh(!1),pointerScale:"float"===e.colorType?.01:1}),value:Do(0,{constraint:sp(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var i}(t,n,i);return Pc({primary:e.value,secondary:s.value,forward:t=>wh(t,e.colorType).getComponents(e.colorMode)[i],backward(t,n){const s=e.colorMode,r=wh(t,e.colorType).getComponents(s);r[i]=n;return wh(gh(nh(eh(r),r[3]),s,e.colorType),"int")}}),s}))}class op{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=Do(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new ip(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e=this.colorMode.rawValue;return function(t){return"hex"!==t}(e)?rp(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(t,e){const n=new gc(t,{parser:Th("int"),props:Oo.fromObject({formatter:qh}),value:Do(lh.black()),viewProps:e.viewProps});return Pc({primary:e.value,secondary:n.value,forward:t=>new lh(eh(t.getComponents()),t.mode),backward:(t,e)=>new lh(nh(eh(e.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((t=>t.view))}}const ap=Ga("hpl");class lp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ap()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(ap("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(ap("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Kh(new lh([e,100,100],"hsv"));const n=oa(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class cp{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new lp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=oa(la(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,s,r,o]=i.getComponents("hsv");this.value.setRawValue(new lh([n,s,r,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ec(dh(!1),$c(t));if(0===e)return;const n=this.value.rawValue,[i,s,r,o]=n.getComponents("hsv");this.value.setRawValue(new lh([i+e,s,r,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ec(dh(!1),$c(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const hp=Ga("svp");class pp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(hp()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(hp("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(hp("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=function(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,s=t.getImageData(0,0,n,i),r=s.data;for(let t=0;t<i;t++)for(let s=0;s<n;s++){const o=oa(s,0,n,0,100),a=oa(t,0,i,100,0),l=th(e[0],o,a),c=4*(t*n+s);r[c]=l[0],r[c+1]=l[1],r[c+2]=l[2],r[c+3]=255}t.putImageData(s,0,0);const o=oa(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=oa(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class up{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new pp(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=oa(t.point.x,0,t.bounds.width,0,100),i=oa(t.point.y,0,t.bounds.height,100,0),[s,,,r]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new lh([s,n,i,r],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Vc(t.key)&&t.preventDefault();const[e,n,i,s]=this.value.rawValue.getComponents("hsv"),r=dh(!1),o=Ec(r,$c(t)),a=Ec(r,kc(t));0===o&&0===a||this.value.setRawValue(new lh([e,n+o,i+a,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=dh(!1),n=Ec(e,$c(t)),i=Ec(e,kc(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class dp{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new cp(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new up(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new ep(t,{value:this.value,viewProps:this.viewProps}),text:new jc(t,{parser:na,props:Oo.fromObject({pointerScale:.01,keyScale:.1,formatter:ra(2)}),value:Do(0,{constraint:new zo({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Pc({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,e)=>{const n=t.getComponents();return n[3]=e,new lh(n,t.mode)}}),this.textsC_=new op(t,{colorType:e.colorType,value:this.value,viewProps:this.viewProps}),this.view=new hh(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const vp=Ga("colsw");class mp{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(vp()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(vp("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(vp("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Uh(t)}onValueChange_(){this.update_()}}class fp{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new mp(t,{value:this.value,viewProps:this.viewProps})}}class gp{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Sl.create(e.expanded),this.swatchC_=new fp(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new gc(t,{parser:e.parser,props:Oo.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Jc(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new vc(t,{viewProps:this.viewProps}):null;const i=new dp(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Pc({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ml(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=qa(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!za(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function wp(t){return eh(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function bp(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function _p(t){return"number"!=typeof t?lh.black():new lh([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function yp(t){return"number"!=typeof t?lh.black():new lh([(e=t)>>24&255,e>>16&255,e>>8&255,oa(255&e,0,255,0,1)],"rgb");var e}function xp(t,e){return"object"==typeof t&&!yo(t)&&(e in t&&"number"==typeof t[e])}function Cp(t){return xp(t,"r")&&xp(t,"g")&&xp(t,"b")}function Pp(t){return Cp(t)&&xp(t,"a")}function Ep(t){return Cp(t)}function kp(t,e){if(t.mode!==e.mode)return!1;if(t.type!==e.type)return!1;const n=t.getComponents(),i=e.getComponents();for(let t=0;t<n.length;t++)if(n[t]!==i[t])return!1;return!0}function $p(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function Vp(t,e){return(n,i)=>{t?function(t,e,n){const i=wh(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}(n,i,e):function(t,e,n){const i=wh(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}(n,i,e)}}function Lp(t){var e;return!!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha)}const Sp=bl({id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!function(t){return"color"in t||"color"===t.view}(e))return null;const n=uh(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:Lp(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?yp:_p,equals:kp,writer:t=>function(t){const e=t?bp:wp;return(t,n)=>{Gc(t,e(n))}}(t.params.supportsAlpha)},controller:t=>{var e,n,i;return new gp(t.document,{colorType:"int",expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:(i=t.params.supportsAlpha,i?t=>Uh(t,"0x"):t=>qh(t,"0x")),parser:Th("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Ap(t){return e=>{const n=function(t,e){if(!Ep(t))return wh(lh.black(),e);if("int"===e){const e=$p(t);return new lh(e,"rgb")}if("float"===e){const e=$p(t);return new mh(e,"rgb")}return wh(lh.black(),"int")}(e,t);return wh(n,"int")}}function Mp(t,e){return n=>t?Xh(n,e):Gh(n,e)}const jp=bl({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!Ep(t))return null;const i=uh(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{colorType:null!==(n=vh(e))&&void 0!==n?n:"int"})}:null},binding:{reader:t=>Ap(t.params.colorType),equals:kp,writer:t=>Vp(Pp(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const i=Pp(t.initialValue);return new gp(t.document,{colorType:t.params.colorType,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:Mp(i,t.params.colorType),parser:Th("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:i,value:t.value,viewProps:t.viewProps})}}),Dp=bl({id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("text"===e.view)return null;const n=Ih(t,vh(e));if(!n)return null;const i=Qh(n);if(!i)return null;const s=uh(e);return s?{initialValue:t,params:Object.assign(Object.assign({},s),{format:n,stringifier:i})}:null},binding:{reader:()=>Nh,equals:kp,writer:t=>{const e=function(t){const e=Qh(t);return e?(t,n)=>{Gc(t,e(n))}:null}(t.params.format);if(!e)throw Vo.notBindable();return e}},controller:t=>{var e,n;return new gp(t.document,{colorType:t.params.format.type,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:t.params.stringifier,parser:Th("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class Op{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}}const zp=Ga("pndtxt");class Bp{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(zp()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(zp("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}class Fp{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>function(t,e,n){return new jc(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Do(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i))),this.acs_.forEach(((t,n)=>{Pc({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t)[n],backward:(t,i)=>{const s=e.assembly.toComponents(t);return s[n]=i,e.assembly.fromComponents(s)}})})),this.view=new Bp(t,{textViews:this.acs_.map((t=>t.view))})}get textControllers(){return this.acs_}}class Ip extends Pa{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}}const Tp=bl({id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=La(e,(t=>Object.assign(Object.assign({},fa(t)),{options:t.optional.custom(oc),readonly:t.optional.constant(!1)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>ia,constraint:t=>function(t,e){const n=[],i=da(t,e);i&&n.push(i);const s=va(t);s&&n.push(s);const r=lc(t.options);return r&&n.push(r),new ic(n)}(t.params,t.initialValue),writer:t=>Gc},controller:t=>{const e=t.value,n=t.constraint,i=n&&sc(n,rc);if(i)return new pc(t.document,{props:new Oo({options:i.values.value("options")}),value:e,viewProps:t.viewProps});const s=ma(t.params,e.rawValue),r=n&&sc(n,zo);return r?new Ic(t.document,Object.assign(Object.assign({},Tc(Object.assign(Object.assign({},s),{keyScale:Do(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:na,value:e,viewProps:t.viewProps})):new jc(t.document,{parser:na,props:Oo.fromObject(s),value:e,viewProps:t.viewProps})},api:t=>"number"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof Ic?new Ip(t.controller):t.controller.valueController instanceof pc?new tc(t.controller):null});class Np{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(yo(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Rp={toComponents:t=>t.getComponents(),fromComponents:t=>new Np(...t)},qp=Ga("p2d");class Up{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(qp()),e.viewProps.bindClassModifiers(this.element),Ua(e.expanded,pl(this.element,qp(void 0,"expanded")));const n=t.createElement("div");n.classList.add(qp("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(qp("b")),i.appendChild(Ia(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const s=t.createElement("div");if(s.classList.add(qp("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(qp("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Kp=Ga("p2dp");class Hp{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Kp()),"popup"===e.layout&&this.element.classList.add(Kp(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Kp("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(Da,"svg");i.classList.add(Kp("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=t.createElementNS(Da,"line");s.classList.add(Kp("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const r=t.createElementNS(Da,"line");r.classList.add(Kp("ax")),r.setAttributeNS(null,"x1","50%"),r.setAttributeNS(null,"y1","0"),r.setAttributeNS(null,"x2","50%"),r.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(r);const o=t.createElementNS(Da,"line");o.classList.add(Kp("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(Kp("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.props_.get("max"),i=oa(t,-n,+n,0,100),s=oa(e,-n,+n,0,100),r=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${r}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${r}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Gp(t,e,n){return[Ec(e[0],$c(t)),Ec(e[1],kc(t))*(n?1:-1)]}class Yp{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Hp(t,{layout:e.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sc(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.props.get("max"),i=oa(t.point.x,0,t.bounds.width,-n,+n),s=oa(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Np(i,s),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Vc(t.key)&&t.preventDefault();const[e,n]=Gp(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===e&&0===n||this.value.setRawValue(new Np(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Gp(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Xp{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=Sl.create(e.expanded),this.popC_="popup"===e.pickerLayout?new vc(t,{viewProps:this.viewProps}):null;const s=new Yp(t,{layout:e.pickerLayout,props:new Oo({invertsY:Do(e.invertsY),max:Do(e.max),xKeyScale:e.axes[0].textProps.value("keyScale"),yKeyScale:e.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=s,this.textC_=new Fp(t,{assembly:Rp,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Up(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Pc({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ml(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=qa(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!za(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Wp(t){return Np.isObject(t)?new Np(t.x,t.y):new Np}function Zp(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Qp(t,e){var n,i;if(!yo(t.min)||!yo(t.max))return Math.max(Math.abs(null!==(n=t.min)&&void 0!==n?n:0),Math.abs(null!==(i=t.max)&&void 0!==i?i:0));const s=pa(t);return Math.max(10*Math.abs(s),10*Math.abs(e))}function Jp(t,e){var n,i;const s=Qp(Eo(t,null!==(n=t.x)&&void 0!==n?n:{}),e.x),r=Qp(Eo(t,null!==(i=t.y)&&void 0!==i?i:{}),e.y);return Math.max(s,r)}function tu(t){if(!("y"in t))return!1;const e=t.y;return!!e&&("inverted"in e&&!!e.inverted)}const eu=bl({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Np.isObject(t))return null;const n=La(e,(t=>Object.assign(Object.assign({},qc(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Hc),readonly:t.optional.constant(!1),x:t.optional.custom(Uc),y:t.optional.object(Object.assign(Object.assign({},qc(t)),{inverted:t.optional.boolean}))})));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Wp,constraint:t=>function(t,e){return new Op({assembly:Rp,components:[Kc(Object.assign(Object.assign({},t),t.x),e.x),Kc(Object.assign(Object.assign({},t),t.y),e.y)]})}(t.params,t.initialValue),equals:Np.equals,writer:()=>Zp},controller:t=>{var e,n;const i=t.document,s=t.value,r=t.constraint,o=[t.params.x,t.params.y];return new Xp(i,{axes:s.rawValue.getComponents().map(((e,n)=>{var i;return ga({constraint:r.components[n],initialValue:e,params:Eo(t.params,null!==(i=o[n])&&void 0!==i?i:{})})})),expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,invertsY:tu(t.params),max:Jp(t.params,s.rawValue),parser:na,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:s,viewProps:t.viewProps})}});class nu{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(yo(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const iu={toComponents:t=>t.getComponents(),fromComponents:t=>new nu(...t)};function su(t){return nu.isObject(t)?new nu(t.x,t.y,t.z):new nu}function ru(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}const ou=bl({id:"input-point3d",type:"input",accept:(t,e)=>{if(!nu.isObject(t))return null;const n=La(e,(t=>Object.assign(Object.assign({},qc(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Uc),y:t.optional.custom(Uc),z:t.optional.custom(Uc)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>su,constraint:t=>function(t,e){return new Op({assembly:iu,components:[Kc(Object.assign(Object.assign({},t),t.x),e.x),Kc(Object.assign(Object.assign({},t),t.y),e.y),Kc(Object.assign(Object.assign({},t),t.z),e.z)]})}(t.params,t.initialValue),equals:nu.equals,writer:t=>ru},controller:t=>{const e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z];return new Fp(t.document,{assembly:iu,axes:e.rawValue.getComponents().map(((e,s)=>{var r;return ga({constraint:n.components[s],initialValue:e,params:Eo(t.params,null!==(r=i[s])&&void 0!==r?r:{})})})),parser:na,value:e,viewProps:t.viewProps})}});class au{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(yo(t))return!1;const e=t.x,n=t.y,i=t.z,s=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof s}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const lu={toComponents:t=>t.getComponents(),fromComponents:t=>new au(...t)};function cu(t){return au.isObject(t)?new au(t.x,t.y,t.z,t.w):new au}function hu(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}const pu=bl({id:"input-point4d",type:"input",accept:(t,e)=>{if(!au.isObject(t))return null;const n=La(e,(t=>Object.assign(Object.assign({},qc(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Uc),x:t.optional.custom(Uc),y:t.optional.custom(Uc),z:t.optional.custom(Uc)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>cu,constraint:t=>function(t,e){return new Op({assembly:lu,components:[Kc(Object.assign(Object.assign({},t),t.x),e.x),Kc(Object.assign(Object.assign({},t),t.y),e.y),Kc(Object.assign(Object.assign({},t),t.z),e.z),Kc(Object.assign(Object.assign({},t),t.w),e.w)]})}(t.params,t.initialValue),equals:au.equals,writer:t=>hu},controller:t=>{const e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z,t.params.w];return new Fp(t.document,{assembly:lu,axes:e.rawValue.getComponents().map(((e,s)=>{var r;return ga({constraint:n.components[s],initialValue:e,params:Eo(t.params,null!==(r=i[s])&&void 0!==r?r:{})})})),parser:na,value:e,viewProps:t.viewProps})}});const uu=bl({id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=La(e,(t=>({readonly:t.optional.constant(!1),options:t.optional.custom(oc)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>xc,constraint:t=>function(t){const e=[],n=lc(t.options);return n&&e.push(n),new ic(e)}(t.params),writer:t=>Gc},controller:t=>{const e=t.document,n=t.value,i=t.constraint,s=i&&sc(i,rc);return s?new pc(e,{props:new Oo({options:s.values.value("options")}),value:n,viewProps:t.viewProps}):new gc(e,{parser:t=>t,props:Oo.fromObject({formatter:Cc}),value:n,viewProps:t.viewProps})},api:t=>"string"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof pc?new tc(t.controller):null}),du={defaultInterval:200,defaultRows:3},vu=Ga("mll");class mu{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(vu()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(vu("i")),n.style.height=`calc(var(${Rc("containerUnitSize")}) * ${e.rows})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class fu{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new mu(t,{formatter:e.formatter,rows:e.rows,value:this.value,viewProps:this.viewProps})}}const gu=Ga("sgl");class wu{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(gu()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(gu("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class bu{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new wu(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const _u=bl({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=La(e,(t=>({readonly:t.required.constant(!0),rows:t.optional.number})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wc},controller:t=>{var e;return 1===t.value.rawValue.length?new bu(t.document,{formatter:bc,value:t.value,viewProps:t.viewProps}):new fu(t.document,{formatter:bc,rows:null!==(e=t.params.rows)&&void 0!==e?e:du.defaultRows,value:t.value,viewProps:t.viewProps})}});class yu extends Pa{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}}const xu=Ga("grl");class Cu{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(xu()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(Da,"svg");n.classList.add(xu("g")),n.style.height=`calc(var(${Rc("containerUnitSize")}) * ${e.rows})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(Da,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const s=t.createElement("div");s.classList.add(xu("t"),Ga("tt")()),this.element.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:t,clientHeight:e}=this.element,n=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),r=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const l=oa(a,0,n,0,t),c=oa(o,i,s,e,0);r.push([l,c].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void o.classList.remove(xu("t","a"));const l=oa(this.cursor_.rawValue,0,n,0,t),c=oa(a,i,s,e,0);o.style.left=`${l}px`,o.style.top=`${c}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(xu("t","a"))||(o.classList.add(xu("t","a"),xu("t","in")),Oa(o),o.classList.remove(xu("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Pu{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=Do(-1),this.view=new Cu(t,{cursor:this.cursor_,formatter:e.formatter,rows:e.rows,props:this.props,value:this.value,viewProps:this.viewProps}),za(t)){const t=new Sc(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}importProps(t){return Sa(t,null,(t=>({max:t.required.number,min:t.required.number})),(t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0)))}exportProps(){return Aa(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const{clientWidth:e}=this.view.element;this.cursor_.rawValue=Math.floor(oa(t.offsetX,0,e,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(oa(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Eu(t){return yo(t.format)?ra(2):t.format}function ku(t){return"graph"===t.view}const $u=bl({id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=La(e,(t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string})));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>ku(t)?64:1,reader:t=>ia},controller:t=>ku(t.params)?function(t){var e,n,i;return new Pu(t.document,{formatter:Eu(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:du.defaultRows,props:Oo.fromObject({max:null!==(n=t.params.max)&&void 0!==n?n:100,min:null!==(i=t.params.min)&&void 0!==i?i:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new bu(t.document,{formatter:Eu(t.params),value:t.value,viewProps:t.viewProps}):new fu(t.document,{formatter:Eu(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:du.defaultRows,value:t.value,viewProps:t.viewProps})}(t),api:t=>t.controller.valueController instanceof Pu?new yu(t.controller):null}),Vu=bl({id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=La(e,(t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>xc},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new fu(t.document,{formatter:Cc,rows:null!==(e=t.params.rows)&&void 0!==e?e:du.defaultRows,value:n,viewProps:t.viewProps}):new bu(t.document,{formatter:Cc,value:n,viewProps:t.viewProps})}});class Lu{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}}class Su{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}}function Au(t,e){return 0===e?new ec:new nc(t,null!=e?e:du.defaultInterval)}class Mu{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,e){if(!(n=e.core)||n.major!==wl.major)throw Vo.notCompatible(t,e.id);var n;"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}createInput_(t,e,n){return this.pluginsMap_.inputs.reduce(((i,s)=>null!=i?i:function(t,e){var n;const i=t.accept(e.target.read(),e.params);if(yo(i))return null;const s={target:e.target,initialValue:i.initialValue,params:i.params},r=La(e.params,(t=>({disabled:t.optional.boolean,hidden:t.optional.boolean,label:t.optional.string,tag:t.optional.string}))),o=t.binding.reader(s),a=t.binding.constraint?t.binding.constraint(s):void 0,l=new Lu({reader:o,target:e.target,writer:t.binding.writer(s)}),c=new Ea(Do(o(i.initialValue),{constraint:a,equals:t.binding.equals}),l),h=t.controller({constraint:a,document:e.document,initialValue:i.initialValue,params:i.params,value:c,viewProps:Tl.create({disabled:null==r?void 0:r.disabled,hidden:null==r?void 0:r.hidden})});return new il(e.document,{blade:Ll(),props:Oo.fromObject({label:"label"in e.params?null!==(n=null==r?void 0:r.label)&&void 0!==n?n:null:e.target.key}),tag:null==r?void 0:r.tag,value:c,valueController:h})}(s,{document:t,target:e,params:n})),null)}createMonitor_(t,e,n){return this.pluginsMap_.monitors.reduce(((i,s)=>null!=i?i:function(t,e){var n,i,s;const r=t.accept(e.target.read(),e.params);if(yo(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},a=La(e.params,(t=>({bufferSize:t.optional.number,disabled:t.optional.boolean,hidden:t.optional.boolean,interval:t.optional.number,label:t.optional.string}))),l=t.binding.reader(o),c=null!==(i=null!==(n=null==a?void 0:a.bufferSize)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(r.params))&&void 0!==i?i:1,h=new al({binding:new Su({reader:l,target:e.target}),bufferSize:c,ticker:Au(e.document,null==a?void 0:a.interval)}),p=t.controller({document:e.document,params:r.params,value:h,viewProps:Tl.create({disabled:null==a?void 0:a.disabled,hidden:null==a?void 0:a.hidden})});return p.viewProps.bindDisabled(h.ticker),p.viewProps.handleDispose((()=>{h.ticker.dispose()})),new ll(e.document,{blade:Ll(),props:Oo.fromObject({label:"label"in e.params?null!==(s=null==a?void 0:a.label)&&void 0!==s?s:null:e.target.key}),value:h,valueController:p})}(s,{document:t,params:n,target:e})),null)}createBinding(t,e,n){if(yo(e.read()))throw new Vo({context:{key:e.key},type:"nomatchingcontroller"});const i=this.createInput_(t,e,n);if(i)return i;const s=this.createMonitor_(t,e,n);if(s)return s;throw new Vo({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,i)=>null!=n?n:function(t,e){const n=t.accept(e.params);if(!n)return null;const i=La(e.params,(t=>({disabled:t.optional.boolean,hidden:t.optional.boolean})));return t.controller({blade:Ll(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:null==i?void 0:i.disabled,hidden:null==i?void 0:i.hidden}),viewProps:Tl.create({disabled:null==i?void 0:i.disabled,hidden:null==i?void 0:i.hidden})})}(i,{document:t,params:e})),null);if(!n)throw new Vo({type:"nomatchingview",context:{params:e}});return n}createInputBindingApi_(t){const e=this.pluginsMap_.inputs.reduce(((e,n)=>{var i,s;return e||(null!==(s=null===(i=n.api)||void 0===i?void 0:i.call(n,{controller:t}))&&void 0!==s?s:null)}),null);return this.apiCache_.add(t,null!=e?e:new Pa(t))}createMonitorBindingApi_(t){const e=this.pluginsMap_.monitors.reduce(((e,n)=>{var i,s;return e||(null!==(s=null===(i=n.api)||void 0===i?void 0:i.call(n,{controller:t}))&&void 0!==s?s:null)}),null);return this.apiCache_.add(t,null!=e?e:new Pa(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(sl(t))return this.createInputBindingApi_(t);if(cl(t))return this.createMonitorBindingApi_(t);throw Vo.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(function(t){return Ma(t)&&ja(t.value)}(t))return this.createBindingApi(t);const e=this.pluginsMap_.blades.reduce(((e,n)=>null!=e?e:n.api({controller:t,pool:this})),null);if(!e)throw Vo.shouldNeverHappen();return this.apiCache_.add(t,e)}}const ju=new class{constructor(){this.map_=new Map}get(t){var e;return null!==(e=this.map_.get(t))&&void 0!==e?e:null}has(t){return this.map_.has(t)}add(t,e){return this.map_.set(t,e),t.viewProps.handleDispose((()=>{this.map_.delete(t)})),e}};class Du extends wa{constructor(t){super(t),this.emitter_=new So,this.controller.value.emitter.on("change",(t=>{this.emitter_.emit("change",new _a(this,t.rawValue))}))}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class Ou extends wa{}class zu extends wa{constructor(t){super(t),this.emitter_=new So,this.controller.value.emitter.on("change",(t=>{this.emitter_.emit("change",new _a(this,t.rawValue))}))}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}class Bu extends wa{constructor(t){super(t),this.emitter_=new So,this.controller.value.emitter.on("change",(t=>{this.emitter_.emit("change",new _a(this,t.rawValue))}))}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t)}),{key:e}),this}off(t,e){return this.emitter_.off(t,e),this}}const Fu={id:"list",type:"blade",core:wl,accept(t){const e=La(t,(t=>({options:t.required.custom(oc),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string})));return e?{params:e}:null},controller(t){const e=new rc(ac(t.params.options)),n=Do(t.params.value,{constraint:e}),i=new pc(t.document,{props:new Oo({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new tl(t.document,{blade:t.blade,props:Oo.fromObject({label:t.params.label}),value:n,valueController:i})},api:t=>t.controller instanceof tl&&t.controller.valueController instanceof pc?new Du(t.controller):null};class Iu extends jl{constructor(t,e){super(t,e)}get element(){return this.controller.view.element}}class Tu extends zl{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Nu=Ga("spr");class Ru{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Nu()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Nu("r")),this.element.appendChild(n)}}class qu extends Ja{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Ru(t,{viewProps:e.viewProps})}))}}const Uu={id:"separator",type:"blade",core:wl,accept(t){const e=La(t,(t=>({view:t.required.constant("separator")})));return e?{params:e}:null},controller:t=>new qu(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof qu?new Ou(t.controller):null},Ku={id:"slider",type:"blade",core:wl,accept(t){const e=La(t,(t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number})));return e?{params:e}:null},controller(t){var e,n;const i=null!==(e=t.params.value)&&void 0!==e?e:0,s=new zo({max:t.params.max,min:t.params.min}),r=Do(i,{constraint:s}),o=new Ic(t.document,Object.assign(Object.assign({},Tc({formatter:null!==(n=t.params.format)&&void 0!==n?n:sa,keyScale:Do(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:ua(t.params,i)})),{parser:na,value:r,viewProps:t.viewProps}));return new tl(t.document,{blade:t.blade,props:Oo.fromObject({label:t.params.label}),value:r,valueController:o})},api:t=>t.controller instanceof tl&&t.controller.valueController instanceof Ic?new zu(t.controller):null},Hu={id:"text",type:"blade",core:wl,accept(t){const e=La(t,(t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string})));return e?{params:e}:null},controller(t){var e;const n=Do(t.params.value),i=new gc(t.document,{parser:t.params.parse,props:Oo.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:n,viewProps:t.viewProps});return new tl(t.document,{blade:t.blade,props:Oo.fromObject({label:t.params.label}),value:n,valueController:i})},api:t=>t.controller instanceof tl&&t.controller.valueController instanceof gc?new Bu(t.controller):null};class Gu extends Iu{constructor(t){var e,n;const i=null!=t?t:{},s=null!==(e=i.document)&&void 0!==e?e:Ba(),r=function(){const t=new Mu(ju);return[eu,ou,pu,uu,Tp,Dp,jp,Sp,Zc,_u,Vu,$u,_l,Bl,Jl].forEach((e=>{t.register("core",e)})),t}();super(new Tu(s,{expanded:i.expanded,blade:Ll(),props:Oo.fromObject({title:i.title}),viewProps:Tl.create()}),r),this.pool_=r,this.containerElem_=null!==(n=i.container)&&void 0!==n?n:function(t){const e=t.createElement("div");return e.classList.add(Ga("dfw")()),t.body&&t.body.appendChild(e),e}(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Vo.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw Vo.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&function(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}(this.document,`plugin-${t.id}`,t.css);("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((e=>{this.pool_.register(t.id,e)}))}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Fu,Uu,Ku,Jl,Hu]})}}function Yu(t){let e,n;return e=new po({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:t[2]}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.theme=t[2]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Xu(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Wu(t){let e,n,i,s;const r=[Ju,Qu],o=[];function a(t,e){return void 0===t[1]?0:1}e=a(t),n=o[e]=r[e](t);const l=t[10].default,c=h(l,t,t[9],null);return{c(){n.c(),i=C(),c&&c.c()},m(t,n){o[e].m(t,n),b(t,i,n),c&&c.m(t,n),s=!0},p(t,h){let p=e;e=a(t),e===p?o[e].p(t,h):(tt(),it(o[p],1,1,(()=>{o[p]=null})),et(),n=o[e],n?n.p(t,h):(n=o[e]=r[e](t),n.c()),nt(n,1),n.m(i.parentNode,i)),c&&c.p&&(!s||512&h)&&d(c,l,t,t[9],s?u(l,t[9],h,null):v(t[9]),null)},i(t){s||(nt(n),nt(c,t),s=!0)},o(t){it(n),it(c,t),s=!1},d(t){t&&_(i),o[e].d(t),c&&c.d(t)}}}function Zu(t){let e;const n=t[10].default,i=h(n,t,t[9],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||512&s)&&d(i,n,t,t[9],e?u(n,t[9],s,null):v(t[9]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function Qu(t){let e,n;return e=new po({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding","containerVerticalPadding","containerUnitSize"],theme:t[2]}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.theme=t[2]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Ju(t){let e,n;return e=new po({props:{keysAdd:["containerVerticalPadding"],theme:t[2]}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};4&n&&(i.theme=t[2]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function td(t){let e,n,i,s;const r=[Zu,Wu,Xu,Yu],o=[];return e=0,n=o[e]=r[e](t),{c(){n.c(),i=P()},m(t,n){o[e].m(t,n),b(t,i,n),s=!0},p(t,[s]){let a=e;e=0,e===a?o[e].p(t,s):(tt(),it(o[a],1,1,(()=>{o[a]=null})),et(),n=o[e],n?n.p(t,s):(n=o[e]=r[e](t),n.c()),nt(n,1),n.m(i.parentNode,i))},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[e].d(t)}}}function ed(t,e,n){let i,s,{$$slots:r={},$$scope:o}=e,{title:a}=e,{userExpandable:l=!0}=e,{expanded:h=!0}=e,{theme:p}=e,{scale:u=1}=e,{userCreatedPane:d=!0}=e,{tpPane:v}=e;const m=vt();c(t,m,(t=>n(11,i=t)));const f=B("parentStore");c(t,f,(t=>n(12,s=t)));let w=[];function b(t){(K(),q).then((()=>{void 0!==v?.expanded&&void 0!==t&&v.expanded!==t&&n(5,v.expanded=t,v)}))}return z("registerPlugin",(t=>{void 0===v?console.warn(`tpPane is undefined, failed to register plugin "${t.id}"`):w.includes(t.id)||(v?.registerPlugin(t),w.push(t.id))})),z("userCreatedPane",d),void 0!==s&&console.warn("<Panes> must not be nested"),g(m,i=new Gu({expanded:h,title:a}),i),i.on("fold",(()=>{void 0!==i.expanded&&h!==i.expanded&&n(0,h=i.expanded)})),v=i,z("parentStore",m),D((()=>{i.dispose()})),t.$$set=t=>{"title"in t&&n(1,a=t.title),"userExpandable"in t&&n(6,l=t.userExpandable),"expanded"in t&&n(0,h=t.expanded),"theme"in t&&n(2,p=t.theme),"scale"in t&&n(7,u=t.scale),"userCreatedPane"in t&&n(8,d=t.userCreatedPane),"tpPane"in t&&n(5,v=t.tpPane),"$$scope"in t&&n(9,o=t.$$scope)},t.$$.update=()=>{34&t.$$.dirty&&v&&void 0!==a&&n(5,v.title=a.length>0?a:" ",v),32&t.$$.dirty&&v?.element&&v?.element.classList.add("svelte-tweakpane-ui"),160&t.$$.dirty&&v&&function(t){if(v)if(1===t)v.element.style.removeProperty("transform-origin"),v.element.style.removeProperty("transform"),v.element.style.removeProperty("width");else{const e=Math.max(0,t);n(5,v.element.style.transformOrigin="0 0",v),n(5,v.element.style.transform=`scale(${e})`,v),n(5,v.element.style.width=100/e+"%",v)}}(u),96&t.$$.dirty&&v&&wo(l,v.element,"tp-rotv_b","tp-rotv_m"),36&t.$$.dirty&&v&&function(t,e){const n=Ae().documentElement;if(void 0===e)for(const e of Object.keys(no)){const n=ro(e);t.style.getPropertyValue(n).length>0&&t.style.removeProperty(n)}else for(const[i,s]of Object.entries(e)){const e=ro(i),r=so(s),o=no[i]||void 0,a=n.style.getPropertyValue(e)||void 0;void 0!==r&&(a&&r!==a||!a&&o&&r!==o)?t.style.setProperty(e,r):t.style.getPropertyValue(e).length>0&&t.style.removeProperty(e)}}(v.element,p),33&t.$$.dirty&&v&&b(h)},[h,a,p,m,f,v,l,u,d,o,r]}new gl("4.0.5");class nd extends ut{constructor(t){super(),pt(this,t,ed,td,a,{title:1,userExpandable:6,expanded:0,theme:2,scale:7,userCreatedPane:8,tpPane:5})}}function id(t){let e;const n=t[6].default,i=h(n,t,t[10],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||1024&s)&&d(i,n,t,t[10],e?u(n,t[10],s,null):v(t[10]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function sd(t){let e,i,s,r,o;const a=[{theme:t[3]},fo(t[5],"position")];function l(e){t[7](e)}function c(e){t[8](e)}let h={$$slots:{default:[id]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)h=n(h,a[t]);return void 0!==t[0]&&(h.expanded=t[0]),void 0!==t[1]&&(h.tpPane=t[1]),i=new nd({props:h}),T.push((()=>at(i,"expanded",l))),T.push((()=>at(i,"tpPane",c))),{c(){e=y("div"),lt(i.$$.fragment),k(e,"width",void 0===t[2]?null:`${t[2]}px`)},m(n,s){b(n,e,s),ct(i,e,null),t[9](e),o=!0},p(t,[n]){const o=40&n?rt(a,[8&n&&{theme:t[3]},32&n&&ot(fo(t[5],"position"))]):{};1024&n&&(o.$$scope={dirty:n,ctx:t}),!s&&1&n&&(s=!0,o.expanded=t[0],G((()=>s=!1))),!r&&2&n&&(r=!0,o.tpPane=t[1],G((()=>r=!1))),i.$set(o),4&n&&k(e,"width",void 0===t[2]?null:`${t[2]}px`)},i(t){o||(nt(i.$$.fragment,t),o=!0)},o(t){it(i.$$.fragment,t),o=!1},d(n){n&&_(e),ht(i),t[9](null)}}}function rd(t,e,i){const s=["expanded","width","tpPane","theme"];let r,o=f(e,s),{$$slots:a={},$$scope:l}=e,{expanded:c}=e,{width:h}=e,{tpPane:p}=e,{theme:u={baseBorderRadius:"0px",baseShadowColor:"hsla(0, 0%, 0%, 0)"}}=e;return j((()=>{if(p){const t=p.element.parentElement;r.append(p.element),t?.remove()}else console.warn("tpPane is undefined")})),t.$$set=t=>{e=n(n({},e),m(t)),i(5,o=f(e,s)),"expanded"in t&&i(0,c=t.expanded),"width"in t&&i(2,h=t.width),"tpPane"in t&&i(1,p=t.tpPane),"theme"in t&&i(3,u=t.theme),"$$scope"in t&&i(10,l=t.$$scope)},[c,p,h,u,r,o,a,function(t){c=t,i(0,c)},function(t){p=t,i(1,p)},function(t){T[t?"unshift":"push"]((()=>{r=t,i(4,r)}))},l]}class od extends ut{constructor(t){super(),pt(this,t,rd,sd,a,{expanded:0,width:2,tpPane:1,theme:3})}}function ad(t){let e,n;return e=new od({props:{theme:t[4],userCreatedPane:!1,$$slots:{default:[cd]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};16&n&&(i.theme=t[4]),262159&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function ld(t){let e,n,i,s;const r=[pd,hd],o=[];return e=0,n=o[0]=r[0](t),{c(){n.c(),i=P()},m(t,e){o[0].m(t,e),b(t,i,e),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[0].d(t)}}}function cd(t){let e,n,i,s,r,o;function a(e){t[11](e)}function l(e){t[12](e)}function c(e){t[13](e)}function h(e){t[14](e)}let p={};return void 0!==t[1]&&(p.disabled=t[1]),void 0!==t[0]&&(p.options=t[0]),void 0!==t[3]&&(p.plugin=t[3]),void 0!==t[2]&&(p.ref=t[2]),e=new vd({props:p}),T.push((()=>at(e,"disabled",a))),T.push((()=>at(e,"options",l))),T.push((()=>at(e,"plugin",c))),T.push((()=>at(e,"ref",h))),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),o=!0},p(t,o){const a={};!n&&2&o&&(n=!0,a.disabled=t[1],G((()=>n=!1))),!i&&1&o&&(i=!0,a.options=t[0],G((()=>i=!1))),!s&&8&o&&(s=!0,a.plugin=t[3],G((()=>s=!1))),!r&&4&o&&(r=!0,a.ref=t[2],G((()=>r=!1))),e.$set(a)},i(t){o||(nt(e.$$.fragment,t),o=!0)},o(t){it(e.$$.fragment,t),o=!1},d(t){ht(e,t)}}}function hd(t){let e,n;return e=new po({props:{keysAdd:["containerVerticalPadding"],theme:t[4]}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};16&n&&(i.theme=t[4]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function pd(t){let n;return{c(){n=y("div"),k(n,"display","none")},m(e,i){b(e,n,i),t[10](n)},p:e,i:e,o:e,d(e){e&&_(n),t[10](null)}}}function ud(t){let e,n,i,s;const r=[ld,ad],o=[];return e=function(t){return t[6]?0:1}(t),n=o[e]=r[e](t),{c(){n.c(),i=P()},m(t,n){o[e].m(t,n),b(t,i,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[e].d(t)}}}function dd(t,e,n){let i,{options:s}=e,{disabled:r=!1}=e,{theme:o}=e,{ref:a}=e,{plugin:l}=e;const h=B("registerPlugin"),p=B("parentStore");c(t,p,(t=>n(9,i=t)));const u=B("userCreatedPane");let d,v,m;return j((()=>{n(7,v=d?mo(d):0)})),D((()=>{m?.dispose()})),t.$$set=t=>{"options"in t&&n(0,s=t.options),"disabled"in t&&n(1,r=t.disabled),"theme"in t&&n(4,o=t.theme),"ref"in t&&n(2,a=t.ref),"plugin"in t&&n(3,l=t.plugin)},t.$$.update=()=>{258&t.$$.dirty&&m&&n(8,m.disabled=r,m),t.$$.dirty,641&t.$$.dirty&&s&&i&&void 0!==v&&(m&&m.dispose(),void 0!==l&&h(l),n(8,m=i.addBlade({index:v,...s,disabled:r})),n(2,a=m)),528&t.$$.dirty&&o&&i&&(u||!uo(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Blade> components for a theme prop.)")},[s,r,a,l,o,d,p,v,m,i,function(t){T[t?"unshift":"push"]((()=>{d=t,n(5,d)}))},function(t){r=t,n(1,r)},function(t){s=t,n(0,s)},function(t){l=t,n(3,l)},function(t){a=t,n(2,a)}]}class vd extends ut{constructor(t){super(),pt(this,t,dd,ud,a,{options:0,disabled:1,theme:4,ref:2,plugin:3})}}class md{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.emitter.on(t,(()=>{n(new ve(this))})),this}}class fd extends ve{constructor(t,e,n){super(t),this.cell=e,this.index=n}}class gd extends de{constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new kt;const e=this.controller.valueController;e.cellControllers.forEach(((t,n)=>{const i=new md(t);this.cellToApiMap_.set(t,i),t.emitter.on("click",(()=>{const t=n%e.size[0],s=Math.floor(n/e.size[0]);this.emitter_.emit("click",{event:new fd(this,i,[t,s])})}))}))}cell(t,e){const n=this.controller.valueController,i=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(i)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class wd{constructor(t,e){this.size=e.size;const[n,i]=this.size,s=[];for(let r=0;r<i;r++)for(let i=0;i<n;i++){const n=new sn(t,{props:At.fromObject(Object.assign({},e.cellConfig(i,r))),viewProps:kn.create()});s.push(n)}this.cellCs_=s,this.viewProps=kn.create(),this.viewProps.handleDispose((()=>{this.cellCs_.forEach((t=>{t.viewProps.set("disposed",!0)}))})),this.view=new $i(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{this.view.element.appendChild(t.view.element)}))}get cellControllers(){return this.cellCs_}}class bd extends Ge{constructor(t,e){const n=e.valueController,i=new Ue(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:i.view,viewProps:n.viewProps}),this.valueController=n,this.labelController=i}}an({id:"buttongrid",type:"blade",accept(t){const e=Ce(t,(t=>({cells:t.required.function,size:t.required.array(t.required.number),view:t.required.constant("buttongrid"),label:t.optional.string})));return e?{params:e}:null},controller:t=>new bd(t.document,{blade:t.blade,labelProps:At.fromObject({label:t.params.label}),valueController:new wd(t.document,{cellConfig:t.params.cells,size:t.params.size})}),api:t=>t.controller instanceof bd?new gd(t.controller):null});class _d extends de{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get value(){return this.controller.valueController.value.rawValue}set value(t){this.controller.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.controller.valueController.value.emitter.on(t,(t=>{n(new me(this,t.rawValue,t.options.last))})),this}}function yd(t,e,n){return t*(1-n)+e*n}function xd(t,e){let n=.25,i=.5,s=-1;for(let r=0;r<20;r++){const[r,o]=t.curve(i);if(i+=n*(r<e?1:-1),s=o,n*=.5,Math.abs(e-r)<.001)break}return s}class Cd{constructor(t=0,e=0,n=1,i=1){this.cache_=[],this.comps_=[t,e,n,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return!wt(t)&&(!!Array.isArray(t)&&("number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]))}static equals(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}curve(t){const e=yd(0,this.x1,t),n=yd(0,this.y1,t),i=yd(this.x1,this.x2,t),s=yd(this.y1,this.y2,t),r=yd(this.x2,1,t),o=yd(this.y2,1,t),a=yd(e,i,t),l=yd(n,s,t),c=yd(i,r,t),h=yd(s,o,t);return[yd(a,c,t),yd(l,h,t)]}y(t){if(0===this.cache_.length){const t=[];for(let e=0;e<100;e++)t.push(xd(this,ee(e,0,99,0,1)));this.cache_=t}return this.cache_[Math.round(ee(ie(t,0,1),0,1,0,99))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const Pd={toComponents:t=>t.toObject(),fromComponents:t=>new Cd(...t)};function Ed(t){const e=te(2);return`cubic-bezier(${t.toObject().map((t=>e(t))).join(", ")})`}const kd=[0,.5,.5,1];function $d(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new Cd(...kd);const n=[e[1],e[2],e[3],e[4]].reduce(((t,e)=>{if(!t)return null;const n=Number(e);return isNaN(n)?null:[...t,n]}),[]);return new Cd(...null!=n?n:kd)}const Vd=Ne("cbz");class Ld{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Vd()),e.viewProps.bindClassModifiers(this.element),e.foldable.bindExpandedClass(this.element,Vd(void 0,"expanded")),Ie(e.foldable,"completed",Je(this.element,Vd(void 0,"cpl")));const n=t.createElement("div");n.classList.add(Vd("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Vd("b")),e.viewProps.bindDisabled(i);const s=t.createElementNS(Ve,"svg");s.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(s),n.appendChild(i),this.buttonElement=i;const r=t.createElement("div");if(r.classList.add(Vd("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Vd("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Sd=Ne("cbzp");class Ad{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Sd()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Sd("g")),this.element.appendChild(n),this.graphElement=n;const i=t.createElement("div");i.classList.add(Sd("t")),this.element.appendChild(i),this.textElement=i}}function Md(t,e){const n=new MutationObserver((t=>{for(const i of t)"childList"===i.type&&i.addedNodes.forEach((t=>{t.contains(t)&&(e(),n.disconnect())}))})),i=t.ownerDocument;n.observe(i.body,{attributes:!0,childList:!0,subtree:!0})}const jd=Ne("cbzg");class Dd{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(jd()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(jd("p")),this.element.appendChild(n),this.previewElement=n;const i=t.createElementNS(Ve,"svg");i.classList.add(jd("g")),this.element.appendChild(i),this.svgElem_=i;const s=t.createElementNS(Ve,"path");s.classList.add(jd("u")),this.svgElem_.appendChild(s),this.guideElem_=s;const r=t.createElementNS(Ve,"polyline");r.classList.add(jd("l")),this.svgElem_.appendChild(r),this.lineElem_=r,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach((t=>{t.classList.add(jd("h")),this.element.appendChild(t)})),this.vectorElems_=[t.createElementNS(Ve,"line"),t.createElementNS(Ve,"line")],this.vectorElems_.forEach((t=>{t.classList.add(jd("v")),this.svgElem_.appendChild(t)})),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=e.selection,this.handleElems_.forEach(((t,e)=>{var n,i;Fe(this.sel_,(n=t=>t===e,i=Je(t,jd("h","sel")),t=>i(n(t))))})),Md(this.element,(()=>{this.refresh()}))}getVertMargin_(t){return.25*t}valueToPosition(t,e){const{clientWidth:n,clientHeight:i}=this.element,s=this.getVertMargin_(i);return{x:ee(t,0,1,0,n),y:ee(e,0,1,i-s,s)}}positionToValue(t,e){const n=this.element.getBoundingClientRect(),i=n.width,s=n.height,r=this.getVertMargin_(s);return{x:ie(ee(t,0,i,0,1),0,1),y:ee(e,s-r,r,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map((t=>{const e=this.valueToPosition(0,t),n=this.valueToPosition(1,t);return[`M ${e.x},${e.y}`,`L ${n.x},${n.y}`].join(" ")})).join(" "));const t=this.value_.rawValue,e=[];let n=0;for(;;){const i=this.valueToPosition(...t.curve(n));if(e.push([i.x,i.y].join(",")),n>=1)break;n=Math.min(n+.05,1)}this.lineElem_.setAttributeNS(null,"points",e.join(" "));const i=t.toObject();[0,1].forEach((t=>{const e=this.valueToPosition(t,t),n=this.valueToPosition(i[2*t],i[2*t+1]),s=this.vectorElems_[t];s.setAttributeNS(null,"x1",String(e.x)),s.setAttributeNS(null,"y1",String(e.y)),s.setAttributeNS(null,"x2",String(n.x)),s.setAttributeNS(null,"y2",String(n.y));const r=this.handleElems_[t];r.style.left=`${n.x}px`,r.style.top=`${n.y}px`}))}onValueChange_(){this.refresh()}}const Od=Ne("cbzprv");class zd{constructor(t,e){this.stopped_=!0,this.startTime_=-1,this.requestId_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Od()),e.viewProps.bindClassModifiers(this.element);const n=t.createElementNS(Ve,"svg");n.classList.add(Od("g")),this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(Ve,"path");i.classList.add(Od("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const s=t.createElement("div");s.classList.add(Od("m")),this.element.appendChild(s),this.markerElem_=s,this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.viewProps.handleDispose(this.onDispose_),Md(this.element,(()=>{this.refresh()}))}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Od("m","a")),this.startTime_=(new Date).getTime()+400,this.stopped_=!1,this.requestId_=requestAnimationFrame(this.onTimer_)}stop(){cancelAnimationFrame(this.requestId_),this.stopped_=!0,this.markerElem_.classList.remove(Od("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const e=this.value_.rawValue.y(ie(t,0,1));this.markerElem_.style.left=100*e+"%"}refresh(){const{clientWidth:t,clientHeight:e}=this.svgElem_,n=[],i=this.value_.rawValue;for(let s=0;s<24;s++){const r=ee(s,0,23,0,1),o=ee(i.y(r),0,1,0,t);n.push(`M ${o},0 v${e}`)}this.ticksElem_.setAttributeNS(null,"d",n.join(" "))}onTimer_(){if(null===this.startTime_)return;const t=(new Date).getTime()-this.startTime_,e=t/1e3;this.updateMarker_(e),t>1400&&this.stop(),this.stopped_||(this.requestId_=requestAnimationFrame(this.onTimer_))}onValueChange_(){this.refresh(),this.play()}}function Bd(t,e,n,i){const s=n-t,r=i-e;return Math.sqrt(s*s+r*r)}class Fd{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=e.keyScale,this.value=e.value,this.sel_=St(0),this.viewProps=e.viewProps,this.view=new Dd(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new zd(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",(t=>{t.stopImmediatePropagation(),t.preventDefault(),this.prevView_.play()})),this.view.previewElement.appendChild(this.prevView_.element);const n=new mi(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,e,n){const i=this.sel_.rawValue,s=this.value.rawValue.toObject(),r=this.view.positionToValue(t.x,t.y),o=e?function(t,e,n,i){const s=Bd(t,e,n,i),r=Math.atan2(i-e,n-t),o=Math.round(r/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(o)*s,y:e+Math.sin(o)*s}}(i,i,r.x,r.y):r;s[2*i]=o.x,s[2*i+1]=o.y,this.value.setRawValue(new Cd(...s),n)}onPointerDown_(t){const e=t.data;if(!e.point)return;const n=this.value.rawValue,i=this.view.valueToPosition(n.x1,n.y1),s=Bd(e.point.x,e.point.y,i.x,i.y),r=this.view.valueToPosition(n.x2,n.y2),o=Bd(e.point.x,e.point.y,r.x,r.y);this.sel_.rawValue=s<=o?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){di(t.key)&&t.preventDefault();const e=this.sel_.rawValue,n=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;n[2*e]+=hi(i,ui(t)),n[2*e+1]+=hi(i,pi(t)),this.value.setRawValue(new Cd(...n),{forceEmit:!1,last:!1})}onKeyUp_(t){di(t.key)&&t.preventDefault();const e=this.keyScale_.rawValue,n=hi(e,ui(t)),i=hi(e,pi(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Id{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Ad(t,{viewProps:this.viewProps}),this.gc_=new Fd(t,{keyScale:e.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const n=Object.assign(Object.assign({},e.axis),{constraint:new jt({max:1,min:0})}),i=Object.assign(Object.assign({},e.axis),{constraint:void 0});this.tc_=new br(t,{assembly:Pd,axes:[n,i,n,i],parser:Qt,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map((t=>t.inputElement))]}refresh(){this.gc_.refresh()}}class Td{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=gn.create(e.expanded),this.view=new Ld(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new ni(t,{parser:$d,props:At.fromObject({formatter:Ed}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_="popup"===e.pickerLayout?new Jn(t,{viewProps:this.viewProps}):null;const n=new Id(t,{axis:e.axis,value:this.value,viewProps:this.viewProps});n.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Fe(this.popC_.shows,(t=>{t&&n.refresh()})),ci({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),bn(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const e=t.relatedTarget;e&&this.popC_.view.element.contains(e)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=Be(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Se(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&"Escape"===t.key&&(this.popC_.shows.rawValue=!1)}}an({id:"cubicbezier",type:"blade",accept(t){const e=Ce(t,(t=>({value:t.required.array(t.required.number),view:t.required.constant("cubicbezier"),expanded:t.optional.boolean,label:t.optional.string,picker:t.optional.custom((t=>"inline"===t||"popup"===t?t:void 0))})));return e?{params:e}:null},controller(t){var e,n;const i=St(new Cd(...t.params.value),{constraint:new fr({assembly:Pd,components:[0,1,2,3].map((t=>t%2==0?new jt({min:0,max:1}):void 0))}),equals:Cd.equals}),s=new Td(t.document,{axis:{textProps:At.fromObject({keyScale:.1,pointerScale:.01,formatter:te(2)})},expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:i,viewProps:t.viewProps});return new Ye(t.document,{blade:t.blade,props:At.fromObject({label:t.params.label}),value:i,valueController:s})},api:t=>t.controller instanceof Ye&&t.controller.valueController instanceof Td?new _d(t.controller):null});class Nd extends de{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(t,e){const n=e.bind(this);return this.controller.valueController.ticker.emitter.on(t,(()=>{n(new ve(this))})),this}}class Rd{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(0===this.timestamps_.length)return null;const e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}compactTimestamps_(){if(this.timestamps_.length<=20)return;const t=this.timestamps_.length-20;this.timestamps_.splice(0,t);const e=this.timestamps_[0].frameCount;this.timestamps_.forEach((t=>{t.frameCount-=e})),this.frameCount_-=e}end(t){if(null===this.start_)return;const e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}}const qd=Ne("fps");class Ud{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(qd()),e.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(qd("g")),this.element.appendChild(this.graphElement);const n=t.createElement("div");n.classList.add(qd("l")),this.element.appendChild(n);const i=t.createElement("span");i.classList.add(qd("v")),i.textContent="--",n.appendChild(i),this.valueElement=i;const s=t.createElement("span");s.classList.add(qd("u")),s.textContent="FPS",n.appendChild(s)}}class Kd{constructor(t,e){this.stopwatch_=new Rd,this.onTick_=this.onTick_.bind(this),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=e.props,this.value_=e.value,this.viewProps=e.viewProps,this.view=new Ud(t,{viewProps:this.viewProps}),this.graphC_=new Jr(t,{formatter:te(0),props:this.props,rows:e.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose((()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()}))}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.fps;if(null!==t){const e=this.value_.rawValue;this.value_.rawValue=function(t,e){const n=[...Ze(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Xe(n,t.length),n}(e,t),this.view.valueElement.textContent=t.toFixed(0)}}}class Hd extends Ge{constructor(t,e){const n=e.valueController,i=new Ue(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:i.view,viewProps:n.viewProps}),this.valueController=n,this.labelController=i}}function Gd(t,e){return 0===e?new Tn:new Nn(t,null!=e?e:qr.defaultInterval)}an({id:"fpsgraph",type:"blade",accept(t){const e=Ce(t,(t=>({view:t.required.constant("fpsgraph"),interval:t.optional.number,label:t.optional.string,rows:t.optional.number,max:t.optional.number,min:t.optional.number})));return e?{params:e}:null},controller(t){var e,n,i,s;const r=null!==(e=t.params.interval)&&void 0!==e?e:500;return new Hd(t.document,{blade:t.blade,labelProps:At.fromObject({label:t.params.label}),valueController:new Kd(t.document,{props:At.fromObject({max:null!==(n=t.params.max)&&void 0!==n?n:90,min:null!==(i=t.params.min)&&void 0!==i?i:0}),rows:null!==(s=t.params.rows)&&void 0!==s?s:2,ticker:Gd(t.document,r),value:St(We(80)),viewProps:t.viewProps})})},api:t=>t.controller instanceof Hd?new Nd(t.controller):null});class Yd{constructor(t,e){this.min=t,this.max=e}static isObject(t){if("object"!=typeof t||null===t)return!1;const e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Xd={fromComponents:t=>new Yd(t[0],t[1]),toComponents:t=>[t.min,t.max]};class Wd{constructor(t){this.edge=t}constrain(t){var e,n,i,s,r,o,a,l;if(t.min<=t.max)return new Yd(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(s=null===(i=this.edge)||void 0===i?void 0:i.constrain(t.max))&&void 0!==s?s:t.max);const c=(t.min+t.max)/2;return new Yd(null!==(o=null===(r=this.edge)||void 0===r?void 0:r.constrain(c))&&void 0!==o?o:c,null!==(l=null===(a=this.edge)||void 0===a?void 0:a.constrain(c))&&void 0!==l?l:c)}}const Zd=Ne("rsltxt");class Qd{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(Zd());const n=t.createElement("div");n.classList.add(Zd("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Zd("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const Jd=Ne("rsl");class tv{constructor(t,e){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=e.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Jd()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_);const n=t.createElement("div");n.classList.add(Jd("t")),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Jd("b")),n.appendChild(i),this.barElement=i;const s=["min","max"].map((e=>{const i=t.createElement("div");return i.classList.add(Jd("k"),Jd("k",e)),n.appendChild(i),i}));this.knobElements=[s[0],s[1]],this.update_()}valueToX_(t){return 100*ie(ee(t,this.sliderProps_.get("min"),this.sliderProps_.get("max"),0,1),0,1)}update_(){const t=this.value_.rawValue;0===t.length?this.element.classList.add(Jd(void 0,"zero")):this.element.classList.remove(Jd(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=100-e[1]+"%",this.knobElements.forEach(((t,n)=>{t.style.left=`${e[n]}%`}))}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class ev{constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=e.sliderProps,this.viewProps=e.viewProps,this.value=e.value,this.view=new tv(t,{sliderProps:this.sliderProps,value:this.value,viewProps:e.viewProps});const n=new mi(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}ofs_(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){if(!t.point)return null;return ee((t.point.x+this.ofs_())/t.bounds.width,0,1,this.sliderProps.get("min"),this.sliderProps.get("max"))}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,i=this.sliderProps.get("min"),s=this.sliderProps.get("max"),r=ee(n.min,i,s,0,1),o=ee(n.max,i,s,0,1);Math.abs(o-e)<=.025?this.grabbing_="max":Math.abs(r-e)<=.025?this.grabbing_="min":e>=r&&e<=o?(this.grabbing_="length",this.grabOffset_=ee(e-r,0,1,0,s-i)):e<r?(this.grabbing_="min",this.onPointerMove_(t)):e>o&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,e){const n=this.valueFromData_(t);if(null===n)return;const i=this.sliderProps.get("min"),s=this.sliderProps.get("max");if("min"===this.grabbing_)this.value.setRawValue(new Yd(n,this.value.rawValue.max),e);else if("max"===this.grabbing_)this.value.setRawValue(new Yd(this.value.rawValue.min,n),e);else if("length"===this.grabbing_){const t=this.value.rawValue.length;let r=n-this.grabOffset_,o=r+t;r<i?(r=i,o=i+t):o>s&&(r=s-t,o=s),this.value.setRawValue(new Yd(r,o),e)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class nv{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new ev(t,e);const n={constraint:e.constraint,textProps:e.textProps};this.tc_=new br(t,{assembly:Xd,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new Qd(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function iv(t){return Yd.isObject(t)?new Yd(t.min,t.max):new Yd(0,0)}function sv(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}an({id:"input-interval",type:"input",accept:(t,e)=>{if(!Yd.isObject(t))return null;const n=Ce(e,(t=>Object.assign(Object.assign({},pe(t)),{readonly:t.optional.constant(!1)})));return n?{initialValue:new Yd(t.min,t.max),params:n}:null},binding:{reader:t=>iv,constraint:t=>function(t){const e=[],n=ce(t);n&&e.push(n);const i=le(t);return i&&e.push(i),new Wd(new Rn(e))}(t.params),equals:Yd.equals,writer:t=>sv},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof Wd))throw Pt.shouldNeverHappen();const i=(e.rawValue.min+e.rawValue.max)/2,s=At.fromObject(he(t.params,i)),r=n.edge&&qn(n.edge,Mt);if(r)return new nv(t.document,{constraint:n.edge,parser:Qt,sliderProps:new At({keyScale:s.value("keyScale"),max:r.values.value("max"),min:r.values.value("min")}),textProps:s,value:e,viewProps:t.viewProps});const o={constraint:n.edge,textProps:s};return new br(t.document,{assembly:Xd,axes:[o,o],parser:Qt,value:e,viewProps:t.viewProps})}});class rv{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}}class ov extends me{constructor(t,e,n,i,s){super(t,i,s),this.cell=e,this.index=n}}class av extends de{constructor(t){super(t),this.cellToApiMap_=new Map;this.controller.valueController.cellControllers.forEach((t=>{const e=new rv(t);this.cellToApiMap_.set(t,e)}))}get value(){return this.controller.value}cell(t,e){const n=this.controller.valueController,i=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(i)}on(t,e){const n=e.bind(this);this.controller.value.emitter.on(t,(t=>{const e=this.controller.valueController,i=e.findCellByValue(t.rawValue);if(!i)return;const s=this.cellToApiMap_.get(i);if(!s)return;const r=e.cellControllers.indexOf(i);n(new ov(this,s,[r%e.size[0],Math.floor(r/e.size[0])],t.rawValue))}))}}const lv=Ne("rad");class cv{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(lv()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(lv("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(lv("i")),i.name=e.name,i.type="radio",e.viewProps.bindDisabled(i),n.appendChild(i),this.inputElement=i;const s=t.createElement("div");s.classList.add(lv("b")),n.appendChild(s);const r=t.createElement("div");r.classList.add(lv("t")),s.appendChild(r),Ie(e.props,"title",(t=>{r.textContent=t}))}}class hv{constructor(t,e){this.props=e.props,this.viewProps=e.viewProps,this.view=new cv(t,{name:e.name,props:this.props,viewProps:this.viewProps})}}class pv{constructor(t,e){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=e.size;const[n,i]=this.size;for(let s=0;s<i;s++)for(let i=0;i<n;i++){const n=new hv(t,{name:e.groupName,props:At.fromObject(Object.assign({},e.cellConfig(i,s))),viewProps:kn.create()});this.cellCs_.push(n),this.cellValues_.push(e.cellConfig(i,s).value)}this.value=e.value,Fe(this.value,(t=>{const e=this.findCellByValue(t);e&&(e.view.inputElement.checked=!0)})),this.viewProps=kn.create(),this.view=new $i(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{t.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(t.view.element)}))}get cellControllers(){return this.cellCs_}findCellByValue(t){const e=this.cellValues_.findIndex((e=>e===t));return e<0?null:this.cellCs_[e]}onCellInputChange_(t){const e=t.currentTarget,n=this.cellCs_.findIndex((t=>t.view.inputElement===e));n<0||(this.value.rawValue=this.cellValues_[n])}}function uv(t){return an({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const i=Ce(n,(t=>({cells:t.required.function,groupName:t.required.string,size:t.required.array(t.required.number),view:t.required.constant("radiogrid")})));return i?{initialValue:e,params:i}:null},binding:t.binding,controller:t=>new pv(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})})}an({id:"radiogrid",type:"blade",accept(t){const e=Ce(t,(t=>({cells:t.required.function,groupName:t.required.string,size:t.required.array(t.required.number),value:t.required.raw,view:t.required.constant("radiogrid"),label:t.optional.string})));return e?{params:e}:null},controller(t){const e=St(t.params.value);return new Ye(t.document,{blade:t.blade,props:At.fromObject({label:t.params.label}),value:e,valueController:new pv(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api:t=>t.controller instanceof Ye&&t.controller.valueController instanceof pv?new av(t.controller):null}),uv({isType:t=>"number"==typeof t,binding:{reader:t=>Jt,writer:t=>Mi}}),uv({isType:t=>"string"==typeof t,binding:{reader:t=>ai,writer:t=>Mi}}),uv({isType:t=>"boolean"==typeof t,binding:{reader:t=>ii,writer:t=>Mi}});var dv=Function.prototype.toString,vv=Object.create,mv=Object.prototype.toString,fv=function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(t){return!!~this._keys.indexOf(t)},t.prototype.get=function(t){return this._values[this._keys.indexOf(t)]},t.prototype.set=function(t,e){this._keys.push(t),this._values.push(e)},t}();var gv="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new fv};function wv(t){if(!t)return vv(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:vv(t);if(e&&~dv.call(e).indexOf("[native code]"))try{return new e}catch(t){}return vv(t)}var bv="g"===/test/g.flags?function(t){return t.flags}:function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function _v(t){var e=mv.call(t);return e.substring(8,e.length-1)}var yv="undefined"!=typeof Symbol?function(t){return t[Symbol.toStringTag]||_v(t)}:_v,xv=Object.defineProperty,Cv=Object.getOwnPropertyDescriptor,Pv=Object.getOwnPropertyNames,Ev=Object.getOwnPropertySymbols,kv=Object.prototype,$v=kv.hasOwnProperty,Vv=kv.propertyIsEnumerable,Lv="function"==typeof Ev;var Sv=Lv?function(t){return Pv(t).concat(Ev(t))}:Pv;function Av(t,e,n){for(var i=Sv(t),s=0,r=i.length,o=void 0,a=void 0;s<r;++s)if("callee"!==(o=i[s])&&"caller"!==o)if(a=Cv(t,o)){a.get||a.set||(a.value=n.copier(a.value,n));try{xv(e,o,a)}catch(t){e[o]=a.value}}else e[o]=n.copier(t[o],n);return e}function Mv(t,e){return t.slice(0)}function jv(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach((function(t,i){n.set(i,e.copier(t,e))})),n}var Dv=Lv?function(t,e){var n=wv(e.prototype);for(var i in e.cache.set(t,n),t)$v.call(t,i)&&(n[i]=e.copier(t[i],e));for(var s=Ev(t),r=0,o=s.length,a=void 0;r<o;++r)a=s[r],Vv.call(t,a)&&(n[a]=e.copier(t[a],e));return n}:function(t,e){var n=wv(e.prototype);for(var i in e.cache.set(t,n),t)$v.call(t,i)&&(n[i]=e.copier(t[i],e));return n};function Ov(t,e){return new e.Constructor(t.valueOf())}function zv(t,e){return t}function Bv(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach((function(t){n.add(e.copier(t,e))})),n}var Fv=Array.isArray,Iv=Object.assign,Tv=Object.getPrototypeOf||function(t){return t.__proto__},Nv={array:function(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var i=0,s=t.length;i<s;++i)n[i]=e.copier(t[i],e);return n},arrayBuffer:Mv,blob:function(t,e){return t.slice(0,t.size,t.type)},dataView:function(t,e){return new e.Constructor(Mv(t.buffer))},date:function(t,e){return new e.Constructor(t.getTime())},error:zv,map:jv,object:Dv,regExp:function(t,e){var n=new e.Constructor(t.source,bv(t));return n.lastIndex=t.lastIndex,n},set:Bv},Rv=Iv({},Nv,{array:function(t,e){var n=new e.Constructor;return e.cache.set(t,n),Av(t,n,e)},map:function(t,e){return Av(t,jv(t,e),e)},object:function(t,e){var n=wv(e.prototype);return e.cache.set(t,n),Av(t,n,e)},set:function(t,e){return Av(t,Bv(t,e),e)}});function qv(t){var e=function(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:Ov,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:Ov,Object:t.object,Promise:zv,RegExp:t.regExp,Set:t.set,String:Ov,WeakMap:zv,WeakSet:zv,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}(Iv({},Nv,t)),n=e.Array,i=e.Object;function s(t,s){if(s.prototype=s.Constructor=void 0,!t||"object"!=typeof t)return t;if(s.cache.has(t))return s.cache.get(t);if(s.prototype=Tv(t),s.Constructor=s.prototype&&s.prototype.constructor,!s.Constructor||s.Constructor===Object)return i(t,s);if(Fv(t))return n(t,s);var r=e[yv(t)];return r?r(t,s):"function"==typeof t.then?t:i(t,s)}return function(t){return s(t,{Constructor:void 0,cache:gv(),copier:s,prototype:void 0})}}qv(Iv({},Rv,{}));var Uv=qv({}),Kv=Object.getOwnPropertyNames,Hv=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty;function Yv(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function Xv(t){return function(e,n,i){if(!e||!n||"object"!=typeof e||"object"!=typeof n)return t(e,n,i);var s=i.cache,r=s.get(e),o=s.get(n);if(r&&o)return r===n&&o===e;s.set(e,n),s.set(n,e);var a=t(e,n,i);return s.delete(e),s.delete(n),a}}function Wv(t){return Kv(t).concat(Hv(t))}var Zv=Object.hasOwn||function(t,e){return Gv.call(t,e)};function Qv(t,e){return t===e||!t&&!e&&t!=t&&e!=e}var Jv=Object.getOwnPropertyDescriptor,tm=Object.keys;function em(t,e,n){var i=t.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function nm(t,e){return Qv(t.getTime(),e.getTime())}function im(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function sm(t,e){return t===e}function rm(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var s,r,o=new Array(i),a=t.entries(),l=0;(s=a.next())&&!s.done;){for(var c=e.entries(),h=!1,p=0;(r=c.next())&&!r.done;)if(o[p])p++;else{var u=s.value,d=r.value;if(n.equals(u[0],d[0],l,p,t,e,n)&&n.equals(u[1],d[1],u[0],d[0],t,e,n)){h=o[p]=!0;break}p++}if(!h)return!1;l++}return!0}var om=Qv;function am(t,e,n){var i=tm(t),s=i.length;if(tm(e).length!==s)return!1;for(;s-- >0;)if(!vm(t,e,n,i[s]))return!1;return!0}function lm(t,e,n){var i,s,r,o=Wv(t),a=o.length;if(Wv(e).length!==a)return!1;for(;a-- >0;){if(!vm(t,e,n,i=o[a]))return!1;if(s=Jv(t,i),r=Jv(e,i),(s||r)&&(!s||!r||s.configurable!==r.configurable||s.enumerable!==r.enumerable||s.writable!==r.writable))return!1}return!0}function cm(t,e){return Qv(t.valueOf(),e.valueOf())}function hm(t,e){return t.source===e.source&&t.flags===e.flags}function pm(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var s,r,o=new Array(i),a=t.values();(s=a.next())&&!s.done;){for(var l=e.values(),c=!1,h=0;(r=l.next())&&!r.done;){if(!o[h]&&n.equals(s.value,r.value,s.value,r.value,t,e,n)){c=o[h]=!0;break}h++}if(!c)return!1}return!0}function um(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function dm(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function vm(t,e,n,i){return!("_owner"!==i&&"__o"!==i&&"__v"!==i||!t.$$typeof&&!e.$$typeof)||Zv(e,i)&&n.equals(t[i],e[i],i,i,t,e,n)}var mm=Array.isArray,fm="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,gm=Object.assign,wm=Object.prototype.toString.call.bind(Object.prototype.toString);_m(),_m({strict:!0}),_m({circular:!0}),_m({circular:!0,strict:!0});var bm=_m({createInternalComparator:function(){return Qv}});function _m(t){void 0===t&&(t={});var e,n=t.circular,i=void 0!==n&&n,s=t.createInternalComparator,r=t.createState,o=t.strict,a=void 0!==o&&o,l=function(t){var e=t.circular,n=t.createCustomConfig,i=t.strict,s={areArraysEqual:i?lm:em,areDatesEqual:nm,areErrorsEqual:im,areFunctionsEqual:sm,areMapsEqual:i?Yv(rm,lm):rm,areNumbersEqual:om,areObjectsEqual:i?lm:am,arePrimitiveWrappersEqual:cm,areRegExpsEqual:hm,areSetsEqual:i?Yv(pm,lm):pm,areTypedArraysEqual:i?lm:um,areUrlsEqual:dm};if(n&&(s=gm({},s,n(s))),e){var r=Xv(s.areArraysEqual),o=Xv(s.areMapsEqual),a=Xv(s.areObjectsEqual),l=Xv(s.areSetsEqual);s=gm({},s,{areArraysEqual:r,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}(t),c=function(t){var e=t.areArraysEqual,n=t.areDatesEqual,i=t.areErrorsEqual,s=t.areFunctionsEqual,r=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,h=t.areSetsEqual,p=t.areTypedArraysEqual,u=t.areUrlsEqual;return function(t,d,v){if(t===d)return!0;if(null==t||null==d)return!1;var m=typeof t;if(m!==typeof d)return!1;if("object"!==m)return"number"===m?o(t,d,v):"function"===m&&s(t,d,v);var f=t.constructor;if(f!==d.constructor)return!1;if(f===Object)return a(t,d,v);if(mm(t))return e(t,d,v);if(null!=fm&&fm(t))return p(t,d,v);if(f===Date)return n(t,d,v);if(f===RegExp)return c(t,d,v);if(f===Map)return r(t,d,v);if(f===Set)return h(t,d,v);var g=wm(t);return"[object Date]"===g?n(t,d,v):"[object RegExp]"===g?c(t,d,v):"[object Map]"===g?r(t,d,v):"[object Set]"===g?h(t,d,v):"[object Object]"===g?"function"!=typeof t.then&&"function"!=typeof d.then&&a(t,d,v):"[object URL]"===g?u(t,d,v):"[object Error]"===g?i(t,d,v):"[object Arguments]"===g?a(t,d,v):("[object Boolean]"===g||"[object Number]"===g||"[object String]"===g)&&l(t,d,v)}}(l);return function(t){var e=t.circular,n=t.comparator,i=t.createState,s=t.equals,r=t.strict;if(i)return function(t,o){var a=i(),l=a.cache,c=void 0===l?e?new WeakMap:void 0:l,h=a.meta;return n(t,o,{cache:c,equals:s,meta:h,strict:r})};if(e)return function(t,e){return n(t,e,{cache:new WeakMap,equals:s,meta:void 0,strict:r})};var o={cache:void 0,equals:s,meta:void 0,strict:r};return function(t,e){return n(t,e,o)}}({circular:i,comparator:c,createState:r,equals:s?s(c):(e=c,function(t,n,i,s,r,o,a){return e(t,n,a)}),strict:a})}function ym(t){let e,n;return e=new od({props:{theme:t[7],userCreatedPane:!1,$$slots:{default:[Cm]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};128&n[0]&&(i.theme=t[7]),127&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function xm(t){let e,n,i,s;const r=[Em,Pm],o=[];return e=0,n=o[0]=r[0](t),{c(){n.c(),i=P()},m(t,e){o[0].m(t,e),b(t,i,e),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[0].d(t)}}}function Cm(t){let e,n,i,s,r,o,a,l,c;function h(e){t[14](e)}function p(e){t[15](e)}function u(e){t[16](e)}function d(e){t[17](e)}function v(e){t[18](e)}function m(e){t[19](e)}function f(e){t[20](e)}let g={};return void 0!==t[1]&&(g.disabled=t[1]),void 0!==t[5]&&(g.key=t[5]),void 0!==t[2]&&(g.label=t[2]),void 0!==t[0]&&(g.object=t[0]),void 0!==t[3]&&(g.options=t[3]),void 0!==t[6]&&(g.plugin=t[6]),void 0!==t[4]&&(g.ref=t[4]),e=new Vm({props:g}),T.push((()=>at(e,"disabled",h))),T.push((()=>at(e,"key",p))),T.push((()=>at(e,"label",u))),T.push((()=>at(e,"object",d))),T.push((()=>at(e,"options",v))),T.push((()=>at(e,"plugin",m))),T.push((()=>at(e,"ref",f))),e.$on("change",t[21]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),c=!0},p(t,c){const h={};!n&&2&c[0]&&(n=!0,h.disabled=t[1],G((()=>n=!1))),!i&&32&c[0]&&(i=!0,h.key=t[5],G((()=>i=!1))),!s&&4&c[0]&&(s=!0,h.label=t[2],G((()=>s=!1))),!r&&1&c[0]&&(r=!0,h.object=t[0],G((()=>r=!1))),!o&&8&c[0]&&(o=!0,h.options=t[3],G((()=>o=!1))),!a&&64&c[0]&&(a=!0,h.plugin=t[6],G((()=>a=!1))),!l&&16&c[0]&&(l=!0,h.ref=t[4],G((()=>l=!1))),e.$set(h)},i(t){c||(nt(e.$$.fragment,t),c=!0)},o(t){it(e.$$.fragment,t),c=!1},d(t){ht(e,t)}}}function Pm(t){let e,n;return e=new po({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:t[7]}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};128&n[0]&&(i.theme=t[7]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Em(t){let n;return{c(){n=y("div"),k(n,"display","none")},m(e,i){b(e,n,i),t[13](n)},p:e,i:e,o:e,d(e){e&&_(n),t[13](null)}}}function km(t){let e,n,i,s;const r=[xm,ym],o=[];return e=function(t){return t[9]?0:1}(t),n=o[e]=r[e](t),{c(){n.c(),i=P()},m(t,n){o[e].m(t,n),b(t,i,n),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[e].d(t)}}}function $m(t,e,n){let i,{object:s}=e,{key:r}=e,{disabled:o=!1}=e,{label:a}=e,{options:l}=e,{theme:h}=e,{ref:p}=e,{plugin:u}=e;const d=B("registerPlugin"),v=B("parentStore");c(t,v,(t=>n(12,i=t)));const m=B("userCreatedPane");let f,g,w;function b(){f&&f.dispose(),void 0!==u&&d(u),n(10,f=i.addBinding(s,r,{index:w,label:a,...l,disabled:o})),n(4,p=f),f.on("change",E)}j((()=>{n(11,w=g?mo(g):0)})),D((()=>{f?.dispose()}));const _=O();function y(t){if(t instanceof File)return new File([t],t.name,{lastModified:t.lastModified,type:t.type});if(t instanceof HTMLImageElement){const e=new Image;return e.src=t.src,e}return Uv(t)}let x=s,C=y(s[r]),P=!1;function E(){P=!0,n(0,s[r]=y(s[r]),s)}return t.$$set=t=>{"object"in t&&n(0,s=t.object),"key"in t&&n(5,r=t.key),"disabled"in t&&n(1,o=t.disabled),"label"in t&&n(2,a=t.label),"options"in t&&n(3,l=t.options),"theme"in t&&n(7,h=t.theme),"ref"in t&&n(4,p=t.ref),"plugin"in t&&n(6,u=t.plugin)},t.$$.update=()=>{var e;1026&t.$$.dirty[0]&&void 0!==f&&n(10,f.disabled=o,f),1028&t.$$.dirty[0]&&void 0!==f&&n(10,f.label=a,f),t.$$.dirty[0],6152&t.$$.dirty[0]&&void 0!==i&&void 0!==w&&b(),4097&t.$$.dirty[0]&&void 0!==i&&(x!==(e=s)&&(P=!1),bm(e[r],C)||(C=y(e[r]),_("change",{value:y(e[r]),origin:P?"internal":"external"}),!P&&f&&(f.off("change",E),f.refresh(),f.on("change",E))),P=!1,x!==e&&(x=e,b())),4224&t.$$.dirty[0]&&h&&void 0!==i&&(m||!uo(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)")},[s,o,a,l,p,r,u,h,g,v,f,w,i,function(t){T[t?"unshift":"push"]((()=>{g=t,n(8,g)}))},function(t){o=t,n(1,o)},function(t){r=t,n(5,r)},function(t){a=t,n(2,a)},function(t){s=t,n(0,s)},function(t){l=t,n(3,l)},function(t){u=t,n(6,u)},function(t){p=t,n(4,p)},function(e){F.call(this,t,e)}]}_m({strict:!0,createInternalComparator:function(){return Qv}}),_m({circular:!0,createInternalComparator:function(){return Qv}}),_m({circular:!0,createInternalComparator:function(){return Qv},strict:!0});class Vm extends ut{constructor(t){super(),pt(this,t,$m,km,a,{object:0,key:5,disabled:1,label:2,options:3,theme:7,ref:4,plugin:6},null,[-1,-1])}}function Lm(t){let e,i,s,r;const o=[{key:t[3]},{options:t[1]},t[4]];function a(e){t[6](e)}function l(e){t[7](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[2]&&(c.object=t[2]),void 0!==t[0]&&(c.ref=t[0]),e=new Vm({props:c}),T.push((()=>at(e,"object",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[8]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=26&n?rt(o,[8&n&&{key:t[3]},2&n&&{options:t[1]},16&n&&ot(t[4])]):{};!i&&4&n&&(i=!0,r.object=t[2],G((()=>i=!1))),!s&&1&n&&(s=!0,r.ref=t[0],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function Sm(t,e,i){let s;const r=["value","ref","options"];let o=f(e,r),{value:a}=e,{ref:l}=e,{options:c}=e;const h=Symbol("key");return t.$$set=t=>{e=n(n({},e),m(t)),i(4,o=f(e,r)),"value"in t&&i(5,a=t.value),"ref"in t&&i(0,l=t.ref),"options"in t&&i(1,c=t.options)},t.$$.update=()=>{4&t.$$.dirty&&i(5,a=s[h]),32&t.$$.dirty&&(bm(a,s[h])||i(2,s[h]=a,s))},i(2,s={[h]:a}),[l,c,s,h,o,a,function(t){s=t,i(2,s)},function(t){l=t,i(0,l)},function(e){F.call(this,t,e)}]}class Am extends ut{constructor(t){super(),pt(this,t,Sm,Lm,a,{value:5,ref:0,options:1})}}function Mm(t){let e,i,s,r;const o=[{options:t[2]},t[3]];function a(e){t[5](e)}function l(e){t[6](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[1]&&(c.value=t[1]),void 0!==t[0]&&(c.ref=t[0]),e=new Am({props:c}),T.push((()=>at(e,"value",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[7]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=12&n?rt(o,[4&n&&{options:t[2]},8&n&&ot(t[3])]):{};!i&&2&n&&(i=!0,r.value=t[1],G((()=>i=!1))),!s&&1&n&&(s=!0,r.ref=t[0],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function jm(t,e,i){const s=["options","ref","value"];let r,o=f(e,s),{options:a}=e,{ref:l}=e,{value:c}=e;return t.$$set=t=>{e=n(n({},e),m(t)),i(3,o=f(e,s)),"options"in t&&i(4,a=t.options),"ref"in t&&i(0,l=t.ref),"value"in t&&i(1,c=t.value)},t.$$.update=()=>{16&t.$$.dirty&&i(2,r={...a,readonly:!1})},[l,c,r,o,a,function(t){c=t,i(1,c)},function(t){l=t,i(0,l)},function(e){F.call(this,t,e)}]}class Dm extends ut{constructor(t){super(),pt(this,t,jm,Mm,a,{options:4,ref:0,value:1})}}function Om(t){let e,i,s;const r=[t[1]];function o(e){t[2](e)}let a={};for(let t=0;t<r.length;t+=1)a=n(a,r[t]);return void 0!==t[0]&&(a.value=t[0]),e=new Dm({props:a}),T.push((()=>at(e,"value",o))),e.$on("change",t[3]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),s=!0},p(t,[n]){const s=2&n?rt(r,[ot(t[1])]):{};!i&&1&n&&(i=!0,s.value=t[0],G((()=>i=!1))),e.$set(s)},i(t){s||(nt(e.$$.fragment,t),s=!0)},o(t){it(e.$$.fragment,t),s=!1},d(t){ht(e,t)}}}function zm(t,e,i){const s=["value"];let r=f(e,s),{value:o}=e;return t.$$set=t=>{e=n(n({},e),m(t)),i(1,r=f(e,s)),"value"in t&&i(0,o=t.value)},[o,r,function(t){o=t,i(0,o)},function(e){F.call(this,t,e)}]}class Bm extends ut{constructor(t){super(),pt(this,t,zm,Om,a,{value:0})}}function Fm(t){let e,i,s,r;const o=[{options:t[2]},t[3]];function a(e){t[11](e)}function l(e){t[12](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[1]&&(c.value=t[1]),void 0!==t[0]&&(c.ref=t[0]),e=new Dm({props:c}),T.push((()=>at(e,"value",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[13]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=12&n?rt(o,[4&n&&{options:t[2]},8&n&&ot(t[3])]):{};!i&&2&n&&(i=!0,r.value=t[1],G((()=>i=!1))),!s&&1&n&&(s=!0,r.ref=t[0],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function Im(t,e,i){const s=["value","ref","options","userExpandable","expanded","buttonClass","picker"];let r,o=f(e,s),{value:a}=e,{ref:l}=e,{options:c}=e,{userExpandable:h=!0}=e,{expanded:p=!1}=e,{buttonClass:u=""}=e,{picker:d}=e,v=!1;const g=p;let w=g;return t.$$set=t=>{e=n(n({},e),m(t)),i(3,o=f(e,s)),"value"in t&&i(1,a=t.value),"ref"in t&&i(0,l=t.ref),"options"in t&&i(5,c=t.options),"userExpandable"in t&&i(6,h=t.userExpandable),"expanded"in t&&i(4,p=t.expanded),"buttonClass"in t&&i(7,u=t.buttonClass),"picker"in t&&i(8,d=t.picker)},t.$$.update=()=>{1537&t.$$.dirty&&!v&&l&&(i(9,v=!0),l.controller?.valueController?.foldable_?.value("expanded").emitter.on("change",(t=>{i(10,w=t.rawValue),i(4,p=w)}))),288&t.$$.dirty&&i(2,r={...c,expanded:g,picker:d}),193&t.$$.dirty&&l&&u&&wo(h??!0,l.element,u),1169&t.$$.dirty&&l&&u&&p!==w&&l.element.querySelectorAll(`.${u}`).length>0&&l.element.querySelector(`.${u}`)?.click()},[l,a,r,o,p,c,h,u,d,v,w,function(t){a=t,i(1,a)},function(t){l=t,i(0,l)},function(e){F.call(this,t,e)}]}class Tm extends ut{constructor(t){super(),pt(this,t,Im,Fm,a,{value:1,ref:0,options:5,userExpandable:6,expanded:4,buttonClass:7,picker:8})}}function Nm(t){let e,i,s,r,o,a,l;const c=[{buttonClass:Rm},{options:t[3]},t[4]];function h(e){t[8](e)}function p(e){t[9](e)}function u(e){t[10](e)}let d={};for(let t=0;t<c.length;t+=1)d=n(d,c[t]);void 0!==t[1]&&(d.value=t[1]),void 0!==t[0]&&(d.expanded=t[0]),void 0!==t[2]&&(d.ref=t[2]),e=new Tm({props:d}),T.push((()=>at(e,"value",h))),T.push((()=>at(e,"expanded",p))),T.push((()=>at(e,"ref",u))),e.$on("change",t[11]);let v=!1;return{c(){lt(e.$$.fragment),o=C(),a=P()},m(t,n){ct(e,t,n),b(t,o,n),b(t,a,n),l=!0},p(t,[n]){const o=24&n?rt(c,[0&n&&{buttonClass:Rm},8&n&&{options:t[3]},16&n&&ot(t[4])]):{};!i&&2&n&&(i=!0,o.value=t[1],G((()=>i=!1))),!s&&1&n&&(s=!0,o.expanded=t[0],G((()=>s=!1))),!r&&4&n&&(r=!0,o.ref=t[2],G((()=>r=!1))),e.$set(o)},i(t){l||(nt(e.$$.fragment,t),nt(v),l=!0)},o(t){it(e.$$.fragment,t),it(v),l=!1},d(t){t&&(_(o),_(a)),ht(e,t)}}}const Rm="tp-colswv_b";function qm(t,e,i){const s=["value","expanded","type"];let r,o,a,l=f(e,s),{value:c}=e,{expanded:h}=e,{type:p}=e;return t.$$set=t=>{i(5,e=n(n({},e),m(t))),i(4,l=f(e,s)),"value"in t&&i(6,c=t.value),"expanded"in t&&i(0,h=t.expanded),"type"in t&&i(7,p=t.type)},t.$$.update=()=>{64&t.$$.dirty&&function(){if("string"==typeof c)r!==c&&i(1,r=c);else if(cr(c))bm(c,r)||i(1,r={...c});else if(Array.isArray(c)){let t=4===c.length?{r:c[0],g:c[1],b:c[2],a:c[3]}:3===c.length?{r:c[0],g:c[1],b:c[2]}:void 0;void 0===t?console.error("Unreachable"):bm(t,r)||i(1,r=t)}else console.error("Unreachable")}(),2&t.$$.dirty&&function(){if("string"==typeof c&&"string"==typeof r)r!==c&&i(6,c=r);else if(Array.isArray(c)&&cr(r)){const t=lr(r)?bo(r,["r","g","b","a"]):ar(r)?bo(r,["r","g","b"]):void 0;void 0===t?console.error("Unreachable color type mismatch"):bm(t,c)||i(6,c=t)}else cr(c)&&cr(r)?bm(r,c)||i(6,c={...r}):console.error("Unreachable color type mismatch")}(),4&t.$$.dirty&&void 0!==a&&a.on("change",(()=>{a.refresh()})),128&t.$$.dirty&&i(3,o={color:{type:p},view:"color"})},e=m(e),[h,r,a,o,l,e,c,p,function(t){r=t,i(1,r)},function(t){h=t,i(0,h)},function(t){a=t,i(2,a)},function(e){F.call(this,t,e)}]}class Um extends ut{constructor(t){super(),pt(this,t,qm,Nm,a,{value:6,expanded:0,type:7})}}const Km=Ne("ctn"),Hm=Ne("input"),Gm=Ne("btn");class Ym{constructor(t,e){this.element=t.createElement("div"),this.container=t.createElement("div"),this.container.classList.add(Km()),e.viewProps.bindClassModifiers(this.container),this.input=t.createElement("input"),this.input.classList.add(Hm()),this.input.setAttribute("type","file"),this.input.setAttribute("accept",e.filetypes?e.filetypes.join(","):"*"),this.input.style.height=`calc(20px * ${e.lineCount})`,this.fileIcon=t.createElement("div"),this.fileIcon.classList.add(Km("icon")),this.text=t.createElement("span"),this.text.classList.add(Km("text")),this.warning=t.createElement("span"),this.warning.classList.add(Km("warning")),this.warning.innerHTML=e.invalidFiletypeMessage,this.warning.style.display="none",this.deleteButton=t.createElement("button"),this.deleteButton.classList.add(Gm("b")),this.deleteButton.innerHTML="Delete",this.deleteButton.style.display="none",this.container.appendChild(this.input),this.container.appendChild(this.fileIcon),this.element.appendChild(this.container),this.element.appendChild(this.warning),this.element.appendChild(this.deleteButton)}changeDraggingState(t){var e,n;t?null===(e=this.container)||void 0===e||e.classList.add(Km("input_area_dragging")):null===(n=this.container)||void 0===n||n.classList.remove(Km("input_area_dragging"))}}class Xm{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Ym(t,{viewProps:this.viewProps,value:e.value,invalidFiletypeMessage:e.invalidFiletypeMessage,lineCount:e.lineCount,filetypes:e.filetypes}),this.config=e,this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDeleteClick=this.onDeleteClick.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.view.deleteButton.addEventListener("click",this.onDeleteClick),this.value.emitter.on("change",(()=>this.handleValueChange())),this.viewProps.handleDispose((()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave),this.view.deleteButton.removeEventListener("click",this.onDeleteClick)}))}onFile(t){const e=this.view.input;if(e.files&&e.files.length>0){const t=e.files[0];this.isFileValid(t)?this.value.setRawValue(t):this.showWarning()}}showWarning(){this.view.warning.style.display="block",setTimeout((()=>{this.view.warning.style.display="none"}),5e3)}isFileValid(t){var e;const n=this.config.filetypes,i="."+(null===(e=t.name.split(".").pop())||void 0===e?void 0:e.toLowerCase());return!(n&&n.length>0&&!n.includes(i)&&i)}onDeleteClick(){this.value.rawValue&&(this.value.setRawValue(null),this.view.input.value="",this.view.warning.style.display="none")}onDragOver(t){t.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}onDrop(t){if(t instanceof DragEvent&&(t.preventDefault(),t.dataTransfer&&t.dataTransfer.files)){const e=t.dataTransfer.files;if(1==e.length){const t=e.item(0);t&&(this.isFileValid(t)?this.value.setRawValue(t):this.showWarning())}}this.view.changeDraggingState(!1)}handleValueChange(){const t=this.value.rawValue,e=this.view.container,n=this.view.text,i=this.view.fileIcon,s=this.view.deleteButton;t?(n.textContent=t.name,e.appendChild(n),e.contains(i)&&e.removeChild(i),this.view.warning.style.display="none",s.style.display="block",e.style.border="unset"):(n.textContent="",e.appendChild(i),e.removeChild(n),this.view.warning.style.display="none",s.style.display="none",e.style.border="1px dashed #717070")}}function Wm(t){const e=new Image;return e.crossOrigin="anonymous",e.src=t,e}an({id:"file-input",type:"input",accept(t,e){if("string"!=typeof t)return null;const n=Ce(e,(t=>({view:t.required.constant("file-input"),invalidFiletypeMessage:t.optional.string,lineCount:t.optional.number,filetypes:t.optional.array(t.required.string)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>t=>t instanceof File?t:null,constraint:t=>new Rn([]),writer:t=>(t,e)=>{t.write(e)}},controller(t){var e,n;return new Xm(t.document,{value:t.value,viewProps:t.viewProps,invalidFiletypeMessage:null!==(e=t.params.invalidFiletypeMessage)&&void 0!==e?e:"Unaccepted file type.",lineCount:null!==(n=t.params.lineCount)&&void 0!==n?n:3,filetypes:t.params.filetypes})}});const Zm=Ne("img");class Qm{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zm()),e.viewProps.bindClassModifiers(this.element),this.input=t.createElement("input"),this.input.classList.add(Zm("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",e.extensions.join(",")),this.image_=t.createElement("img"),this.image_.id="tpimg_"+Math.random().toString(36).slice(2),this.image_.classList.add(Zm("image")),this.image_.classList.add(Zm(`image_${e.imageFit}`)),this.image_.crossOrigin="anonymous",this.image_.onclick=t=>e.clickCallback?e.clickCallback(t,this.input):this.input.click(),this.element.classList.add(Zm("area_root")),this.element.appendChild(this.image_),this.element.appendChild(this.input)}changeImage(t){this.image_.src=t}changeDraggingState(t){const e=this.element;t?null==e||e.classList.add(Zm("area_dragging")):null==e||e.classList.remove(Zm("area_dragging"))}}let Jm=null;class tf{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Qm(t,{viewProps:this.viewProps,extensions:e.extensions,imageFit:e.imageFit,clickCallback:e.clickCallback}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragstart",this.onDragStart),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose((()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragstart",this.onDragStart),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave)})),this.value.emitter.on("change",(()=>this.handleValueChange())),this.handleValueChange()}onFile(t){const e=(null==t?void 0:t.target).files;if(!e||!e.length)return;const n=e[0];this.setValue(n)}onDrop(t){t.preventDefault();try{const{dataTransfer:e}=t,n=null==e?void 0:e.files[0];if(n)this.setValue(n);else{const t=null==e?void 0:e.getData("img-id");if(t){const e=document.getElementById(t);this.setValue(e)}else{const t=null==e?void 0:e.getData("url");if(!t)throw new Error("No url");this.setValue(t)}}}catch(t){console.error("Could not parse the dropped image",t)}finally{this.view.changeDraggingState(!1)}}onDragStart(t){var e,n;null===(e=t.dataTransfer)||void 0===e||e.setData("img-id",this.view.image_.id),null===(n=t.dataTransfer)||void 0===n||n.setDragImage(this.view.image_,0,0)}onDragOver(t){t.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(t){t instanceof HTMLImageElement?this.updateImage(t.src):"string"!=typeof t&&t?this.setValue(t):("placeholder"!==t&&t||(t=this.handlePlaceholderImage().src),this.updateImage(t))}updateImage(t){this.view.changeImage(t)}setValue(t){if(t instanceof HTMLImageElement)this.value.setRawValue(t);else if(t instanceof File){const e=URL.createObjectURL(t)+"#"+t.name;t.src=e;const n=Wm(e);this.value.setRawValue(n||t)}else t?this.value.setRawValue(Wm(t)):this.value.setRawValue(this.handlePlaceholderImage())}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return Jm||(Jm=function(){const t=new Blob(['\n\t<svg width="320" height="50" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    text {\n      font-family: "Menlo", monospace;\n      font-size: 12px;\n\t\t\tfill: gray;\n    }\n  </style>\n  <text x="50%" y="55%" text-anchor="middle">\n    No Image\n  </text>\n</svg>'],{type:"image/svg+xml"}),e=new Image;return e.src=URL.createObjectURL(t),e}()),Jm}}const ef=[".jpg",".png",".gif"];function nf(t){let e,i,s,r;const o=[{options:t[2]},t[3]];function a(e){t[12](e)}function l(e){t[13](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[0]&&(c.value=t[0]),void 0!==t[1]&&(c.ref=t[1]),e=new Dm({props:c}),T.push((()=>at(e,"value",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[14]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=12&n?rt(o,[4&n&&{options:t[2]},8&n&&ot(t[3])]):{};!i&&1&n&&(i=!0,r.value=t[0],G((()=>i=!1))),!s&&2&n&&(s=!0,r.ref=t[1],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function sf(t,e,i){const s=["value","options","min","max","step","pointerScale","keyScale","format","ref"];let r,o=f(e,s),{value:a}=e,{options:l}=e,{min:c}=e,{max:h}=e,{step:p}=e,{pointerScale:u}=e,{keyScale:d}=e,{format:v}=e,{ref:g}=e,w=v;return t.$$set=t=>{e=n(n({},e),m(t)),i(3,o=f(e,s)),"value"in t&&i(0,a=t.value),"options"in t&&i(4,l=t.options),"min"in t&&i(5,c=t.min),"max"in t&&i(6,h=t.max),"step"in t&&i(7,p=t.step),"pointerScale"in t&&i(8,u=t.pointerScale),"keyScale"in t&&i(9,d=t.keyScale),"format"in t&&i(10,v=t.format),"ref"in t&&i(1,g=t.ref)},t.$$.update=()=>{3072&t.$$.dirty&&w!==v&&i(11,w=v),3056&t.$$.dirty&&i(2,r={min:c,max:h,format:w,keyScale:d,pointerScale:u,step:p,...l})},[a,g,r,o,l,c,h,p,u,d,v,w,function(t){a=t,i(0,a)},function(t){g=t,i(1,g)},function(e){F.call(this,t,e)}]}an({id:"input-image",type:"input",accept(t,e){if(!(t instanceof HTMLImageElement||"string"==typeof t))return null;const n=Ce(e,(t=>({view:t.required.constant("input-image"),acceptUrl:t.optional.boolean,clickCallback:t.optional.function,imageFit:t.optional.custom((t=>"contain"===t||"cover"===t?t:void 0)),extensions:t.optional.array(t.required.string)})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>t=>void 0!==t.src?""===t.src?"placeholder":t.src:t,writer:t=>(t,e)=>{t.write(e)}},controller(t){var e,n;return new tf(t.document,{value:t.value,imageFit:null!==(e=t.params.imageFit)&&void 0!==e?e:"cover",clickCallback:t.params.clickCallback,viewProps:t.viewProps,extensions:null!==(n=t.params.extensions)&&void 0!==n?n:ef})}});class rf extends ut{constructor(t){super(),pt(this,t,sf,nf,a,{value:0,options:4,min:5,max:6,step:7,pointerScale:8,keyScale:9,format:10,ref:1})}}function of(t){let e,i,s,r,o;const a=[{options:t[1]},t[2]];function l(e){t[7](e)}let c={};for(let t=0;t<a.length;t+=1)c=n(c,a[t]);void 0!==t[0]&&(c.ref=t[0]),e=new vd({props:c}),T.push((()=>at(e,"ref",l)));let h=!1;return{c(){lt(e.$$.fragment),s=C(),r=P()},m(t,n){ct(e,t,n),b(t,s,n),b(t,r,n),o=!0},p(t,[n]){const s=6&n?rt(a,[2&n&&{options:t[1]},4&n&&ot(t[2])]):{};!i&&1&n&&(i=!0,s.ref=t[0],G((()=>i=!1))),e.$set(s)},i(t){o||(nt(e.$$.fragment,t),nt(h),o=!0)},o(t){it(e.$$.fragment,t),it(h),o=!1},d(t){t&&(_(s),_(r)),ht(e,t)}}}function af(t){return e=t,Array.isArray(e)&&e.every((t=>"object"==typeof t&&null!==t&&"text"in t&&"value"in t))||function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}(t)?t:t.map((t=>({value:t,text:"object"==typeof t?JSON.stringify(t):String(t)})));var e}function lf(t,e,i){const s=["value","options","label"];let r=f(e,s),{value:o}=e,{options:a}=e,{label:l}=e;const c=O();let h,p;function u(){if(void 0===o){const t=af(a);return Array.isArray(t)?(i(4,o=t[0].value),o):(i(4,o=t[Object.keys(t)[0]]),o)}return o}return t.$$set=t=>{i(3,e=n(n({},e),m(t))),i(2,r=f(e,s)),"value"in t&&i(4,o=t.value),"options"in t&&i(5,a=t.options),"label"in t&&i(6,l=t.label)},t.$$.update=()=>{96&t.$$.dirty&&i(1,p={value:u(),label:l,options:af(a),view:"list"}),1&t.$$.dirty&&h&&h.on("change",(t=>{bm(t.value,o)||(i(4,o=t.value),c("change",{value:Uv(o),origin:"internal"}))})),17&t.$$.dirty&&h&&(bm(h.value,o)||(i(0,h.value=o,h),c("change",{value:Uv(o),origin:"external"})))},e=m(e),[h,p,r,e,o,a,l,function(t){h=t,i(0,h)}]}class cf extends ut{constructor(t){super(),pt(this,t,lf,of,a,{value:4,options:5,label:6})}}const hf=Ne("ckr");class pf{constructor(t,e){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=e.formatters,this.unit_=e.unit,this.element=t.createElement("div"),this.element.classList.add(hf(),hf(void 0,`m${e.seriesId}`)),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const n=t.createElement("div");n.classList.add(hf("w")),this.element.appendChild(n),this.offsetElem_=t.createElement("div"),this.offsetElem_.classList.add(hf("o")),n.appendChild(this.offsetElem_),this.svgElem_=t.createElementNS(Ve,"svg"),this.svgElem_.classList.add(hf("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=t.createElement("div"),this.tooltipElem_.classList.add(Ne("tt")(),hf("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.target===this.element&&0!==e.intersectionRatio&&(this.update(),t.disconnect())}))}),{root:null});t.observe(this.element)}rebuildScaleIfNeeded_(t){if(this.boundsWidth_===t)return;this.boundsWidth_=t,this.tickElems_.forEach((t=>{Oe(t)})),this.tickElems_=[],this.labelElems_.forEach((t=>{Oe(t)})),this.labelElems_=[];const e=this.element.ownerDocument,n=this.unit_.ticks,i=this.unit_.pixels,s=(2*(Math.ceil(t/2/i)+1)+1)*n,r=i/n;for(let t=0;t<s;t++){const i=t*r;if(t%n===0){const t=e.createElementNS(Ve,"line");t.classList.add(hf("mjt")),t.setAttributeNS(null,"x1",String(i)),t.setAttributeNS(null,"y1","0"),t.setAttributeNS(null,"x2",String(i)),t.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(t),this.tickElems_.push(t);const n=e.createElement("div");n.classList.add(hf("l")),n.style.left=`${i}px`,this.offsetElem_.appendChild(n),this.labelElems_.push(n)}else{const t=e.createElementNS(Ve,"line");t.classList.add(hf("mnt")),t.setAttributeNS(null,"x1",String(i)),t.setAttributeNS(null,"y1","0"),t.setAttributeNS(null,"x2",String(i)),t.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(t),this.tickElems_.push(t)}}}updateScale_(t){const e=this.unit_.value,n=this.unit_.pixels,i=this.value_.rawValue,s=Math.ceil(t/2/n)+1,r=i-i%e-e*s,o=s=>1-Math.pow(ie(Math.abs(i-s)/(t/2*(e/n)),0,1),10);this.labelElems_.forEach(((t,n)=>{const i=r+n*e;t.textContent=this.formatters_.ring(i),t.style.opacity=String(o(i))}));const a=this.unit_.ticks;this.tickElems_.forEach(((t,n)=>{const i=r+n/a*e;t.style.opacity=String(o(i))}))}update(){const t=this.element.getBoundingClientRect().width,e=this.unit_.value,n=this.unit_.pixels,i=this.value_.rawValue,s=t/2-n/e*(i%e+e*(Math.ceil(t/2/n)+1));this.offsetElem_.style.transform=`translateX(${s}px)`,this.tooltipElem_.textContent=this.formatters_.text(i),this.rebuildScaleIfNeeded_(t),this.updateScale_(t)}onValueChange_(){this.update()}onShowsTooltipChange_(t){t.rawValue?this.element.classList.add(hf(void 0,"tt")):this.element.classList.remove(hf(void 0,"tt"))}}class uf{constructor(t,e){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.tooltipEnabled_=e.tooltipEnabled,this.unit_=e.unit,this.showsTooltip_=St(!1),this.view=new pf(t,{formatters:e.formatters,seriesId:e.seriesId,showsTooltip:this.showsTooltip_,unit:e.unit,value:this.value,viewProps:this.viewProps});const n=new mi(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onPointerDown_(t){const e=t.data;e.point&&(this.ox_=e.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(t){const e=t.data;if(!e.point)return;const n=e.point.x-this.ox_,i=this.unit_.pixels,s=this.unit_.value;this.value.setRawValue(this.ov_-n/i*s,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const df=Ne("ckrtxt");class vf{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(df());const n=t.createElement("div");n.classList.add(df("r")),n.appendChild(e.ringView.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(df("t")),i.appendChild(e.textView.element),this.element.appendChild(i)}}class mf{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.rc_=new uf(t,{formatters:{ring:e.ringFormatter,text:e.textProps.get("formatter")},seriesId:e.seriesId,tooltipEnabled:!1,unit:e.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new wi(t,{parser:e.parser,props:e.textProps,value:this.value,viewProps:this.viewProps}),this.view=new vf(t,{ringView:this.rc_.view,textView:this.tc_.view})}}function ff(t){const e=[],n=ce(t);n&&e.push(n);const i=le(t);return i&&e.push(i),new Rn(e)}function gf(t){return 0===t||1===t||2===t?t:void 0}function wf(t){return void 0!==t?String(t):"0"}an({id:"input-ring",type:"input",accept(t,e){if("number"!=typeof t)return null;const n=Ce(e,(t=>Object.assign(Object.assign({},pe(t)),{series:t.optional.custom(gf),unit:t.optional.object({pixels:t.required.number,ticks:t.required.number,value:t.required.number}),view:t.required.constant("cameraring"),wide:t.optional.boolean})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Jt,constraint:t=>ff(t.params),writer:t=>Mi},controller(t){var e,n,i;const s=null!==(e=t.params.unit)&&void 0!==e?e:{ticks:5,pixels:40,value:10},r=function(t){const e=te(ne(t.value));return t=>{const n=e(t),i=n.substr(0,1);return n+("-"===i||"+"===i?" ":"")}}(s),o=he(t.params,t.initialValue);if(t.params.wide)return new uf(t.document,{formatters:{ring:r,text:o.formatter},seriesId:null!==(n=wf(t.params.series))&&void 0!==n?n:"0",tooltipEnabled:!0,unit:s,value:t.value,viewProps:t.viewProps});const a=At.fromObject(o);return new mf(t.document,{parser:Qt,ringFormatter:r,ringUnit:s,seriesId:null!==(i=wf(t.params.series))&&void 0!==i?i:"0",textProps:a,value:t.value,viewProps:t.viewProps})}}),an({id:"input-wheel",type:"input",accept(t,e){if("number"!=typeof t)return null;const n=Ce(e,(t=>Object.assign(Object.assign({},pe(t)),{amount:t.optional.number,view:t.required.constant("camerawheel"),wide:t.optional.boolean})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Jt,constraint:t=>ff(t.params),writer:t=>Mi},controller(t){var e,n;const i=te(0),s=he(t.params,t.initialValue);return t.params.wide?new uf(t.document,{formatters:{ring:i,text:s.formatter},seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:40*(null!==(e=t.params.amount)&&void 0!==e?e:s.pointerScale)},value:t.value,viewProps:t.viewProps}):new mf(t.document,{parser:Qt,ringFormatter:i,ringUnit:{ticks:10,pixels:40,value:40*(null!==(n=t.params.amount)&&void 0!==n?n:s.pointerScale)},seriesId:"w",textProps:At.fromObject(s),value:t.value,viewProps:t.viewProps})}});class bf{multiply(t){return this.format(this.quat.multiply(t.quat))}premultiply(t){return this.format(t.multiply(this))}slerp(t,e){return this.format(this.quat.slerp(t.quat,e))}}function _f(t,e,n){return Math.min(Math.max(t,e),n)}function yf(t,e){return t-function(t,e){return Math.floor(t/e)*e}(t,e)}function xf(t){return yf(t+Math.PI,2*Math.PI)-Math.PI}class Cf extends bf{static fromQuaternion(t,e,n){const i=t.toMat3(),[s,r,o,a]="XYZ"===e?[0,1,2,1]:"XZY"===e?[0,2,1,-1]:"YXZ"===e?[1,0,2,-1]:"YZX"===e?[1,2,0,1]:"ZXY"===e?[2,0,1,1]:[2,1,0,-1],l=[0,0,0],c=i[o+3*s];return l[r]=-a*Math.asin(_f(c,-1,1)),Math.abs(c)<.999999?(l[s]=a*Math.atan2(i[o+3*r],i[4*o]),l[o]=a*Math.atan2(i[r+3*s],i[4*s])):l[s]=a*Math.atan2(-i[r+3*o],i[4*r]),Math.abs(l[s])+Math.abs(l[o])>Math.PI&&(l[s]=xf(l[s]+Math.PI),l[r]=xf(Math.PI-l[r]),l[o]=xf(l[o]+Math.PI)),new Cf(...l,e).reunit(n)}constructor(t,e,n,i,s){super(),this.x=null!=t?t:0,this.y=null!=e?e:0,this.z=null!=n?n:0,this.order=null!=i?i:"XYZ",this.unit=null!=s?s:"rad"}get quat(){return Pf.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(t,e){return this.reorder(t).reunit(e)}format(t){return t instanceof Cf?t.reorder(this.order):t.toEuler(this.order,this.unit)}reorder(t){return t===this.order?this:this.quat.toEuler(t,this.unit)}reunit(t){const e={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit]*{deg:180/Math.PI,rad:1,turn:.5/Math.PI}[t];return new Cf(e*this.x,e*this.y,e*this.z,this.order,t)}}class Pf extends bf{static fromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return new Pf(t.x*i,t.y*i,t.z*i,Math.cos(n))}static fromEuler(t){const e=t.reunit("rad"),[n,i,s,r]="XYZ"===e.order?[0,1,2,1]:"XZY"===e.order?[0,2,1,-1]:"YXZ"===e.order?[1,0,2,-1]:"YZX"===e.order?[1,2,0,1]:"ZXY"===e.order?[2,0,1,1]:[2,1,0,-1],o=e.getComponents(),a=.5*o[n],l=.5*r*o[i],c=.5*o[s],h=Math.cos(a),p=Math.cos(l),u=Math.cos(c),d=Math.sin(a),v=Math.sin(l),m=Math.sin(c),f=[0,0,0,u*p*h+m*v*d];return f[n]=u*p*d-m*v*h,f[i]=r*(u*v*h+m*p*d),f[s]=m*p*h-u*v*d,new Pf(...f)}static lookRotation(t,e){const{normal:n,tangent:i,binormal:s}=t.orthoNormalize(e),r=s.x,o=i.x,a=n.x,l=s.y,c=i.y,h=n.y,p=s.z,u=i.z,d=n.z,v=r+c+d;if(v>0){const t=.5/Math.sqrt(v+1);return new Pf((u-h)*t,(a-p)*t,(l-o)*t,.25/t)}if(r>c&&r>d){const t=2*Math.sqrt(1+r-c-d);return new Pf(.25*t,(o+l)/t,(a+p)/t,(u-h)/t)}if(c>d){const t=2*Math.sqrt(1+c-r-d);return new Pf((o+l)/t,.25*t,(h+u)/t,(a-p)/t)}{const t=2*Math.sqrt(1+d-r-c);return new Pf((a+p)/t,(h+u)/t,.25*t,(l-o)/t)}}constructor(t,e,n,i){super(),this.x=null!=t?t:0,this.y=null!=e?e:0,this.z=null!=n?n:0,this.w=null!=i?i:1}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(t,e){return Cf.fromQuaternion(this,t,e)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const t=this.length;return 0===t?new Pf:new Pf(this.x/t,this.y/t,this.z/t,this.w/t)}get negated(){return new Pf(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(t){const e=t.quat;return new Pf(this.w*e.x+this.x*e.w+this.y*e.z-this.z*e.y,this.w*e.y-this.x*e.z+this.y*e.w+this.z*e.x,this.w*e.z+this.x*e.y-this.y*e.x+this.z*e.w,this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z)}format(t){return t.quat}slerp(t,e){let n=t.quat;if(0===e)return this;if(1===e)return n;const i=this.ban360s;n=n.ban360s;let s=i.w*n.w+i.x*n.x+i.y*n.y+i.z*n.z;if(s<0&&(n=n.negated,s=-s),s>=1)return i;const r=1-s*s;if(r<=Number.EPSILON){const t=1-e;return new Pf(t*i.x+e*n.x,t*i.y+e*n.y,t*i.z+e*n.z,t*i.w+e*n.w).normalized}const o=Math.sqrt(r),a=Math.atan2(o,s),l=Math.sin((1-e)*a)/o,c=Math.sin(e*a)/o;return new Pf(i.x*l+n.x*c,i.y*l+n.y*c,i.z*l+n.z*c,i.w*l+n.w*c)}toMat3(){const{x:t,y:e,z:n,w:i}=this;return[1-2*e*e-2*n*n,2*t*e+2*n*i,2*t*n-2*e*i,2*t*e-2*n*i,1-2*t*t-2*n*n,2*e*n+2*t*i,2*t*n+2*e*i,2*e*n-2*t*i,1-2*t*t-2*e*e]}}class Ef{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(t){const e=.5*(this.viewport[0]+this.viewport[2]),n=.5*(this.viewport[1]+this.viewport[3]),i=this.viewport[2]-this.viewport[0],s=this.viewport[3]-this.viewport[1],r=1/Math.tan(this.fov*Math.PI/360),o=-(t.z+this.offset[2]);return[e+(t.x+this.offset[0])/o*r*i*.5/this.aspect,n-(t.y+this.offset[1])/o*r*s*.5]}}class kf{constructor(t,e,n){this.element=t.createElementNS(Ve,"path"),this.vertices=e,this.projector=n}setRotation(t){let e="";return this.vertices.forEach(((n,i)=>{const s=n.applyQuaternion(t),[r,o]=this.projector.project(s);e+=`${0===i?"M":"L"}${r} ${o}`})),this.element.setAttributeNS(null,"d",e),this}}class $f{constructor(t,e,n){this.x=null!=t?t:0,this.y=null!=e?e:0,this.z=null!=n?n:0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const t=this.length;return 0===t?new $f:new $f(this.x/t,this.y/t,this.z/t)}get negated(){return new $f(-this.x,-this.y,-this.z)}add(t){return new $f(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new $f(this.x-t.x,this.y-t.y,this.z-t.z)}scale(t){return new $f(this.x*t,this.y*t,this.z*t)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new $f(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}orthoNormalize(t){const e=this.normalized;t=t.normalized;let n=e.dot(t);1===n&&(t=Math.abs(e.y)>Math.abs(e.z)?new $f(0,0,1):new $f(0,1,0),n=e.dot(t));const i=(t=t.sub(e.scale(n)).normalized).cross(e);return{normal:e,tangent:t,binormal:i}}applyQuaternion(t){const e=t.w*this.x+t.y*this.z-t.z*this.y,n=t.w*this.y+t.z*this.x-t.x*this.z,i=t.w*this.z+t.x*this.y-t.y*this.x,s=-t.x*this.x-t.y*this.y-t.z*this.z;return new $f(e*t.w+s*-t.x+n*-t.z-i*-t.y,n*t.w+s*-t.y+i*-t.x-e*-t.z,i*t.w+s*-t.z+e*-t.y-n*-t.x)}}function Vf(t,e){const n=e.z>0?new Pf(0,0,0,1):new Pf(0,0,1,0);return Math.abs(t.z)>.9999?n:Pf.lookRotation(t,e)}function Lf(t,e,n,i,s,r=1){const o=[];for(let a=0;a<n;a++){const l=t+e*a/(n-1),c=new $f;c[i]=r*Math.cos(l),c[s]=r*Math.sin(l),o.push(c)}return o}const Sf=Ne("rotationgizmo"),Af=new $f(0,0,0),Mf=new $f(1,0,0),jf=new $f(0,1,0),Df=new $f(0,0,1),Of=new $f(0,0,-1),zf=new $f(.7,0,0),Bf=new $f(0,.7,0),Ff=new $f(0,0,.7),If=new $f(-.7,0,0),Tf=new $f(0,-.7,0),Nf=new $f(0,0,-.7),Rf=new Pf(0,0,0,1);function qf(t,e,n){const i=t.createElementNS(Ve,"g"),s=t.createElementNS(Ve,"circle");s.classList.add(Sf(e)),s.setAttributeNS(null,"cx","0"),s.setAttributeNS(null,"cy","0"),s.setAttributeNS(null,"r","8"),i.appendChild(s);const r=t.createElementNS(Ve,"text");return r.classList.add(Sf("labeltext")),r.setAttributeNS(null,"y","4"),r.setAttributeNS(null,"text-anchor","middle"),r.setAttributeNS(null,"font-size","10"),r.textContent=n,i.appendChild(r),i}class Uf{get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Sf()),"popup"===e.pickerLayout&&this.element.classList.add(Sf(void 0,"p"));const n=t.createElement("div");n.classList.add(Sf("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(Ve,"svg");i.classList.add(Sf("g")),this.padElement.appendChild(i),this.svgElem_=i,this.projector_=new Ef,this.projector_.viewport=[0,0,136,136];const s=Lf(0,Math.PI,33,"x","y"),r=Lf(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new kf(t,s,this.projector_),this.xArcB_.element.classList.add(Sf("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new kf(t,s,this.projector_),this.yArcB_.element.classList.add(Sf("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new kf(t,s,this.projector_),this.zArcB_.element.classList.add(Sf("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new kf(t,s,this.projector_),this.xArcBC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new kf(t,s,this.projector_),this.yArcBC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new kf(t,s,this.projector_),this.zArcBC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const o=t.createElementNS(Ve,"g");i.classList.add(Sf("axes")),this.svgElem_.appendChild(o),this.axesElem_=o,this.xAxis_=new kf(t,[Af,zf],this.projector_),this.xAxis_.element.classList.add(Sf("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new kf(t,[Af,Bf],this.projector_),this.yAxis_.element.classList.add(Sf("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new kf(t,[Af,Ff],this.projector_),this.zAxis_.element.classList.add(Sf("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new kf(t,[Af,If],this.projector_),this.xnAxis_.element.classList.add(Sf("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new kf(t,[Af,Tf],this.projector_),this.ynAxis_.element.classList.add(Sf("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new kf(t,[Af,Nf],this.projector_),this.znAxis_.element.classList.add(Sf("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new kf(t,s,this.projector_),this.xArcF_.element.classList.add(Sf("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new kf(t,s,this.projector_),this.yArcF_.element.classList.add(Sf("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new kf(t,s,this.projector_),this.zArcF_.element.classList.add(Sf("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new kf(t,s,this.projector_),this.xArcFC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new kf(t,s,this.projector_),this.yArcFC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new kf(t,s,this.projector_),this.zArcFC_.element.classList.add(Sf("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new kf(t,r,this.projector_),this.rArc_.element.classList.add(Sf("arcr")),this.rArc_.setRotation(Rf),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new kf(t,r,this.projector_),this.rArcC_.element.classList.add(Sf("arcc")),this.rArcC_.setRotation(Rf),this.svgElem_.appendChild(this.rArcC_.element);const a=t.createElementNS(Ve,"g");i.classList.add(Sf("labels")),this.svgElem_.appendChild(a),this.labelsElem_=a,this.xLabel=qf(t,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=qf(t,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=qf(t,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=qf(t,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=qf(t,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=qf(t,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const l=()=>{this.xArcB_.element.classList.add(Sf("arcx_hover")),this.xArcF_.element.classList.add(Sf("arcx_hover"))},c=()=>{this.xArcB_.element.classList.remove(Sf("arcx_hover")),this.xArcF_.element.classList.remove(Sf("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",l),this.xArcBC_.element.addEventListener("mouseleave",c),this.xArcFC_.element.addEventListener("mouseenter",l),this.xArcFC_.element.addEventListener("mouseleave",c);const h=()=>{this.yArcB_.element.classList.add(Sf("arcy_hover")),this.yArcF_.element.classList.add(Sf("arcy_hover"))},p=()=>{this.yArcB_.element.classList.remove(Sf("arcy_hover")),this.yArcF_.element.classList.remove(Sf("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",h),this.yArcBC_.element.addEventListener("mouseleave",p),this.yArcFC_.element.addEventListener("mouseenter",h),this.yArcFC_.element.addEventListener("mouseleave",p);const u=()=>{this.zArcB_.element.classList.add(Sf("arcz_hover")),this.zArcF_.element.classList.add(Sf("arcz_hover"))},d=()=>{this.zArcB_.element.classList.remove(Sf("arcz_hover")),this.zArcF_.element.classList.remove(Sf("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",u),this.zArcBC_.element.addEventListener("mouseleave",d),this.zArcFC_.element.addEventListener("mouseenter",u),this.zArcFC_.element.addEventListener("mouseleave",d);this.rArcC_.element.addEventListener("mouseenter",(()=>{this.rArc_.element.classList.add(Sf("arcr_hover"))})),this.rArcC_.element.addEventListener("mouseleave",(()=>{this.rArc_.element.classList.remove(Sf("arcr_hover"))})),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,e.mode.emitter.on("change",this.onModeChange_),this.mode_=e.mode,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const t=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(t),this.yAxis_.setRotation(t),this.zAxis_.setRotation(t),this.xnAxis_.setRotation(t),this.ynAxis_.setRotation(t),this.znAxis_.setRotation(t);const e=Mf.applyQuaternion(t),n=jf.applyQuaternion(t),i=Df.applyQuaternion(t),s=e.negated,r=n.negated,o=i.negated;[{el:this.xAxis_.element,v:e},{el:this.yAxis_.element,v:n},{el:this.zAxis_.element,v:i},{el:this.xnAxis_.element,v:s},{el:this.ynAxis_.element,v:r},{el:this.znAxis_.element,v:o}].map((({el:t,v:e})=>(this.axesElem_.removeChild(t),{el:t,v:e}))).sort(((t,e)=>t.v.z-e.v.z)).forEach((({el:t})=>{this.axesElem_.appendChild(t)})),this.xArcB_.setRotation(Vf(e,Of)),this.yArcB_.setRotation(Vf(n,Of)),this.zArcB_.setRotation(Vf(i,Of)),this.xArcBC_.setRotation(Vf(e,Of)),this.yArcBC_.setRotation(Vf(n,Of)),this.zArcBC_.setRotation(Vf(i,Of)),this.xArcF_.setRotation(Vf(e,Df)),this.yArcF_.setRotation(Vf(n,Df)),this.zArcF_.setRotation(Vf(i,Df)),this.xArcFC_.setRotation(Vf(e,Df)),this.yArcFC_.setRotation(Vf(n,Df)),this.zArcFC_.setRotation(Vf(i,Df)),[{el:this.xLabel,v:zf},{el:this.yLabel,v:Bf},{el:this.zLabel,v:Ff},{el:this.xnLabel,v:If},{el:this.ynLabel,v:Tf},{el:this.znLabel,v:Nf}].forEach((({el:e,v:n})=>{const[i,s]=this.projector_.project(n.applyQuaternion(t));e.setAttributeNS(null,"transform",`translate( ${i}, ${s} )`)})),[{el:this.xLabel,v:e},{el:this.yLabel,v:n},{el:this.zLabel,v:i},{el:this.xnLabel,v:s},{el:this.ynLabel,v:r},{el:this.znLabel,v:o}].map((({el:t,v:e})=>(this.labelsElem_.removeChild(t),{el:t,v:e}))).sort(((t,e)=>t.v.z-e.v.z)).forEach((({el:t})=>{this.labelsElem_.appendChild(t)}))}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const t=this.mode_.rawValue,e="angle-x"===t?"add":"remove",n="angle-y"===t?"add":"remove",i="angle-z"===t?"add":"remove",s="angle-r"===t?"add":"remove";this.xArcB_.element.classList[e](Sf("arcx_active")),this.yArcB_.element.classList[n](Sf("arcy_active")),this.zArcB_.element.classList[i](Sf("arcz_active")),this.xArcF_.element.classList[e](Sf("arcx_active")),this.yArcF_.element.classList[n](Sf("arcy_active")),this.zArcF_.element.classList[i](Sf("arcz_active")),this.rArc_.element.classList[s](Sf("arcr_active"))}}function Kf(t){return _f(t,0,1)}const Hf=1/Math.sqrt(2),Gf=new $f(1,0,0),Yf=new $f(0,1,0),Xf=new $f(0,0,1),Wf=new Pf(0,0,0,1),Zf=new Pf(Hf,0,0,Hf),Qf=new Pf(0,-Hf,0,Hf),Jf=new Pf(-Hf,0,0,Hf),tg=new Pf(0,Hf,0,Hf),eg=new Pf(0,1,0,0);class ng{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.mode_=St("free"),this.view=new Uf(t,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:e.pickerLayout}),this.ptHandler_=new mi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const n=new mi(this.view.xArcBElement);n.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-x"))),n.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const i=new mi(this.view.xArcFElement);i.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-x"))),i.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const s=new mi(this.view.yArcBElement);s.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-y"))),s.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const r=new mi(this.view.yArcFElement);r.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-y"))),r.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const o=new mi(this.view.zArcBElement);o.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-z"))),o.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const a=new mi(this.view.zArcFElement);a.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-z"))),a.emitter.on("up",(()=>this.changeModeIfNotAuto_("free")));const l=new mi(this.view.rArcElement);l.emitter.on("down",(()=>this.changeModeIfNotAuto_("angle-r"))),l.emitter.on("up",(()=>this.changeModeIfNotAuto_("free"))),[{el:this.view.xLabel,q:Qf},{el:this.view.yLabel,q:Zf},{el:this.view.zLabel,q:Wf},{el:this.view.xnLabel,q:tg},{el:this.view.ynLabel,q:Jf},{el:this.view.znLabel,q:eg}].forEach((({el:t,q:e})=>{new mi(t).emitter.on("down",(()=>this.autoRotate_(e)))})),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(t){if(!t.point)return;const e=this.mode_.rawValue,n=t.point.x,i=t.point.y;if("auto"===e);else if("free"===e){if(null!=this.px_&&null!=this.py_){const t=n-this.px_,e=i-this.py_,s=Math.sqrt(t*t+e*e);if(0===s)return;const r=new $f(e/s,t/s,0),o=Pf.fromAxisAngle(r,s/68);this.value.rawValue=this.value.rawValue.premultiply(o)}this.px_=n,this.py_=i}else if("angle-r"===e){const e=t.bounds.width/2,s=t.bounds.height/2,r=Math.atan2(i-s,n-e);if(null==this.angleState_){const t=new $f(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:r,axis:t,reverseAngle:!0}}else{const{initialRotation:t,initialAngle:e,axis:n}=this.angleState_,i=-xf(r-e),s=Pf.fromAxisAngle(n,i);this.value.rawValue=t.premultiply(s)}}else{const s=t.bounds.width/2,r=t.bounds.height/2,o=Math.atan2(i-r,n-s);if(null==this.angleState_){const t="angle-x"===e?Gf:"angle-y"===e?Yf:Xf,n=t.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:o,axis:t,reverseAngle:n}}else{const{initialRotation:t,initialAngle:e,axis:n,reverseAngle:i}=this.angleState_;let s=xf(o-e);s=i?-s:s;const r=Pf.fromAxisAngle(n,s);this.value.rawValue=t.multiply(r)}}}onPointerDown_(t){this.handlePointerEvent_(t.data)}onPointerMove_(t){this.handlePointerEvent_(t.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(t){di(t.key)&&t.preventDefault();const e=hi(1,ui(t)),n=hi(1,pi(t));if(0!==e||0!==n){const t=new $f(-n,e,0),i=Pf.fromAxisAngle(t,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(i)}}changeModeIfNotAuto_(t){"auto"!==this.mode_.rawValue&&(this.mode_.rawValue=t)}autoRotate_(t){this.mode_.rawValue="auto";const e=this.value.rawValue,n=Date.now(),i=()=>{const s=Date.now(),r=function(t){if(t<=0)return 0;if(t>=1)return 1;const e=1-t;return Kf(1-e*(e*(e*(e*(e*(e*(-6*e+7)))))))}(Kf((s-n-(o=0))/(300-o)));var o;this.value.rawValue=e.slerp(t,r),1!==r?requestAnimationFrame(i):this.mode_.rawValue="free"};requestAnimationFrame(i)}}const ig=Ne("rotationswatch"),sg=new $f(1,0,0),rg=new $f(0,1,0),og=new $f(0,0,1),ag=new Pf(0,0,0,1);class lg{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(ig()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(ig("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElementNS(Ve,"svg");i.classList.add(ig("g")),n.appendChild(i),this.svgElem_=i,this.projector_=new Ef,this.projector_.viewport=[0,0,20,20];const s=Lf(0,Math.PI,33,"x","y"),r=Lf(0,2*Math.PI,65,"x","y");this.rArc_=new kf(t,r,this.projector_),this.rArc_.element.classList.add(ig("arcr")),i.appendChild(this.rArc_.element),this.rArc_.setRotation(ag),this.xArc_=new kf(t,s,this.projector_),this.xArc_.element.classList.add(ig("arc")),i.appendChild(this.xArc_.element),this.yArc_=new kf(t,s,this.projector_),this.yArc_.element.classList.add(ig("arc")),i.appendChild(this.yArc_.element),this.zArc_=new kf(t,s,this.projector_),this.zArc_.element.classList.add(ig("arc")),i.appendChild(this.zArc_.element),this.update_()}update_(){const t=this.value.rawValue.quat.normalized,e=sg.applyQuaternion(t),n=rg.applyQuaternion(t),i=og.applyQuaternion(t);this.xArc_.setRotation(Vf(e,og)),this.yArc_.setRotation(Vf(n,og)),this.zArc_.setRotation(Vf(i,og))}onValueChange_(){this.update_()}}class cg{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new lg(t,{value:this.value,viewProps:this.viewProps})}}const hg=Ne("rotation");class pg{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(hg()),e.foldable.bindExpandedClass(this.element,hg(void 0,"expanded")),Ie(e.foldable,"completed",Je(this.element,hg(void 0,"cpl"))),"quaternion"===e.rotationMode&&this.element.classList.add(hg("quat"));const n=t.createElement("div");n.classList.add(hg("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(hg("s")),n.appendChild(i),this.swatchElement=i;const s=t.createElement("div");if(s.classList.add(hg("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(hg("g")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}class ug{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=gn.create(e.expanded),this.swatchC_=new cg(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new br(t,{assembly:e.assembly,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new pg(t,{rotationMode:e.rotationMode,foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Jn(t,{viewProps:this.viewProps}):null;const i=new ng(t,{value:this.value,viewProps:this.viewProps,pickerLayout:e.pickerLayout});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.gizmoC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ci({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t,backward:(t,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),bn(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=Be(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!Se(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function dg(t,e){const n=Math.pow(.1,t);return{baseStep:n,constraint:e,textProps:At.fromObject({formatter:te(t),keyScale:n,pointerScale:n})}}function vg(t){if(!t)return;const e=[];return wt(t.step)||e.push(new Dt(t.step)),wt(t.max)&&wt(t.min)||e.push(new jt({max:t.max,min:t.min})),new Rn(e)}function mg(t,e){return{toComponents:t=>t.getComponents(),fromComponents:n=>new Cf(n[0],n[1],n[2],t,e)}}function fg(t,e,n){return"number"==typeof(null==t?void 0:t.x)&&"number"==typeof(null==t?void 0:t.y)&&"number"==typeof(null==t?void 0:t.z)?new Cf(t.x,t.y,t.z,e,n):new Cf(0,0,0,e,n)}function gg(t){switch(t){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return t;default:return}}function wg(t){switch(t){case"rad":case"deg":case"turn":return t;default:return}}an({id:"rotation",type:"input",accept(t,e){var n,i;const s=Ce(e,(t=>({view:t.required.constant("rotation"),label:t.optional.string,picker:t.optional.custom(Ai),expanded:t.optional.boolean,rotationMode:t.required.constant("euler"),x:t.optional.custom(Li),y:t.optional.custom(Li),z:t.optional.custom(Li),order:t.optional.custom(gg),unit:t.optional.custom(wg)})));return s?{initialValue:fg(t,null!==(n=s.order)&&void 0!==n?n:"XYZ",null!==(i=s.unit)&&void 0!==i?i:"rad"),params:s}:null},binding:{reader:({params:t})=>e=>{var n,i;return fg(e,null!==(n=t.order)&&void 0!==n?n:"XYZ",null!==(i=t.unit)&&void 0!==i?i:"rad")},constraint({params:t}){var e,n;return new fr({assembly:mg(null!==(e=t.order)&&void 0!==e?e:"XYZ",null!==(n=t.unit)&&void 0!==n?n:"rad"),components:[vg("x"in t?t.x:void 0),vg("y"in t?t.y:void 0),vg("z"in t?t.z:void 0)]})},writer:t=>(t,e)=>{t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}},controller({document:t,value:e,constraint:n,params:i,viewProps:s}){var r,o;if(!(n instanceof fr))throw Pt.shouldNeverHappen();const a="expanded"in i?i.expanded:void 0,l="picker"in i?i.picker:void 0,c=null!==(r=i.unit)&&void 0!==r?r:"rad",h={rad:2,deg:0,turn:2}[c];return new ug(t,{axes:[dg(h,n.components[0]),dg(h,n.components[1]),dg(h,n.components[2])],assembly:mg(null!==(o=i.order)&&void 0!==o?o:"XYZ",c),rotationMode:"euler",expanded:null!=a&&a,parser:Qt,pickerLayout:null!=l?l:"popup",value:e,viewProps:s})}});const bg={toComponents:t=>[t.x,t.y,t.z,t.w],fromComponents:t=>new Pf(t[0],t[1],t[2],t[3])};function _g(t){return{baseStep:.01,constraint:t,textProps:At.fromObject({formatter:t=>Math.abs(t)<.995?t.toFixed(2).replace("0.","."):t.toFixed(1),keyScale:.01,pointerScale:.01})}}function yg(t){return"number"==typeof(null==t?void 0:t.x)&&"number"==typeof(null==t?void 0:t.y)&&"number"==typeof(null==t?void 0:t.z)&&"number"==typeof(null==t?void 0:t.w)?new Pf(t.x,t.y,t.z,t.w):new Pf(0,0,0,1)}function xg(t){let e,i,s,r;const o=[t[2]];function a(e){t[4](e)}function l(e){t[5](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[0]&&(c.value=t[0]),void 0!==t[1]&&(c.ref=t[1]),e=new rf({props:c}),T.push((()=>at(e,"value",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[6]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=4&n?rt(o,[ot(t[2])]):{};!i&&1&n&&(i=!0,r.value=t[0],G((()=>i=!1))),!s&&2&n&&(s=!0,r.ref=t[1],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function Cg(t,e,i){const s=["value","wide"];let r,o=f(e,s),{value:a}=e,{wide:l}=e;return t.$$set=t=>{e=n(n({},e),m(t)),i(2,o=f(e,s)),"value"in t&&i(0,a=t.value),"wide"in t&&i(3,l=t.wide)},t.$$.update=()=>{10&t.$$.dirty&&r&&void 0!==l&&function(t){const e=r?.element.querySelector("div.tp-sldtxtv_t");t?e?.style.setProperty("display","none"):e?.style.removeProperty("display")}(l)},[a,r,o,l,function(t){a=t,i(0,a)},function(t){r=t,i(1,r)},function(e){F.call(this,t,e)}]}an({id:"rotation",type:"input",accept(t,e){const n=Ce(e,(t=>({view:t.required.constant("rotation"),label:t.optional.string,picker:t.optional.custom(Ai),expanded:t.optional.boolean,rotationMode:t.optional.constant("quaternion"),x:t.optional.custom(Li),y:t.optional.custom(Li),z:t.optional.custom(Li),w:t.optional.custom(Li)})));return n?{initialValue:yg(t),params:n}:null},binding:{reader:t=>t=>yg(t),constraint:({params:t})=>new fr({assembly:bg,components:[vg("x"in t?t.x:void 0),vg("y"in t?t.y:void 0),vg("z"in t?t.z:void 0),vg("w"in t?t.w:void 0)]}),writer:t=>(t,e)=>{t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}},controller({document:t,value:e,constraint:n,params:i,viewProps:s}){if(!(n instanceof fr))throw Pt.shouldNeverHappen();const r="expanded"in i?i.expanded:void 0,o="picker"in i?i.picker:void 0;return new ug(t,{axes:[_g(n.components[0]),_g(n.components[1]),_g(n.components[2]),_g(n.components[3])],assembly:bg,rotationMode:"quaternion",expanded:null!=r&&r,parser:Qt,pickerLayout:null!=o?o:"popup",value:e,viewProps:s})}});class Pg extends ut{constructor(t){super(),pt(this,t,Cg,xg,a,{value:0,wide:3})}}class Eg{constructor(t,e){this.step=t,this.edge=e}constrain(t){var e,n;return null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t))&&void 0!==n?n:t}}const kg={fromComponents:t=>t[0],toComponents:t=>[t]},$g=Ne("step");class Vg{constructor(t,e){this.buttonsView_=e.buttonsView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add($g());const n=t.createElement("div");n.classList.add($g("s")),n.appendChild(this.buttonsView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add($g("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const Lg=Ne("step");class Sg{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Lg()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.textContent="-",n.classList.add(Lg("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.btnMinus=n;const i=t.createElement("button");i.textContent="+",i.classList.add(Lg("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.btnPlus=i}}class Ag{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.step=e.constraint?e.constraint.step:1,this.view=new Sg(t,{value:this.value,viewProps:e.viewProps}),this.view.btnMinus.addEventListener("click",(()=>{var t;const e=null!==(t=this.value.rawValue)&&void 0!==t?t:0;this.value.setRawValue(e-this.step,{forceEmit:!0,last:!0})})),this.view.btnPlus.addEventListener("click",(()=>{var t;const e=null!==(t=this.value.rawValue)&&void 0!==t?t:0;this.value.setRawValue(e+this.step,{forceEmit:!0,last:!0})}))}}class Mg{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new Ag(t,e);const n={constraint:e.constraint.edge,textProps:e.textProps};this.tc_=new br(t,{assembly:kg,axes:[n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new Vg(t,{buttonsView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function jg(t){let e,i,s,r;const o=[{options:t[2]},t[3]];function a(e){t[5](e)}function l(e){t[6](e)}let c={};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[0]&&(c.value=t[0]),void 0!==t[1]&&(c.ref=t[1]),e=new Dm({props:c}),T.push((()=>at(e,"value",a))),T.push((()=>at(e,"ref",l))),e.$on("change",t[7]),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,[n]){const r=12&n?rt(o,[4&n&&{options:t[2]},8&n&&ot(t[3])]):{};!i&&1&n&&(i=!0,r.value=t[0],G((()=>i=!1))),!s&&2&n&&(s=!0,r.ref=t[1],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function Dg(t){t.target?.dispatchEvent(new Event("change"))}function Og(t,e,i){const s=["value","live"];let r=f(e,s),{value:o}=e,{live:a=!0}=e;let l;function c(t,e=!1){const n=l?.controller.valueController.view.element.querySelector("input");n?.removeEventListener("input",Dg),!e&&t&&n?.addEventListener("input",Dg)}return D((()=>{c(a??!0,!0)})),t.$$set=t=>{e=n(n({},e),m(t)),i(3,r=f(e,s)),"value"in t&&i(0,o=t.value),"live"in t&&i(4,a=t.live)},t.$$.update=()=>{18&t.$$.dirty&&l&&void 0!==a&&c(a)},[o,l,{view:"text"},r,a,function(t){o=t,i(0,o)},function(t){l=t,i(1,l)},function(e){F.call(this,t,e)}]}an({id:"input-stepper",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=Ce(e,(t=>Object.assign(Object.assign({},pe(t)),{view:t.required.constant("stepper")})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>t=>"number"==typeof t?t:0,writer:t=>(t,e)=>{t.write(e)},constraint(t){const e=[],n=ce(t.params);n&&e.push(n);const i=le(t.params);return i&&e.push(i),new Eg(t.params.step?t.params.step:1,new Rn(e))}},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof Eg))throw Pt.shouldNeverHappen();const i=At.fromObject(he(t.params,e.rawValue));return new Mg(t.document,{constraint:n,parser:Qt,textProps:i,value:e,viewProps:t.viewProps})}});class zg extends ut{constructor(t){super(),pt(this,t,Og,jg,a,{value:0,live:4})}}const Bg=Ne("txtr");class Fg{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Bg()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.rows=e.rows,n.cols=22,n.placeholder=e.placeholder,n.classList.add(Bg("i")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class Ig{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.rows=e.rows,this.placeholder=e.placeholder,this.view=new Fg(t,{value:this.value,viewProps:this.viewProps,rows:this.rows,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value;this.value.rawValue=e,this.view.refresh()}}function Tg(t){let e,n;return e=new od({props:{theme:t[4],userCreatedPane:!1,$$slots:{default:[qg]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};16&n&&(i.theme=t[4]),16399&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Ng(t){let e,n,i,s;const r=[Kg,Ug],o=[];return e=0,n=o[0]=r[0](t),{c(){n.c(),i=P()},m(t,e){o[0].m(t,e),b(t,i,e),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[0].d(t)}}}function Rg(t){let e;const n=t[11].default,i=h(n,t,t[14],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||16384&s)&&d(i,n,t,t[14],e?u(n,t[14],s,null):v(t[14]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function qg(t){let e,n,i;function s(e){t[13](e)}let r={disabled:t[2],title:t[1],userExpandable:t[3],$$slots:{default:[Rg]},$$scope:{ctx:t}};return void 0!==t[0]&&(r.expanded=t[0]),e=new Xg({props:r}),T.push((()=>at(e,"expanded",s))),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),i=!0},p(t,i){const s={};4&i&&(s.disabled=t[2]),2&i&&(s.title=t[1]),8&i&&(s.userExpandable=t[3]),16384&i&&(s.$$scope={dirty:i,ctx:t}),!n&&1&i&&(n=!0,s.expanded=t[0],G((()=>n=!1))),e.$set(s)},i(t){i||(nt(e.$$.fragment,t),i=!0)},o(t){it(e.$$.fragment,t),i=!1},d(t){ht(e,t)}}}function Ug(t){let e,n,i,s;e=new po({props:{keysAdd:["containerUnitSize"],theme:t[4]}});let r=t[0]&&Hg(t);return{c(){lt(e.$$.fragment),n=C(),r&&r.c(),i=P()},m(t,o){ct(e,t,o),b(t,n,o),r&&r.m(t,o),b(t,i,o),s=!0},p(t,n){const s={};16&n&&(s.theme=t[4]),e.$set(s),t[0]?r?(r.p(t,n),1&n&&nt(r,1)):(r=Hg(t),r.c(),nt(r,1),r.m(i.parentNode,i)):r&&(tt(),it(r,1,1,(()=>{r=null})),et())},i(t){s||(nt(e.$$.fragment,t),nt(r),s=!0)},o(t){it(e.$$.fragment,t),it(r),s=!1},d(t){t&&(_(n),_(i)),ht(e,t),r&&r.d(t)}}}function Kg(t){let e,n;const i=t[11].default,s=h(i,t,t[14],null);return{c(){e=y("div"),s&&s.c(),k(e,"display","none")},m(i,r){b(i,e,r),s&&s.m(e,null),t[12](e),n=!0},p(t,e){s&&s.p&&(!n||16384&e)&&d(s,i,t,t[14],n?u(i,t[14],e,null):v(t[14]),null)},i(t){n||(nt(s,t),n=!0)},o(t){it(s,t),n=!1},d(n){n&&_(e),s&&s.d(n),t[12](null)}}}function Hg(t){let e,n,i;e=new po({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding"],theme:t[4]}});const s=t[11].default,r=h(s,t,t[14],null);return{c(){lt(e.$$.fragment),n=C(),r&&r.c()},m(t,s){ct(e,t,s),b(t,n,s),r&&r.m(t,s),i=!0},p(t,n){const o={};16&n&&(o.theme=t[4]),e.$set(o),r&&r.p&&(!i||16384&n)&&d(r,s,t,t[14],i?u(s,t[14],n,null):v(t[14]),null)},i(t){i||(nt(e.$$.fragment,t),nt(r,t),i=!0)},o(t){it(e.$$.fragment,t),it(r,t),i=!1},d(t){t&&_(n),ht(e,t),r&&r.d(t)}}}function Gg(t){let e,n,i,s;const r=[Ng,Tg],o=[];return e=function(t){return t[6]?0:1}(t),n=o[e]=r[e](t),{c(){n.c(),i=P()},m(t,n){o[e].m(t,n),b(t,i,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[e].d(t)}}}function Yg(t,e,n){let i,s,{$$slots:r={},$$scope:o}=e,{title:a="Folder"}=e,{disabled:l=!1}=e,{expanded:h=!0}=e,{userExpandable:p=!0}=e,{theme:u}=e;const d=B("parentStore");c(t,d,(t=>n(10,i=t)));const v=vt();c(t,v,(t=>n(15,s=t)));const m=B("userCreatedPane");let f,w,b;return z("parentStore",v),j((()=>{n(8,w=f?mo(f):0)})),D((()=>{s?.dispose()})),t.$$set=t=>{"title"in t&&n(1,a=t.title),"disabled"in t&&n(2,l=t.disabled),"expanded"in t&&n(0,h=t.expanded),"userExpandable"in t&&n(3,p=t.userExpandable),"theme"in t&&n(4,u=t.theme),"$$scope"in t&&n(14,o=t.$$scope)},t.$$.update=()=>{514&t.$$.dirty&&b&&n(9,b.title=a,b),516&t.$$.dirty&&b&&n(9,b.disabled=l,b),513&t.$$.dirty&&b&&void 0!==h&&n(9,b.expanded=h,b),1792&t.$$.dirty&&i&&!b&&void 0!==w&&(g(v,s=i.addFolder({disabled:l,expanded:h,index:w,title:a}),s),s.on("fold",(()=>{n(0,h=s.expanded)})),n(9,b=s)),520&t.$$.dirty&&b&&wo(p,b.element,"tp-fldv_b","tp-fldv_m"),1040&t.$$.dirty&&u&&i&&(m||!uo(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Folder> components for a theme prop.)")},[h,a,l,p,u,f,d,v,w,b,i,r,function(t){T[t?"unshift":"push"]((()=>{f=t,n(5,f)}))},function(t){h=t,n(0,h)},o]}an({id:"input-template",type:"input",accept(t,e){if("string"!=typeof t)return null;const n=Ce(e,(t=>({view:t.required.constant("textarea"),rows:t.optional.number,placeholder:t.optional.string})));return n?{initialValue:t,params:n}:null},binding:{reader:t=>t=>"string"==typeof t?t:"",writer:t=>(t,e)=>{t.write(e)}},controller(t){var e,n;return new Ig(t.document,{value:t.value,rows:null!==(e=t.params.rows)&&void 0!==e?e:3,placeholder:null!==(n=t.params.placeholder)&&void 0!==n?n:"Enter text here",viewProps:t.viewProps})}});class Xg extends ut{constructor(t){super(),pt(this,t,Yg,Gg,a,{title:1,disabled:2,expanded:0,userExpandable:3,theme:4})}}var Wg={local:{},session:{}};function Zg(t,e,n){var i,s,r,o,a,l,c,h;(null==n?void 0:n.onError)&&console.warn("onError has been deprecated. Please use onWriteError instead");const p=null!=(i=null==n?void 0:n.serializer)?i:JSON,u=null!=(s=null==n?void 0:n.storage)?s:"local",d=null==(r=null==n?void 0:n.syncTabs)||r,v=null!=(a=null!=(o=null==n?void 0:n.onWriteError)?o:null==n?void 0:n.onError)?a:e=>console.error(`Error when writing value from persisted store "${t}" to ${u}`,e),m=null!=(l=null==n?void 0:n.onParseError)?l:(e,n)=>console.error(`Error when parsing ${e?'"'+e+'"':"value"} from persisted store "${t}"`,n),f=null!=(c=null==n?void 0:n.beforeRead)?c:t=>t,g=null!=(h=null==n?void 0:n.beforeWrite)?h:t=>t,w="undefined"!=typeof window&&"undefined"!=typeof document,b=w?"local"===u?localStorage:sessionStorage:null;function _(t,e){const n=g(e);try{null==b||b.setItem(t,p.stringify(n))}catch(t){v(t)}}if(!Wg[u][t]){const n=vt(function(){const n=null==b?void 0:b.getItem(t);if(null==n)return e;const i=function(t){try{return p.parse(t)}catch(e){m(t,e)}}(n);return null==i?e:f(i)}(),(e=>{if(w&&"local"==u&&d){const n=n=>{if(n.key===t&&n.newValue){let t;try{t=p.parse(n.newValue)}catch(t){return void m(n.newValue,t)}const i=f(t);e(i)}};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}})),{subscribe:i,set:s}=n;Wg[u][t]={set(e){s(e),_(t,e)},update:e=>n.update((n=>{const i=e(n);return _(t,i),i})),reset(){this.set(e)},subscribe:i}}return Wg[u][t]}const{window:Qg}=w;function Jg(t){let e;const n=t[25].default,i=h(n,t,t[32],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||2&s[1])&&d(i,n,t,t[32],e?u(n,t[32],s,null):v(t[32]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function tw(t){let e,i,s,o,a,l,c,h,p=`${t[2]}px`,u=`${t[3]}px`,d=`${t[4]}px`;const v=[{scale:t[8]},{title:t[7]},fo(t[16],"position")];function m(e){t[26](e)}function f(e){t[27](e)}let g={$$slots:{default:[Jg]},$$scope:{ctx:t}};for(let t=0;t<v.length;t+=1)g=n(g,v[t]);return void 0!==t[1]&&(g.expanded=t[1]),void 0!==t[0]&&(g.tpPane=t[0]),i=new nd({props:g}),T.push((()=>at(i,"expanded",m))),T.push((()=>at(i,"tpPane",f))),{c(){var n,s,r;e=y("div"),lt(i.$$.fragment),n=e,s="class",null==(r="draggable-container svelte-ex9mcb")?n.removeAttribute(s):n.getAttribute(s)!==r&&n.setAttribute(s,r),H((()=>t[28].call(e))),S(e,"not-collapsable",!t[6]),S(e,"not-resizable",!t[5]),k(e,"left",p),k(e,"padding",t[9]),k(e,"top",u),k(e,"width",d),k(e,"z-index",t[14])},m(n,s){b(n,e,s),ct(i,e,null),a=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=y("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=L();let s;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=E(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{s=E(n.contentWindow,"resize",e),e()}),function(t,e){t.appendChild(e)}(t,n),()=>{(i||s&&n.contentWindow)&&s(),_(n)}}(e,t[28].bind(e)),t[29](e),l=!0,c||(h=[E(Qg,"resize",t[15]),E(e,"focus",t[30],!0),E(e,"pointerdown",t[31],!0)],c=!0)},p(t,n){const r=65920&n[0]?rt(v,[256&n[0]&&{scale:t[8]},128&n[0]&&{title:t[7]},65536&n[0]&&ot(fo(t[16],"position"))]):{};2&n[1]&&(r.$$scope={dirty:n,ctx:t}),!s&&2&n[0]&&(s=!0,r.expanded=t[1],G((()=>s=!1))),!o&&1&n[0]&&(o=!0,r.tpPane=t[0],G((()=>o=!1))),i.$set(r),(!l||64&n[0])&&S(e,"not-collapsable",!t[6]),(!l||32&n[0])&&S(e,"not-resizable",!t[5]),4&n[0]&&p!==(p=`${t[2]}px`)&&k(e,"left",p),512&n[0]&&k(e,"padding",t[9]),8&n[0]&&u!==(u=`${t[3]}px`)&&k(e,"top",u),16&n[0]&&d!==(d=`${t[4]}px`)&&k(e,"width",d),16384&n[0]&&k(e,"z-index",t[14])},i(t){l||(nt(i.$$.fragment,t),l=!0)},o(t){it(i.$$.fragment,t),l=!1},d(n){n&&_(e),ht(i),a(),t[29](null),c=!1,r(h)}}}const ew="svelte-tweakpane-ui-draggable-position-",nw="1",iw=[];let sw=1e3;function rw(t,i,s){let r;const o=["storePositionLocally","localStoreId","tpPane","expanded","collapseChildrenToFit","x","y","width","resizable","userExpandable","minWidth","maxWidth","title","scale","padding"];let a,c=f(i,o),h=e,p=()=>(h(),h=l(d,(t=>s(41,a=t))),d);t.$$.on_destroy.push((()=>h()));let u,d,{$$slots:v={},$$scope:g}=i,{storePositionLocally:w=!0}=i,{localStoreId:b=nw}=i,{tpPane:_}=i;w&&p(d=Zg(`${ew}${b}`,{x:0,y:0,expanded:!0,width:350}));let y,x,C,P,E,k,$,V,{expanded:L=a?.expanded??!0}=i,{collapseChildrenToFit:S=!1}=i,{x:A=a?.x??0}=i,{y:M=a?.y??0}=i,{width:O=a?.width??256}=i,{resizable:z=!0}=i,{userExpandable:B=!0}=i,{minWidth:F=200}=i,{maxWidth:I=600}=i,{title:N="Tweakpane"}=i,{scale:R=1}=i,{padding:q="0"}=i,U=sw;function K(){if(void 0!==A&&void 0!==M&&void 0!==O){const t=$,e=V;s(23,$=document.documentElement.clientWidth),s(24,V=document.documentElement.clientHeight);const n=$-t,i=V-e,r=(A+O/2)/$,o=(M+E/2)/V;!Number.isNaN(n)&&r>=.5&&s(2,A+=n),!Number.isNaN(i)&&o>=.5&&s(3,M+=i)}}const H=t=>{t.stopPropagation()};let G=0,Y=0,X=0,W=0;const Z=t=>{t.stopPropagation(),t.target&&void 0!==O&&t.target===C&&s(4,O=O<r?r:F)},Q=t=>{void 0!==A&&void 0!==M&&0===t.button&&t.target instanceof HTMLElement&&(W=0,u=t,it(),st(),t.target===x&&(x.style.cursor="grabbing"),s(11,y.style.transition="width 0s ease",y),t.target.setPointerCapture(t.pointerId),G=O??0,Y=A-t.pageX,X=M-t.pageY)},J=t=>{t.target instanceof HTMLElement&&void 0!==O&&void 0!==F&&void 0!==A&&void 0!==M&&(t.target===x?(W+=Math.hypot(t.movementX,t.movementY),s(2,A=t.pageX+Y),s(3,M=t.pageY+X)):t.target===C&&s(4,O=vo(t.pageX+Y+G-A,F,r)))},tt=()=>{if(u?.target instanceof HTMLElement){const{target:t}=u,e=t.getBoundingClientRect(),n=new PointerEvent("pointercancel",{bubbles:!0,clientX:e.left+e.width/2,clientY:e.top+e.height/2,composed:!0,pointerId:u.pointerId,pointerType:u.pointerType});t.dispatchEvent(n)}},et=t=>{t.stopImmediatePropagation(),t.target instanceof HTMLElement&&(t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId),t.target===x&&x.style.removeProperty("cursor"),y.style.removeProperty("transition"),"pointerup"===t.type&&t.target===x&&W<3&&B&&_&&s(0,_.expanded=!_.expanded,_),u=void 0,rt(),nt())},nt=()=>{x.addEventListener("pointerdown",Q),C?.addEventListener("pointerdown",Q)},it=()=>{x.removeEventListener("pointerdown",Q),C?.removeEventListener("pointerdown",Q)},st=()=>{window.addEventListener("blur",tt),x.addEventListener("pointermove",J),x.addEventListener("pointerup",et),x.addEventListener("pointercancel",et),C?.addEventListener("pointermove",J),C?.addEventListener("pointerup",et),C?.addEventListener("pointercancel",et)},rt=()=>{window.removeEventListener("blur",tt),x.removeEventListener("pointermove",J),x.removeEventListener("pointerup",et),x.removeEventListener("pointercancel",et),C?.removeEventListener("pointermove",J),C?.removeEventListener("pointerup",et),C?.removeEventListener("pointercancel",et)},ot=t=>{t.preventDefault()};function at(t,e=Number.MAX_SAFE_INTEGER){if(e>0)for(const i of t)if("expanded"in i)i.expanded&&(e--,i.expanded=!1),"children"in i&&at(i.children,e);else{const t=(n=i,n.controller?.valueController?.view?.swatchElement?.querySelector("button")??n.controller?.valueController?.view?.buttonElement);t&&_o(i)&&(e--,t.click())}var n;
/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */}j((()=>{K(),_?y.append(_.element):console.warn("no tpPane in draggable"),y.addEventListener("touchmove",ot,{passive:!1});const t=y.querySelector(".tp-rotv_t");t&&(x=t,x.addEventListener("click",H),x.addEventListener("dblclick",Z),C=x.parentElement?.appendChild(document.createElement("div")),C&&(C.className="tp-custom-width-handle",C.textContent="↔",C.addEventListener("click",H),C.addEventListener("dblclick",Z)),nt())})),D((()=>{it(),rt(),x.removeEventListener("click",H),x.removeEventListener("dblclick",Z),C?.removeEventListener("click",H),C?.removeEventListener("dblclick",Z),y?.removeEventListener("touchmove",ot),void 0!==b&&iw.splice(iw.indexOf(b),1)}));return t.$$set=t=>{i=n(n({},i),m(t)),s(16,c=f(i,o)),"storePositionLocally"in t&&s(17,w=t.storePositionLocally),"localStoreId"in t&&s(18,b=t.localStoreId),"tpPane"in t&&s(0,_=t.tpPane),"expanded"in t&&s(1,L=t.expanded),"collapseChildrenToFit"in t&&s(19,S=t.collapseChildrenToFit),"x"in t&&s(2,A=t.x),"y"in t&&s(3,M=t.y),"width"in t&&s(4,O=t.width),"resizable"in t&&s(5,z=t.resizable),"userExpandable"in t&&s(6,B=t.userExpandable),"minWidth"in t&&s(20,F=t.minWidth),"maxWidth"in t&&s(21,I=t.maxWidth),"title"in t&&s(7,N=t.title),"scale"in t&&s(8,R=t.scale),"padding"in t&&s(9,q=t.padding),"$$scope"in t&&s(32,g=t.$$scope)},t.$$.update=()=>{var e;if(33&t.$$.dirty[0]&&_&&z&&(e=z,C&&(C.style.display=e?"block":"none")),6400&t.$$.dirty[0]&&y)if(void 0===R||1===R)s(22,E=P);else{const t=window.getComputedStyle(y),e=Number.parseFloat(t.paddingTop)+Number.parseFloat(t.paddingBottom);s(22,E=(P-e)*R+e)}33038365&t.$$.dirty[0]&&void 0!==E&&void 0!==$&&void 0!==V&&void 0!==A&&void 0!==M&&void 0!==O&&void 0!==F&&void 0!==I&&(S&&E>V&&_&&at(_.children),s(2,A=vo(A,0,Math.max(0,$-k))),s(3,M=vo(M,0,Math.max(0,V-E))),$<k&&s(4,O=Math.max(F,Math.min(I,$)))),10485764&t.$$.dirty[0]&&(r=Math.min(I??600,$-(A??0))),393216&t.$$.dirty[0]&&w&&void 0!==b&&(iw.includes(b)&&console.warn('Multiple instances of <Pane> with `mode="draggable"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.'),iw.push(b)),393216&t.$$.dirty[0]&&!w&&b&&(iw.splice(iw.indexOf(b),1),localStorage.removeItem(`${ew}${b}`)),262144&t.$$.dirty[0]&&b!==`${ew}${b}`&&void 0!==b&&void 0!==d&&void 0!==L&&void 0!==O&&void 0!==A&&void 0!==M&&p(s(10,d=Zg(`${ew}${b}`,{x:A,y:M,expanded:L,width:O}))),394270&t.$$.dirty[0]&&w&&void 0!==b&&void 0!==A&&void 0!==M&&void 0!==O&&void 0!==L&&d?.set({x:A,y:M,expanded:L,width:O})},[_,L,A,M,O,z,B,N,R,q,d,y,P,k,U,K,c,w,b,S,F,I,E,$,V,v,function(t){L=t,s(1,L)},function(t){_=t,s(0,_)},function(){P=this.clientHeight,k=this.clientWidth,s(12,P),s(13,k)},function(t){T[t?"unshift":"push"]((()=>{y=t,s(11,y)}))},()=>{s(14,U=++sw)},()=>{s(14,U=++sw)},g]}class ow extends ut{constructor(t){super(),pt(this,t,rw,tw,a,{storePositionLocally:17,localStoreId:18,tpPane:0,expanded:1,collapseChildrenToFit:19,x:2,y:3,width:4,resizable:5,userExpandable:6,minWidth:20,maxWidth:21,title:7,scale:8,padding:9},null,[-1,-1])}}function aw(t){let e;const n=t[8].default,i=h(n,t,t[11],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||2048&s)&&d(i,n,t,t[11],e?u(n,t[11],s,null):v(t[11]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function lw(t){let e,i,s,r,o;const a=[{title:t[2]},fo(t[3],"position")];function l(e){t[9](e)}function c(e){t[10](e)}let h={$$slots:{default:[aw]},$$scope:{ctx:t}};for(let t=0;t<a.length;t+=1)h=n(h,a[t]);return void 0!==t[1]&&(h.expanded=t[1]),void 0!==t[0]&&(h.tpPane=t[0]),i=new nd({props:h}),T.push((()=>at(i,"expanded",l))),T.push((()=>at(i,"tpPane",c))),{c(){e=y("div"),lt(i.$$.fragment),k(e,"display","none")},m(t,n){b(t,e,n),ct(i,e,null),o=!0},p(t,[e]){const n=12&e?rt(a,[4&e&&{title:t[2]},8&e&&ot(fo(t[3],"position"))]):{};2048&e&&(n.$$scope={dirty:e,ctx:t}),!s&&2&e&&(s=!0,n.expanded=t[1],G((()=>s=!1))),!r&&1&e&&(r=!0,n.tpPane=t[0],G((()=>r=!1))),i.$set(n)},i(t){o||(nt(i.$$.fragment,t),o=!0)},o(t){it(i.$$.fragment,t),o=!1},d(t){t&&_(e),ht(i)}}}function cw(t,e,i){const s=["expanded","x","y","width","title","tpPane"];let r,o=f(e,s),{$$slots:a={},$$scope:l}=e,{expanded:c}=e,{x:h}=e,{y:p}=e,{width:u}=e,{title:d="Tweakpane"}=e,{tpPane:v}=e;return t.$$set=t=>{e=n(n({},e),m(t)),i(3,o=f(e,s)),"expanded"in t&&i(1,c=t.expanded),"x"in t&&i(4,h=t.x),"y"in t&&i(5,p=t.y),"width"in t&&i(6,u=t.width),"title"in t&&i(2,d=t.title),"tpPane"in t&&i(0,v=t.tpPane),"$$scope"in t&&i(11,l=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&v?.element.parentElement&&i(7,r=v.element.parentElement),144&t.$$.dirty&&void 0!==r&&void 0!==h&&(r.style.setProperty("right","unset"),r.style.setProperty("left",`${h}px`)),160&t.$$.dirty&&void 0!==r&&void 0!==p&&r.style.setProperty("top",`${p}px`),192&t.$$.dirty&&void 0!==r&&void 0!==u&&r.style.setProperty("width",`${u}px`)},[v,c,d,o,h,p,u,r,a,function(t){c=t,i(1,c)},function(t){v=t,i(0,v)},l]}class hw extends ut{constructor(t){super(),pt(this,t,cw,lw,a,{expanded:1,x:4,y:5,width:6,title:2,tpPane:0})}}function pw(t){let e,n,i,s;const r=[mw,vw],o=[];return e=0,n=o[0]=r[0](t),{c(){n.c(),i=P()},m(t,e){o[0].m(t,e),b(t,i,e),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[0].d(t)}}}function uw(t){let e,i,s,r;const o=[{width:t[1]},fo(t[6],"storePositionLocally")];function a(e){t[13](e)}function l(e){t[14](e)}let c={$$slots:{default:[gw]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)c=n(c,o[t]);return void 0!==t[0]&&(c.expanded=t[0]),void 0!==t[2]&&(c.tpPane=t[2]),e=new od({props:c}),T.push((()=>at(e,"expanded",a))),T.push((()=>at(e,"tpPane",l))),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),r=!0},p(t,n){const r=66&n?rt(o,[2&n&&{width:t[1]},64&n&&ot(fo(t[6],"storePositionLocally"))]):{};524288&n&&(r.$$scope={dirty:n,ctx:t}),!i&&1&n&&(i=!0,r.expanded=t[0],G((()=>i=!1))),!s&&4&n&&(s=!0,r.tpPane=t[2],G((()=>s=!1))),e.$set(r)},i(t){r||(nt(e.$$.fragment,t),r=!0)},o(t){it(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function dw(t){let e,n,i,s;const r=[bw,ww],o=[];return e=0,n=o[0]=r[0](t),{c(){n.c(),i=P()},m(t,e){o[0].m(t,e),b(t,i,e),s=!0},p(t,e){n.p(t,e)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),o[0].d(t)}}}function vw(t){let e,n;const i=t[7].default,s=h(i,t,t[19],null);return{c(){e=y("div"),s&&s.c(),k(e,"display","none")},m(t,i){b(t,e,i),s&&s.m(e,null),n=!0},p(t,e){s&&s.p&&(!n||524288&e)&&d(s,i,t,t[19],n?u(i,t[19],e,null):v(t[19]),null)},i(t){n||(nt(s,t),n=!0)},o(t){it(s,t),n=!1},d(t){t&&_(e),s&&s.d(t)}}}function mw(t){let e,i,s,r,o,a;const l=[{width:t[1]},t[6]];function c(e){t[15](e)}function h(e){t[16](e)}function p(e){t[17](e)}function u(e){t[18](e)}let d={$$slots:{default:[fw]},$$scope:{ctx:t}};for(let t=0;t<l.length;t+=1)d=n(d,l[t]);return void 0!==t[0]&&(d.expanded=t[0]),void 0!==t[2]&&(d.tpPane=t[2]),void 0!==t[3]&&(d.x=t[3]),void 0!==t[4]&&(d.y=t[4]),e=new hw({props:d}),T.push((()=>at(e,"expanded",c))),T.push((()=>at(e,"tpPane",h))),T.push((()=>at(e,"x",p))),T.push((()=>at(e,"y",u))),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),a=!0},p(t,n){const a=66&n?rt(l,[2&n&&{width:t[1]},64&n&&ot(t[6])]):{};524288&n&&(a.$$scope={dirty:n,ctx:t}),!i&&1&n&&(i=!0,a.expanded=t[0],G((()=>i=!1))),!s&&4&n&&(s=!0,a.tpPane=t[2],G((()=>s=!1))),!r&&8&n&&(r=!0,a.x=t[3],G((()=>r=!1))),!o&&16&n&&(o=!0,a.y=t[4],G((()=>o=!1))),e.$set(a)},i(t){a||(nt(e.$$.fragment,t),a=!0)},o(t){it(e.$$.fragment,t),a=!1},d(t){ht(e,t)}}}function fw(t){let e;const n=t[7].default,i=h(n,t,t[19],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||524288&s)&&d(i,n,t,t[19],e?u(n,t[19],s,null):v(t[19]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function gw(t){let e;const n=t[7].default,i=h(n,t,t[19],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||524288&s)&&d(i,n,t,t[19],e?u(n,t[19],s,null):v(t[19]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function ww(t){let e,n;const i=t[7].default,s=h(i,t,t[19],null);return{c(){e=y("div"),s&&s.c(),k(e,"display","none")},m(t,i){b(t,e,i),s&&s.m(e,null),n=!0},p(t,e){s&&s.p&&(!n||524288&e)&&d(s,i,t,t[19],n?u(i,t[19],e,null):v(t[19]),null)},i(t){n||(nt(s,t),n=!0)},o(t){it(s,t),n=!1},d(t){t&&_(e),s&&s.d(t)}}}function bw(t){let e,i,s,r,o,a,l;const c=[t[6]];function h(e){t[8](e)}function p(e){t[9](e)}function u(e){t[10](e)}function d(e){t[11](e)}function v(e){t[12](e)}let m={$$slots:{default:[_w]},$$scope:{ctx:t}};for(let t=0;t<c.length;t+=1)m=n(m,c[t]);return void 0!==t[0]&&(m.expanded=t[0]),void 0!==t[2]&&(m.tpPane=t[2]),void 0!==t[1]&&(m.width=t[1]),void 0!==t[3]&&(m.x=t[3]),void 0!==t[4]&&(m.y=t[4]),e=new ow({props:m}),T.push((()=>at(e,"expanded",h))),T.push((()=>at(e,"tpPane",p))),T.push((()=>at(e,"width",u))),T.push((()=>at(e,"x",d))),T.push((()=>at(e,"y",v))),{c(){lt(e.$$.fragment)},m(t,n){ct(e,t,n),l=!0},p(t,n){const l=64&n?rt(c,[ot(t[6])]):{};524288&n&&(l.$$scope={dirty:n,ctx:t}),!i&&1&n&&(i=!0,l.expanded=t[0],G((()=>i=!1))),!s&&4&n&&(s=!0,l.tpPane=t[2],G((()=>s=!1))),!r&&2&n&&(r=!0,l.width=t[1],G((()=>r=!1))),!o&&8&n&&(o=!0,l.x=t[3],G((()=>o=!1))),!a&&16&n&&(a=!0,l.y=t[4],G((()=>a=!1))),e.$set(l)},i(t){l||(nt(e.$$.fragment,t),l=!0)},o(t){it(e.$$.fragment,t),l=!1},d(t){ht(e,t)}}}function _w(t){let e;const n=t[7].default,i=h(n,t,t[19],null);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,s){i&&i.p&&(!e||524288&s)&&d(i,n,t,t[19],e?u(n,t[19],s,null):v(t[19]),null)},i(t){e||(nt(i,t),e=!0)},o(t){it(i,t),e=!1},d(t){i&&i.d(t)}}}function yw(t){let e,n,i,s;const r=[dw,uw,pw],o=[];function a(t,e){return void 0===t[5]||"draggable"===t[5]?0:"inline"===t[5]?1:"fixed"===t[5]?2:-1}return~(e=a(t))&&(n=o[e]=r[e](t)),{c(){n&&n.c(),i=P()},m(t,n){~e&&o[e].m(t,n),b(t,i,n),s=!0},p(t,[s]){let l=e;e=a(t),e===l?~e&&o[e].p(t,s):(n&&(tt(),it(o[l],1,1,(()=>{o[l]=null})),et()),~e?(n=o[e],n?n.p(t,s):(n=o[e]=r[e](t),n.c()),nt(n,1),n.m(i.parentNode,i)):n=null)},i(t){s||(nt(n),s=!0)},o(t){it(n),s=!1},d(t){t&&_(i),~e&&o[e].d(t)}}}function xw(t,e,i){const s=["expanded","position","width","tpPane","x","y"];let r=f(e,s),{$$slots:o={},$$scope:a}=e,{expanded:l}=e,{position:c}=e,{width:h}=e,{tpPane:p}=e,{x:u}=e,{y:d}=e;var v;return v=()=>{"inline"!==e.position&&"fixed"!==e.position||(i(3,u=e.x),i(4,d=e.y),i(1,h=e.width),i(0,l=e.expanded))},M().$$.before_update.push(v),t.$$set=t=>{i(20,e=n(n({},e),m(t))),i(6,r=f(e,s)),"expanded"in t&&i(0,l=t.expanded),"position"in t&&i(5,c=t.position),"width"in t&&i(1,h=t.width),"tpPane"in t&&i(2,p=t.tpPane),"x"in t&&i(3,u=t.x),"y"in t&&i(4,d=t.y),"$$scope"in t&&i(19,a=t.$$scope)},e=m(e),[l,h,p,u,d,c,r,o,function(t){l=t,i(0,l)},function(t){p=t,i(2,p)},function(t){h=t,i(1,h)},function(t){u=t,i(3,u)},function(t){d=t,i(4,d)},function(t){l=t,i(0,l)},function(t){p=t,i(2,p)},function(t){l=t,i(0,l)},function(t){p=t,i(2,p)},function(t){u=t,i(3,u)},function(t){d=t,i(4,d)},a]}class Cw extends ut{constructor(t){super(),pt(this,t,xw,yw,a,{expanded:0,position:5,width:1,tpPane:2,x:3,y:4})}}class Pw extends de{measureStart(t){this.controller.valueController.measureStart(t)}measureEnd(){return this.controller.valueController.measureEnd()}measure(t,e){this.controller.valueController.measure(t,e)}measureAsync(t,e){return this.controller.valueController.measureAsync(t,e)}get measureHandler(){return this.controller.valueController.measureHandler}set measureHandler(t){this.controller.valueController.measureHandler=t}}class Ew extends Ge{constructor(t,e){const n=e.valueController,i=new Ue(t,{blade:e.blade,props:e.labelProps,valueController:n});super({blade:e.blade,view:i.view,viewProps:n.viewProps}),this.valueController=n,this.labelController=i}}class kw{measureStart(){const t=performance.now();return()=>performance.now()-t}}function $w(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;class Vw{constructor(){this.map=new Map,this.keySet=new Set}get(t){return this.map.get(t)}getOrCreate(t,e){this.keySet.has(t)||this.keySet.add(t);let n=this.map.get(t);return null==n&&(n=e(),this.map.set(t,n)),n}set(t,e){this.keySet.has(t)||this.keySet.add(t),this.map.set(t,e)}resetUsedSet(){this.keySet.clear()}vaporize(t){for(const[e,n]of this.map.entries())this.keySet.has(e)||(this.map.delete(e),null==t||t([e,n]))}}function Lw(t){let e=0;return t.forEach((t=>e+=t)),e}class Sw{constructor(t){this.__recalcForEach=0,this.__countUntilRecalc=0,this.__history=[],this.__index=0,this.__count=0,this.__cache=0,this.__length=t,this.__recalcForEach=t;for(let e=0;e<t;e++)this.__history[e]=0}get mean(){const t=Math.min(this.__count,this.__length);return 0===t?0:this.__cache/t}get recalcForEach(){return this.__recalcForEach}set recalcForEach(t){const e=t-this.__recalcForEach;this.__recalcForEach=t,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+e)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let t=0;t<this.__length;t++)this.__history[t]=0}push(t){const e=this.__history[this.__index];this.__history[this.__index]=t,this.__count++,this.__index=(this.__index+1)%this.__length,0===this.__countUntilRecalc?this.recalc():(this.__countUntilRecalc--,this.__cache-=e,this.__cache+=t)}recalc(){this.__countUntilRecalc=this.__recalcForEach;const t=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce(((t,e)=>t+e),0);this.__cache=t}}function Aw(t,e){if("function"!=typeof e)return Aw(t,(t=>t<e));const n=e;let i=0,s=t.length;for(;i<s;){const e=i+s>>1;n(t[e])?i=e+1:s=e}return i}class Mw{constructor(t){this.__history=[],this.__sorted=[],this.__index=0,this.__length=t}get median(){return this.percentile(50)}percentile(t){return 0===this.__history.length?0:this.__sorted[Math.round(.01*t*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(t){const e=this.__history[this.__index];if(this.__history[this.__index]=t,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){const t=Aw(this.__sorted,e);this.__sorted.splice(t,1)}const n=Aw(this.__sorted,t);this.__sorted.splice(n,0,t)}}function jw(t,e){let n=0;for(let i=0;i<t.length;i++)n+=t[i]*e[i];return n}function Dw(t){return Math.min(Math.max(t,0),1)}function Ow(t){const e=[1,t=Dw(t),t*t,t*t*t],n=[e[2],e[3]].map((t=>t*e[2])),i=[jw(e,[.13572138,4.6153926,-42.66032258,132.13108234])+jw(n,[-152.94239396,59.28637943]),jw(e,[.09140261,2.19418839,4.84296658,-14.18503333])+jw(n,[4.27729857,2.82956604]),jw(e,[.1066733,12.64194608,-60.58204836,110.36276771])+jw(n,[-89.90310912,27.34824973])];return`rgb( ${i.map((t=>256*Dw(t))).join(", ")} )`}const zw=Ne("profiler");class Bw{constructor(t,e){this.targetDelta=e.targetDelta,this.deltaUnit=e.deltaUnit,this.fractionDigits=e.fractionDigits,this.calcMode=e.calcMode,this.element=t.createElement("div"),this.element.classList.add(zw()),e.viewProps.bindClassModifiers(this.element),this.svgRootElement_=t.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgRootElement_.classList.add(zw("root")),this.element.appendChild(this.svgRootElement_),this.entryContainerElement_=t.createElementNS("http://www.w3.org/2000/svg","g"),this.entryContainerElement_.classList.add(zw("container")),this.entryContainerElement_.setAttribute("transform","translate( 1, 1 )"),this.svgRootElement_.appendChild(this.entryContainerElement_),this.tooltipElement_=t.createElement("div"),this.tooltipElement_.classList.add(zw("tooltip")),this.tooltipElement_.style.display="none",this.element.appendChild(this.tooltipElement_),this.tooltipInsideElement_=t.createElement("div"),this.tooltipInsideElement_.classList.add(zw("tooltipinside")),this.tooltipElement_.appendChild(this.tooltipInsideElement_),this.labelElement_=t.createElement("div"),this.labelElement_.classList.add(zw("label")),this.labelElement_.textContent=this.deltaToDisplayDelta_(0),this.element.appendChild(this.labelElement_),this.entryElementCacheMap_=new Vw,this.hoveringEntry_=null}update(t){const e=this.entryToDelta_(t);this.labelElement_.textContent=this.deltaToDisplayDelta_(e),this.entryElementCacheMap_.resetUsedSet();const n=160/Math.max(this.targetDelta,e);let i=0;for(const e of t.children){this.addEntry_(e,"",this.entryContainerElement_,n).setAttribute("transform",`translate( ${i}, 0 )`),i+=this.entryToDelta_(e)*n}this.entryElementCacheMap_.vaporize((([t,e])=>{e.remove(),this.hoveringEntry_===t&&(this.hoveringEntry_=null)})),this.updateTooltip_()}updateTooltip_(){const t=this.hoveringEntry_;if(t){const e=this.entryElementCacheMap_.get(t),n=null==e?void 0:e.getAttribute("data-delta"),i=`${t}\n${this.deltaToDisplayDelta_(parseFloat(null!=n?n:"0.0"))}`;this.tooltipElement_.style.display="block",this.tooltipInsideElement_.textContent=i}else this.tooltipElement_.style.display="none"}addEntry_(t,e,n,i){const s=`${e}/${t.name}`,r=this.entryElementCacheMap_.getOrCreate(s,(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add(zw("entry")),n.appendChild(t),this.entryElementCacheMap_.set(s,t);const e=document.createElementNS("http://www.w3.org/2000/svg","rect");return e.classList.add(zw("entryrect")),t.appendChild(e),e.addEventListener("mouseenter",(()=>{this.hoveringEntry_=s,this.updateTooltip_()})),e.addEventListener("mouseleave",(()=>{this.hoveringEntry_=null,this.updateTooltip_()})),t})),o=this.entryToDelta_(t);r.setAttribute("data-delta",`${o}`);const a=r.childNodes[0];a.setAttribute("width",`${Math.max(.01,o*i-1)}px`),a.setAttribute("height","9px");const l=.15+.7*Dw(o/this.targetDelta);if(a.setAttribute("fill",Ow(l)),t.children.length>0){let e=0;t.children.forEach((t=>{this.addEntry_(t,s,r,i).setAttribute("transform",`translate( ${e}, 10 )`),e+=this.entryToDelta_(t)*i}))}return r}entryToDelta_(t){if("frame"===this.calcMode)return t.delta;if("mean"===this.calcMode)return t.deltaMean;if("median"===this.calcMode)return t.deltaMedian;throw new Error('Unreachable! calcMode must be one of "frame", "mean", or "median"')}deltaToDisplayDelta_(t){return`${t.toFixed(this.fractionDigits)} ${this.deltaUnit}`}}class Fw{constructor(t,e){this.targetDelta=e.targetDelta,this.bufferSize=e.bufferSize,this.onTick_=this.onTick_.bind(this),this.ticker_=e.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.viewProps=e.viewProps,this.view=new Bw(t,{targetDelta:this.targetDelta,deltaUnit:e.deltaUnit,fractionDigits:e.fractionDigits,calcMode:e.calcMode,viewProps:this.viewProps}),this.viewProps.handleDispose((()=>{this.ticker_.dispose()})),this.measureHandler=e.measureHandler,this.rootCalcCacheStack_=[this.createNewEntryCalcCache_()]}measureStart(t){const e=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1].childrenCacheMap.getOrCreate(t,(()=>this.createNewEntryCalcCache_()));var n;e.childrenCacheMap.resetUsedSet(),(n=e.childrenPromiseDelta).splice(0,n.length),this.rootCalcCacheStack_.push(e),e.measureEnd=this.measureHandler.measureStart()}measureEnd(){return $w(this,void 0,void 0,(function*(){const t=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1],e=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-2],n=Promise.resolve(t.measureEnd());t.measureEnd=null,e.childrenPromiseDelta.push(n),this.rootCalcCacheStack_.pop(),t.childrenCacheMap.vaporize();const i=Lw(yield Promise.all(t.childrenPromiseDelta)),s=(yield n)-i;t.meanCalc.push(s),t.medianCalc.push(s),t.latest=s}))}measure(t,e){this.measureStart(t),e(),this.measureEnd()}measureAsync(t,e){return $w(this,void 0,void 0,(function*(){this.measureStart(t),yield e(),this.measureEnd()}))}renderEntry(){return this.renderEntryFromCalcCache_("",this.rootCalcCacheStack_[0])}renderEntryFromCalcCache_(t,e){const n=[];for(const t of e.childrenCacheMap.keySet){const i=e.childrenCacheMap.get(t);n.push(this.renderEntryFromCalcCache_(t,i))}const i=e.latest,s=e.meanCalc.mean,r=e.medianCalc.median;return{name:t,delta:i+Lw(n.map((t=>t.delta))),deltaMean:s+Lw(n.map((t=>t.deltaMean))),deltaMedian:r+Lw(n.map((t=>t.deltaMedian))),selfDelta:i,selfDeltaMean:s,selfDeltaMedian:r,children:n}}onTick_(){this.view.update(this.renderEntry())}createNewEntryCalcCache_(){return{meanCalc:new Sw(this.bufferSize),medianCalc:new Mw(this.bufferSize),latest:0,measureEnd:null,childrenCacheMap:new Vw,childrenPromiseDelta:[]}}}function Iw(t,e){return 0===e?new Tn:new Nn(t,null!=e?e:qr.defaultInterval)}function Tw(t){switch(t){case"frame":case"mean":case"median":return t;default:return}}function Nw(t){return"object"==typeof t&&null!=t&&"measureStart"in t?t:void("object"==typeof t&&null!=t&&"measure"in t&&console.warn("The API of `ProfilerBladeDefaultMeasureHandler` has been changed in v0.4.0! Please define `measureStart` instead of `measure`. Fallback to the default measure handler."))}an({id:"profiler",type:"blade",accept(t){const e=Ce(t,(t=>({view:t.required.constant("profiler"),targetDelta:t.optional.number,bufferSize:t.optional.number,deltaUnit:t.optional.string,fractionDigits:t.optional.number,calcMode:t.optional.custom(Tw),label:t.optional.string,interval:t.optional.number,measureHandler:t.optional.custom(Nw)})));return e?{params:e}:null},controller(t){var e,n,i,s,r,o,a;const l=null!==(e=t.params.interval)&&void 0!==e?e:500,c=null!==(n=t.params.targetDelta)&&void 0!==n?n:16.67,h=null!==(i=t.params.bufferSize)&&void 0!==i?i:30,p=null!==(s=t.params.deltaUnit)&&void 0!==s?s:"ms",u=null!==(r=t.params.fractionDigits)&&void 0!==r?r:2,d=null!==(o=t.params.calcMode)&&void 0!==o?o:"mean",v=null!==(a=t.params.measureHandler)&&void 0!==a?a:new kw;return new Ew(t.document,{blade:t.blade,labelProps:At.fromObject({label:t.params.label}),valueController:new Fw(t.document,{ticker:Iw(t.document,l),targetDelta:c,bufferSize:h,deltaUnit:p,fractionDigits:u,calcMode:d,viewProps:t.viewProps,measureHandler:v})})},api:t=>t.controller instanceof Ew?new Pw(t.controller):null});class Rw{constructor(){this.drawer=t=>`L ${t[0]} ${t[1]}`}}class qw{constructor(){this.drawer=(t,e,n)=>{const[i,s]=this.controlPoint(n[e-1],n[e-2],t),[r,o]=this.controlPoint(t,n[e-1],n[e+1],!0);return`C ${i},${s} ${r},${o} ${t[0]},${t[1]}`}}controlPoint(t,e,n,i){const s=e||t,r=n||t,o=r[0]-s[0],a=r[1]-s[1],l=.2*Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),c=Math.atan2(a,o)+(i?Math.PI:0);return[t[0]+Math.cos(c)*l,t[1]+Math.sin(c)*l]}}const Uw=Ne("wfm");class Kw{constructor(t,e){switch(this.element=t.createElement("div"),this.element.classList.add(Uw()),e.viewProps.bindClassModifiers(this.element),this.svgElem=t.createElementNS(Ve,"svg"),this.svgElem.classList.add(Uw("g")),this.element.appendChild(this.svgElem),this.pathElem=t.createElementNS(Ve,"path"),this.svgElem.appendChild(this.pathElem),this.props=e.props,this.value=e.value,this.value.emitter.on("change",this.onValueChange_.bind(this)),this.props.get("lineStyle")){case"linear":default:this.lineDrawerProvider=new Rw;break;case"bezier":this.lineDrawerProvider=new qw}this.refresh(),e.viewProps.handleDispose((()=>{this.value.emitter.off("change",this.onValueChange_)}))}svgPath(t,e){return t.reduce(((t,n,i,s)=>0===i?`M ${n[0]},${n[1]}`:`${t} ${e(n,i,s)}`),"")}refresh(){var t,e;const n=this.svgElem.getBoundingClientRect(),i=this.value.rawValue[0];if(i){const s=null!==(t=this.props.get("min"))&&void 0!==t?t:Math.min(...i)-1,r=null!==(e=this.props.get("max"))&&void 0!==e?e:Math.max(...i)+1,o=r-s,a=[],l=i.length-1,c=i.length>32?0:n.width/(i.length-1),h=o>50?0:n.height/o;this.element.style.backgroundSize=`${c}px ${h}px`,i.forEach(((t,e)=>{if(void 0===t)return;const i=ee(e,0,l,0,n.width),o=ee(t,s,r,n.height,0);a.push([Math.floor(i),Math.floor(o)])}));const p=this.svgPath(a,this.lineDrawerProvider.drawer);this.pathElem.setAttributeNS(null,"d",p)}}onValueChange_(){this.refresh()}}class Hw{constructor(t,e){this.value=e.value,this.props=e.props,this.viewProps=e.viewProps,this.viewProps.handleDispose((()=>{})),this.view=new Kw(t,{value:this.value,viewProps:this.viewProps,props:this.props})}}function Gw(t){return"object"==typeof t&&"length"in t}function Yw(t,e,n){const i=t.slice();return i[20]=e[n],i}function Xw(t){let e,n,i,s,r,o,a,l,c,h;return e=new zg({props:{value:t[0].text,label:"Text"}}),e.$on("change",t[2]),i=new cf({props:{value:t[0].fontFamily,label:"Font Family",options:ft}}),i.$on("change",t[3]),r=new Bm({props:{value:t[0].fontSizeAuto,label:"Auto Font Size"}}),r.$on("change",t[4]),a=new Pg({props:{value:t[0].padding,label:"Padding for Auto Font Size",min:0,max:100,step:1,disabled:!t[0].fontSizeAuto}}),a.$on("change",t[5]),c=new Pg({props:{value:t[0].fontSizeManual,label:"Manual Font Size",min:8,max:200,step:1,disabled:t[0].fontSizeAuto}}),c.$on("change",t[6]),{c(){lt(e.$$.fragment),n=C(),lt(i.$$.fragment),s=C(),lt(r.$$.fragment),o=C(),lt(a.$$.fragment),l=C(),lt(c.$$.fragment)},m(t,p){ct(e,t,p),b(t,n,p),ct(i,t,p),b(t,s,p),ct(r,t,p),b(t,o,p),ct(a,t,p),b(t,l,p),ct(c,t,p),h=!0},p(t,n){const s={};1&n&&(s.value=t[0].text),e.$set(s);const o={};1&n&&(o.value=t[0].fontFamily),i.$set(o);const l={};1&n&&(l.value=t[0].fontSizeAuto),r.$set(l);const h={};1&n&&(h.value=t[0].padding),1&n&&(h.disabled=!t[0].fontSizeAuto),a.$set(h);const p={};1&n&&(p.value=t[0].fontSizeManual),1&n&&(p.disabled=t[0].fontSizeAuto),c.$set(p)},i(t){h||(nt(e.$$.fragment,t),nt(i.$$.fragment,t),nt(r.$$.fragment,t),nt(a.$$.fragment,t),nt(c.$$.fragment,t),h=!0)},o(t){it(e.$$.fragment,t),it(i.$$.fragment,t),it(r.$$.fragment,t),it(a.$$.fragment,t),it(c.$$.fragment,t),h=!1},d(t){t&&(_(n),_(s),_(o),_(l)),ht(e,t),ht(i,t),ht(r,t),ht(a,t),ht(c,t)}}}function Ww(t){let e,n;return e=new Um({props:{value:t[0].gradientColors[t[20]],label:t[1][t[20]]}}),e.$on("change",(function(...e){return t[11](t[20],...e)})),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(n,i){t=n;const s={};1&i&&(s.value=t[0].gradientColors[t[20]]),e.$set(s)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Zw(t){let e,n,i,s,r,o,a,l,c,h;e=new Um({props:{value:t[0].fillStyle,label:"Fill Style"}}),e.$on("change",t[7]),i=new Um({props:{value:t[0].strokeStyle,label:"Stroke Style"}}),i.$on("change",t[8]),r=new Pg({props:{value:t[0].strokeWidth,label:"Stroke Width",min:0,max:10,step:1}}),r.$on("change",t[9]),a=new Bm({props:{value:t[0].useGradient,label:"Use Gradient Fill"}}),a.$on("change",t[10]);let p=st([0,1,2]),u=[];for(let e=0;e<3;e+=1)u[e]=Ww(Yw(t,p,e));const d=t=>it(u[t],1,1,(()=>{u[t]=null}));return{c(){lt(e.$$.fragment),n=C(),lt(i.$$.fragment),s=C(),lt(r.$$.fragment),o=C(),lt(a.$$.fragment),l=C();for(let t=0;t<3;t+=1)u[t].c();c=P()},m(t,p){ct(e,t,p),b(t,n,p),ct(i,t,p),b(t,s,p),ct(r,t,p),b(t,o,p),ct(a,t,p),b(t,l,p);for(let e=0;e<3;e+=1)u[e]&&u[e].m(t,p);b(t,c,p),h=!0},p(t,n){const s={};1&n&&(s.value=t[0].fillStyle),e.$set(s);const o={};1&n&&(o.value=t[0].strokeStyle),i.$set(o);const l={};1&n&&(l.value=t[0].strokeWidth),r.$set(l);const h={};if(1&n&&(h.value=t[0].useGradient),a.$set(h),3&n){let e;for(p=st([0,1,2]),e=0;e<3;e+=1){const i=Yw(t,p,e);u[e]?(u[e].p(i,n),nt(u[e],1)):(u[e]=Ww(i),u[e].c(),nt(u[e],1),u[e].m(c.parentNode,c))}for(tt(),e=3;e<3;e+=1)d(e);et()}},i(t){if(!h){nt(e.$$.fragment,t),nt(i.$$.fragment,t),nt(r.$$.fragment,t),nt(a.$$.fragment,t);for(let t=0;t<3;t+=1)nt(u[t]);h=!0}},o(t){it(e.$$.fragment,t),it(i.$$.fragment,t),it(r.$$.fragment,t),it(a.$$.fragment,t),u=u.filter(Boolean);for(let t=0;t<3;t+=1)it(u[t]);h=!1},d(t){t&&(_(n),_(s),_(o),_(l),_(c)),ht(e,t),ht(i,t),ht(r,t),ht(a,t),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(u,t)}}}function Qw(t){let e,n,i,s,r,o,a,l;return e=new Um({props:{value:t[0].glowColor,label:"Glow Color"}}),e.$on("change",t[12]),i=new Pg({props:{value:t[0].glowSize,label:"Glow Size",min:0,max:100,step:1}}),i.$on("change",t[13]),r=new Pg({props:{value:t[0].shadowOffsetX,label:"Shadow Offset X",min:-50,max:50,step:1}}),r.$on("change",t[14]),a=new Pg({props:{value:t[0].shadowOffsetY,label:"Shadow Offset Y",min:-50,max:50,step:1}}),a.$on("change",t[15]),{c(){lt(e.$$.fragment),n=C(),lt(i.$$.fragment),s=C(),lt(r.$$.fragment),o=C(),lt(a.$$.fragment)},m(t,c){ct(e,t,c),b(t,n,c),ct(i,t,c),b(t,s,c),ct(r,t,c),b(t,o,c),ct(a,t,c),l=!0},p(t,n){const s={};1&n&&(s.value=t[0].glowColor),e.$set(s);const o={};1&n&&(o.value=t[0].glowSize),i.$set(o);const l={};1&n&&(l.value=t[0].shadowOffsetX),r.$set(l);const c={};1&n&&(c.value=t[0].shadowOffsetY),a.$set(c)},i(t){l||(nt(e.$$.fragment,t),nt(i.$$.fragment,t),nt(r.$$.fragment,t),nt(a.$$.fragment,t),l=!0)},o(t){it(e.$$.fragment,t),it(i.$$.fragment,t),it(r.$$.fragment,t),it(a.$$.fragment,t),l=!1},d(t){t&&(_(n),_(s),_(o)),ht(e,t),ht(i,t),ht(r,t),ht(a,t)}}}function Jw(t){let e,n;return e=new Pg({props:{value:t[0].blurAmount,label:"Blur Amount",min:0,max:50,step:1}}),e.$on("change",t[16]),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.value=t[0].blurAmount),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function tb(t){let e,n,i,s;return e=new Um({props:{value:t[0].innerGlowColor,label:"Inner Glow Color"}}),e.$on("change",t[17]),i=new Pg({props:{value:t[0].innerGlowBlur,label:"Inner Glow Blur",min:0,max:50,step:1}}),i.$on("change",t[18]),{c(){lt(e.$$.fragment),n=C(),lt(i.$$.fragment)},m(t,r){ct(e,t,r),b(t,n,r),ct(i,t,r),s=!0},p(t,n){const s={};1&n&&(s.value=t[0].innerGlowColor),e.$set(s);const r={};1&n&&(r.value=t[0].innerGlowBlur),i.$set(r)},i(t){s||(nt(e.$$.fragment,t),nt(i.$$.fragment,t),s=!0)},o(t){it(e.$$.fragment,t),it(i.$$.fragment,t),s=!1},d(t){t&&_(n),ht(e,t),ht(i,t)}}}function eb(t){let e,n;return e=new Um({props:{value:t[0].backgroundColor,label:"Background Color"}}),e.$on("change",t[19]),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.value=t[0].backgroundColor),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function nb(t){let e,n,i,s,r,o,a,l,c,h,p,u;return e=new Xg({props:{title:"Text",expanded:!0,$$slots:{default:[Xw]},$$scope:{ctx:t}}}),i=new Xg({props:{title:"Fill & Stroke",expanded:!0,$$slots:{default:[Zw]},$$scope:{ctx:t}}}),r=new Xg({props:{title:"Glow & Shadow",expanded:!0,$$slots:{default:[Qw]},$$scope:{ctx:t}}}),a=new Xg({props:{title:"Blur",expanded:!0,$$slots:{default:[Jw]},$$scope:{ctx:t}}}),c=new Xg({props:{title:"Inner Glow",expanded:!0,$$slots:{default:[tb]},$$scope:{ctx:t}}}),p=new Xg({props:{title:"Background",expanded:!0,$$slots:{default:[eb]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment),n=C(),lt(i.$$.fragment),s=C(),lt(r.$$.fragment),o=C(),lt(a.$$.fragment),l=C(),lt(c.$$.fragment),h=C(),lt(p.$$.fragment)},m(t,d){ct(e,t,d),b(t,n,d),ct(i,t,d),b(t,s,d),ct(r,t,d),b(t,o,d),ct(a,t,d),b(t,l,d),ct(c,t,d),b(t,h,d),ct(p,t,d),u=!0},p(t,n){const s={};8388609&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s);const o={};8388609&n&&(o.$$scope={dirty:n,ctx:t}),i.$set(o);const l={};8388609&n&&(l.$$scope={dirty:n,ctx:t}),r.$set(l);const h={};8388609&n&&(h.$$scope={dirty:n,ctx:t}),a.$set(h);const u={};8388609&n&&(u.$$scope={dirty:n,ctx:t}),c.$set(u);const d={};8388609&n&&(d.$$scope={dirty:n,ctx:t}),p.$set(d)},i(t){u||(nt(e.$$.fragment,t),nt(i.$$.fragment,t),nt(r.$$.fragment,t),nt(a.$$.fragment,t),nt(c.$$.fragment,t),nt(p.$$.fragment,t),u=!0)},o(t){it(e.$$.fragment,t),it(i.$$.fragment,t),it(r.$$.fragment,t),it(a.$$.fragment,t),it(c.$$.fragment,t),it(p.$$.fragment,t),u=!1},d(t){t&&(_(n),_(s),_(o),_(l),_(h)),ht(e,t),ht(i,t),ht(r,t),ht(a,t),ht(c,t),ht(p,t)}}}function ib(t){let e,n;return e=new Cw({props:{title:"Typography Controls",$$slots:{default:[nb]},$$scope:{ctx:t}}}),{c(){lt(e.$$.fragment)},m(t,i){ct(e,t,i),n=!0},p(t,[n]){const i={};8388609&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){it(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function sb(t,e,n){let i;c(t,gt,(t=>n(0,i=t)));return[i,["Gradient Color 1","Gradient Color 2","Gradient Color 3"],t=>gt.setText(t.detail.value),t=>gt.setFontFamily(t.detail.value),t=>gt.setFontSizeAuto(t.detail.value),t=>gt.setPadding(t.detail.value),t=>gt.setFontSizeManual(t.detail.value),t=>gt.setFillStyle(t.detail.value),t=>gt.setStrokeStyle(t.detail.value),t=>gt.setStrokeWidth(t.detail.value),t=>gt.setUseGradient(t.detail.value),(t,e)=>{const n=[...i.gradientColors];n[t]=e.detail.value,gt.setGradientColors(n)},t=>gt.setGlowColor(t.detail.value),t=>gt.setGlowSize(t.detail.value),t=>gt.setShadowOffsetX(t.detail.value),t=>gt.setShadowOffsetY(t.detail.value),t=>gt.setBlurAmount(t.detail.value),t=>gt.setInnerGlowColor(t.detail.value),t=>gt.setInnerGlowBlur(t.detail.value),t=>gt.setBackgroundColor(t.detail.value)]}an({id:"monitor-waveform",type:"monitor",accept:(t,e)=>{if(!Gw(t))return null;const n=Ce(e,(t=>({max:t.optional.number,min:t.optional.number,style:t.optional.custom((t=>"linear"===t||"bezier"===t?t:void 0)),view:t.optional.string})));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>function(t){return"view"in t&&"waveform"===t.view}(t)?64:1,reader:t=>t=>Gw(t)?t:[]},controller:t=>{var e,n,i;return new Hw(t.document,{props:At.fromObject({max:null!==(e="max"in t.params?t.params.max:null)&&void 0!==e?e:null,min:null!==(n="min"in t.params?t.params.min:null)&&void 0!==n?n:null,lineStyle:null!==(i="style"in t.params?t.params.style:null)&&void 0!==i?i:"linear"}),value:t.value,viewProps:t.viewProps})}});new class extends ut{constructor(t){super(),pt(this,t,sb,ib,a,{})}}({target:document.getElementById("ui")});const rb=document.getElementById("demo-canvas"),ob=rb.getContext("2d");let ab;gt.subscribe((e=>{ab=e,function(){const e=t.create(rb.width,rb.height).text(ab.text).fontFamily(ab.fontFamily).padding(ab.padding);ab.fontSizeAuto?e.autoFontSize(!0):e.fontSize(ab.fontSizeManual),e.fillStyle(ab.fillStyle).strokeStyle(ab.strokeStyle,ab.strokeWidth).glow(ab.glowColor,ab.glowSize,ab.shadowOffsetX,ab.shadowOffsetY).blur(ab.blurAmount).innerGlow(ab.innerGlowColor,ab.innerGlowBlur).background(ab.backgroundColor),ab.useGradient&&e.gradient(ab.gradientColors);const n=e.toCanvas();ob.clearRect(0,0,rb.width,rb.height),ob.drawImage(n,0,0)}()}))}();
//# sourceMappingURL=bundle.js.map
