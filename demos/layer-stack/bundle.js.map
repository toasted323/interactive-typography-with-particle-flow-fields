{"version":3,"file":"bundle.js","sources":["../../../node_modules/svelte/src/runtime/internal/utils.js","../../../node_modules/svelte/src/runtime/internal/globals.js","../../../node_modules/svelte/src/runtime/internal/dom.js","../../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../../node_modules/svelte/src/runtime/internal/scheduler.js","../../../node_modules/svelte/src/runtime/internal/transitions.js","../../../node_modules/svelte/src/runtime/internal/each.js","../../../node_modules/svelte/src/runtime/internal/spread.js","../../../node_modules/svelte/src/runtime/internal/Component.js","../../../node_modules/svelte/src/shared/version.js","../../../node_modules/svelte/src/runtime/store/index.js","../../../src/lib/typography/typography-builder.js","../../../src/lib/noise/perlin-noise-2d-time.js","../../../src/lib/noise/flow-nose-2d-time.js","../../../src/lib/noise/instantiate-noise.js","../../../src/lib/noise/fbm-noise-2d-time.js","../../../src/lib/noise/turbulence-noise-2d-time.js","../../../src/lib/layers/blending.js","../../../src/lib/layers/mask-decorator-circle.js","../../../src/apps/shared/stores/layer-stack.js","../../../src/apps/shared/stores/mask-layer.js","../../../src/apps/shared/stores/noise-layer.js","../../../src/apps/shared/stores/noise.js","../../../src/apps/shared/stores/noise-sampling.js","../../../src/apps/shared/stores/typography-layer.js","../../../src/apps/shared/stores/typography.js","../../../src/apps/shared/stores/simulation.js","../../../src/apps/shared/stores/ui.js","../../../node_modules/@tweakpane/core/dist/misc/type-util.js","../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../node_modules/@tweakpane/core/dist/common/tp-error.js","../../../node_modules/@tweakpane/core/dist/common/binding/target.js","../../../node_modules/@tweakpane/core/dist/common/model/emitter.js","../../../node_modules/@tweakpane/core/dist/common/model/complex-value.js","../../../node_modules/@tweakpane/core/dist/common/model/primitive-value.js","../../../node_modules/@tweakpane/core/dist/common/model/readonly-primitive-value.js","../../../node_modules/@tweakpane/core/dist/common/model/values.js","../../../node_modules/@tweakpane/core/dist/common/model/value-map.js","../../../node_modules/@tweakpane/core/dist/common/constraint/definite-range.js","../../../node_modules/@tweakpane/core/dist/common/constraint/range.js","../../../node_modules/@tweakpane/core/dist/common/constraint/step.js","../../../node_modules/@tweakpane/core/dist/common/converter/ecma/nodes.js","../../../node_modules/@tweakpane/core/dist/common/converter/ecma/reader.js","../../../node_modules/@tweakpane/core/dist/common/converter/ecma/parser.js","../../../node_modules/@tweakpane/core/dist/common/converter/number.js","../../../node_modules/@tweakpane/core/dist/common/number/util.js","../../../node_modules/@tweakpane/core/dist/common/point-nd/point-axis.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/blade.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/tp-event.js","../../../node_modules/@tweakpane/core/dist/blade/binding/api/binding.js","../../../node_modules/@tweakpane/core/dist/common/micro-parsers.js","../../../node_modules/@tweakpane/core/dist/blade/common/controller/blade-state.js","../../../node_modules/@tweakpane/core/dist/blade/common/controller/value-blade.js","../../../node_modules/@tweakpane/core/dist/common/binding/value/binding.js","../../../node_modules/@tweakpane/core/dist/common/binding/binding.js","../../../node_modules/@tweakpane/core/dist/common/dom-util.js","../../../node_modules/@tweakpane/core/dist/common/model/reactive.js","../../../node_modules/@tweakpane/core/dist/common/view/class-name.js","../../../node_modules/@tweakpane/core/dist/common/label/view/label.js","../../../node_modules/@tweakpane/core/dist/common/label/controller/label.js","../../../node_modules/@tweakpane/core/dist/blade/common/controller/blade.js","../../../node_modules/@tweakpane/core/dist/blade/common/model/blade-positions.js","../../../node_modules/@tweakpane/core/dist/blade/label/controller/value.js","../../../node_modules/@tweakpane/core/dist/common/model/buffered-value.js","../../../node_modules/@tweakpane/core/dist/blade/button/api/button.js","../../../node_modules/@tweakpane/core/dist/common/view/reactive.js","../../../node_modules/@tweakpane/core/dist/blade/button/view/button.js","../../../node_modules/@tweakpane/core/dist/blade/button/controller/button.js","../../../node_modules/@tweakpane/core/dist/blade/button/controller/button-blade.js","../../../node_modules/@tweakpane/core/dist/version.js","../../../node_modules/@tweakpane/core/dist/misc/semver.js","../../../node_modules/@tweakpane/core/dist/plugin/plugin.js","../../../node_modules/@tweakpane/core/dist/blade/button/plugin.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/rack.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/container.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/refreshable.js","../../../node_modules/@tweakpane/core/dist/blade/common/api/container-blade.js","../../../node_modules/@tweakpane/core/dist/blade/common/controller/container-blade.js","../../../node_modules/@tweakpane/core/dist/blade/common/model/nested-ordered-set.js","../../../node_modules/@tweakpane/core/dist/blade/common/model/rack.js","../../../node_modules/@tweakpane/core/dist/blade/common/controller/rack.js","../../../node_modules/@tweakpane/core/dist/blade/common/model/blade.js","../../../node_modules/@tweakpane/core/dist/blade/common/model/foldable.js","../../../node_modules/@tweakpane/core/dist/blade/folder/api/folder.js","../../../node_modules/@tweakpane/core/dist/blade/common/view/blade-container.js","../../../node_modules/@tweakpane/core/dist/blade/folder/view/folder.js","../../../node_modules/@tweakpane/core/dist/blade/folder/controller/folder.js","../../../node_modules/@tweakpane/core/dist/blade/folder/plugin.js","../../../node_modules/@tweakpane/core/dist/common/model/view-props.js","../../../node_modules/@tweakpane/core/dist/blade/tab/view/tab-page.js","../../../node_modules/@tweakpane/core/dist/blade/tab/view/tab-item.js","../../../node_modules/@tweakpane/core/dist/blade/tab/controller/tab-item.js","../../../node_modules/@tweakpane/core/dist/blade/tab/controller/tab-page.js","../../../node_modules/@tweakpane/core/dist/blade/tab/api/tab.js","../../../node_modules/@tweakpane/core/dist/blade/tab/api/tab-page.js","../../../node_modules/@tweakpane/core/dist/blade/tab/model/tab.js","../../../node_modules/@tweakpane/core/dist/blade/tab/view/tab.js","../../../node_modules/@tweakpane/core/dist/blade/tab/controller/tab.js","../../../node_modules/@tweakpane/core/dist/blade/tab/plugin.js","../../../node_modules/@tweakpane/core/dist/common/api/list.js","../../../node_modules/@tweakpane/core/dist/common/binding/ticker/manual.js","../../../node_modules/@tweakpane/core/dist/common/binding/ticker/interval.js","../../../node_modules/@tweakpane/core/dist/common/constraint/composite.js","../../../node_modules/@tweakpane/core/dist/common/constraint/list.js","../../../node_modules/@tweakpane/core/dist/common/list-util.js","../../../node_modules/@tweakpane/core/dist/common/view/list.js","../../../node_modules/@tweakpane/core/dist/common/controller/list.js","../../../node_modules/@tweakpane/core/dist/common/view/popup.js","../../../node_modules/@tweakpane/core/dist/common/controller/popup.js","../../../node_modules/@tweakpane/core/dist/common/view/text.js","../../../node_modules/@tweakpane/core/dist/common/controller/text.js","../../../node_modules/@tweakpane/core/dist/common/converter/boolean.js","../../../node_modules/@tweakpane/core/dist/common/converter/percentage.js","../../../node_modules/@tweakpane/core/dist/common/converter/string.js","../../../node_modules/@tweakpane/core/dist/common/model/value-sync.js","../../../node_modules/@tweakpane/core/dist/common/ui.js","../../../node_modules/@tweakpane/core/dist/common/view/pointer-handler.js","../../../node_modules/@tweakpane/core/dist/common/number/view/number-text.js","../../../node_modules/@tweakpane/core/dist/common/number/controller/number-text.js","../../../node_modules/@tweakpane/core/dist/common/number/view/slider.js","../../../node_modules/@tweakpane/core/dist/common/number/controller/slider.js","../../../node_modules/@tweakpane/core/dist/common/number/view/slider-text.js","../../../node_modules/@tweakpane/core/dist/common/number/controller/slider-text.js","../../../node_modules/@tweakpane/core/dist/common/view/css-vars.js","../../../node_modules/@tweakpane/core/dist/common/view/plain.js","../../../node_modules/@tweakpane/core/dist/common/point-nd/util.js","../../../node_modules/@tweakpane/core/dist/common/picker-util.js","../../../node_modules/@tweakpane/core/dist/common/primitive.js","../../../node_modules/@tweakpane/core/dist/input-binding/boolean/view/checkbox.js","../../../node_modules/@tweakpane/core/dist/input-binding/boolean/controller/checkbox.js","../../../node_modules/@tweakpane/core/dist/input-binding/boolean/plugin.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/color.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/model/color-model.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/model/int-color.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/color-picker.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/util.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/model/float-color.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/model/colors.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/converter/color-string.js","../../../node_modules/@tweakpane/core/dist/common/converter/parser.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/a-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/a-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/color-texts.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/color-texts.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/h-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/h-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/sv-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/sv-palette.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/color-picker.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/view/color-swatch.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/color-swatch.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/controller/color.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/converter/color-number.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/model/color.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/converter/writer.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/plugin-number.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/plugin-object.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/converter/color-object.js","../../../node_modules/@tweakpane/core/dist/input-binding/color/plugin-string.js","../../../node_modules/@tweakpane/core/dist/input-binding/common/constraint/point-nd.js","../../../node_modules/@tweakpane/core/dist/input-binding/common/view/point-nd-text.js","../../../node_modules/@tweakpane/core/dist/input-binding/common/controller/point-nd-text.js","../../../node_modules/@tweakpane/core/dist/input-binding/number/api/slider.js","../../../node_modules/@tweakpane/core/dist/input-binding/number/plugin.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/model/point-2d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/view/point-2d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/view/point-2d-picker.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/controller/point-2d-picker.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/controller/point-2d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/converter/point-2d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-2d/plugin.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-3d/model/point-3d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-3d/converter/point-3d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-3d/plugin.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-4d/model/point-4d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-4d/converter/point-4d.js","../../../node_modules/@tweakpane/core/dist/input-binding/point-4d/plugin.js","../../../node_modules/@tweakpane/core/dist/input-binding/string/plugin.js","../../../node_modules/@tweakpane/core/dist/misc/constants.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/common/view/multi-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/common/controller/multi-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/common/view/single-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/common/controller/single-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/boolean/plugin.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/number/api/graph-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/number/view/graph-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/number/controller/graph-log.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/number/plugin.js","../../../node_modules/@tweakpane/core/dist/monitor-binding/string/plugin.js","../../../node_modules/svelte-tweakpane-ui/dist/theme.js","../../../node_modules/svelte-tweakpane-ui/dist/internal/ClsPad.svelte","../../../node_modules/svelte-tweakpane-ui/dist/utils.js","../../../node_modules/tweakpane/dist/tweakpane.js","../../../node_modules/svelte-tweakpane-ui/dist/internal/GenericPane.svelte","../../../node_modules/svelte-tweakpane-ui/dist/internal/InternalPaneInline.svelte","../../../node_modules/svelte-tweakpane-ui/dist/control/Button.svelte","../../../node_modules/svelte-tweakpane-ui/dist/core/Blade.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-essentials/dist/tweakpane-plugin-essentials.js","../../../node_modules/fast-copy/dist/esm/index.mjs","../../../node_modules/fast-equals/dist/esm/index.mjs","../../../node_modules/svelte-tweakpane-ui/dist/core/Binding.svelte","../../../node_modules/svelte-tweakpane-ui/dist/internal/GenericBinding.svelte","../../../node_modules/svelte-tweakpane-ui/dist/internal/GenericInput.svelte","../../../node_modules/svelte-tweakpane-ui/dist/control/Checkbox.svelte","../../../node_modules/svelte-tweakpane-ui/dist/internal/GenericInputFolding.svelte","../../../node_modules/svelte-tweakpane-ui/dist/control/Color.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-file-import/dist/tweakpane-plugin-file-import.js","../../../node_modules/@kitschpatrol/tweakpane-plugin-image/dist/tweakpane-plugin-image.js","../../../node_modules/svelte-tweakpane-ui/dist/internal/GenericSlider.svelte","../../../node_modules/svelte-tweakpane-ui/dist/control/List.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-camerakit/dist/tweakpane-plugin-camerakit.js","../../../node_modules/@kitschpatrol/tweakpane-plugin-rotation/dist/tweakpane-plugin-rotation.js","../../../node_modules/svelte-tweakpane-ui/dist/control/Slider.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-inputs/dist/tweakpane-plugin-inputs.js","../../../node_modules/svelte-tweakpane-ui/dist/control/Text.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-textarea/dist/tweakpane-plugin-textarea.js","../../../node_modules/svelte-tweakpane-ui/dist/core/Folder.svelte","../../../node_modules/svelte-persisted-store/dist/index.js","../../../node_modules/svelte-tweakpane-ui/dist/internal/InternalPaneDraggable.svelte","../../../node_modules/svelte-tweakpane-ui/dist/internal/InternalPaneFixed.svelte","../../../node_modules/svelte-tweakpane-ui/dist/core/Pane.svelte","../../../node_modules/@kitschpatrol/tweakpane-plugin-profiler/dist/tweakpane-plugin-profiler.js","../../../node_modules/@kitschpatrol/tweakpane-plugin-waveform/dist/tweakpane-plugin-waveform.js","../../../src/apps/demos/layer-stack/Controls.svelte","../../../src/apps/demos/layer-stack/main.js","../../../src/apps/shared/utils/fps-chart.js","../../../src/lib/layers/image-data-adapter.js","../../../src/lib/typography/build-typography-canvas.js","../../../src/lib/noise/null-noise-2d-time.js","../../../src/lib/layers/noise-adapter.js","../../../src/lib/layers/layer-stack.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro — restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.$$l[type]) {\n\t\t\t\tconst idx = this.$$l[type].indexOf(listener);\n\t\t\t\tif (idx >= 0) {\n\t\t\t\t\tthis.$$l[type].splice(idx, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.20';\nexport const PUBLIC_VERSION = '4';\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","/**\n * Fluent builder for creating bitmap typography with various effects.\n */\nclass TypographyBuilder {\n    #width;\n    #height;\n    #text = \"\";\n    #fontFamily = \"Arial\";\n    #fontSize = 48;\n    #isFontSizeAuto = false;\n    #padding = 20;\n    #fillStyle = \"#ffffff\";\n    #strokeStyle = \"#ffffff\";\n    #strokeWidth = 1;\n    #glowColor = null;\n    #glowSize = 0;\n    #shadowOffsetX = 0;\n    #shadowOffsetY = 0;\n    #blurAmount = 0;\n    #gradientColors = null;\n    #backgroundColor = \"#000000\";\n    #innerGlowColor = null;\n    #innerGlowBlur = 0;\n    #measureCanvas = document.createElement(\"canvas\");\n    #measureCtx = this.#measureCanvas.getContext(\"2d\");\n\n    constructor(width, height) {\n        this.#width = width;\n        this.#height = height;\n    }\n\n    static create(width, height) {\n        return new TypographyBuilder(width, height);\n    }\n\n    // --- Public Setters ---\n\n    /**\n     * Sets the text to render.\n     * @param {string} text - The text to render.\n     * @returns {TypographyBuilder}\n     */\n    text(text) {\n        this.#text = text;\n        return this;\n    }\n\n    /**\n     * Sets the font family.\n     * @param {string} fontFamily - The font family (e.g., \"Arial\").\n     * @returns {TypographyBuilder}\n     */\n    fontFamily(fontFamily) {\n        this.#fontFamily = fontFamily;\n        return this;\n    }\n\n    /**\n     * Sets the font size in pixels.\n     * @param {number} fontSize - The font size in pixels.\n     * @returns {TypographyBuilder}\n     */\n    fontSize(fontSize) {\n        this.#fontSize = fontSize;\n        this.#isFontSizeAuto = false;\n        return this;\n    }\n\n    /**\n     * Enables automatic font size calculation.\n     * @param {boolean} [enable=true] - Whether to enable auto font size.\n     * @returns {TypographyBuilder}\n     */\n    autoFontSize(enable = true) {\n        this.#isFontSizeAuto = enable;\n        return this;\n    }\n\n    /**\n     * Sets the padding around the text in pixels.\n     * @param {number} padding - The padding in pixels.\n     * @returns {TypographyBuilder}\n     */\n    padding(padding) {\n        this.#padding = padding;\n        return this;\n    }\n\n    /**\n     * Sets the fill color.\n     * @param {string} color - The color as a CSS color string.\n     * @returns {TypographyBuilder}\n     */\n    fillStyle(color) {\n        this.#fillStyle = color;\n        return this;\n    }\n\n    /**\n     * Sets the stroke color and width.\n     * @param {string} color - The stroke color.\n     * @param {number} [width=1] - The stroke width in pixels.\n     * @returns {TypographyBuilder}\n     */\n    strokeStyle(color, width = 1) {\n        this.#strokeStyle = color;\n        this.#strokeWidth = width;\n        return this;\n    }\n\n    /**\n     * Sets the glow or shadow effect.\n     * @param {string} color - The glow/shadow color.\n     * @param {number} size - The glow/shadow size in pixels.\n     * @param {number} [offsetX=0] - The horizontal offset in pixels.\n     * @param {number} [offsetY=0] - The vertical offset in pixels.\n     * @returns {TypographyBuilder}\n     */\n    glow(color, size, offsetX = 0, offsetY = 0) {\n        this.#glowColor = color;\n        this.#glowSize = size;\n        this.#shadowOffsetX = offsetX;\n        this.#shadowOffsetY = offsetY;\n        return this;\n    }\n\n    /**\n     * Sets the blur amount in pixels.\n     * @param {number} amount - The blur amount in pixels.\n     * @returns {TypographyBuilder}\n     */\n    blur(amount) {\n        this.#blurAmount = amount;\n        return this;\n    }\n\n    /**\n     * Sets the inner glow effect.\n     * @param {string} color - The inner glow color.\n     * @param {number} blur - The inner glow blur radius in pixels.\n     * @returns {TypographyBuilder}\n     */\n    innerGlow(color, blur) {\n        this.#innerGlowColor = color;\n        this.#innerGlowBlur = blur;\n        return this;\n    }\n\n    /**\n     * Sets the gradient colors.\n     * @param {string[]} colors - An array of CSS color strings.\n     * @returns {TypographyBuilder}\n     */\n    gradient(colors) {\n        this.#gradientColors = colors;\n        return this;\n    }\n\n    /**\n     * Sets the background color.\n     * @param {string} color - The background color.\n     * @returns {TypographyBuilder}\n     */\n    background(color) {\n        this.#backgroundColor = color;\n        return this;\n    }\n\n    // --- Internal Helpers ---\n\n    /**\n     * @private\n     * @param {string} text - The text to measure.\n     * @param {number} width - The maximum width.\n     * @param {number} height - The maximum height.\n     * @returns {number} - The maximum font size in pixels.\n     */\n    #getMaxFontSize(text, width, height) {\n        let fontSize = 10;\n        let maxFontSize = fontSize;\n        let textWidth = 0;\n        let textHeight = 0;\n        const ctx = this.#measureCtx;\n        const padding = this.#padding;\n\n        while (true) {\n            ctx.font = `${fontSize}px ${this.#fontFamily}`;\n            textWidth = ctx.measureText(text).width;\n            textHeight = fontSize; // Approximate height as font size\n            if (textWidth > width - padding * 2 || textHeight > height - padding * 2) {\n                break;\n            }\n            maxFontSize = fontSize;\n            fontSize += 2;\n        }\n        return maxFontSize;\n    }\n\n    /**\n     * @private\n     * @returns {string} - The CSS font string.\n     */\n    #getFontStr() {\n        if (this.#isFontSizeAuto) {\n            const maxFontSize = this.#getMaxFontSize(this.#text, this.#width, this.#height);\n            return `${maxFontSize}px ${this.#fontFamily}`;\n        } else {\n            return `${this.#fontSize}px ${this.#fontFamily}`;\n        }\n    }\n\n    /**\n     * @private\n     * @returns {HTMLCanvasElement}\n     */\n    #createCanvas() {\n        // --- Output canvas ---\n\n        const outputCanvas = document.createElement(\"canvas\");\n        outputCanvas.width = this.#width;\n        outputCanvas.height = this.#height;\n        const outputCtx = outputCanvas.getContext('2d');\n        outputCtx.clearRect(0, 0, outputCanvas.width, outputCanvas.height);\n\n        // --- Styled Canvas ---\n\n        const styledCanvas = document.createElement(\"canvas\");\n        styledCanvas.width = outputCanvas.width;\n        styledCanvas.height = outputCanvas.height;\n        const styledCtx = styledCanvas.getContext(\"2d\");\n\n        // 1. Background\n        styledCtx.fillStyle = this.#backgroundColor;\n        styledCtx.fillRect(0, 0, styledCanvas.width, styledCanvas.height);\n\n        // 2. Outer Glow / Drop Shadow\n        if (this.#glowColor && this.#glowSize > 0) {\n            styledCtx.shadowColor = this.#glowColor;\n            styledCtx.shadowBlur = this.#glowSize;\n            styledCtx.shadowOffsetX = this.#shadowOffsetX;\n            styledCtx.shadowOffsetY = this.#shadowOffsetY;\n        }\n\n        // 3. Main Text\n        styledCtx.font = this.#getFontStr();\n        styledCtx.textAlign = \"center\";\n        styledCtx.textBaseline = \"middle\";\n        const x = styledCanvas.width / 2;\n        const y = styledCanvas.height / 2;\n\n        if (this.#gradientColors) {\n            const gradient = styledCtx.createLinearGradient(0, 0, styledCanvas.width, 0);\n            this.#gradientColors.forEach((color, index) => {\n                gradient.addColorStop(index / (this.#gradientColors.length - 1), color);\n            });\n            styledCtx.fillStyle = gradient;\n        } else {\n            styledCtx.fillStyle = this.#fillStyle;\n        }\n        styledCtx.fillText(this.#text, x, y);\n\n        if (this.#strokeWidth > 0) {\n            styledCtx.strokeStyle = this.#strokeStyle;\n            styledCtx.lineWidth = this.#strokeWidth;\n            styledCtx.strokeText(this.#text, x, y);\n        }\n\n        // 4. Reset shadows and filters\n        styledCtx.shadowColor = \"transparent\";\n        styledCtx.shadowBlur = 0;\n        styledCtx.shadowOffsetX = 0;\n        styledCtx.shadowOffsetY = 0;\n        styledCtx.filter = \"none\";\n\n        // 5. Apply blur to entire text\n        if (this.#blurAmount > 0) {\n            styledCtx.filter = `blur(${this.#blurAmount}px)`;\n            styledCtx.drawImage(styledCanvas, 0, 0);\n            styledCtx.filter = \"none\";\n        }\n\n        // 6. Materialize\n        outputCtx.drawImage(styledCanvas, 0, 0);\n\n        // --- Inner glow canvas ---\n\n        if (this.#innerGlowColor && this.#innerGlowBlur > 0) {\n            // 1. Create mask (text only, no background)\n            const maskCanvas = document.createElement(\"canvas\");\n            maskCanvas.width = styledCanvas.width;\n            maskCanvas.height = styledCanvas.height;\n            const maskCtx = maskCanvas.getContext(\"2d\");\n            maskCtx.font = this.#getFontStr();\n            maskCtx.textAlign = \"center\";\n            maskCtx.textBaseline = \"middle\";\n            maskCtx.fillStyle = \"#fff\";\n            maskCtx.fillText(this.#text, styledCanvas.width / 2, styledCanvas.height / 2);\n            const maskData = maskCtx.getImageData(0, 0, styledCanvas.width, styledCanvas.height);\n\n            // 2. Create glow (blurred text)\n            const glowCanvas = document.createElement(\"canvas\");\n            glowCanvas.width = styledCanvas.width;\n            glowCanvas.height = styledCanvas.height;\n            const glowCtx = glowCanvas.getContext(\"2d\");\n            glowCtx.fillStyle = this.#fillStyle;\n            glowCtx.fillRect(0, 0, styledCanvas.width, styledCanvas.height);\n            glowCtx.font = this.#getFontStr();\n            glowCtx.textAlign = \"center\";\n            glowCtx.textBaseline = \"middle\";\n            glowCtx.fillStyle = this.#innerGlowColor;\n            glowCtx.fillText(this.#text, styledCanvas.width / 2, styledCanvas.height / 2);\n\n            // To blur, draw the glow onto a temporary canvas with filter\n            const tempCanvas = document.createElement(\"canvas\");\n            tempCanvas.width = styledCanvas.width;\n            tempCanvas.height = styledCanvas.height;\n            const tempCtx = tempCanvas.getContext(\"2d\");\n            tempCtx.filter = `blur(${this.#innerGlowBlur}px)`;\n            tempCtx.drawImage(glowCanvas, 0, 0);\n            tempCtx.filter = \"none\";\n            glowCtx.clearRect(0, 0, styledCanvas.width, styledCanvas.height);\n            glowCtx.drawImage(tempCanvas, 0, 0);\n            const glowData = glowCtx.getImageData(0, 0, styledCanvas.width, styledCanvas.height);\n\n            // 3. Mask inner glow to the text shape\n            for (let i = 0; i < glowData.data.length; i += 4) {\n                if (maskData.data[i + 3] === 0) {\n                    glowData.data[i + 3] = 0;\n                }\n            }\n\n            // 4. Draw the masked glow over the glow canvas\n            glowCtx.putImageData(glowData, 0, 0);\n\n            // 5. Materialize\n            outputCtx.drawImage(glowCanvas, 0, 0);\n        }\n\n        return outputCanvas;\n    }\n\n    // --- Public API for finalization ---\n\n    /**\n     * Materializes the typography to a canvas.\n     * @returns {HTMLCanvasElement}\n     */\n    toCanvas() {\n        return this.#createCanvas();\n    }\n}\n\nexport { TypographyBuilder };\n","class Grad {\n  constructor(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n  dot3(x, y, z) {\n    return this.x * x + this.y * y + this.z * z;\n  }\n}\n\n// 12 gradient directions for 3D Perlin noise\nconst grad3 = [\n  new Grad(1, 1, 0),\n  new Grad(-1, 1, 0),\n  new Grad(1, -1, 0),\n  new Grad(-1, -1, 0),\n  new Grad(1, 0, 1),\n  new Grad(-1, 0, 1),\n  new Grad(1, 0, -1),\n  new Grad(-1, 0, -1),\n  new Grad(0, 1, 1),\n  new Grad(0, -1, 1),\n  new Grad(0, 1, -1),\n  new Grad(0, -1, -1),\n];\n\n// Default permutation table (from Ken Perlin)\nconst p = [\n  151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140,\n  36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234,\n  75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237,\n  149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48,\n  27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105,\n  92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73,\n  209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86,\n  164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38,\n  147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189,\n  28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101,\n  155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232,\n  178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12,\n  191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31,\n  181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\n  138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215,\n  61, 156, 180,\n];\n\n/**\n * Perlin noise in 2D with smooth time evolution (z axis), based on the canonical \"improved Perlin noise\" algorithm by Ken Perlin (2002).\n *\n * This implementation uses a fixed set of 12 gradient directions, a permutation table, and a quintic fade function,\n * following the canonical design as seen in:\n *   - https://github.com/josephg/noisejs/blob/master/perlin.js (JavaScript, based on Stefan Gustavson's reference code)\n *   - https://github.com/stegu/perlin-noise (C/Java reference implementation by Stefan Gustavson)\n *\n * The third dimension is interpreted as time, allowing smoothly animated 2D noise fields.\n *\n * Implements the Noise2D API: get time(), setTime(t), advanceTime(dt), getValue(x, y).\n * - get time(): Readonly accessor for the current time parameter.\n * - setTime(t): Sets the current time slice (z axis) for subsequent noise queries.\n * - advanceTime(dt): Advances the internal time parameter by a delta, enabling incremental animation.\n * - getValue(x, y): Returns the noise value at (x, y, t), where t is the most recently set or advanced time.\n *\n * Output is typically in the range [-1, 1], but may slightly exceed these bounds due to interpolation and gradient distribution.\n *\n * References:\n * - Ken Perlin, \"Improving Noise\", 2002.\n * - https://github.com/stegu/perlin-noise\n * - https://github.com/josephg/noisejs/\n *\n * @implements {Noise2DTime}\n */\nexport class PerlinNoise2DTime {\n  #perm = new Array(512);\n  #gradP = new Array(512);\n  #time = 0;\n\n  /**\n   * @param {object} [opts]\n   * @param {number} [opts.seed] - Integer seed for permutation table.\n   */\n  constructor(opts = {}) {\n    const { seed } = opts;\n    this.#init(seed);\n  }\n\n  /**\n   * The current time parameter.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.#time;\n  }\n\n  /**\n   * Set the time parameter for smooth evolution.\n   * @param {number} t\n   */\n  setTime(t) {\n    this.#time = t;\n  }\n\n  /**\n   * Advance the internal time by a delta (incremental time).\n   * @param {number} dt - Time delta to advance\n   */\n  advanceTime(dt) {\n    this.#time += dt;\n  }\n\n  /**\n   * Returns the Perlin noise value at (x, y) for the current time.\n   * Output is in approximately [-1, 1], but may slightly exceed due to interpolation.\n   * @param {number} x\n   * @param {number} y\n   * @returns {number}\n   */\n  getValue(x, y) {\n    return this.#perlin3(x, y, this.#time);\n  }\n\n  #init(seed) {\n    let perm = this.#perm,\n      gradP = this.#gradP;\n    let sourceP = p.slice();\n    // If no seed, use default table\n    if (typeof seed !== \"number\") {\n      for (let i = 0; i < 512; i++) {\n        perm[i] = sourceP[i & 255];\n        gradP[i] = grad3[perm[i] % 12];\n      }\n    } else {\n      // Seeded shuffle (simple LCG)\n      let lcg = (s) => () =>\n        (s = (s * 1664525 + 1013904223) & 0xffffffff) >>> 0;\n      let rand = lcg(seed);\n      for (let i = 255; i > 0; i--) {\n        let j = rand() % (i + 1);\n        [sourceP[i], sourceP[j]] = [sourceP[j], sourceP[i]];\n      }\n      for (let i = 0; i < 512; i++) {\n        perm[i] = sourceP[i & 255];\n        gradP[i] = grad3[perm[i] % 12];\n      }\n    }\n  }\n\n  static #fade(t) {\n    return t * t * t * (t * (t * 6 - 15) + 10);\n  }\n\n  static #lerp(a, b, t) {\n    return a + t * (b - a);\n  }\n\n  #perlin3(x, y, z) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x),\n      Y = Math.floor(y),\n      Z = Math.floor(z);\n    x -= X;\n    y -= Y;\n    z -= Z;\n    X &= 255;\n    Y &= 255;\n    Z &= 255;\n\n    // Hash coordinates of the 8 cube corners\n    const gradP = this.#gradP,\n      perm = this.#perm;\n    const n000 = gradP[X + perm[Y + perm[Z]]].dot3(x, y, z);\n    const n001 = gradP[X + perm[Y + perm[Z + 1]]].dot3(x, y, z - 1);\n    const n010 = gradP[X + perm[Y + 1 + perm[Z]]].dot3(x, y - 1, z);\n    const n011 = gradP[X + perm[Y + 1 + perm[Z + 1]]].dot3(x, y - 1, z - 1);\n    const n100 = gradP[X + 1 + perm[Y + perm[Z]]].dot3(x - 1, y, z);\n    const n101 = gradP[X + 1 + perm[Y + perm[Z + 1]]].dot3(x - 1, y, z - 1);\n    const n110 = gradP[X + 1 + perm[Y + 1 + perm[Z]]].dot3(x - 1, y - 1, z);\n    const n111 = gradP[X + 1 + perm[Y + 1 + perm[Z + 1]]].dot3(\n      x - 1,\n      y - 1,\n      z - 1\n    );\n\n    // Compute fade curves for each coordinate\n    const u = PerlinNoise2DTime.#fade(x);\n    const v = PerlinNoise2DTime.#fade(y);\n    const w = PerlinNoise2DTime.#fade(z);\n\n    // Interpolate\n    return PerlinNoise2DTime.#lerp(\n      PerlinNoise2DTime.#lerp(\n        PerlinNoise2DTime.#lerp(n000, n100, u),\n        PerlinNoise2DTime.#lerp(n001, n101, u),\n        w\n      ),\n      PerlinNoise2DTime.#lerp(\n        PerlinNoise2DTime.#lerp(n010, n110, u),\n        PerlinNoise2DTime.#lerp(n011, n111, u),\n        w\n      ),\n      v\n    );\n  }\n}\n","/**\n * 2D flow (animated) noise with smoothly evolving time dimension.\n *\n * This implementation is based on the \"rotating gradients\" technique for animated Perlin-style noise,\n * as introduced by Perlin & Neyret (2001) for generating \"flow noise\".\n * At each grid point, the gradient (basis) vector is smoothly rotated over time at a unique rate,\n * producing a scalar noise field that appears to flow or evolve continuously.\n *\n * The underlying static noise is improved Perlin noise (Ken Perlin, 2002), using a permutation table,\n * quintic smoothstep interpolation, and grid-gradient hashing. The evolution in time is achieved by rotating\n * the gradients, following the flow noise method.\n *\n * Implements the Noise2D API: get time(), setTime(t), advanceTime(dt), getValue(x, y).\n * - get time(): Readonly accessor for the current time parameter.\n * - setTime(t): Sets the current time for the animated flow field (rotates the gradients to time t).\n * - advanceTime(dt): Efficiently advances the flow field by a time increment dt, incrementally rotating gradients.\n * - getValue(x, y): Returns the scalar noise value at (x, y, t), where t is the most recently set or advanced time.\n *\n * Output is normalized to [-1, 1] (the actual theoretical range is about [-0.707, 0.707]).\n *\n * References:\n * - Ken Perlin & Fabrice Neyret, \"Flow Noise\", 2001.\n * - Ken Perlin, \"Improving Noise\", 2002.\n *\n * @implements {Noise2DTime}\n */\nexport class FlowNoise2DTime {\n  /**\n   * Linearly interpolates between v0 and v1 by factor f.\n   * @param {number} v0 - Start value.\n   * @param {number} v1 - End value.\n   * @param {number} f - Interpolation factor in [0, 1].\n   * @returns {number} The interpolated value.\n   */\n  static #lerp(v0, v1, f) {\n    return (1 - f) * v0 + f * v1;\n  }\n\n  /**\n   * Smoothly interpolates between 0 and 1 with a quintic curve.\n   * Clamps input to [0,1].\n   * @param {number} r - The interpolation parameter.\n   * @returns {number} The smoothed value.\n   */\n  static #smoothStep(r) {\n    if (r < 0) return 0;\n    if (r > 1) return 1;\n    return r * r * r * (10 + r * (-15 + r * 6));\n  }\n\n  /**\n   * Generates a deterministic pseudo-random unsigned 32-bit integer from a seed.\n   * @param {number} seed - The input seed.\n   * @returns {number} The hashed unsigned integer.\n   */\n  static #randHash(seed) {\n    let i = (seed ^ 12345391) * 2654435769;\n    i ^= (i << 6) ^ (i >>> 26);\n    i = (i * 2654435769) >>> 0;\n    i += (i << 5) ^ (i >>> 12);\n    return i >>> 0; // Ensure unsigned 32-bit\n  }\n\n  /**\n   * Generates a random float in [min, max] using a hashed seed.\n   */\n  static #randHashFInterval(seed, min, max) {\n    return min + (max - min) * (FlowNoise2DTime.#randHash(seed) / 0xffffffff);\n  }\n\n  // Private instance fields\n  #N;\n  #basis;\n  #perm;\n  #originalBasis;\n  #spinRate;\n  #rotCos;\n  #rotSin;\n  #lastTime;\n  #dt;\n\n  /**\n   * Creates a 2D flow noise generator.\n   *\n   * @param {object} [opts] - Options for the noise generator.\n   * @param {number} [opts.seed=171717] - Seed for permutation/randomness.\n   * @param {number} [opts.spinVariation=0.2] - Variation in spin rates.\n   * @param {number} [opts.N=128] - Number of basis/permutation vectors (table size). Higher N increases quality but uses more memory and is slower.\n   */\n  constructor(opts = {}) {\n    let { seed = 171717, spinVariation = 0.2, N = 128 } = opts;\n    this.#N = N;\n    this.#basis = new Array(this.#N);\n    this.#perm = new Array(this.#N);\n    this.#originalBasis = new Array(this.#N);\n    this.#spinRate = new Array(this.#N);\n    this.#rotCos = new Array(this.#N);\n    this.#rotSin = new Array(this.#N);\n    for (let i = 0; i < this.#N; ++i) {\n      this.#rotCos[i] = 1;\n      this.#rotSin[i] = 0;\n    }\n    this.#lastTime = 0;\n    this.#dt = 0;\n\n    // Initialize basis and permutation\n    for (let i = 0; i < this.#N; ++i) {\n      const theta = (i / this.#N) * 2 * Math.PI;\n      const p = { x: Math.cos(theta), y: Math.sin(theta) };\n      this.#basis[i] = { x: p.x, y: p.y };\n      this.#perm[i] = i;\n    }\n    this.#reinitialize(seed);\n\n    // Original basis and spin rates\n    seed += this.#N;\n    for (let i = 0; i < this.#N; ++i) {\n      this.#originalBasis[i] = { x: this.#basis[i].x, y: this.#basis[i].y };\n      const rnd = FlowNoise2DTime.#randHashFInterval(\n        seed++,\n        1.0 - 0.5 * spinVariation,\n        1.0 + 0.5 * spinVariation\n      );\n      this.#spinRate[i] = 2.0 * Math.PI * rnd;\n    }\n  }\n\n  /**\n   * Shuffle the permutation array based on the seed.\n   * @param {number} seed\n   */\n  #reinitialize(seed) {\n    for (let i = 1; i < this.#N; ++i) {\n      const j = FlowNoise2DTime.#randHash(seed++) % (i + 1);\n      const dummy = this.#perm[j];\n      this.#perm[j] = this.#perm[i];\n      this.#perm[i] = dummy;\n    }\n  }\n\n  /**\n   * Returns a permuted index for the basis array.\n   * @param {number} i\n   * @param {number} j\n   * @returns {number}\n   */\n  #getHashIndex(i, j) {\n    const N = this.#N;\n    const iWrapped = ((i % N) + N) % N;\n    const jWrapped = ((j % N) + N) % N;\n    return this.#perm[(this.#perm[iWrapped] + jWrapped) % N];\n  }\n\n  /**\n   * The current time parameter.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.#lastTime;\n  }\n\n  /**\n   * Set the time parameter for smooth evolution.\n   * Rotates all basis vectors only if t is different from the last time.\n   * @param {number} t\n   */\n  setTime(t) {\n    if (t === this.#lastTime) return;\n    this.#lastTime = t;\n    for (let i = 0; i < this.#N; ++i) {\n      const theta = this.#spinRate[i] * t;\n      const c = Math.cos(theta);\n      const s = Math.sin(theta);\n      const orig = this.#originalBasis[i];\n      this.#basis[i].x = c * orig.x + s * orig.y;\n      this.#basis[i].y = -s * orig.x + c * orig.y;\n    }\n  }\n\n  /**\n   * Advance the internal time by a delta (incremental time).\n   * @param {number} dt\n   */\n  advanceTime(dt) {\n    this.#lastTime += dt;\n    for (let i = 0; i < this.#N; ++i) {\n      // Precompute increment if dt changed\n      if (dt !== this.#dt) {\n        this.#rotCos[i] = Math.cos(this.#spinRate[i] * dt);\n        this.#rotSin[i] = Math.sin(this.#spinRate[i] * dt);\n      }\n      const bx = this.#basis[i].x;\n      const by = this.#basis[i].y;\n      // Apply incremental rotation\n      this.#basis[i].x = bx * this.#rotCos[i] + by * this.#rotSin[i];\n      this.#basis[i].y = -bx * this.#rotSin[i] + by * this.#rotCos[i];\n    }\n    this.#dt = dt;\n  }\n\n  /**\n   * Returns the noise value at (x, y) at current time in [-1, +1].\n   * @param {number} x\n   * @param {number} y\n   * @returns {number}\n   */\n  getValue(x, y) {\n    const floorX = Math.floor(x);\n    const floorY = Math.floor(y);\n\n    const i = floorX;\n    const j = floorY;\n\n    const n00 = this.#basis[this.#getHashIndex(i, j)];\n    const n10 = this.#basis[this.#getHashIndex(i + 1, j)];\n    const n01 = this.#basis[this.#getHashIndex(i, j + 1)];\n    const n11 = this.#basis[this.#getHashIndex(i + 1, j + 1)];\n\n    const fx = x - floorX;\n    const fy = y - floorY;\n\n    const sx = FlowNoise2DTime.#smoothStep(fx);\n    const sy = FlowNoise2DTime.#smoothStep(fy);\n\n    const v00 = fx * n00.x + fy * n00.y;\n    const v10 = (fx - 1.0) * n10.x + fy * n10.y;\n    const v01 = fx * n01.x + (fy - 1.0) * n01.y;\n    const v11 = (fx - 1.0) * n11.x + (fy - 1.0) * n11.y;\n\n    const vlerpX0 = FlowNoise2DTime.#lerp(v00, v10, sx);\n    const vlerpX1 = FlowNoise2DTime.#lerp(v01, v11, sx);\n\n    const lerpY = FlowNoise2DTime.#lerp(vlerpX0, vlerpX1, sy);\n\n    return lerpY / 0.7071;\n  }\n}\n","import { PerlinNoise2DTime } from \"$lib/noise/perlin-noise-2d-time.js\";\nimport { FlowNoise2DTime } from \"$lib/noise/flow-nose-2d-time.js\";\nimport { FBMNoise2DTime } from \"$lib/noise/fbm-noise-2d-time.js\";\nimport { TurbulenceNoise2DTime } from \"$lib/noise/turbulence-noise-2d-time.js\";\n\nconst noiseClasses = {\n  PerlinNoise2DTime,\n  FlowNoise2DTime,\n  FBMNoise2DTime,\n  TurbulenceNoise2DTime,\n};\n\n/**\n * Instantiates a new noise object of the given type, with parameters and at time 0.\n * Handles both simple and octave-based (FBM, Turbulence) noise types.\n *\n * @param {string} type - The noise class name to instantiate (e.g. \"PerlinNoise2DTime\", \"FBMNoise2DTime\").\n * @param {Object} params - Parameters for the noise instance. For octave-based types, must include baseType and baseParams.\n * @returns {Noise2DTime} The instantiated noise object, with its time set to zero.\n * @throws {Error} If the noise type or base noise type is unknown.\n */\nexport function instantiateNoise(type, params) {\n  let instance;\n  if (type === \"FBMNoise2DTime\" || type === \"TurbulenceNoise2DTime\") {\n    const baseType = params.baseType;\n    const baseParams =\n      baseType === \"PerlinNoise2DTime\"\n        ? params.perlinBaseParams\n        : params.flowBaseParams;\n\n    const BaseNoiseClass = noiseClasses[baseType];\n    if (!BaseNoiseClass)\n      throw new Error(\"Unknown base noise type: \" + baseType);\n\n    const baseNoise = new BaseNoiseClass(baseParams);\n\n    const octaveParams = {\n      octaves: params.octaves,\n      persistence: params.persistence,\n      lacunarity: params.lacunarity,\n    };\n\n    const OctaveNoiseClass = noiseClasses[type];\n    instance = new OctaveNoiseClass(baseNoise, octaveParams);\n  } else {\n    const NoiseClass = noiseClasses[type];\n    if (!NoiseClass) throw new Error(\"Unknown noise type: \" + type);\n    instance = new NoiseClass(params);\n  }\n\n  instance.setTime(0);\n\n  return instance;\n}\n","/**\n * Generates 2D fractal Brownian motion (fBM) noise with time evolution by summing multiple octaves of a base Noise2DTime source.\n *\n * Each octave is sampled at increasing frequency and decreasing amplitude. The results are normalized, producing continuous,\n * natural-looking procedural noise patterns that evolve smoothly over time.\n *\n * Implements the Noise2DTime API: get time(), setTime(t), advanceTime(dt), getValue(x, y).\n * The base noise must implement the Noise2DTime API.\n *\n * @implements {Noise2DTime}\n */\nexport class FBMNoise2DTime {\n  #lastTime = 0;\n\n  /**\n   * @param {Object} baseNoise - Base noise instance implementing Noise2DTime API.\n   * @param {Object} [opts] - Configuration options.\n   * @param {number} [opts.octaves=4] - Number of octaves (layers) to sum.\n   * @param {number} [opts.persistence=0.5] - Amplitude multiplier for each successive octave.\n   * @param {number} [opts.lacunarity=2.0] - Frequency multiplier for each successive octave.\n   */\n  constructor(\n    baseNoise,\n    { octaves = 4, persistence = 0.5, lacunarity = 2.0 } = {}\n  ) {\n    this.baseNoise = baseNoise;\n    this.octaves = octaves;\n    this.persistence = persistence;\n    this.lacunarity = lacunarity;\n  }\n\n  /**\n   * The current time parameter.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.#lastTime;\n  }\n\n  /**\n   * Sets the current time for the noise field (propagates to base noise).\n   * @param {number} t - The time value to set.\n   */\n  setTime(t) {\n    this.#lastTime = t;\n    this.baseNoise.setTime(t);\n  }\n\n  /**\n   * Advances the internal time by a delta (propagates to base noise).\n   * @param {number} dt - The time increment.\n   */\n  advanceTime(dt) {\n    this.#lastTime += dt;\n    this.baseNoise.advanceTime(dt);\n  }\n\n  /**\n   * Returns the fBM noise value at (x, y) for the current time, combining all octaves.\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} The normalized fractal noise value, typically in [-1, 1].\n   */\n  getValue(x, y) {\n    let total = 0;\n    let amplitude = 1;\n    let maxAmplitude = 0;\n    let frequency = 1;\n    for (let i = 0; i < this.octaves; i++) {\n      this.baseNoise.setTime(this.time * frequency);\n      total +=\n        this.baseNoise.getValue(x * frequency, y * frequency) * amplitude;\n      maxAmplitude += amplitude;\n      amplitude *= this.persistence;\n      frequency *= this.lacunarity;\n    }\n    this.baseNoise.setTime(this.time);\n\n    return total / maxAmplitude;\n  }\n}\n","/**\n * Generates 2D turbulence noise with time evolution by summing the absolute value of multiple octaves of a base Noise2DTime source.\n *\n * Each octave is sampled at increasing frequency and decreasing amplitude. The absolute value of each octave is summed and normalized,\n * producing turbulent, ridged procedural noise patterns that evolve smoothly over time.\n *\n * Implements the Noise2DTime API: get time(), setTime(t), advanceTime(dt), getValue(x, y).\n * The base noise must implement the Noise2DTime API.\n *\n * @implements {Noise2DTime}\n */\nexport class TurbulenceNoise2DTime {\n  #lastTime = 0;\n\n  /**\n   * @param {Object} baseNoise - Base noise instance implementing Noise2DTime API.\n   * @param {Object} [opts] - Configuration options.\n   * @param {number} [opts.octaves=4] - Number of octaves (layers) to sum.\n   * @param {number} [opts.persistence=0.5] - Amplitude multiplier for each successive octave.\n   * @param {number} [opts.lacunarity=2.0] - Frequency multiplier for each successive octave.\n   */\n  constructor(\n    baseNoise,\n    { octaves = 4, persistence = 0.5, lacunarity = 2.0 } = {}\n  ) {\n    this.baseNoise = baseNoise;\n    this.octaves = octaves;\n    this.persistence = persistence;\n    this.lacunarity = lacunarity;\n  }\n\n  /**\n   * The current time parameter.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.#lastTime;\n  }\n\n  /**\n   * Sets the current time for the noise field (propagates to base noise).\n   * @param {number} t - The time value to set.\n   */\n  setTime(t) {\n    this.#lastTime = t;\n    this.baseNoise.setTime(t);\n  }\n\n  /**\n   * Advances the internal time by a delta (propagates to base noise).\n   * @param {number} dt - The time increment.\n   */\n  advanceTime(dt) {\n    this.#lastTime += dt;\n    this.baseNoise.advanceTime(dt);\n  }\n\n  /**\n   * Returns the turbulence noise value at (x, y) for the current time, combining all octaves.\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} The normalized turbulence noise value, typically in [0, 1].\n   */\n  getValue(x, y) {\n    let total = 0;\n    let amplitude = 1;\n    let maxAmplitude = 0;\n    let frequency = 1;\n\n    for (let i = 0; i < this.octaves; i++) {\n      this.baseNoise.setTime(this.time * frequency);\n      total +=\n        Math.abs(this.baseNoise.getValue(x * frequency, y * frequency)) *\n        amplitude;\n      maxAmplitude += amplitude;\n      amplitude *= this.persistence;\n      frequency *= this.lacunarity;\n    }\n    this.baseNoise.setTime(this.time);\n\n    return total / maxAmplitude;\n  }\n}\n","/**\n * Additive blending function.\n * Sums the value of all enabled layers at (x, y).\n * If no layers are enabled, returns 0 (neutral for addition).\n */\nexport function additiveBlending(layers, x, y) {\n  let result = 0;\n  let anyEnabled = false;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      result += layer.getValue(x, y);\n      anyEnabled = true;\n    }\n  }\n  return anyEnabled ? result : 0;\n}\n\n/**\n * Subtract blending function.\n * Subtracts all enabled layers from the first enabled layer.\n * If no layers are enabled, returns 0.\n */\nexport function subtractBlending(layers, x, y) {\n  let result = null;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      const v = layer.getValue(x, y);\n      if (result === null) {\n        result = v;\n      } else {\n        result -= v;\n      }\n    }\n  }\n  return result !== null ? result : 0;\n}\n\n/**\n * Multiplicative blending function.\n * Multiplies all enabled layer values at (x, y).\n * If no layers are enabled, returns 1 (neutral for multiplication).\n */\nexport function multiplyBlending(layers, x, y) {\n  let value = 1;\n  let anyEnabled = false;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      value *= layer.getValue(x, y);\n      anyEnabled = true;\n    }\n  }\n  return anyEnabled ? value : 1;\n}\n\n/**\n * Screen blending function.\n * Lightens by inverting, multiplying, then inverting again.\n * For multiple layers, applies screen recursively.\n * If no layers are enabled, returns 0.\n */\nexport function screenBlending(layers, x, y) {\n  let result = 1;\n  let anyEnabled = false;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      result *= 1 - layer.getValue(x, y);\n      anyEnabled = true;\n    }\n  }\n  return anyEnabled ? 1 - result : 0;\n}\n\n/**\n * Overlay blending function.\n * Mix of multiply and screen, increases contrast.\n * For multiple layers, overlays each subsequent layer atop the previous.\n * If no layers are enabled, returns 0.\n */\nexport function overlayBlending(layers, x, y) {\n  let result = null;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      const v = layer.getValue(x, y);\n      if (result === null) {\n        result = v;\n      } else {\n        result = result < 0.5 ? 2 * result * v : 1 - 2 * (1 - result) * (1 - v);\n      }\n    }\n  }\n  return result !== null ? result : 0;\n}\n\n/**\n * Maximum blending function.\n * Returns the maximum value among all enabled layers at (x, y).\n * If no layers are enabled, returns 0.\n */\nexport function maxBlending(layers, x, y) {\n  let found = false;\n  let maxValue = 0;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      const v = layer.getValue(x, y);\n      if (!found || v > maxValue) {\n        maxValue = v;\n        found = true;\n      }\n    }\n  }\n  return found ? maxValue : 0;\n}\n\n/**\n * Minimum blending function.\n * Returns the minimum value among all enabled layers at (x, y).\n * If no layers are enabled, returns 0.\n */\nexport function minBlending(layers, x, y) {\n  let found = false;\n  let minValue = 0;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      const v = layer.getValue(x, y);\n      if (!found || v < minValue) {\n        minValue = v;\n        found = true;\n      }\n    }\n  }\n  return found ? minValue : 0;\n}\n\n/**\n * Average blending function.\n * Returns the average value of all enabled layers at (x, y).\n * If no layers are enabled, returns 0.\n */\nexport function averageBlending(layers, x, y) {\n  let sum = 0;\n  let count = 0;\n  for (const layer of layers) {\n    if (layer.enabled) {\n      sum += layer.getValue(x, y);\n      count++;\n    }\n  }\n  return count > 0 ? sum / count : 0;\n}\n","/**\n * Decorator that applies a circular, time-dependent mask to a layer.\n * The mask can be activated, updated, and deactivated (with fade-out).\n * If not updated for `autoFadeDuration`, it auto-deactivates.\n *\n * Masking can be toggled independently via `enableMasking`.\n *\n * @implements {Layer}\n * @class\n */\nexport class MaskDecoratorCircle {\n  /**\n   * The wrapped layer to which the mask is applied.\n   * @type {Layer}\n   */\n  layer;\n\n  /**\n   * Whether masking is active. If false, this decorator passes through the layer value.\n   * @type {boolean}\n   */\n  enableMasking = true;\n\n  /**\n   * The radius of the circular mask.\n   * @type {number}\n   */\n  radius;\n\n  /**\n   * Fade-out duration in seconds after deactivation.\n   * @type {number}\n   */\n  fadeOutDuration;\n\n  /**\n   * Duration in seconds after last update before auto-fade starts.\n   * @type {number}\n   */\n  autoFadeDuration;\n\n  /** @private @type {?number} */\n  #centerX = null;\n  /** @private @type {?number} */\n  #centerY = null;\n  /** @private @type {boolean} */\n  #active = false;\n  /** @private @type {boolean} */\n  #fading = false;\n  /** @private @type {?number} */\n  #fadeOutStartTime = null;\n  /** @private @type {?number} */\n  #lastUpdateTime = null;\n  /** @private @type {?number} */\n  #t = null;\n\n  /**\n   * @param {Layer} layer - The layer to mask.\n   * @param {object} opts - Mask options.\n   * @param {boolean} [opts.enableMasking=true] - Initial masking enablement.\n   * @param {number} opts.centerX - Initial center X coordinate (optional).\n   * @param {number} opts.centerY - Initial center Y coordinate (optional).\n   * @param {number} opts.radius - Radius of the mask.\n   * @param {number} opts.fadeOutDuration - Fade-out duration in seconds.\n   * @param {number} opts.autoFadeDuration - Inactivity duration before auto-fade.\n   */\n  constructor(layer, opts) {\n    this.layer = layer;\n    this.enableMasking =\n      opts.enableMasking !== undefined ? opts.enableMasking : true;\n    this.radius = opts.radius;\n    this.fadeOutDuration = opts.fadeOutDuration;\n    this.autoFadeDuration = opts.autoFadeDuration;\n  }\n\n  /**\n   * The enablement state.\n   * Delegates to the root layer's enabled property.\n   * @type {boolean}\n   */\n  get enabled() {\n    return this.layer.enabled;\n  }\n  set enabled(value) {\n    this.layer.enabled = value;\n  }\n\n  /**\n   * Activates and positions the mask at the current internal time.\n   * @param {number} centerX\n   * @param {number} centerY\n   */\n  activate(centerX, centerY) {\n    if (!this.enableMasking) return;\n    this.#active = true;\n    this.#fading = false;\n\n    this.#centerX = centerX;\n    this.#centerY = centerY;\n\n    this.#fadeOutStartTime = null;\n    this.#lastUpdateTime = this.#t;\n\n    console.log(`[Mask] Activated at (${centerX}, ${centerY}) t=${this.#t}`);\n  }\n\n  /**\n   * Updates the mask position and resets the auto-fade timer at the current internal time.\n   * @param {number} centerX\n   * @param {number} centerY\n   */\n  update(centerX, centerY) {\n    if (!this.enableMasking) return;\n    this.#centerX = centerX;\n    this.#centerY = centerY;\n    this.#lastUpdateTime = this.#t;\n    if (!this.#active || this.#fading) {\n      this.#active = true;\n      this.#fading = false;\n      this.#fadeOutStartTime = null;\n\n      console.log(\n        `[Mask] Reactivated by update at (${centerX}, ${centerY}) t=${this.#t}`\n      );\n    } else {\n      console.log(`[Mask] Updated at (${centerX}, ${centerY}) t=${this.#t}`);\n    }\n  }\n\n  /**\n   * Starts the fade-out phase at the current internal time.\n   */\n  deactivate() {\n    if (!this.enableMasking) return;\n    if (this.#active && !this.#fading) {\n      this.#fading = true;\n      this.#fadeOutStartTime = this.#t;\n\n      console.log(`[Mask] Deactivated at t=${this.#t}, starting fade out`);\n    }\n  }\n\n  /**\n   * Checks if the mask should auto-fade due to inactivity.\n   * Called internally from setTime and advanceTime.\n   * @private\n   * @returns {void}\n   */\n  #checkAutoFade() {\n    if (!this.enableMasking) return;\n    if (\n      this.#active &&\n      !this.#fading &&\n      this.#lastUpdateTime !== null &&\n      this.#t - this.#lastUpdateTime > this.autoFadeDuration\n    ) {\n      this.deactivate(this.#t);\n    }\n  }\n\n  /**\n   * The current time state of the layer.\n   * Delegates to the wrapped layer.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.layer.time;\n  }\n\n  /**\n   * Sets the current time for the mask and underlying layer.\n   * @param {number} t - Current time (seconds).\n   * @returns {void}\n   */\n  setTime(t) {\n    this.layer.setTime(t);\n    this.#t = t;\n    this.#checkAutoFade();\n  }\n\n  /**\n   * Advances the current time for the mask and underlying layer.\n   * @param {number} dt - Time delta (seconds).\n   * @returns {void}\n   */\n  advanceTime(dt) {\n    this.layer.advanceTime(dt);\n    this.#t = (this.#t ?? 0) + dt;\n    this.#checkAutoFade();\n  }\n\n  /**\n   * Gets the masked value at a given position.\n   * If masking is disabled, returns the underlying layer's value directly.\n   * Otherwise, returns 0 if outside the circle, inactive, or after fade-out;\n   * inside, returns layer value * alpha.\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} The masked value (0 if masked, else layer value * alpha).\n   */\n  getValue(x, y) {\n    if (!this.enableMasking) {\n      return this.layer.getValue(x, y);\n    }\n\n    if (\n      this.#t === null ||\n      this.#centerX === null ||\n      this.#centerY === null ||\n      !this.#active\n    )\n      return 0;\n\n    let alpha = 1;\n\n    if (this.#fading) {\n      const fadeElapsed = this.#t - this.#fadeOutStartTime;\n      if (fadeElapsed > this.fadeOutDuration) {\n        this.#centerX = null;\n        this.#centerY = null;\n        this.#fadeOutStartTime = null;\n        this.#lastUpdateTime = null;\n        this.#active = false;\n        this.#fading = false;\n        return 0;\n      }\n      alpha = smoothstep(1, 0, fadeElapsed / this.fadeOutDuration);\n    }\n\n    const dx = x - this.#centerX;\n    const dy = y - this.#centerY;\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    if (dist > this.radius) return 0;\n\n    const rNorm = dist / this.radius;\n    const maskAlpha = smoothstep(1, 0, rNorm);\n\n    return this.layer.getValue(x, y) * alpha * maskAlpha;\n  }\n}\n\n/**\n * Smoothstep interpolation between edge0 and edge1.\n * Returns 0 if x <= edge0, 1 if x >= edge1, and a smooth interpolation otherwise.\n *\n * @param {number} edge0 - Lower edge of the transition.\n * @param {number} edge1 - Upper edge of the transition.\n * @param {number} x - Value to interpolate.\n * @returns {number} Interpolated value between 0 and 1.\n */\nfunction smoothstep(edge0, edge1, x) {\n  x = Math.max(0, Math.min(1, (x - edge0) / (edge1 - edge0)));\n  return x * x * (3 - 2 * x);\n}\n","import { writable } from \"svelte/store\";\n\nexport const blendingOptions = [\n  { text: \"Additive\", value: \"additive\" },\n  { text: \"Subtract\", value: \"subtract\" },\n  { text: \"Multiply\", value: \"multiply\" },\n  { text: \"Screen\", value: \"screen\" },\n  { text: \"Overlay\", value: \"overlay\" },\n  { text: \"Max\", value: \"max\" },\n  { text: \"Min\", value: \"min\" },\n  { text: \"Average\", value: \"average\" },\n];\n\nfunction createLayerStackParams() {\n  const defaults = {\n    blendingMode: \"additive\",\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setBlendingMode(mode) {\n      update((state) => ({ ...state, blendingMode: mode }));\n    },\n    reset() {\n      set({ ...defaults });\n    },\n  };\n}\n\nexport const layerStackStore = createLayerStackParams();\n","import { writable } from \"svelte/store\";\n\nfunction createMaskLayerStore() {\n  const defaults = {\n    enableMasking: true,\n    radius: 100,\n    fadeOutDuration: 1.0,\n    autoFadeDuration: 1.0,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n\n  return {\n    subscribe,\n    set,\n    update,\n    setEnableMasking(enableMasking) {\n      update((state) => ({ ...state, enableMasking }));\n    },\n    setRadius(radius) {\n      update((state) => ({ ...state, radius }));\n    },\n    setFadeOutDuration(fadeOutDuration) {\n      update((state) => ({ ...state, fadeOutDuration }));\n    },\n    setAutoFadeDuration(autoFadeDuration) {\n      update((state) => ({ ...state, autoFadeDuration }));\n    },\n    reset() {\n      set({ ...defaults });\n    },\n  };\n}\n\nexport const maskLayerStore = createMaskLayerStore();\n","import { writable } from \"svelte/store\";\n\nfunction createNoiseLayerStore() {\n  const defaults = {\n    enabled: true,\n    gain: 1,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setEnabled(enabled) {\n      update((state) => ({ ...state, enabled }));\n    },\n    setGain(gain) {\n      update((state) => ({ ...state, gain }));\n    },\n    reset() {\n      set({ ...defaults });\n    },\n  };\n}\n\nexport const noiseLayerStore = createNoiseLayerStore();\n\nfunction createNoiseLayerDirtyFlagStore() {\n  const { subscribe, set } = writable(false);\n\n  noiseLayerStore.subscribe(() => set(true));\n\n  function clear() {\n    set(false);\n  }\n\n  return {\n    subscribe,\n    clear,\n  };\n}\n\nexport const noiseLayerDirtyFlagStore = createNoiseLayerDirtyFlagStore();\n","import { writable } from \"svelte/store\";\n\n// --- Null noise params ---\nfunction createNullNoiseParams() {\n  const defaults = {}; // No params\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const nullNoiseStore = createNullNoiseParams();\n\n// --- Perlin noise params ---\nfunction createPerlinParams() {\n  const defaults = { seed: 0 };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setSeed: (seed) => update((obj) => ({ ...obj, seed })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const perlinStore = createPerlinParams();\n\n// --- Flow noise params ---\nfunction createFlowParams() {\n  const defaults = {\n    seed: 0,\n    spinVariation: 0.2,\n    N: 128,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setSeed: (seed) => update((obj) => ({ ...obj, seed })),\n    setSpinVariation: (spinVariation) =>\n      update((obj) => ({ ...obj, spinVariation })),\n    setN: (N) => update((obj) => ({ ...obj, N })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const flowStore = createFlowParams();\n\n// --- FBM noise params ---\nfunction createFBMParams() {\n  const defaults = {\n    baseType: \"PerlinNoise2DTime\",\n    perlinBaseParams: {\n      seed: 0,\n    },\n    flowBaseParams: {\n      seed: 0,\n      spinVariation: 0.2,\n      N: 128,\n    },\n    octaves: 4,\n    persistence: 0.5,\n    lacunarity: 2.0,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setBaseType: (baseType) => update((obj) => ({ ...obj, baseType })),\n    setPerlinBaseParams: (perlinBaseParams) =>\n      update((obj) => ({ ...obj, perlinBaseParams })),\n    setFlowBaseParams: (flowBaseParams) =>\n      update((obj) => ({ ...obj, flowBaseParams })),\n    setOctaves: (octaves) => update((obj) => ({ ...obj, octaves })),\n    setPersistence: (persistence) => update((obj) => ({ ...obj, persistence })),\n    setLacunarity: (lacunarity) => update((obj) => ({ ...obj, lacunarity })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const fbmStore = createFBMParams();\n\n// --- Turbulence noise params ---\nfunction createTurbulenceParams() {\n  const defaults = {\n    baseType: \"PerlinNoise2DTime\",\n    perlinBaseParams: {\n      seed: 0,\n    },\n    flowBaseParams: {\n      seed: 0,\n      spinVariation: 0.2,\n      N: 128,\n    },\n    octaves: 4,\n    persistence: 0.5,\n    lacunarity: 2.0,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setBaseType: (baseType) => update((obj) => ({ ...obj, baseType })),\n    setPerlinBaseParams: (perlinBaseParams) =>\n      update((obj) => ({ ...obj, perlinBaseParams })),\n    setFlowBaseParams: (flowBaseParams) =>\n      update((obj) => ({ ...obj, flowBaseParams })),\n    setOctaves: (octaves) => update((obj) => ({ ...obj, octaves })),\n    setPersistence: (persistence) => update((obj) => ({ ...obj, persistence })),\n    setLacunarity: (lacunarity) => update((obj) => ({ ...obj, lacunarity })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const turbulenceStore = createTurbulenceParams();\n\n// --- Noise type ---\nexport const noiseTypeToStore = {\n  NullNoise: nullNoiseStore,\n  PerlinNoise2DTime: perlinStore,\n  FlowNoise2DTime: flowStore,\n  FBMNoise2DTime: fbmStore,\n  TurbulenceNoise2DTime: turbulenceStore,\n};\n\nexport const noiseTypeOptions = [\n  { text: \"PerlinNoise2DTime\", value: \"PerlinNoise2DTime\" },\n  { text: \"FlowNoise2DTime\", value: \"FlowNoise2DTime\" },\n  { text: \"FBMNoise2DTime\", value: \"FBMNoise2DTime\" },\n  { text: \"TurbulenceNoise2DTime\", value: \"TurbulenceNoise2DTime\" },\n];\n\nfunction createNoiseTypeParam() {\n  const DEFAULT = \"PerlinNoise2DTime\";\n  const { subscribe, set } = writable(DEFAULT);\n  return {\n    subscribe,\n    set,\n    reset: () => set(DEFAULT),\n  };\n}\n\nexport const noiseTypeStore = createNoiseTypeParam();\n\n// --- Dirty flags ---\nfunction createNoiseDirtyFlags() {\n  const defaults = {\n    PerlinNoise2DTime: false,\n    FlowNoise2DTime: false,\n    FBMNoise2DTime: false,\n    TurbulenceNoise2DTime: false,\n    noiseType: false,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  perlinStore.subscribe(() =>\n    update((flags) => ({ ...flags, PerlinNoise2DTime: true }))\n  );\n  flowStore.subscribe(() =>\n    update((flags) => ({ ...flags, FlowNoise2DTime: true }))\n  );\n  fbmStore.subscribe(() =>\n    update((flags) => ({ ...flags, FBMNoise2DTime: true }))\n  );\n  turbulenceStore.subscribe(() =>\n    update((flags) => ({ ...flags, TurbulenceNoise2DTime: true }))\n  );\n  noiseTypeStore.subscribe(() =>\n    update((flags) => ({ ...flags, noiseType: true }))\n  );\n\n  function clear(flag) {\n    update((flags) => ({ ...flags, [flag]: false }));\n  }\n\n  function clearAll() {\n    set({...defaults});\n  }\n\n  return {\n    subscribe,\n    clear,\n    clearAll,\n  };\n}\n\nexport const noiseDirtyFlagsStore = createNoiseDirtyFlags();\n","import { writable } from \"svelte/store\";\n\nfunction createNoiseSamplingStore() {\n  const defaults = {\n    frequency: 0.05,\n    timeScale: 20.0,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setFrequency: (frequency) => update((obj) => ({ ...obj, frequency })),\n    setTimeScale: (timeScale) => update((obj) => ({ ...obj, timeScale })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const noiseSamplingStore = createNoiseSamplingStore();\n\nfunction createNoiseSamplingDirtyFlagStore() {\n  const { subscribe, set } = writable(true); // initially dirty\n\n  noiseSamplingStore.subscribe(() => set(true));\n\n  function clear() {\n    set(false);\n  }\n\n  return {\n    subscribe,\n    clear,\n  };\n}\n\nexport const noiseSamplingDirtyFlagsStore = createNoiseSamplingDirtyFlagStore();\n","import { writable } from \"svelte/store\";\n\n// --- Typography layer params ---\nfunction createTypographyLayerParams() {\n  const defaults = {\n    enabled: true,\n    gain: 1,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n  return {\n    subscribe,\n    set,\n    update,\n    setEnabled(enabled) {\n      update((state) => ({ ...state, enabled }));\n    },\n    setGain(gain) {\n      update((state) => ({ ...state, gain }));\n    },\n    reset() {\n      set({ ...defaults });\n    },\n  };\n}\n\nexport const typographyLayerStore = createTypographyLayerParams();\n\nfunction createTypographyLayerDirtyFlag() {\n  const { subscribe, set } = writable(true); // initially dirty\n\n  typographyLayerStore.subscribe(() => set(true));\n\n  function clear() {\n    set(false);\n  }\n\n  return {\n    subscribe,\n    clear,\n  };\n}\n\nexport const typographyLayerDirtyFlagStore = createTypographyLayerDirtyFlag();\n","import { writable } from \"svelte/store\";\n\nexport const FONT_FAMILIES = Object.freeze({\n  ARIAL: \"Arial\",\n  VERDANA: \"Verdana\",\n  TIMES_NEW_ROMAN: \"Times New Roman\",\n});\n\nexport const fontFamilyOptions = [\n  { text: \"Arial\", value: FONT_FAMILIES.ARIAL },\n  { text: \"Verdana\", value: FONT_FAMILIES.VERDANA },\n  { text: \"Times New Roman\", value: FONT_FAMILIES.TIMES_NEW_ROMAN },\n];\n\nfunction createTypographyStore() {\n  const defaults = {\n    text: \"Hello World\",\n    fontFamily: FONT_FAMILIES.ARIAL,\n    fontSizeAuto: true,\n    fontSizeManual: 48,\n    padding: 20,\n    fillStyle: \"#0000ff\",\n    strokeStyle: \"#000099\",\n    strokeWidth: 3,\n    glowColor: \"#0000cc\",\n    glowSize: 10,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    blurAmount: 3,\n    innerGlowColor: \"#000044\",\n    innerGlowBlur: 0,\n    backgroundColor: \"#000000\",\n    gradientColors: [\"#000066\", \"#0000ff\", \"#000066\"],\n    useGradient: false,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n\n  return {\n    subscribe,\n    set,\n    update,\n    setText: (text) => update((obj) => ({ ...obj, text })),\n    setFontFamily: (fontFamily) => update((obj) => ({ ...obj, fontFamily })),\n    setFontSizeAuto: (fontSizeAuto) =>\n      update((obj) => ({ ...obj, fontSizeAuto })),\n    setFontSizeManual: (fontSizeManual) =>\n      update((obj) => ({ ...obj, fontSizeManual })),\n    setPadding: (padding) => update((obj) => ({ ...obj, padding })),\n    setFillStyle: (fillStyle) => update((obj) => ({ ...obj, fillStyle })),\n    setStrokeStyle: (strokeStyle) => update((obj) => ({ ...obj, strokeStyle })),\n    setStrokeWidth: (strokeWidth) => update((obj) => ({ ...obj, strokeWidth })),\n    setGlowColor: (glowColor) => update((obj) => ({ ...obj, glowColor })),\n    setGlowSize: (glowSize) => update((obj) => ({ ...obj, glowSize })),\n    setShadowOffsetX: (shadowOffsetX) =>\n      update((obj) => ({ ...obj, shadowOffsetX })),\n    setShadowOffsetY: (shadowOffsetY) =>\n      update((obj) => ({ ...obj, shadowOffsetY })),\n    setBlurAmount: (blurAmount) => update((obj) => ({ ...obj, blurAmount })),\n    setInnerGlowColor: (innerGlowColor) =>\n      update((obj) => ({ ...obj, innerGlowColor })),\n    setInnerGlowBlur: (innerGlowBlur) =>\n      update((obj) => ({ ...obj, innerGlowBlur })),\n    setBackgroundColor: (backgroundColor) =>\n      update((obj) => ({ ...obj, backgroundColor })),\n    setGradientColors: (gradientColors) =>\n      update((obj) => ({ ...obj, gradientColors })),\n    setUseGradient: (useGradient) => update((obj) => ({ ...obj, useGradient })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const typographyStore = createTypographyStore();\n\n// --- Dirty flags ---\nfunction createTypographyDirtyFlagStore() {\n  const { subscribe, set } = writable(true); // initially dirty\n\n  typographyStore.subscribe(() => set(true));\n\n  function clear() {\n    set(false);\n  }\n\n  return {\n    subscribe,\n    clear,\n  };\n}\n\nexport const typographyDirtyFlagStore = createTypographyDirtyFlagStore();\n","import { writable } from \"svelte/store\";\n\nfunction createSimulationParams() {\n  const defaults = {\n    animating: true,\n    timeScale: 1,\n    useAdvanceTime: false,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n\n  return {\n    subscribe,\n    set,\n    update,\n    setSpeed(timeScale) {\n      update((state) => ({ ...state, timeScale }));\n    },\n    setAnimating(animating) {\n      update((state) => ({ ...state, animating }));\n    },\n    setUseAdvanceTime(useAdvanceTime) {\n      update((state) => ({ ...state, useAdvanceTime }));\n    },\n    reset() {\n      set({ ...defaults });\n    },\n  };\n}\n\nexport const simulationStore = createSimulationParams();\n","import { writable } from \"svelte/store\";\n\nexport const COLOR_MODE = Object.freeze({\n  GRAYSCALE: \"grayscale\",\n  HEIGHT_BANDS: \"heightbands\",\n  GEOGRAPHICAL: \"geographical\",\n});\n\nexport const colorModeOptions = [\n  { text: \"Grayscale\", value: COLOR_MODE.GRAYSCALE },\n  { text: \"Height Bands\", value: COLOR_MODE.HEIGHT_BANDS },\n  { text: \"Geographical\", value: COLOR_MODE.GEOGRAPHICAL },\n];\nfunction createUIParams() {\n  const defaults = {\n    colorMode: \"grayscale\",\n    showScaleVisualization: true,\n  };\n  const { subscribe, set, update } = writable({ ...defaults });\n\n  return {\n    subscribe,\n    set,\n    update,\n    setColorMode: (colorMode) => update((state) => ({ ...state, colorMode })),\n    setShowScaleVisualization: (show) =>\n      update((state) => ({ ...state, showScaleVisualization: show })),\n    reset: () => set({ ...defaults }),\n  };\n}\n\nexport const uiStore = createUIParams();\n","export function forceCast(v) {\n    return v;\n}\nexport function isEmpty(value) {\n    return value === null || value === undefined;\n}\nexport function isObject(value) {\n    return value !== null && typeof value === 'object';\n}\nexport function isRecord(value) {\n    return value !== null && typeof value === 'object';\n}\nexport function deepEqualsArray(a1, a2) {\n    if (a1.length !== a2.length) {\n        return false;\n    }\n    for (let i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isPropertyWritable(obj, key) {\n    let target = obj;\n    do {\n        const d = Object.getOwnPropertyDescriptor(target, key);\n        if (d && (d.set !== undefined || d.writable === true)) {\n            return true;\n        }\n        target = Object.getPrototypeOf(target);\n    } while (target !== null);\n    return false;\n}\nexport function deepMerge(r1, r2) {\n    const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n    return keys.reduce((result, key) => {\n        const v1 = r1[key];\n        const v2 = r2[key];\n        return isRecord(v1) && isRecord(v2)\n            ? Object.assign(Object.assign({}, result), { [key]: deepMerge(v1, v2) }) : Object.assign(Object.assign({}, result), { [key]: key in r2 ? v2 : v1 });\n    }, {});\n}\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","import { forceCast } from '../misc/type-util.js';\nconst CREATE_MESSAGE_MAP = {\n    alreadydisposed: () => 'View has been already disposed',\n    invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n    nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n    nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n    notbindable: () => `Value is not bindable`,\n    notcompatible: (context) => `Not compatible with  plugin '${context.id}'`,\n    propertynotfound: (context) => `Property '${context.name}' not found`,\n    shouldneverhappen: () => 'This error should never happen',\n};\nexport class TpError {\n    static alreadyDisposed() {\n        return new TpError({ type: 'alreadydisposed' });\n    }\n    static notBindable() {\n        return new TpError({\n            type: 'notbindable',\n        });\n    }\n    static notCompatible(bundleId, id) {\n        return new TpError({\n            type: 'notcompatible',\n            context: {\n                id: `${bundleId}.${id}`,\n            },\n        });\n    }\n    static propertyNotFound(name) {\n        return new TpError({\n            type: 'propertynotfound',\n            context: {\n                name: name,\n            },\n        });\n    }\n    static shouldNeverHappen() {\n        return new TpError({ type: 'shouldneverhappen' });\n    }\n    constructor(config) {\n        var _a;\n        this.message =\n            (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n        this.name = this.constructor.name;\n        this.stack = new Error(this.message).stack;\n        this.type = config.type;\n    }\n    toString() {\n        return this.message;\n    }\n}\n","import { TpError } from '../tp-error.js';\n/**\n * A binding target.\n */\nexport class BindingTarget {\n    /**\n     * @hidden\n     */\n    constructor(obj, key) {\n        this.obj_ = obj;\n        this.key = key;\n    }\n    static isBindable(obj) {\n        if (obj === null) {\n            return false;\n        }\n        if (typeof obj !== 'object' && typeof obj !== 'function') {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Read a bound value.\n     * @return A bound value\n     */\n    read() {\n        return this.obj_[this.key];\n    }\n    /**\n     * Write a value.\n     * @param value The value to write to the target.\n     */\n    write(value) {\n        this.obj_[this.key] = value;\n    }\n    /**\n     * Write a value to the target property.\n     * @param name The property name.\n     * @param value The value to write to the target.\n     */\n    writeProperty(name, value) {\n        const valueObj = this.read();\n        if (!BindingTarget.isBindable(valueObj)) {\n            throw TpError.notBindable();\n        }\n        if (!(name in valueObj)) {\n            throw TpError.propertyNotFound(name);\n        }\n        valueObj[name] = value;\n    }\n}\n","/**\n * A type-safe event emitter.\n * @template E The interface that maps event names and event objects.\n */\nexport class Emitter {\n    constructor() {\n        this.observers_ = {};\n    }\n    /**\n     * Adds an event listener to the emitter.\n     * @param eventName The event name to listen.\n     * @param handler The event handler.\n     * @param opt_options The options.\n     * @param opt_options.key The key that can be used for removing the handler.\n     */\n    on(eventName, handler, opt_options) {\n        var _a;\n        let observers = this.observers_[eventName];\n        if (!observers) {\n            observers = this.observers_[eventName] = [];\n        }\n        observers.push({\n            handler: handler,\n            key: (_a = opt_options === null || opt_options === void 0 ? void 0 : opt_options.key) !== null && _a !== void 0 ? _a : handler,\n        });\n        return this;\n    }\n    /**\n     * Removes an event listener from the emitter.\n     * @param eventName The event name.\n     * @param key The event handler to remove, or the key for removing the handler.\n     */\n    off(eventName, key) {\n        const observers = this.observers_[eventName];\n        if (observers) {\n            this.observers_[eventName] = observers.filter((observer) => {\n                return observer.key !== key;\n            });\n        }\n        return this;\n    }\n    emit(eventName, event) {\n        const observers = this.observers_[eventName];\n        if (!observers) {\n            return;\n        }\n        observers.forEach((observer) => {\n            observer.handler(event);\n        });\n    }\n}\n","import { Emitter } from './emitter.js';\n/**\n * A complex value that has constraint and comparator.\n * @template T the type of the raw value.\n */\nexport class ComplexValue {\n    constructor(initialValue, config) {\n        var _a;\n        this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n        this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n        this.emitter = new Emitter();\n        this.rawValue_ = initialValue;\n    }\n    get constraint() {\n        return this.constraint_;\n    }\n    get rawValue() {\n        return this.rawValue_;\n    }\n    set rawValue(rawValue) {\n        this.setRawValue(rawValue, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(rawValue, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const constrainedValue = this.constraint_\n            ? this.constraint_.constrain(rawValue)\n            : rawValue;\n        const prevValue = this.rawValue_;\n        const changed = !this.equals_(prevValue, constrainedValue);\n        if (!changed && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.rawValue_ = constrainedValue;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: constrainedValue,\n            sender: this,\n        });\n    }\n}\n","import { Emitter } from './emitter.js';\n/**\n * A value that has a primitive raw value.\n * @template T the type of the raw value.\n */\nexport class PrimitiveValue {\n    constructor(initialValue) {\n        this.emitter = new Emitter();\n        this.value_ = initialValue;\n    }\n    get rawValue() {\n        return this.value_;\n    }\n    set rawValue(value) {\n        this.setRawValue(value, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(value, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const prevValue = this.value_;\n        if (prevValue === value && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.value_ = value;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: this.value_,\n            sender: this,\n        });\n    }\n}\n","import { Emitter } from './emitter.js';\n/**\n * @hidden\n */\nexport class ReadonlyPrimitiveValue {\n    constructor(value) {\n        /**\n         * The event emitter for value changes.\n         */\n        this.emitter = new Emitter();\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n    }\n    /**\n     * The raw value of the model.\n     */\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\n","import { ComplexValue } from './complex-value.js';\nimport { PrimitiveValue } from './primitive-value.js';\nimport { ReadonlyPrimitiveValue } from './readonly-primitive-value.js';\nexport function createValue(initialValue, config) {\n    const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n    const equals = config === null || config === void 0 ? void 0 : config.equals;\n    if (!constraint && !equals) {\n        return new PrimitiveValue(initialValue);\n    }\n    return new ComplexValue(initialValue, config);\n}\nexport function createReadonlyValue(value) {\n    return [\n        new ReadonlyPrimitiveValue(value),\n        (rawValue, options) => {\n            value.setRawValue(rawValue, options);\n        },\n    ];\n}\n","import { Emitter } from './emitter.js';\nimport { createValue } from './values.js';\nexport class ValueMap {\n    /**\n     * @hidden\n     */\n    constructor(valueMap) {\n        this.emitter = new Emitter();\n        this.valMap_ = valueMap;\n        for (const key in this.valMap_) {\n            const v = this.valMap_[key];\n            v.emitter.on('change', () => {\n                this.emitter.emit('change', {\n                    key: key,\n                    sender: this,\n                });\n            });\n        }\n    }\n    static createCore(initialValue) {\n        const keys = Object.keys(initialValue);\n        return keys.reduce((o, key) => {\n            key;\n            return Object.assign(o, {\n                [key]: createValue(initialValue[key]),\n            });\n        }, {});\n    }\n    static fromObject(initialValue) {\n        const core = this.createCore(initialValue);\n        return new ValueMap(core);\n    }\n    get(key) {\n        return this.valMap_[key].rawValue;\n    }\n    set(key, value) {\n        this.valMap_[key].rawValue = value;\n    }\n    value(key) {\n        return this.valMap_[key];\n    }\n}\n","import { ValueMap } from '../model/value-map.js';\n/**\n * A number range constraint that cannot be undefined. Used for slider control.\n */\nexport class DefiniteRangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        return Math.min(Math.max(value, min), max);\n    }\n}\n","import { isEmpty } from '../../misc/type-util.js';\nimport { ValueMap } from '../model/value-map.js';\n/**\n * A number range constraint.\n */\nexport class RangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        let result = value;\n        if (!isEmpty(min)) {\n            result = Math.max(result, min);\n        }\n        if (!isEmpty(max)) {\n            result = Math.min(result, max);\n        }\n        return result;\n    }\n}\n","/**\n * A number step range constraint.\n */\nexport class StepConstraint {\n    constructor(step, origin = 0) {\n        this.step = step;\n        this.origin = origin;\n    }\n    constrain(value) {\n        const o = this.origin % this.step;\n        const r = Math.round((value - o) / this.step);\n        return o + r * this.step;\n    }\n}\n","export class NumberLiteralNode {\n    constructor(text) {\n        this.text = text;\n    }\n    evaluate() {\n        return Number(this.text);\n    }\n    toString() {\n        return this.text;\n    }\n}\nconst BINARY_OPERATION_MAP = {\n    '**': (v1, v2) => Math.pow(v1, v2),\n    '*': (v1, v2) => v1 * v2,\n    '/': (v1, v2) => v1 / v2,\n    '%': (v1, v2) => v1 % v2,\n    '+': (v1, v2) => v1 + v2,\n    '-': (v1, v2) => v1 - v2,\n    '<<': (v1, v2) => v1 << v2,\n    '>>': (v1, v2) => v1 >> v2,\n    '>>>': (v1, v2) => v1 >>> v2,\n    '&': (v1, v2) => v1 & v2,\n    '^': (v1, v2) => v1 ^ v2,\n    '|': (v1, v2) => v1 | v2,\n};\nexport class BinaryOperationNode {\n    constructor(operator, left, right) {\n        this.left = left;\n        this.operator = operator;\n        this.right = right;\n    }\n    evaluate() {\n        const op = BINARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected binary operator: '${this.operator}`);\n        }\n        return op(this.left.evaluate(), this.right.evaluate());\n    }\n    toString() {\n        return [\n            'b(',\n            this.left.toString(),\n            this.operator,\n            this.right.toString(),\n            ')',\n        ].join(' ');\n    }\n}\nconst UNARY_OPERATION_MAP = {\n    '+': (v) => v,\n    '-': (v) => -v,\n    '~': (v) => ~v,\n};\nexport class UnaryOperationNode {\n    constructor(operator, expr) {\n        this.operator = operator;\n        this.expression = expr;\n    }\n    evaluate() {\n        const op = UNARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected unary operator: '${this.operator}`);\n        }\n        return op(this.expression.evaluate());\n    }\n    toString() {\n        return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n}\n","function combineReader(parsers) {\n    return (text, cursor) => {\n        for (let i = 0; i < parsers.length; i++) {\n            const result = parsers[i](text, cursor);\n            if (result !== '') {\n                return result;\n            }\n        }\n        return '';\n    };\n}\nexport function readWhitespace(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^\\s+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n    const ds = readDecimalDigits(text, cursor);\n    if (ds !== '') {\n        return ds;\n    }\n    const sign = text.substr(cursor, 1);\n    cursor += 1;\n    if (sign !== '-' && sign !== '+') {\n        return '';\n    }\n    const sds = readDecimalDigits(text, cursor);\n    if (sds === '') {\n        return '';\n    }\n    return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n    const result = [];\n    const e = text.substr(cursor, 1);\n    cursor += 1;\n    if (e.toLowerCase() !== 'e') {\n        return '';\n    }\n    result.push(e);\n    const si = readSignedInteger(text, cursor);\n    if (si === '') {\n        return '';\n    }\n    return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    if (ch === '0') {\n        return ch;\n    }\n    const nzd = readNonZeroDigit(text, cursor);\n    cursor += nzd.length;\n    if (nzd === '') {\n        return '';\n    }\n    return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    if (dds === '') {\n        return '';\n    }\n    return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([\n    readDecimalLiteral1,\n    readDecimalLiteral2,\n    readDecimalLiteral3,\n]);\nfunction parseBinaryDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[01]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0b') {\n        return '';\n    }\n    const bds = parseBinaryDigits(text, cursor);\n    if (bds === '') {\n        return '';\n    }\n    return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-7]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0o') {\n        return '';\n    }\n    const ods = readOctalDigits(text, cursor);\n    if (ods === '') {\n        return '';\n    }\n    return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0x') {\n        return '';\n    }\n    const hds = readHexDigits(text, cursor);\n    if (hds === '') {\n        return '';\n    }\n    return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([\n    readBinaryIntegerLiteral,\n    readOctalIntegerLiteral,\n    readHexIntegerLiteral,\n]);\nexport const readNumericLiteral = combineReader([\n    readNonDecimalIntegerLiteral,\n    readDecimalLiteral,\n]);\n","import { BinaryOperationNode, NumberLiteralNode, UnaryOperationNode, } from './nodes.js';\nimport { readNumericLiteral, readWhitespace } from './reader.js';\nfunction parseLiteral(text, cursor) {\n    const num = readNumericLiteral(text, cursor);\n    cursor += num.length;\n    if (num === '') {\n        return null;\n    }\n    return {\n        evaluable: new NumberLiteralNode(num),\n        cursor: cursor,\n    };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '(') {\n        return null;\n    }\n    const expr = parseExpression(text, cursor);\n    if (!expr) {\n        return null;\n    }\n    cursor = expr.cursor;\n    cursor += readWhitespace(text, cursor).length;\n    const cl = text.substr(cursor, 1);\n    cursor += cl.length;\n    if (cl !== ')') {\n        return null;\n    }\n    return {\n        evaluable: expr.evaluable,\n        cursor: cursor,\n    };\n}\nfunction parsePrimaryExpression(text, cursor) {\n    var _a;\n    return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n}\nfunction parseUnaryExpression(text, cursor) {\n    const expr = parsePrimaryExpression(text, cursor);\n    if (expr) {\n        return expr;\n    }\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '+' && op !== '-' && op !== '~') {\n        return null;\n    }\n    const num = parseUnaryExpression(text, cursor);\n    if (!num) {\n        return null;\n    }\n    cursor = num.cursor;\n    return {\n        cursor: cursor,\n        evaluable: new UnaryOperationNode(op, num.evaluable),\n    };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n    if (!op) {\n        return null;\n    }\n    cursor += op.length;\n    cursor += readWhitespace(text, cursor).length;\n    return {\n        cursor: cursor,\n        operator: op,\n    };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n    return (text, cursor) => {\n        const firstExpr = exprParser(text, cursor);\n        if (!firstExpr) {\n            return null;\n        }\n        cursor = firstExpr.cursor;\n        let expr = firstExpr.evaluable;\n        for (;;) {\n            const op = readBinaryOperator(ops, text, cursor);\n            if (!op) {\n                break;\n            }\n            cursor = op.cursor;\n            const nextExpr = exprParser(text, cursor);\n            if (!nextExpr) {\n                return null;\n            }\n            cursor = nextExpr.cursor;\n            expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n        }\n        return expr\n            ? {\n                cursor: cursor,\n                evaluable: expr,\n            }\n            : null;\n    };\n}\nconst parseBinaryOperationExpression = [\n    ['**'],\n    ['*', '/', '%'],\n    ['+', '-'],\n    ['<<', '>>>', '>>'],\n    ['&'],\n    ['^'],\n    ['|'],\n].reduce((parser, ops) => {\n    return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    return parseBinaryOperationExpression(text, cursor);\n}\n/**\n * Parse ECMAScript expression with numeric literals.\n * https://262.ecma-international.org/\n * @param text The string to be parsed.\n * @return A parsing result, or null if failed.\n */\nexport function parseEcmaNumberExpression(text) {\n    const expr = parseExpression(text, 0);\n    if (!expr) {\n        return null;\n    }\n    const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n    if (cursor !== text.length) {\n        return null;\n    }\n    return expr.evaluable;\n}\n","import { isEmpty } from '../../misc/type-util.js';\nimport { parseEcmaNumberExpression } from './ecma/parser.js';\nexport function parseNumber(text) {\n    var _a;\n    const r = parseEcmaNumberExpression(text);\n    return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nexport function numberFromUnknown(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        const pv = parseNumber(value);\n        if (!isEmpty(pv)) {\n            return pv;\n        }\n    }\n    return 0;\n}\nexport function numberToString(value) {\n    return String(value);\n}\nexport function createNumberFormatter(digits) {\n    return (value) => {\n        // toFixed() of Safari doesn't support digits greater than 20\n        // https://github.com/cocopon/tweakpane/pull/19\n        return value.toFixed(Math.max(Math.min(digits, 20), 0));\n    };\n}\n","import { isEmpty } from '../../misc/type-util.js';\nimport { DefiniteRangeConstraint } from '../constraint/definite-range.js';\nimport { RangeConstraint } from '../constraint/range.js';\nimport { StepConstraint } from '../constraint/step.js';\nimport { createNumberFormatter } from '../converter/number.js';\nexport function mapRange(value, start1, end1, start2, end2) {\n    const p = (value - start1) / (end1 - start1);\n    return start2 + p * (end2 - start2);\n}\nexport function getDecimalDigits(value) {\n    const text = String(value.toFixed(10));\n    const frac = text.split('.')[1];\n    return frac.replace(/0+$/, '').length;\n}\nexport function constrainRange(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nexport function loopRange(value, max) {\n    return ((value % max) + max) % max;\n}\nexport function getSuitableDecimalDigits(params, rawValue) {\n    return !isEmpty(params.step)\n        ? getDecimalDigits(params.step)\n        : Math.max(getDecimalDigits(rawValue), 2);\n}\nexport function getSuitableKeyScale(params) {\n    var _a;\n    return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nexport function getSuitablePointerScale(params, rawValue) {\n    var _a;\n    const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n    return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\n/**\n * Tries to create a step constraint.\n * @param params The input parameters object.\n * @return A constraint or null if not found.\n */\nexport function createStepConstraint(params, initialValue) {\n    if (!isEmpty(params.step)) {\n        return new StepConstraint(params.step, initialValue);\n    }\n    return null;\n}\n/**\n * Tries to create a range constraint.\n * @param params The input parameters object.\n * @return A constraint or null if not found.\n */\nexport function createRangeConstraint(params) {\n    if (!isEmpty(params.max) && !isEmpty(params.min)) {\n        return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        return new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    return null;\n}\nexport function createNumberTextPropsObject(params, initialValue) {\n    var _a, _b, _c;\n    return {\n        formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n        keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n        pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue),\n    };\n}\nexport function createNumberTextInputParamsParser(p) {\n    return {\n        format: p.optional.function,\n        keyScale: p.optional.number,\n        max: p.optional.number,\n        min: p.optional.number,\n        pointerScale: p.optional.number,\n        step: p.optional.number,\n    };\n}\n","import { ValueMap } from '../model/value-map.js';\nimport { createNumberTextPropsObject } from '../number/util.js';\nexport function createPointAxis(config) {\n    return {\n        constraint: config.constraint,\n        textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue)),\n    };\n}\n","export class BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        this.controller = controller;\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n    get disabled() {\n        return this.controller.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller.viewProps.set('disabled', disabled);\n    }\n    get hidden() {\n        return this.controller.viewProps.get('hidden');\n    }\n    set hidden(hidden) {\n        this.controller.viewProps.set('hidden', hidden);\n    }\n    dispose() {\n        this.controller.viewProps.set('disposed', true);\n    }\n    importState(state) {\n        return this.controller.importState(state);\n    }\n    exportState() {\n        return this.controller.exportState();\n    }\n}\n","/**\n * A base class for Tweakpane API events.\n * @template Target The event target.\n */\nexport class TpEvent {\n    /**\n     * @hidden\n     */\n    constructor(target) {\n        this.target = target;\n    }\n}\n/**\n * An event class for value changes.\n * @template T The type of the value.\n * @template Target The event target.\n */\nexport class TpChangeEvent extends TpEvent {\n    /**\n     * @hidden\n     */\n    constructor(target, value, last) {\n        super(target);\n        this.value = value;\n        this.last = last !== null && last !== void 0 ? last : true;\n    }\n}\n/**\n * An event class for folder.\n * @template Target The event target.\n */\nexport class TpFoldEvent extends TpEvent {\n    /**\n     * @hidden\n     */\n    constructor(target, expanded) {\n        super(target);\n        this.expanded = expanded;\n    }\n}\n/**\n * An event class for tab selection.\n * @template Target The event target.\n */\nexport class TpTabSelectEvent extends TpEvent {\n    /**\n     * @hidden\n     */\n    constructor(target, index) {\n        super(target);\n        this.index = index;\n    }\n}\n/**\n * An event class for mouse events.\n * @template Target The event target.\n */\nexport class TpMouseEvent extends TpEvent {\n    /**\n     * @hidden\n     */\n    constructor(target, nativeEvent) {\n        super(target);\n        this.native = nativeEvent;\n    }\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { forceCast } from '../../../misc/type-util.js';\nimport { BladeApi } from '../../common/api/blade.js';\nimport { TpChangeEvent } from '../../common/api/tp-event.js';\n/**\n * The API for binding between the parameter and the pane.\n * @template In The internal type.\n * @template Ex The external type.\n */\nexport class BindingApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', this.onValueChange_);\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    /**\n     * The key of the bound value.\n     */\n    get key() {\n        return this.controller.value.binding.target.key;\n    }\n    /**\n     * The generic tag with many uses.\n     */\n    get tag() {\n        return this.controller.tag;\n    }\n    set tag(tag) {\n        this.controller.tag = tag;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.controller.value.fetch();\n    }\n    onValueChange_(ev) {\n        const value = this.controller.value;\n        this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n}\n","import { forceCast } from '../misc/type-util.js';\nfunction parseObject(value, keyToParserMap) {\n    const keys = Object.keys(keyToParserMap);\n    const result = keys.reduce((tmp, key) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const parser = keyToParserMap[key];\n        const result = parser(value[key]);\n        return result.succeeded\n            ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n    }, {});\n    return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n    return value.reduce((tmp, item) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const result = parseItem(item);\n        if (!result.succeeded || result.value === undefined) {\n            return undefined;\n        }\n        return [...tmp, result.value];\n    }, []);\n}\nfunction isObject(value) {\n    if (value === null) {\n        return false;\n    }\n    return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n    return (optional) => (v) => {\n        if (!optional && v === undefined) {\n            return {\n                succeeded: false,\n                value: undefined,\n            };\n        }\n        if (optional && v === undefined) {\n            return {\n                succeeded: true,\n                value: undefined,\n            };\n        }\n        const result = parse(v);\n        return result !== undefined\n            ? {\n                succeeded: true,\n                value: result,\n            }\n            : {\n                succeeded: false,\n                value: undefined,\n            };\n    };\n}\nfunction createMicroParserBuilders(optional) {\n    return {\n        custom: (parse) => createMicroParserBuilder(parse)(optional),\n        boolean: createMicroParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n        number: createMicroParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n        string: createMicroParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        function: createMicroParserBuilder((v) => \n        // eslint-disable-next-line @typescript-eslint/ban-types\n        typeof v === 'function' ? v : undefined)(optional),\n        constant: (value) => createMicroParserBuilder((v) => (v === value ? value : undefined))(optional),\n        raw: createMicroParserBuilder((v) => v)(optional),\n        object: (keyToParserMap) => createMicroParserBuilder((v) => {\n            if (!isObject(v)) {\n                return undefined;\n            }\n            return parseObject(v, keyToParserMap);\n        })(optional),\n        array: (itemParser) => createMicroParserBuilder((v) => {\n            if (!Array.isArray(v)) {\n                return undefined;\n            }\n            return parseArray(v, itemParser);\n        })(optional),\n    };\n}\nexport const MicroParsers = {\n    optional: createMicroParserBuilders(true),\n    required: createMicroParserBuilders(false),\n};\nexport function parseRecord(value, keyToParserMap) {\n    const map = keyToParserMap(MicroParsers);\n    const result = MicroParsers.required.object(map)(value);\n    return result.succeeded ? result.value : undefined;\n}\n","import { parseRecord, } from '../../../common/micro-parsers.js';\nimport { deepMerge } from '../../../misc/type-util.js';\n/**\n * A utility function for importing a blade state.\n * @param state The state object.\n * @param superImport The function to invoke super.import(), or null for no super.\n * @param parser The state micro parser object.\n * @param callback The callback function that will be called when parsing is successful.\n * @return true if parsing is successful.\n */\nexport function importBladeState(state, superImport, parser, callback) {\n    if (superImport && !superImport(state)) {\n        return false;\n    }\n    const result = parseRecord(state, parser);\n    return result ? callback(result) : false;\n}\n/**\n * A utility function for exporting a blade state.\n * @param superExport The function to invoke super.export(), or null for no super.\n * @param thisState The blade state from the current blade.\n * @return An exported object.\n */\nexport function exportBladeState(superExport, thisState) {\n    var _a;\n    return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\n","export function isValueBladeController(bc) {\n    return 'value' in bc;\n}\n","import { isObject } from '../../../misc/type-util.js';\nimport { isBinding } from '../binding.js';\nexport function isBindingValue(v) {\n    if (!isObject(v) || !('binding' in v)) {\n        return false;\n    }\n    const b = v.binding;\n    return isBinding(b);\n}\n","import { isObject } from '../../misc/type-util.js';\nexport function isBinding(value) {\n    if (!isObject(value)) {\n        return false;\n    }\n    return 'target' in value;\n}\n","import { forceCast } from '../misc/type-util.js';\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\nexport function forceReflow(element) {\n    element.offsetHeight;\n}\nexport function disableTransitionTemporarily(element, callback) {\n    const t = element.style.transition;\n    element.style.transition = 'none';\n    callback();\n    element.style.transition = t;\n}\nexport function supportsTouch(doc) {\n    return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n    return globalThis;\n}\nexport function getWindowDocument() {\n    const globalObj = forceCast(getGlobalObject());\n    return globalObj.document;\n}\nexport function getCanvasContext(canvasElement) {\n    const win = canvasElement.ownerDocument.defaultView;\n    if (!win) {\n        return null;\n    }\n    // HTMLCanvasElement.prototype.getContext is not defined on testing environment\n    const isBrowser = 'document' in win;\n    return isBrowser\n        ? canvasElement.getContext('2d', {\n            willReadFrequently: true,\n        })\n        : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n    check: '<path d=\"M2 8l4 4l8 -8\"/>',\n    dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n    p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n};\nexport function createSvgIconElement(document, iconId) {\n    const elem = document.createElementNS(SVG_NS, 'svg');\n    elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n    return elem;\n}\nexport function insertElementAt(parentElement, element, index) {\n    parentElement.insertBefore(element, parentElement.children[index]);\n}\nexport function removeElement(element) {\n    if (element.parentElement) {\n        element.parentElement.removeChild(element);\n    }\n}\nexport function removeChildElements(element) {\n    while (element.children.length > 0) {\n        element.removeChild(element.children[0]);\n    }\n}\nexport function removeChildNodes(element) {\n    while (element.childNodes.length > 0) {\n        element.removeChild(element.childNodes[0]);\n    }\n}\nexport function indexOfChildElement(element) {\n    const parentElem = element.parentElement;\n    if (!parentElem) {\n        return -1;\n    }\n    const children = Array.prototype.slice.call(parentElem.children);\n    return children.indexOf(element);\n}\nexport function findNextTarget(ev) {\n    if (ev.relatedTarget) {\n        return forceCast(ev.relatedTarget);\n    }\n    // Workaround for Firefox\n    if ('explicitOriginalTarget' in ev) {\n        return ev.explicitOriginalTarget;\n    }\n    // TODO: Workaround for Safari\n    // Safari doesn't set next target for some elements\n    // (e.g. button, input[type=checkbox], etc.)\n    return null;\n}\n","export function bindValue(value, applyValue) {\n    value.emitter.on('change', (ev) => {\n        applyValue(ev.rawValue);\n    });\n    applyValue(value.rawValue);\n}\nexport function bindValueMap(valueMap, key, applyValue) {\n    bindValue(valueMap.value(key), applyValue);\n}\n","const PREFIX = 'tp';\n/**\n * A utility function for generating BEM-like class name.\n * @param viewName The name of the view. Used as part of the block name.\n * @return A class name generator function.\n */\nexport function ClassName(viewName) {\n    /**\n     * Generates a class name.\n     * @param [opt_elementName] The name of the element.\n     * @param [opt_modifier] The name of the modifier.\n     * @return A class name.\n     */\n    const fn = (opt_elementName, opt_modifier) => {\n        return [\n            PREFIX,\n            '-',\n            viewName,\n            'v',\n            opt_elementName ? `_${opt_elementName}` : '',\n            opt_modifier ? `-${opt_modifier}` : '',\n        ].join('');\n    };\n    return fn;\n}\n","import { isEmpty } from '../../../misc/type-util.js';\nimport { removeChildNodes } from '../../dom-util.js';\nimport { bindValueMap } from '../../model/reactive.js';\nimport { ClassName } from '../../view/class-name.js';\nconst cn = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n    const frag = doc.createDocumentFragment();\n    const lineNodes = label.split('\\n').map((line) => {\n        return doc.createTextNode(line);\n    });\n    lineNodes.forEach((lineNode, index) => {\n        if (index > 0) {\n            frag.appendChild(doc.createElement('br'));\n        }\n        frag.appendChild(lineNode);\n    });\n    return frag;\n}\n/**\n * @hidden\n */\nexport class LabelView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('div');\n        labelElem.classList.add(cn('l'));\n        bindValueMap(config.props, 'label', (value) => {\n            if (isEmpty(value)) {\n                this.element.classList.add(cn(undefined, 'nol'));\n            }\n            else {\n                this.element.classList.remove(cn(undefined, 'nol'));\n                removeChildNodes(labelElem);\n                labelElem.appendChild(createLabelNode(doc, value));\n            }\n        });\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const valueElem = doc.createElement('div');\n        valueElem.classList.add(cn('v'));\n        this.element.appendChild(valueElem);\n        this.valueElement = valueElem;\n    }\n}\n","import { exportBladeState, importBladeState, } from '../../../blade/common/controller/blade-state.js';\nimport { LabelView } from '../view/label.js';\n/**\n * @hidden\n */\nexport class LabelController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.valueController = config.valueController;\n        this.viewProps = config.valueController.viewProps;\n        this.view = new LabelView(doc, {\n            props: config.props,\n            viewProps: this.viewProps,\n        });\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            label: p.optional.string,\n        }), (result) => {\n            this.props.set('label', result.label);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            label: this.props.get('label'),\n        });\n    }\n}\n","import { removeElement } from '../../../common/dom-util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { getAllBladePositions } from '../model/blade-positions.js';\nimport { exportBladeState, importBladeState } from './blade-state.js';\nconst cn = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n    veryfirst: 'vfst',\n    first: 'fst',\n    last: 'lst',\n    verylast: 'vlst',\n};\n/**\n * @hidden\n */\nexport class BladeController {\n    constructor(config) {\n        this.parent_ = null;\n        this.blade = config.blade;\n        this.view = config.view;\n        this.viewProps = config.viewProps;\n        const elem = this.view.element;\n        this.blade.value('positions').emitter.on('change', () => {\n            getAllBladePositions().forEach((pos) => {\n                elem.classList.remove(cn(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n            this.blade.get('positions').forEach((pos) => {\n                elem.classList.add(cn(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n        });\n        this.viewProps.handleDispose(() => {\n            removeElement(elem);\n        });\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(parent) {\n        this.parent_ = parent;\n        this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n    /**\n     * Import a state from the object.\n     * @param state The object to import.\n     * @return true if succeeded, false otherwise.\n     */\n    importState(state) {\n        return importBladeState(state, null, (p) => ({\n            disabled: p.required.boolean,\n            hidden: p.required.boolean,\n        }), (result) => {\n            this.viewProps.importState(result);\n            return true;\n        });\n    }\n    /**\n     * Export a state to the object.\n     * @return A state object.\n     */\n    exportState() {\n        return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n}\n","export function getAllBladePositions() {\n    return ['veryfirst', 'first', 'last', 'verylast'];\n}\n","import { LabelController } from '../../../common/label/controller/label.js';\nimport { LabelView } from '../../../common/label/view/label.js';\nimport { TpError } from '../../../common/tp-error.js';\nimport { BladeController } from '../../common/controller/blade.js';\nimport { exportBladeState, importBladeState, } from '../../common/controller/blade-state.js';\n/**\n * @hidden\n */\nexport class LabeledValueBladeController extends BladeController {\n    constructor(doc, config) {\n        if (config.value !== config.valueController.value) {\n            throw TpError.shouldNeverHappen();\n        }\n        const viewProps = config.valueController.viewProps;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.props,\n            valueController: config.valueController,\n        });\n        super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                props: config.props,\n                viewProps: viewProps,\n            }), viewProps: viewProps }));\n        this.labelController = lc;\n        this.value = config.value;\n        this.valueController = config.valueController;\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importState(state) {\n        return importBladeState(state, (s) => {\n            var _a, _b, _c;\n            return super.importState(s) &&\n                this.labelController.importProps(s) &&\n                ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n        }, (p) => ({\n            value: p.optional.raw,\n        }), (result) => {\n            if (result.value) {\n                this.value.rawValue = result.value;\n            }\n            return true;\n        });\n    }\n    exportState() {\n        var _a, _b, _c;\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({ value: this.value.rawValue }, this.labelController.exportProps()), ((_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {})));\n    }\n}\n","import { forceCast } from '../../misc/type-util.js';\nfunction fillBuffer(buffer, bufferSize) {\n    while (buffer.length < bufferSize) {\n        buffer.push(undefined);\n    }\n}\nexport function initializeBuffer(bufferSize) {\n    const buffer = [];\n    fillBuffer(buffer, bufferSize);\n    return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n    const index = buffer.indexOf(undefined);\n    return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nexport function createPushedBuffer(buffer, newValue) {\n    const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n    if (newBuffer.length > buffer.length) {\n        newBuffer.splice(0, newBuffer.length - buffer.length);\n    }\n    else {\n        fillBuffer(newBuffer, buffer.length);\n    }\n    return newBuffer;\n}\n","import { BladeApi } from '../../common/api/blade.js';\nimport { TpMouseEvent } from '../../common/api/tp-event.js';\nexport class ButtonApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.buttonController.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.buttonController.emitter;\n        emitter.on(eventName, (ev) => {\n            bh(new TpMouseEvent(this, ev.nativeEvent));\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        const emitter = this.controller.buttonController.emitter;\n        emitter.off(eventName, handler);\n        return this;\n    }\n}\n","import { bindValue } from '../model/reactive.js';\nfunction applyClass(elem, className, active) {\n    if (active) {\n        elem.classList.add(className);\n    }\n    else {\n        elem.classList.remove(className);\n    }\n}\nexport function valueToClassName(elem, className) {\n    return (value) => {\n        applyClass(elem, className, value);\n    };\n}\nexport function bindValueToTextContent(value, elem) {\n    bindValue(value, (text) => {\n        elem.textContent = text !== null && text !== void 0 ? text : '';\n    });\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nimport { bindValueToTextContent } from '../../../common/view/reactive.js';\nconst cn = ClassName('btn');\n/**\n * @hidden\n */\nexport class ButtonView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n    }\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { exportBladeState, importBladeState, } from '../../common/controller/blade-state.js';\nimport { ButtonView } from '../view/button.js';\n/**\n * @hidden\n */\nexport class ButtonController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new ButtonView(doc, {\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            title: p.optional.string,\n        }), (result) => {\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            title: this.props.get('title'),\n        });\n    }\n    onClick_(ev) {\n        this.emitter.emit('click', {\n            nativeEvent: ev,\n            sender: this,\n        });\n    }\n}\n","import { LabelController } from '../../../common/label/controller/label.js';\nimport { BladeController } from '../../common/controller/blade.js';\nimport { exportBladeState, importBladeState, } from '../../common/controller/blade-state.js';\nimport { ButtonController } from './button.js';\nexport class ButtonBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = new ButtonController(doc, {\n            props: config.buttonProps,\n            viewProps: config.viewProps,\n        });\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: config.viewProps,\n        });\n        this.buttonController = bc;\n        this.labelController = lc;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s) &&\n            this.buttonController.importProps(s) &&\n            this.labelController.importProps(s), () => ({}), () => true);\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n}\n","import { Semver } from './misc/semver.js';\nexport const VERSION = new Semver('2.0.5');\n","/***\n * A simple semantic versioning perser.\n */\nexport class Semver {\n    /**\n     * @hidden\n     */\n    constructor(text) {\n        const [core, prerelease] = text.split('-');\n        const coreComps = core.split('.');\n        this.major = parseInt(coreComps[0], 10);\n        this.minor = parseInt(coreComps[1], 10);\n        this.patch = parseInt(coreComps[2], 10);\n        this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n    }\n    toString() {\n        const core = [this.major, this.minor, this.patch].join('.');\n        return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n}\n","import { VERSION } from '../version.js';\n/**\n * Creates a plugin with the current core.\n * @param plugin The plugin without the core version.\n * @return A plugin with the core version.\n */\nexport function createPlugin(plugin) {\n    return Object.assign({ core: VERSION }, plugin);\n}\n","import { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { ButtonApi } from './api/button.js';\nimport { ButtonBladeController } from './controller/button-blade.js';\nexport const ButtonBladePlugin = createPlugin({\n    id: 'button',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('button'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonBladeController(args.document, {\n            blade: args.blade,\n            buttonProps: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonBladeController) {\n            return new ButtonApi(args.controller);\n        }\n        return null;\n    },\n});\n","import { BindingTarget } from '../../../common/binding/target.js';\nimport { isBindingValue } from '../../../common/binding/value/binding.js';\nimport { Emitter } from '../../../common/model/emitter.js';\nimport { TpError } from '../../../common/tp-error.js';\nimport { addButtonAsBlade, addFolderAsBlade, addTabAsBlade, } from './container.js';\nimport { isRefreshable } from './refreshable.js';\nimport { TpChangeEvent } from './tp-event.js';\nfunction createBindingTarget(obj, key) {\n    if (!BindingTarget.isBindable(obj)) {\n        throw TpError.notBindable();\n    }\n    return new BindingTarget(obj, key);\n}\n/**\n * @hidden\n */\nexport class RackApi {\n    constructor(controller, pool) {\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.controller_ = controller;\n        this.emitter_ = new Emitter();\n        this.pool_ = pool;\n        const rack = this.controller_.rack;\n        rack.emitter.on('valuechange', this.onRackValueChange_);\n    }\n    get children() {\n        return this.controller_.rack.children.map((bc) => this.pool_.createApi(bc));\n    }\n    addBinding(object, key, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n        const api = this.pool_.createBindingApi(bc);\n        return this.add(api, params.index);\n    }\n    addFolder(params) {\n        return addFolderAsBlade(this, params);\n    }\n    addButton(params) {\n        return addButtonAsBlade(this, params);\n    }\n    addTab(params) {\n        return addTabAsBlade(this, params);\n    }\n    add(api, opt_index) {\n        const bc = api.controller;\n        this.controller_.rack.add(bc, opt_index);\n        return api;\n    }\n    remove(api) {\n        this.controller_.rack.remove(api.controller);\n    }\n    addBlade(params) {\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBlade(doc, params);\n        const api = this.pool_.createApi(bc);\n        return this.add(api, params.index);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.children.forEach((c) => {\n            if (isRefreshable(c)) {\n                c.refresh();\n            }\n        });\n    }\n    onRackValueChange_(ev) {\n        const bc = ev.bladeController;\n        const api = this.pool_.createApi(bc);\n        const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n        this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n}\n","export function addButtonAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n}\nexport function addFolderAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n}\nexport function addTabAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n}\n","import { isObject } from '../../../misc/type-util.js';\nexport function isRefreshable(value) {\n    if (!isObject(value)) {\n        return false;\n    }\n    return 'refresh' in value && typeof value.refresh === 'function';\n}\n","import { BladeApi } from './blade.js';\nimport { RackApi } from './rack.js';\nexport class ContainerBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller);\n        this.rackApi_ = new RackApi(controller.rackController, pool);\n    }\n    refresh() {\n        this.rackApi_.refresh();\n    }\n}\nexport function isContainerBladeApi(api) {\n    return 'rackApi_' in api;\n}\n","import { BladeController } from './blade.js';\nimport { exportBladeState, importBladeState } from './blade-state.js';\n/**\n * @hidden\n */\nexport class ContainerBladeController extends BladeController {\n    constructor(config) {\n        super({\n            blade: config.blade,\n            view: config.view,\n            viewProps: config.rackController.viewProps,\n        });\n        this.rackController = config.rackController;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            children: p.required.array(p.required.raw),\n        }), (result) => {\n            return this.rackController.rack.children.every((c, index) => {\n                return c.importState(result.children[index]);\n            });\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            children: this.rackController.rack.children.map((c) => c.exportState()),\n        });\n    }\n}\nexport function isContainerBladeController(bc) {\n    return 'rackController' in bc;\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { TpError } from '../../../common/tp-error.js';\n/**\n * @hidden\n */\nexport class NestedOrderedSet {\n    constructor(extract) {\n        this.emitter = new Emitter();\n        this.items_ = [];\n        this.cache_ = new Set();\n        this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n        this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n        this.extract_ = extract;\n    }\n    get items() {\n        return this.items_;\n    }\n    allItems() {\n        return Array.from(this.cache_);\n    }\n    find(callback) {\n        for (const item of this.allItems()) {\n            if (callback(item)) {\n                return item;\n            }\n        }\n        return null;\n    }\n    includes(item) {\n        return this.cache_.has(item);\n    }\n    add(item, opt_index) {\n        if (this.includes(item)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const index = opt_index !== undefined ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        this.cache_.add(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.emitter.on('add', this.onSubListAdd_);\n            subList.emitter.on('remove', this.onSubListRemove_);\n            subList.allItems().forEach((i) => {\n                this.cache_.add(i);\n            });\n        }\n        this.emitter.emit('add', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        this.cache_.delete(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.allItems().forEach((i) => {\n                this.cache_.delete(i);\n            });\n            subList.emitter.off('add', this.onSubListAdd_);\n            subList.emitter.off('remove', this.onSubListRemove_);\n        }\n        this.emitter.emit('remove', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    onSubListAdd_(ev) {\n        this.cache_.add(ev.item);\n        this.emitter.emit('add', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n    onSubListRemove_(ev) {\n        this.cache_.delete(ev.item);\n        this.emitter.emit('remove', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { TpError } from '../../../common/tp-error.js';\nimport { isContainerBladeController } from '../controller/container-blade.js';\nimport { isValueBladeController } from '../controller/value-blade.js';\nimport { NestedOrderedSet, } from './nested-ordered-set.js';\nfunction findValueBladeController(bcs, v) {\n    for (let i = 0; i < bcs.length; i++) {\n        const bc = bcs[i];\n        if (isValueBladeController(bc) && bc.value === v) {\n            return bc;\n        }\n    }\n    return null;\n}\nfunction findSubBladeControllerSet(bc) {\n    return isContainerBladeController(bc)\n        ? bc.rackController.rack['bcSet_']\n        : null;\n}\n/**\n * A collection of blade controllers that manages positions and event propagation.\n * @hidden\n */\nexport class Rack {\n    constructor(config) {\n        var _a, _b;\n        this.emitter = new Emitter();\n        this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n        this.onSetAdd_ = this.onSetAdd_.bind(this);\n        this.onSetRemove_ = this.onSetRemove_.bind(this);\n        this.onChildDispose_ = this.onChildDispose_.bind(this);\n        this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n        this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n        this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n        this.onRackLayout_ = this.onRackLayout_.bind(this);\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n        (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n        this.viewProps = config.viewProps;\n        this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n        this.bcSet_.emitter.on('add', this.onSetAdd_);\n        this.bcSet_.emitter.on('remove', this.onSetRemove_);\n    }\n    get children() {\n        return this.bcSet_.items;\n    }\n    add(bc, opt_index) {\n        var _a;\n        (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n        bc.parent = this;\n        this.bcSet_.add(bc, opt_index);\n    }\n    remove(bc) {\n        bc.parent = null;\n        this.bcSet_.remove(bc);\n    }\n    find(finder) {\n        return this.bcSet_.allItems().filter(finder);\n    }\n    onSetAdd_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('add', {\n            bladeController: ev.item,\n            index: ev.index,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n        bc.blade\n            .value('positions')\n            .emitter.on('change', this.onChildPositionsChange_);\n        bc.viewProps.handleDispose(this.onChildDispose_);\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.on('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.on('layout', this.onRackLayout_);\n                emitter.on('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    onSetRemove_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('remove', {\n            bladeController: ev.item,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.off('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.off('layout', this.onRackLayout_);\n                emitter.off('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    updatePositions_() {\n        const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n        const firstVisibleItem = visibleItems[0];\n        const lastVisibleItem = visibleItems[visibleItems.length - 1];\n        this.bcSet_.items.forEach((bc) => {\n            const ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n                if (!this.blade_ ||\n                    this.blade_.get('positions').includes('veryfirst')) {\n                    ps.push('veryfirst');\n                }\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n                if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                    ps.push('verylast');\n                }\n            }\n            bc.blade.set('positions', ps);\n        });\n    }\n    onChildPositionsChange_() {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildViewPropsChange_(_ev) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildDispose_() {\n        const disposedUcs = this.bcSet_.items.filter((bc) => {\n            return bc.viewProps.get('disposed');\n        });\n        disposedUcs.forEach((bc) => {\n            this.bcSet_.remove(bc);\n        });\n    }\n    onChildValueChange_(ev) {\n        const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n        if (!bc) {\n            throw TpError.alreadyDisposed();\n        }\n        this.emitter.emit('valuechange', {\n            bladeController: bc,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onRackLayout_(_) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onRackValueChange_(ev) {\n        this.emitter.emit('valuechange', {\n            bladeController: ev.bladeController,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onBladePositionsChange_() {\n        this.updatePositions_();\n    }\n}\n","import { insertElementAt, removeElement } from '../../../common/dom-util.js';\nimport { Rack } from '../model/rack.js';\n/**\n * @hidden\n */\nexport class RackController {\n    constructor(config) {\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        this.element = config.element;\n        this.viewProps = config.viewProps;\n        const rack = new Rack({\n            blade: config.root ? undefined : config.blade,\n            viewProps: config.viewProps,\n        });\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.rack = rack;\n        this.viewProps.handleDispose(() => {\n            for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                const bc = this.rack.children[i];\n                bc.viewProps.set('disposed', true);\n            }\n        });\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        removeElement(ev.bladeController.view.element);\n    }\n}\n","import { ValueMap } from '../../../common/model/value-map.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { deepEqualsArray } from '../../../misc/type-util.js';\nexport function createBlade() {\n    return new ValueMap({\n        positions: createValue([], {\n            equals: deepEqualsArray,\n        }),\n    });\n}\n","import { disableTransitionTemporarily, forceReflow, } from '../../../common/dom-util.js';\nimport { bindValueMap } from '../../../common/model/reactive.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { isEmpty } from '../../../misc/type-util.js';\n/**\n * @hidden\n */\nexport class Foldable extends ValueMap {\n    constructor(valueMap) {\n        super(valueMap);\n    }\n    static create(expanded) {\n        const coreObj = {\n            completed: true,\n            expanded: expanded,\n            expandedHeight: null,\n            shouldFixHeight: false,\n            temporaryExpanded: null,\n        };\n        const core = ValueMap.createCore(coreObj);\n        return new Foldable(core);\n    }\n    get styleExpanded() {\n        var _a;\n        return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n    get styleHeight() {\n        if (!this.styleExpanded) {\n            return '0';\n        }\n        const exHeight = this.get('expandedHeight');\n        if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n            return `${exHeight}px`;\n        }\n        return 'auto';\n    }\n    bindExpandedClass(elem, expandedClassName) {\n        const onExpand = () => {\n            const expanded = this.styleExpanded;\n            if (expanded) {\n                elem.classList.add(expandedClassName);\n            }\n            else {\n                elem.classList.remove(expandedClassName);\n            }\n        };\n        bindValueMap(this, 'expanded', onExpand);\n        bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n    cleanUpTransition() {\n        this.set('shouldFixHeight', false);\n        this.set('expandedHeight', null);\n        this.set('completed', true);\n    }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n    let height = 0;\n    disableTransitionTemporarily(containerElement, () => {\n        // Expand folder temporarily\n        folder.set('expandedHeight', null);\n        folder.set('temporaryExpanded', true);\n        forceReflow(containerElement);\n        // Compute height\n        height = containerElement.clientHeight;\n        // Restore expanded\n        folder.set('temporaryExpanded', null);\n        forceReflow(containerElement);\n    });\n    return height;\n}\nfunction applyHeight(foldable, elem) {\n    elem.style.height = foldable.styleHeight;\n}\nexport function bindFoldable(foldable, elem) {\n    foldable.value('expanded').emitter.on('beforechange', () => {\n        foldable.set('completed', false);\n        if (isEmpty(foldable.get('expandedHeight'))) {\n            const h = computeExpandedFolderHeight(foldable, elem);\n            if (h > 0) {\n                foldable.set('expandedHeight', h);\n            }\n        }\n        foldable.set('shouldFixHeight', true);\n        forceReflow(elem);\n    });\n    foldable.emitter.on('change', () => {\n        applyHeight(foldable, elem);\n    });\n    applyHeight(foldable, elem);\n    elem.addEventListener('transitionend', (ev) => {\n        if (ev.propertyName !== 'height') {\n            return;\n        }\n        foldable.cleanUpTransition();\n    });\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { ContainerBladeApi } from '../../common/api/container-blade.js';\nimport { TpFoldEvent } from '../../common/api/tp-event.js';\nexport class FolderApi extends ContainerBladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.controller.foldable\n            .value('expanded')\n            .emitter.on('change', (ev) => {\n            this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n        });\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n    }\n    get expanded() {\n        return this.controller.foldable.get('expanded');\n    }\n    set expanded(expanded) {\n        this.controller.foldable.set('expanded', expanded);\n    }\n    get title() {\n        return this.controller.props.get('title');\n    }\n    set title(title) {\n        this.controller.props.set('title', title);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        return this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n    /**\n     * Adds a global event listener. It handles all events of child inputs/monitors.\n     * @param eventName The event name to listen.\n     * @param handler The event handler.\n     * @return The API object itself.\n     */\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    /**\n     * Removes a global event listener.\n     * @param eventName The event name to listen.\n     * @param handler The event handler.\n     * @returns The API object itself.\n     */\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nexport const bladeContainerClassName = ClassName('cnt');\n","import { bindValueMap } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { bindValueToTextContent, valueToClassName, } from '../../../common/view/reactive.js';\nimport { isEmpty } from '../../../misc/type-util.js';\nimport { bladeContainerClassName } from '../../common/view/blade-container.js';\n/**\n * @hidden\n */\nexport class FolderView {\n    constructor(doc, config) {\n        var _a;\n        this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n        this.element = doc.createElement('div');\n        this.element.classList.add(this.className_(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        this.foldable_ = config.foldable;\n        this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n        bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(this.className_('b'));\n        bindValueMap(config.props, 'title', (title) => {\n            if (isEmpty(title)) {\n                this.element.classList.add(this.className_(undefined, 'not'));\n            }\n            else {\n                this.element.classList.remove(this.className_(undefined, 'not'));\n            }\n        });\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(this.className_('i'));\n        this.element.appendChild(indentElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(this.className_('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(this.className_('m'));\n        this.buttonElement.appendChild(markElem);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(this.className_('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n","import { exportBladeState, importBladeState, } from '../../common/controller/blade-state.js';\nimport { ContainerBladeController } from '../../common/controller/container-blade.js';\nimport { RackController } from '../../common/controller/rack.js';\nimport { bindFoldable, Foldable } from '../../common/model/foldable.js';\nimport { FolderView } from '../view/folder.js';\n/**\n * @hidden\n */\nexport class FolderController extends ContainerBladeController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        var _a;\n        const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n        const view = new FolderView(doc, {\n            foldable: foldable,\n            props: config.props,\n            viewName: config.root ? 'rot' : undefined,\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                root: config.root,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onTitleClick_ = this.onTitleClick_.bind(this);\n        this.props = config.props;\n        this.foldable = foldable;\n        bindFoldable(this.foldable, this.view.containerElement);\n        // Clean up transition manually\n        // Toggling `expanded` doesn't fire transition events in some cases\n        // (e.g. expanding empty folder: 0px -> 0px)\n        this.rackController.rack.emitter.on('add', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.rackController.rack.emitter.on('remove', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n    }\n    get document() {\n        return this.view.element.ownerDocument;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            expanded: p.required.boolean,\n            title: p.optional.string,\n        }), (result) => {\n            this.foldable.set('expanded', result.expanded);\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            expanded: this.foldable.get('expanded'),\n            title: this.props.get('title'),\n        });\n    }\n    onTitleClick_() {\n        this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n}\n","import { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { FolderApi } from './api/folder.js';\nimport { FolderController } from './controller/folder.js';\nexport const FolderBladePlugin = createPlugin({\n    id: 'folder',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('folder'),\n            expanded: p.optional.boolean,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new FolderController(args.document, {\n            blade: args.blade,\n            expanded: args.params.expanded,\n            props: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FolderController)) {\n            return null;\n        }\n        return new FolderApi(args.controller, args.pool);\n    },\n});\n","import { ClassName } from '../view/class-name.js';\nimport { valueToClassName } from '../view/reactive.js';\nimport { bindValue, bindValueMap } from './reactive.js';\nimport { ValueMap } from './value-map.js';\nimport { createReadonlyValue, createValue } from './values.js';\nconst cn = ClassName('');\nfunction valueToModifier(elem, modifier) {\n    return valueToClassName(elem, cn(undefined, modifier));\n}\nexport class ViewProps extends ValueMap {\n    /**\n     * @hidden\n     */\n    constructor(valueMap) {\n        var _a;\n        super(valueMap);\n        this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n        this.onParentChange_ = this.onParentChange_.bind(this);\n        this.onParentGlobalDisabledChange_ =\n            this.onParentGlobalDisabledChange_.bind(this);\n        [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n        this.value('disabled').emitter.on('change', this.onDisabledChange_);\n        this.value('parent').emitter.on('change', this.onParentChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    }\n    static create(opt_initialValue) {\n        var _a, _b, _c;\n        const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n        return new ViewProps(ValueMap.createCore({\n            disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n            disposed: false,\n            hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n        }));\n    }\n    get globalDisabled() {\n        return this.globalDisabled_;\n    }\n    bindClassModifiers(elem) {\n        bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n        bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n    bindDisabled(target) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            target.disabled = disabled;\n        });\n    }\n    bindTabIndex(elem) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            elem.tabIndex = disabled ? -1 : 0;\n        });\n    }\n    handleDispose(callback) {\n        this.value('disposed').emitter.on('change', (disposed) => {\n            if (disposed) {\n                callback();\n            }\n        });\n    }\n    importState(state) {\n        this.set('disabled', state.disabled);\n        this.set('hidden', state.hidden);\n    }\n    exportState() {\n        return {\n            disabled: this.get('disabled'),\n            hidden: this.get('hidden'),\n        };\n    }\n    /**\n     * Gets a global disabled of the view.\n     * Disabled of the view will be affected by its disabled and its parent disabled.\n     */\n    getGlobalDisabled_() {\n        const parent = this.get('parent');\n        const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n        return parentDisabled || this.get('disabled');\n    }\n    updateGlobalDisabled_() {\n        this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n    onDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentGlobalDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentChange_(ev) {\n        var _a;\n        const prevParent = ev.previousRawValue;\n        prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        this.updateGlobalDisabled_();\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('tbp');\n/**\n * @hidden\n */\nexport class TabPageView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(cn('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n","import { bindValueMap } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { bindValueToTextContent } from '../../../common/view/reactive.js';\nconst cn = ClassName('tbi');\n/**\n * @hidden\n */\nexport class TabItemView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValueMap(config.props, 'selected', (selected) => {\n            if (selected) {\n                this.element.classList.add(cn(undefined, 'sel'));\n            }\n            else {\n                this.element.classList.remove(cn(undefined, 'sel'));\n            }\n        });\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n    }\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { TabItemView } from '../view/tab-item.js';\n/**\n * @hidden\n */\nexport class TabItemController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new TabItemView(doc, {\n            props: config.props,\n            viewProps: config.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n","import { bindValueMap } from '../../../common/model/reactive.js';\nimport { ViewProps } from '../../../common/model/view-props.js';\nimport { exportBladeState, importBladeState, } from '../../common/controller/blade-state.js';\nimport { ContainerBladeController } from '../../common/controller/container-blade.js';\nimport { RackController } from '../../common/controller/rack.js';\nimport { TabPageView } from '../view/tab-page.js';\nimport { TabItemController } from './tab-item.js';\n/**\n * @hidden\n */\nexport class TabPageController extends ContainerBladeController {\n    constructor(doc, config) {\n        const view = new TabPageView(doc, {\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onItemClick_ = this.onItemClick_.bind(this);\n        this.ic_ = new TabItemController(doc, {\n            props: config.itemProps,\n            viewProps: ViewProps.create(),\n        });\n        this.ic_.emitter.on('click', this.onItemClick_);\n        this.props = config.props;\n        bindValueMap(this.props, 'selected', (selected) => {\n            this.itemController.props.set('selected', selected);\n            this.viewProps.set('hidden', !selected);\n        });\n    }\n    get itemController() {\n        return this.ic_;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            selected: p.required.boolean,\n            title: p.required.string,\n        }), (result) => {\n            this.ic_.props.set('selected', result.selected);\n            this.ic_.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            selected: this.ic_.props.get('selected'),\n            title: this.ic_.props.get('title'),\n        });\n    }\n    onItemClick_() {\n        this.props.set('selected', true);\n    }\n}\n","import { Emitter } from '../../../common/model/emitter.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { ViewProps } from '../../../common/model/view-props.js';\nimport { ContainerBladeApi } from '../../common/api/container-blade.js';\nimport { TpTabSelectEvent } from '../../common/api/tp-event.js';\nimport { createBlade } from '../../common/model/blade.js';\nimport { TabPageController } from '../controller/tab-page.js';\nexport class TabApi extends ContainerBladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.onSelect_ = this.onSelect_.bind(this);\n        this.pool_ = pool;\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n        this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n    }\n    get pages() {\n        return this.rackApi_.children;\n    }\n    addPage(params) {\n        const doc = this.controller.view.element.ownerDocument;\n        const pc = new TabPageController(doc, {\n            blade: createBlade(),\n            itemProps: ValueMap.fromObject({\n                selected: false,\n                title: params.title,\n            }),\n            props: ValueMap.fromObject({\n                selected: false,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        const papi = this.pool_.createApi(pc);\n        return this.rackApi_.add(papi, params.index);\n    }\n    removePage(index) {\n        this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    onSelect_(ev) {\n        this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n}\n","import { ContainerBladeApi } from '../../common/api/container-blade.js';\nexport class TabPageApi extends ContainerBladeApi {\n    get title() {\n        var _a;\n        return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.itemController.props.set('title', title);\n    }\n    get selected() {\n        return this.controller.props.get('selected');\n    }\n    set selected(selected) {\n        this.controller.props.set('selected', selected);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n}\n","import { createValue } from '../../../common/model/values.js';\nconst INDEX_NOT_SELECTED = -1;\n/**\n * @hidden\n */\nexport class Tab {\n    constructor() {\n        this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n        this.empty = createValue(true);\n        this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n        this.items_ = [];\n    }\n    add(item, opt_index) {\n        const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        item.emitter.on('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        item.emitter.off('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    keepSelection_() {\n        if (this.items_.length === 0) {\n            this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n            this.empty.rawValue = true;\n            return;\n        }\n        const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n        if (firstSelIndex < 0) {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === 0;\n            });\n            this.selectedIndex.rawValue = 0;\n        }\n        else {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === firstSelIndex;\n            });\n            this.selectedIndex.rawValue = firstSelIndex;\n        }\n        this.empty.rawValue = false;\n    }\n    onItemSelectedChange_(ev) {\n        if (ev.rawValue) {\n            const index = this.items_.findIndex((s) => s === ev.sender);\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === index;\n            });\n            this.selectedIndex.rawValue = index;\n        }\n        else {\n            this.keepSelection_();\n        }\n    }\n}\n","import { bindValue } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { valueToClassName } from '../../../common/view/reactive.js';\nimport { bladeContainerClassName } from '../../common/view/blade-container.js';\nconst cn = ClassName('tab');\n/**\n * @hidden\n */\nexport class TabView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.empty, valueToClassName(this.element, cn(undefined, 'nop')));\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn('t'));\n        this.element.appendChild(titleElem);\n        this.itemsElement = titleElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(cn('i'));\n        this.element.appendChild(indentElem);\n        const contentsElem = doc.createElement('div');\n        contentsElem.classList.add(cn('c'));\n        this.element.appendChild(contentsElem);\n        this.contentsElement = contentsElem;\n    }\n}\n","import { insertElementAt, removeElement } from '../../../common/dom-util.js';\nimport { ContainerBladeController } from '../../common/controller/container-blade.js';\nimport { RackController } from '../../common/controller/rack.js';\nimport { Tab } from '../model/tab.js';\nimport { TabView } from '../view/tab.js';\n/**\n * @hidden\n */\nexport class TabController extends ContainerBladeController {\n    constructor(doc, config) {\n        const tab = new Tab();\n        const view = new TabView(doc, {\n            empty: tab.empty,\n            viewProps: config.viewProps,\n        });\n        super({\n            blade: config.blade,\n            rackController: new RackController({\n                blade: config.blade,\n                element: view.contentsElement,\n                viewProps: config.viewProps,\n            }),\n            view: view,\n        });\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        const rack = this.rackController.rack;\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.tab = tab;\n    }\n    add(pc, opt_index) {\n        this.rackController.rack.add(pc, opt_index);\n    }\n    remove(index) {\n        this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n        pc.itemController.viewProps.set('parent', this.viewProps);\n        this.tab.add(pc.props.value('selected'));\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        removeElement(pc.itemController.view.element);\n        pc.itemController.viewProps.set('parent', null);\n        this.tab.remove(pc.props.value('selected'));\n    }\n}\n","import { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { ViewProps } from '../../common/model/view-props.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { createBlade } from '../common/model/blade.js';\nimport { TabApi } from './api/tab.js';\nimport { TabPageApi } from './api/tab-page.js';\nimport { TabController } from './controller/tab.js';\nimport { TabPageController } from './controller/tab-page.js';\nexport const TabBladePlugin = createPlugin({\n    id: 'tab',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            pages: p.required.array(p.required.object({ title: p.required.string })),\n            view: p.required.constant('tab'),\n        }));\n        if (!result || result.pages.length === 0) {\n            return null;\n        }\n        return { params: result };\n    },\n    controller(args) {\n        const c = new TabController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n        args.params.pages.forEach((p) => {\n            const pc = new TabPageController(args.document, {\n                blade: createBlade(),\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: p.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            c.add(pc);\n        });\n        return c;\n    },\n    api(args) {\n        if (args.controller instanceof TabController) {\n            return new TabApi(args.controller, args.pool);\n        }\n        if (args.controller instanceof TabPageController) {\n            return new TabPageApi(args.controller, args.pool);\n        }\n        return null;\n    },\n});\n","import { BindingApi } from '../../blade/binding/api/binding.js';\nexport class ListInputBindingApi extends BindingApi {\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n}\n","import { Emitter } from '../../model/emitter.js';\n/**\n * @hidden\n */\nexport class ManualTicker {\n    constructor() {\n        this.disabled = false;\n        this.emitter = new Emitter();\n    }\n    dispose() { }\n    tick() {\n        if (this.disabled) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n","import { Emitter } from '../../model/emitter.js';\n/**\n * @hidden\n */\nexport class IntervalTicker {\n    constructor(doc, interval) {\n        this.disabled_ = false;\n        this.timerId_ = null;\n        this.onTick_ = this.onTick_.bind(this);\n        // this.onWindowBlur_ = this.onWindowBlur_.bind(this);\n        // this.onWindowFocus_ = this.onWindowFocus_.bind(this);\n        this.doc_ = doc;\n        this.emitter = new Emitter();\n        this.interval_ = interval;\n        this.setTimer_();\n        // TODO: Stop on blur?\n        // const win = document.defaultView;\n        // if (win) {\n        //   win.addEventListener('blur', this.onWindowBlur_);\n        //   win.addEventListener('focus', this.onWindowFocus_);\n        // }\n    }\n    get disabled() {\n        return this.disabled_;\n    }\n    set disabled(inactive) {\n        this.disabled_ = inactive;\n        if (this.disabled_) {\n            this.clearTimer_();\n        }\n        else {\n            this.setTimer_();\n        }\n    }\n    dispose() {\n        this.clearTimer_();\n    }\n    clearTimer_() {\n        if (this.timerId_ === null) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            win.clearInterval(this.timerId_);\n        }\n        this.timerId_ = null;\n    }\n    setTimer_() {\n        this.clearTimer_();\n        if (this.interval_ <= 0) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n    }\n    onTick_() {\n        if (this.disabled_) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n","/**\n * A constraint to combine multiple constraints.\n * @template T The type of the value.\n */\nexport class CompositeConstraint {\n    constructor(constraints) {\n        this.constraints = constraints;\n    }\n    constrain(value) {\n        return this.constraints.reduce((result, c) => {\n            return c.constrain(result);\n        }, value);\n    }\n}\nexport function findConstraint(c, constraintClass) {\n    if (c instanceof constraintClass) {\n        return c;\n    }\n    if (c instanceof CompositeConstraint) {\n        const result = c.constraints.reduce((tmpResult, sc) => {\n            if (tmpResult) {\n                return tmpResult;\n            }\n            return sc instanceof constraintClass ? sc : null;\n        }, null);\n        if (result) {\n            return result;\n        }\n    }\n    return null;\n}\n","import { ValueMap } from '../model/value-map.js';\n/**\n * A list constranit.\n * @template T The type of the value.\n */\nexport class ListConstraint {\n    constructor(options) {\n        this.values = ValueMap.fromObject({\n            options: options,\n        });\n    }\n    constrain(value) {\n        const opts = this.values.get('options');\n        if (opts.length === 0) {\n            return value;\n        }\n        const matched = opts.filter((item) => {\n            return item.value === value;\n        }).length > 0;\n        return matched ? value : opts[0].value;\n    }\n}\n","import { forceCast, isEmpty } from '../misc/type-util.js';\nimport { ListConstraint } from './constraint/list.js';\nimport { MicroParsers, parseRecord } from './micro-parsers.js';\nexport function parseListOptions(value) {\n    var _a;\n    const p = MicroParsers;\n    if (Array.isArray(value)) {\n        return (_a = parseRecord({ items: value }, (p) => ({\n            items: p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            })),\n        }))) === null || _a === void 0 ? void 0 : _a.items;\n    }\n    if (typeof value === 'object') {\n        return p.required.raw(value)\n            .value;\n    }\n    return undefined;\n}\nexport function normalizeListOptions(options) {\n    if (Array.isArray(options)) {\n        return options;\n    }\n    const items = [];\n    Object.keys(options).forEach((text) => {\n        items.push({ text: text, value: options[text] });\n    });\n    return items;\n}\n/**\n * Tries to create a list constraint.\n * @template T The type of the raw value.\n * @param options The list options.\n * @return A constraint or null if not found.\n */\nexport function createListConstraint(options) {\n    return !isEmpty(options)\n        ? new ListConstraint(normalizeListOptions(forceCast(options)))\n        : null;\n}\n","import { createSvgIconElement, removeChildElements } from '../dom-util.js';\nimport { bindValueMap } from '../model/reactive.js';\nimport { ClassName } from './class-name.js';\nconst cn = ClassName('lst');\n/**\n * @hidden\n */\nexport class ListView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const selectElem = doc.createElement('select');\n        selectElem.classList.add(cn('s'));\n        config.viewProps.bindDisabled(selectElem);\n        this.element.appendChild(selectElem);\n        this.selectElement = selectElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(cn('m'));\n        markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        this.element.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value_ = config.value;\n        bindValueMap(this.props_, 'options', (opts) => {\n            removeChildElements(this.selectElement);\n            opts.forEach((item) => {\n                const optionElem = doc.createElement('option');\n                optionElem.textContent = item.text;\n                this.selectElement.appendChild(optionElem);\n            });\n            this.update_();\n        });\n    }\n    update_() {\n        const values = this.props_.get('options').map((o) => o.value);\n        this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { exportBladeState, importBladeState, } from '../../blade/common/controller/blade-state.js';\nimport { forceCast } from '../../misc/type-util.js';\nimport { normalizeListOptions, parseListOptions } from '../list-util.js';\nimport { ListView } from '../view/list.js';\n/**\n * @hidden\n */\nexport class ListController {\n    constructor(doc, config) {\n        this.onSelectChange_ = this.onSelectChange_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ListView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.selectElement.addEventListener('change', this.onSelectChange_);\n    }\n    onSelectChange_(e) {\n        const selectElem = forceCast(e.currentTarget);\n        this.value.rawValue =\n            this.props.get('options')[selectElem.selectedIndex].value;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            options: p.required.custom(parseListOptions),\n        }), (result) => {\n            this.props.set('options', normalizeListOptions(result.options));\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            options: this.props.get('options'),\n        });\n    }\n}\n","import { bindValue } from '../model/reactive.js';\nimport { ClassName } from './class-name.js';\nimport { valueToClassName } from './reactive.js';\nconst cn = ClassName('pop');\n/**\n * @hidden\n */\nexport class PopupView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.shows, valueToClassName(this.element, cn(undefined, 'v')));\n    }\n}\n","import { createValue } from '../model/values.js';\nimport { PopupView } from '../view/popup.js';\nexport class PopupController {\n    constructor(doc, config) {\n        this.shows = createValue(false);\n        this.viewProps = config.viewProps;\n        this.view = new PopupView(doc, {\n            shows: this.shows,\n            viewProps: this.viewProps,\n        });\n    }\n}\n","import { ClassName } from './class-name.js';\nconst cn = ClassName('txt');\n/**\n * @hidden\n */\nexport class TextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value_.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n","import { forceCast, isEmpty } from '../../misc/type-util.js';\nimport { TextView } from '../view/text.js';\n/**\n * @hidden\n */\nexport class TextController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new TextView(doc, {\n            props: config.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = parsedValue;\n        }\n        this.view.refresh();\n    }\n}\n","export function boolToString(value) {\n    return String(value);\n}\nexport function boolFromUnknown(value) {\n    if (value === 'false') {\n        return false;\n    }\n    return !!value;\n}\nexport function BooleanFormatter(value) {\n    return boolToString(value);\n}\n","import { createNumberFormatter } from './number.js';\nconst innerFormatter = createNumberFormatter(0);\nexport function formatPercentage(value) {\n    return innerFormatter(value) + '%';\n}\n","export function stringFromUnknown(value) {\n    return String(value);\n}\nexport function formatString(value) {\n    return value;\n}\n","/**\n * Synchronizes two values.\n */\nexport function connectValues({ primary, secondary, forward, backward, }) {\n    // Prevents an event firing loop\n    // e.g.\n    // primary changed\n    // -> applies changes to secondary\n    // -> secondary changed\n    // -> applies changes to primary\n    // -> ...\n    let changing = false;\n    function preventFeedback(callback) {\n        if (changing) {\n            return;\n        }\n        changing = true;\n        callback();\n        changing = false;\n    }\n    primary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    secondary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n        // Re-update secondary value\n        // to apply change from constraint of primary value\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    preventFeedback(() => {\n        secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n            forceEmit: false,\n            last: true,\n        });\n    });\n}\n","export function getStepForKey(keyScale, keys) {\n    const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n    if (keys.upKey) {\n        return +step;\n    }\n    else if (keys.downKey) {\n        return -step;\n    }\n    return 0;\n}\nexport function getVerticalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowDown',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowUp',\n    };\n}\nexport function getHorizontalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowLeft',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowRight',\n    };\n}\nexport function isVerticalArrowKey(key) {\n    return key === 'ArrowUp' || key === 'ArrowDown';\n}\nexport function isArrowKey(key) {\n    return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\n","import { Emitter } from '../model/emitter.js';\nfunction computeOffset(ev, elem) {\n    var _a, _b;\n    // NOTE: OffsetX/Y should be computed from page and window properties to capture mouse events\n    const win = elem.ownerDocument.defaultView;\n    const rect = elem.getBoundingClientRect();\n    return {\n        x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n        y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n    };\n}\n/**\n * A utility class to handle both mouse and touch events.\n */\nexport class PointerHandler {\n    /**\n     * @hidden\n     */\n    constructor(element) {\n        this.lastTouch_ = null;\n        this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n        this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n        this.onMouseDown_ = this.onMouseDown_.bind(this);\n        this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n        this.onTouchMove_ = this.onTouchMove_.bind(this);\n        this.onTouchStart_ = this.onTouchStart_.bind(this);\n        this.elem_ = element;\n        this.emitter = new Emitter();\n        element.addEventListener('touchstart', this.onTouchStart_, {\n            passive: false,\n        });\n        element.addEventListener('touchmove', this.onTouchMove_, {\n            passive: true,\n        });\n        element.addEventListener('touchend', this.onTouchEnd_);\n        element.addEventListener('mousedown', this.onMouseDown_);\n    }\n    computePosition_(offset) {\n        const rect = this.elem_.getBoundingClientRect();\n        return {\n            bounds: {\n                width: rect.width,\n                height: rect.height,\n            },\n            point: offset\n                ? {\n                    x: offset.x,\n                    y: offset.y,\n                }\n                : null,\n        };\n    }\n    onMouseDown_(ev) {\n        var _a;\n        // Prevent native text selection\n        ev.preventDefault();\n        (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n        const doc = this.elem_.ownerDocument;\n        doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseMove_(ev) {\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseUp_(ev) {\n        const doc = this.elem_.ownerDocument;\n        doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onTouchStart_(ev) {\n        // Prevent native page scroll\n        ev.preventDefault();\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchMove_(ev) {\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchEnd_(ev) {\n        var _a;\n        const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n}\n","import { SVG_NS } from '../../../common/dom-util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { constrainRange } from '../util.js';\nconst cn = ClassName('txt');\n/**\n * @hidden\n */\nexport class NumberTextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn(), cn(undefined, 'num'));\n        if (config.arrayPosition) {\n            this.element.classList.add(cn(undefined, config.arrayPosition));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n        this.dragging_ = config.dragging;\n        this.dragging_.emitter.on('change', this.onDraggingChange_);\n        this.element.classList.add(cn());\n        this.inputElement.classList.add(cn('i'));\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn('k'));\n        this.element.appendChild(knobElem);\n        this.knobElement = knobElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'svg');\n        guideElem.classList.add(cn('g'));\n        this.knobElement.appendChild(guideElem);\n        const bodyElem = doc.createElementNS(SVG_NS, 'path');\n        bodyElem.classList.add(cn('gb'));\n        guideElem.appendChild(bodyElem);\n        this.guideBodyElem_ = bodyElem;\n        const headElem = doc.createElementNS(SVG_NS, 'path');\n        headElem.classList.add(cn('gh'));\n        guideElem.appendChild(headElem);\n        this.guideHeadElem_ = headElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(ClassName('tt')());\n        this.knobElement.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.refresh();\n    }\n    onDraggingChange_(ev) {\n        if (ev.rawValue === null) {\n            this.element.classList.remove(cn(undefined, 'drg'));\n            return;\n        }\n        this.element.classList.add(cn(undefined, 'drg'));\n        const x = ev.rawValue / this.props_.get('pointerScale');\n        const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n        const adx = constrainRange(-aox, -4, +4);\n        this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n        this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n        const formatter = this.props_.get('formatter');\n        this.tooltipElem_.textContent = formatter(this.value.rawValue);\n        this.tooltipElem_.style.left = `${x}px`;\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n","import { forceCast, isEmpty } from '../../../misc/type-util.js';\nimport { createValue } from '../../model/values.js';\nimport { getStepForKey, getVerticalStepKeys } from '../../ui.js';\nimport { PointerHandler, } from '../../view/pointer-handler.js';\nimport { NumberTextView } from '../view/number-text.js';\n/**\n * @hidden\n */\nexport class NumberTextController {\n    constructor(doc, config) {\n        var _a;\n        this.originRawValue_ = 0;\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n        this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.dragging_ = createValue(null);\n        this.view = new NumberTextView(doc, {\n            arrayPosition: config.arrayPosition,\n            dragging: this.dragging_,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n        this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n        const ph = new PointerHandler(this.view.knobElement);\n        ph.emitter.on('down', this.onPointerDown_);\n        ph.emitter.on('move', this.onPointerMove_);\n        ph.emitter.on('up', this.onPointerUp_);\n    }\n    constrainValue_(value) {\n        var _a, _b;\n        const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n        const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n        let v = value;\n        if (min !== undefined) {\n            v = Math.max(v, min);\n        }\n        if (max !== undefined) {\n            v = Math.min(v, max);\n        }\n        return v;\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = this.constrainValue_(parsedValue);\n        }\n        this.view.refresh();\n    }\n    onInputKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onInputKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPointerDown_() {\n        this.originRawValue_ = this.value.rawValue;\n        this.dragging_.rawValue = 0;\n    }\n    computeDraggingValue_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const dx = data.point.x - data.bounds.width / 2;\n        return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n    onPointerMove_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: false,\n            last: false,\n        });\n        this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n    onPointerUp_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: true,\n            last: true,\n        });\n        this.dragging_.rawValue = null;\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nimport { constrainRange, mapRange } from '../util.js';\nconst cn = ClassName('sld');\n/**\n * @hidden\n */\nexport class SliderView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(cn('t'));\n        config.viewProps.bindTabIndex(trackElem);\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn('k'));\n        this.trackElement.appendChild(knobElem);\n        this.knobElement = knobElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n        this.knobElement.style.width = `${p}%`;\n    }\n    onChange_() {\n        this.update_();\n    }\n}\n","import { getHorizontalStepKeys, getStepForKey } from '../../ui.js';\nimport { PointerHandler, } from '../../view/pointer-handler.js';\nimport { constrainRange, mapRange } from '../util.js';\nimport { SliderView } from '../view/slider.js';\n/**\n * @hidden\n */\nexport class SliderController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.props = config.props;\n        this.view = new SliderView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.trackElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n        this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n    onPointerDownOrMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue + step, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('sldtxt');\n/**\n * @hidden\n */\nexport class SliderTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(cn('s'));\n        this.sliderView_ = config.sliderView;\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn('t'));\n        this.textView_ = config.textView;\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n","import { exportBladeState, importBladeState, } from '../../../blade/common/controller/blade-state.js';\nimport { ValueMap } from '../../model/value-map.js';\nimport { createValue } from '../../model/values.js';\nimport { SliderTextView } from '../view/slider-text.js';\nimport { NumberTextController } from './number-text.js';\nimport { SliderController } from './slider.js';\n/**\n * @hidden\n */\nexport class SliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sliderC_ = new SliderController(doc, {\n            props: config.sliderProps,\n            value: config.value,\n            viewProps: this.viewProps,\n        });\n        this.textC_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            sliderProps: config.sliderProps,\n            value: config.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new SliderTextView(doc, {\n            sliderView: this.sliderC_.view,\n            textView: this.textC_.view,\n        });\n    }\n    get sliderController() {\n        return this.sliderC_;\n    }\n    get textController() {\n        return this.textC_;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            const sliderProps = this.sliderC_.props;\n            sliderProps.set('max', result.max);\n            sliderProps.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        const sliderProps = this.sliderC_.props;\n        return exportBladeState(null, {\n            max: sliderProps.get('max'),\n            min: sliderProps.get('min'),\n        });\n    }\n}\nexport function createSliderTextProps(config) {\n    return {\n        sliderProps: new ValueMap({\n            keyScale: config.keyScale,\n            max: config.max,\n            min: config.min,\n        }),\n        textProps: new ValueMap({\n            formatter: createValue(config.formatter),\n            keyScale: config.keyScale,\n            pointerScale: createValue(config.pointerScale),\n        }),\n    };\n}\n","const CSS_VAR_MAP = {\n    containerUnitSize: 'cnt-usz',\n};\n/**\n * Gets a name of the internal CSS variable.\n * @param key The key for the CSS variable.\n * @return A name of the internal CSS variable.\n */\nexport function getCssVar(key) {\n    return `--${CSS_VAR_MAP[key]}`;\n}\n","import { ClassName } from './class-name.js';\n/**\n * @hidden\n */\nexport class PlainView {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        const cn = ClassName(config.viewName);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n    }\n}\n","import { isRecord } from '../../misc/type-util.js';\nimport { CompositeConstraint } from '../constraint/composite.js';\nimport { parseRecord } from '../micro-parsers.js';\nimport { createNumberTextInputParamsParser, createRangeConstraint, createStepConstraint, } from '../number/util.js';\nexport function createPointDimensionParser(p) {\n    return createNumberTextInputParamsParser(p);\n}\nexport function parsePointDimensionParams(value) {\n    if (!isRecord(value)) {\n        return undefined;\n    }\n    return parseRecord(value, createPointDimensionParser);\n}\nexport function createDimensionConstraint(params, initialValue) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    const cs = createStepConstraint(params, initialValue);\n    if (cs) {\n        constraints.push(cs);\n    }\n    const rs = createRangeConstraint(params);\n    if (rs) {\n        constraints.push(rs);\n    }\n    return new CompositeConstraint(constraints);\n}\n","export function parsePickerLayout(value) {\n    if (value === 'inline' || value === 'popup') {\n        return value;\n    }\n    return undefined;\n}\n","/**\n * Writes the primitive value.\n * @param target The target to be written.\n * @param value The value to write.\n */\nexport function writePrimitive(target, value) {\n    target.write(value);\n}\n","import { createSvgIconElement } from '../../../common/dom-util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('ckb');\n/**\n * @hidden\n */\nexport class CheckboxView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(cn('l'));\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn('i'));\n        inputElem.type = 'checkbox';\n        this.labelElement.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.viewProps.bindDisabled(this.inputElement);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(cn('w'));\n        this.labelElement.appendChild(wrapperElem);\n        const markElem = createSvgIconElement(doc, 'check');\n        wrapperElem.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        this.inputElement.checked = this.value.rawValue;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { forceCast } from '../../../misc/type-util.js';\nimport { CheckboxView } from '../view/checkbox.js';\n/**\n * @hidden\n */\nexport class CheckboxController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onLabelMouseDown_ = this.onLabelMouseDown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CheckboxView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.labelElement.addEventListener('mousedown', this.onLabelMouseDown_);\n    }\n    onInputChange_(ev) {\n        const inputElem = forceCast(ev.currentTarget);\n        this.value.rawValue = inputElem.checked;\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n    onLabelMouseDown_(ev) {\n        // Prevent unwanted text selection\n        // https://github.com/cocopon/tweakpane/issues/545\n        ev.preventDefault();\n    }\n}\n","import { ListInputBindingApi } from '../../common/api/list.js';\nimport { CompositeConstraint, findConstraint, } from '../../common/constraint/composite.js';\nimport { ListConstraint } from '../../common/constraint/list.js';\nimport { ListController } from '../../common/controller/list.js';\nimport { boolFromUnknown } from '../../common/converter/boolean.js';\nimport { createListConstraint, parseListOptions, } from '../../common/list-util.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { writePrimitive } from '../../common/primitive.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { CheckboxController } from './controller/checkbox.js';\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\n/**\n * @hidden\n */\nexport const BooleanInputPlugin = createPlugin({\n    id: 'input-bool',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            options: p.optional.custom(parseListOptions),\n            readonly: p.optional.constant(false),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'boolean') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n","import { bindValueMap } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { valueToClassName } from '../../../common/view/reactive.js';\nconst cn = ClassName('col');\n/**\n * @hidden\n */\nexport class ColorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.foldable.bindExpandedClass(this.element, cn(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n","import { constrainRange, loopRange } from '../../../common/number/util.js';\n/**\n * Converts RGB color components into HSL (cylindrical, used in CSS).\n */\nfunction rgbToHslInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const c = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    const l = (cmin + cmax) / 2;\n    if (c !== 0) {\n        s = c / (1 - Math.abs(cmax + cmin - 1));\n        if (rp === cmax) {\n            h = (gp - bp) / c;\n        }\n        else if (gp === cmax) {\n            h = 2 + (bp - rp) / c;\n        }\n        else {\n            h = 4 + (rp - gp) / c;\n        }\n        h = h / 6 + (h < 0 ? 1 : 0);\n    }\n    return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n    const hp = ((h % 360) + 360) % 360;\n    const sp = constrainRange(s / 100, 0, 1);\n    const lp = constrainRange(l / 100, 0, 1);\n    const c = (1 - Math.abs(2 * lp - 1)) * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = lp - c / 2;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const d = cmax - cmin;\n    let h;\n    if (d === 0) {\n        h = 0;\n    }\n    else if (cmax === rp) {\n        h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n    }\n    else if (cmax === gp) {\n        h = 60 * ((bp - rp) / d + 2);\n    }\n    else {\n        h = 60 * ((rp - gp) / d + 4);\n    }\n    const s = cmax === 0 ? 0 : d / cmax;\n    const v = cmax;\n    return [h, s * 100, v * 100];\n}\nexport function hsvToRgbInt(h, s, v) {\n    const hp = loopRange(h, 360);\n    const sp = constrainRange(s / 100, 0, 1);\n    const vp = constrainRange(v / 100, 0, 1);\n    const c = vp * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = vp - c;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nexport function hslToHsvInt(h, s, l) {\n    const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n    return [\n        h,\n        sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n        l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n    ];\n}\nexport function hsvToHslInt(h, s, v) {\n    const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n    return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n}\nexport function removeAlphaComponent(comps) {\n    return [comps[0], comps[1], comps[2]];\n}\nexport function appendAlphaComponent(comps, alpha) {\n    return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n    hsl: {\n        hsl: (h, s, l) => [h, s, l],\n        hsv: hslToHsvInt,\n        rgb: hslToRgbInt,\n    },\n    hsv: {\n        hsl: hsvToHslInt,\n        hsv: (h, s, v) => [h, s, v],\n        rgb: hsvToRgbInt,\n    },\n    rgb: {\n        hsl: rgbToHslInt,\n        hsv: rgbToHsvInt,\n        rgb: (r, g, b) => [r, g, b],\n    },\n};\nexport function getColorMaxComponents(mode, type) {\n    return [\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n    ];\n}\nfunction loopHueRange(hue, max) {\n    // Maximum value of the slider (e.g. 360deg) should be kept\n    return hue === max ? max : loopRange(hue, max);\n}\nexport function constrainColorComponents(components, mode, type) {\n    var _a;\n    const ms = getColorMaxComponents(mode, type);\n    return [\n        mode === 'rgb'\n            ? constrainRange(components[0], 0, ms[0])\n            : loopHueRange(components[0], ms[0]),\n        constrainRange(components[1], 0, ms[1]),\n        constrainRange(components[2], 0, ms[2]),\n        constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n    ];\n}\nfunction convertColorType(comps, mode, from, to) {\n    const fms = getColorMaxComponents(mode, from);\n    const tms = getColorMaxComponents(mode, to);\n    return comps.map((c, index) => (c / fms[index]) * tms[index]);\n}\nexport function convertColor(components, from, to) {\n    const intComps = convertColorType(components, from.mode, from.type, 'int');\n    const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n    return convertColorType(result, to.mode, 'int', to.type);\n}\n","import { appendAlphaComponent, constrainColorComponents, convertColor, removeAlphaComponent, } from './color-model.js';\nexport class IntColor {\n    static black() {\n        return new IntColor([0, 0, 0], 'rgb');\n    }\n    constructor(comps, mode) {\n        this.type = 'int';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('colp');\n/**\n * @hidden\n */\nexport class ColorPickerView {\n    constructor(doc, config) {\n        this.alphaViews_ = null;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const hsvElem = doc.createElement('div');\n        hsvElem.classList.add(cn('hsv'));\n        const svElem = doc.createElement('div');\n        svElem.classList.add(cn('sv'));\n        this.svPaletteView_ = config.svPaletteView;\n        svElem.appendChild(this.svPaletteView_.element);\n        hsvElem.appendChild(svElem);\n        const hElem = doc.createElement('div');\n        hElem.classList.add(cn('h'));\n        this.hPaletteView_ = config.hPaletteView;\n        hElem.appendChild(this.hPaletteView_.element);\n        hsvElem.appendChild(hElem);\n        this.element.appendChild(hsvElem);\n        const rgbElem = doc.createElement('div');\n        rgbElem.classList.add(cn('rgb'));\n        this.textsView_ = config.textsView;\n        rgbElem.appendChild(this.textsView_.element);\n        this.element.appendChild(rgbElem);\n        if (config.alphaViews) {\n            this.alphaViews_ = {\n                palette: config.alphaViews.palette,\n                text: config.alphaViews.text,\n            };\n            const aElem = doc.createElement('div');\n            aElem.classList.add(cn('a'));\n            const apElem = doc.createElement('div');\n            apElem.classList.add(cn('ap'));\n            apElem.appendChild(this.alphaViews_.palette.element);\n            aElem.appendChild(apElem);\n            const atElem = doc.createElement('div');\n            atElem.classList.add(cn('at'));\n            atElem.appendChild(this.alphaViews_.text.element);\n            aElem.appendChild(atElem);\n            this.element.appendChild(aElem);\n        }\n    }\n    get allFocusableElements() {\n        const elems = [\n            this.svPaletteView_.element,\n            this.hPaletteView_.element,\n            this.textsView_.modeSelectElement,\n            ...this.textsView_.inputViews.map((v) => v.inputElement),\n        ];\n        if (this.alphaViews_) {\n            elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n        }\n        return elems;\n    }\n}\n","import { parseRecord } from '../../common/micro-parsers.js';\nimport { parsePickerLayout } from '../../common/picker-util.js';\nfunction parseColorType(value) {\n    return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nexport function parseColorInputParams(params) {\n    return parseRecord(params, (p) => ({\n        color: p.optional.object({\n            alpha: p.optional.boolean,\n            type: p.optional.custom(parseColorType),\n        }),\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n    }));\n}\nexport function getKeyScaleForColor(forAlpha) {\n    return forAlpha ? 0.1 : 1;\n}\nexport function extractColorType(params) {\n    var _a;\n    return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\n","import { appendAlphaComponent, constrainColorComponents, convertColor, removeAlphaComponent, } from './color-model.js';\nexport class FloatColor {\n    constructor(comps, mode) {\n        this.type = 'float';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { TpError } from '../../../common/tp-error.js';\nimport { getColorMaxComponents, } from './color-model.js';\nimport { FloatColor } from './float-color.js';\nimport { IntColor } from './int-color.js';\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n    int: (comps, mode) => new IntColor(comps, mode),\n    float: (comps, mode) => new FloatColor(comps, mode),\n};\nexport function createColor(comps, mode, type) {\n    return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n    return c.type === 'float';\n}\nfunction isIntColor(c) {\n    return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n    const comps = cf.getComponents();\n    const ms = getColorMaxComponents(cf.mode, 'int');\n    return new IntColor([\n        Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),\n        Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),\n        Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),\n        comps[3],\n    ], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n    const comps = ci.getComponents();\n    const ms = getColorMaxComponents(ci.mode, 'int');\n    return new FloatColor([\n        mapRange(comps[0], 0, ms[0], 0, 1),\n        mapRange(comps[1], 0, ms[1], 0, 1),\n        mapRange(comps[2], 0, ms[2], 0, 1),\n        comps[3],\n    ], ci.mode);\n}\nexport function mapColorType(c, type) {\n    if (c.type === type) {\n        return c;\n    }\n    if (isIntColor(c) && type === 'float') {\n        return convertIntToFloat(c);\n    }\n    /* istanbul ignore else */\n    if (isFloatColor(c) && type === 'int') {\n        return convertFloatToInt(c);\n    }\n    /* istanbul ignore next */\n    throw TpError.shouldNeverHappen();\n}\n","import { createNumberFormatter } from '../../../common/converter/number.js';\nimport { composeParsers } from '../../../common/converter/parser.js';\nimport { formatPercentage } from '../../../common/converter/percentage.js';\nimport { constrainRange, mapRange } from '../../../common/number/util.js';\nimport { removeAlphaComponent, } from '../model/color-model.js';\nimport { createColor, mapColorType } from '../model/colors.js';\nimport { IntColor } from '../model/int-color.js';\nfunction equalsStringColorFormat(f1, f2) {\n    return (f1.alpha === f2.alpha &&\n        f1.mode === f2.mode &&\n        f1.notation === f2.notation &&\n        f1.type === f2.type);\n}\nfunction parseCssNumberOrPercentage(text, max) {\n    const m = text.match(/^(.+)%$/);\n    if (!m) {\n        return Math.min(parseFloat(text), max);\n    }\n    return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n    deg: (angle) => angle,\n    grad: (angle) => (angle * 360) / 400,\n    rad: (angle) => (angle * 360) / (2 * Math.PI),\n    turn: (angle) => angle * 360,\n};\nfunction parseCssNumberOrAngle(text) {\n    const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n    if (!m) {\n        return parseFloat(text);\n    }\n    const angle = parseFloat(m[1]);\n    const unit = m[2];\n    return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n    const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n    const comps = parseFunctionalRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n    const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n    const comps = parseFunctionalRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n    const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslColor(text) {\n    const comps = parseFunctionalHslColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n    const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n    const comps = parseHslaColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbColor(text) {\n    const comps = parseHexRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbaColor(text) {\n    const comps = parseHexRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nfunction parseObjectRgbaColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n        parseFloat(m[4]),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbaColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nconst PARSER_AND_RESULT = [\n    {\n        parser: parseHexRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseHexRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseFunctionalRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalHslColorComponents,\n        result: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseHslaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseObjectRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n    {\n        parser: parseObjectRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n];\nfunction detectStringColor(text) {\n    return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n        if (prev) {\n            return prev;\n        }\n        return parser(text) ? detection : null;\n    }, null);\n}\nexport function detectStringColorFormat(text, type = 'int') {\n    const r = detectStringColor(text);\n    if (!r) {\n        return null;\n    }\n    if (r.notation === 'hex' && type !== 'float') {\n        return Object.assign(Object.assign({}, r), { type: 'int' });\n    }\n    if (r.notation === 'func') {\n        return Object.assign(Object.assign({}, r), { type: type });\n    }\n    return null;\n}\nexport function createColorStringParser(type) {\n    const parsers = [\n        parseHexRgbColor,\n        parseHexRgbaColor,\n        parseFunctionalRgbColor,\n        parseFunctionalRgbaColor,\n        parseFunctionalHslColor,\n        parseFunctionalHslaColor,\n    ];\n    if (type === 'int') {\n        parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n    }\n    if (type === 'float') {\n        parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n    }\n    const parser = composeParsers(parsers);\n    return (text) => {\n        const result = parser(text);\n        return result ? mapColorType(result, type) : null;\n    };\n}\nexport function readIntColorString(value) {\n    const parser = createColorStringParser('int');\n    if (typeof value !== 'string') {\n        return IntColor.black();\n    }\n    const result = parser(value);\n    return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n    const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n}\nexport function colorToHexRgbString(value, prefix = '#') {\n    const hexes = removeAlphaComponent(value.getComponents('rgb'))\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nexport function colorToHexRgbaString(value, prefix = '#') {\n    const rgbaComps = value.getComponents('rgb');\n    const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nexport function colorToFunctionalRgbString(value) {\n    const formatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('rgb')).map((comp) => formatter(comp));\n    return `rgb(${comps.join(', ')})`;\n}\nexport function colorToFunctionalRgbaString(value) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = ci.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return formatter(comp);\n    });\n    return `rgba(${comps.join(', ')})`;\n}\nexport function colorToFunctionalHslString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n    return `hsl(${comps.join(', ')})`;\n}\nexport function colorToFunctionalHslaString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n        createNumberFormatter(2),\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = ci\n        .getComponents('hsl')\n        .map((comp, index) => formatters[index](comp));\n    return `hsla(${comps.join(', ')})`;\n}\nexport function colorToObjectRgbString(value, type) {\n    const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b'];\n    const cc = mapColorType(value, type);\n    const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n    return (value) => colorToObjectRgbString(value, type);\n}\nexport function colorToObjectRgbaString(value, type) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b', 'a'];\n    const cc = mapColorType(value, type);\n    const comps = cc.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return `${names[index]}: ${formatter(comp)}`;\n    });\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n    return (value) => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslaString,\n    },\n    ...['int', 'float'].reduce((prev, type) => {\n        return [\n            ...prev,\n            {\n                format: {\n                    alpha: false,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbColorFormatter(type),\n            },\n            {\n                format: {\n                    alpha: true,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbaColorFormatter(type),\n            },\n        ];\n    }, []),\n];\nexport function findColorStringifier(format) {\n    return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n        if (prev) {\n            return prev;\n        }\n        return equalsStringColorFormat(fas.format, format)\n            ? fas.stringifier\n            : null;\n    }, null);\n}\n","export function composeParsers(parsers) {\n    return (text) => {\n        return parsers.reduce((result, parser) => {\n            if (result !== null) {\n                return result;\n            }\n            return parser(text);\n        }, null);\n    };\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { colorToFunctionalRgbaString } from '../converter/color-string.js';\nimport { IntColor } from '../model/int-color.js';\nconst cn = ClassName('apl');\n/**\n * @hidden\n */\nexport class APaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const barElem = doc.createElement('div');\n        barElem.classList.add(cn('b'));\n        this.element.appendChild(barElem);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn('c'));\n        barElem.appendChild(colorElem);\n        this.colorElem_ = colorElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(cn('p'));\n        this.markerElem_.appendChild(previewElem);\n        this.previewElem_ = previewElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const rgbaComps = c.getComponents('rgb');\n        const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n        const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n        const gradientComps = [\n            'to right',\n            colorToFunctionalRgbaString(leftColor),\n            colorToFunctionalRgbaString(rightColor),\n        ];\n        this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n        this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n        const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { getHorizontalStepKeys, getStepForKey } from '../../../common/ui.js';\nimport { PointerHandler, } from '../../../common/view/pointer-handler.js';\nimport { IntColor } from '../model/int-color.js';\nimport { getKeyScaleForColor } from '../util.js';\nimport { APaletteView } from '../view/a-palette.js';\n/**\n * @hidden\n */\nexport class APaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new APaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const alpha = d.point.x / d.bounds.width;\n        const c = this.value.rawValue;\n        const [h, s, v] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n","import { createSvgIconElement, removeChildElements, } from '../../../common/dom-util.js';\nimport { bindValue } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n    const selectElem = doc.createElement('select');\n    const items = [\n        { text: 'RGB', value: 'rgb' },\n        { text: 'HSL', value: 'hsl' },\n        { text: 'HSV', value: 'hsv' },\n        { text: 'HEX', value: 'hex' },\n    ];\n    selectElem.appendChild(items.reduce((frag, item) => {\n        const optElem = doc.createElement('option');\n        optElem.textContent = item.text;\n        optElem.value = item.value;\n        frag.appendChild(optElem);\n        return frag;\n    }, doc.createDocumentFragment()));\n    return selectElem;\n}\n/**\n * @hidden\n */\nexport class ColorTextsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const modeElem = doc.createElement('div');\n        modeElem.classList.add(cn('m'));\n        this.modeElem_ = createModeSelectElement(doc);\n        this.modeElem_.classList.add(cn('ms'));\n        modeElem.appendChild(this.modeSelectElement);\n        config.viewProps.bindDisabled(this.modeElem_);\n        const modeMarkerElem = doc.createElement('div');\n        modeMarkerElem.classList.add(cn('mm'));\n        modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        modeElem.appendChild(modeMarkerElem);\n        this.element.appendChild(modeElem);\n        const inputsElem = doc.createElement('div');\n        inputsElem.classList.add(cn('w'));\n        this.element.appendChild(inputsElem);\n        this.inputsElem_ = inputsElem;\n        this.inputViews_ = config.inputViews;\n        this.applyInputViews_();\n        bindValue(config.mode, (mode) => {\n            this.modeElem_.value = mode;\n        });\n    }\n    get modeSelectElement() {\n        return this.modeElem_;\n    }\n    get inputViews() {\n        return this.inputViews_;\n    }\n    set inputViews(inputViews) {\n        this.inputViews_ = inputViews;\n        this.applyInputViews_();\n    }\n    applyInputViews_() {\n        removeChildElements(this.inputsElem_);\n        const doc = this.element.ownerDocument;\n        this.inputViews_.forEach((v) => {\n            const compElem = doc.createElement('div');\n            compElem.classList.add(cn('c'));\n            compElem.appendChild(v.element);\n            this.inputsElem_.appendChild(compElem);\n        });\n    }\n}\n","import { DefiniteRangeConstraint } from '../../../common/constraint/definite-range.js';\nimport { TextController } from '../../../common/controller/text.js';\nimport { createNumberFormatter, parseNumber, } from '../../../common/converter/number.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { connectValues } from '../../../common/model/value-sync.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { NumberTextController } from '../../../common/number/controller/number-text.js';\nimport { colorToHexRgbString, createColorStringParser, } from '../converter/color-string.js';\nimport { appendAlphaComponent, getColorMaxComponents, removeAlphaComponent, } from '../model/color-model.js';\nimport { createColor, mapColorType } from '../model/colors.js';\nimport { IntColor } from '../model/int-color.js';\nimport { getKeyScaleForColor } from '../util.js';\nimport { ColorTextsView } from '../view/color-texts.js';\nfunction createFormatter(type) {\n    return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint(mode, type, index) {\n    const max = getColorMaxComponents(mode, type)[index];\n    return new DefiniteRangeConstraint({\n        min: 0,\n        max: max,\n    });\n}\nfunction createComponentController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: ValueMap.fromObject({\n            formatter: createFormatter(config.colorType),\n            keyScale: getKeyScaleForColor(false),\n            pointerScale: config.colorType === 'float' ? 0.01 : 1,\n        }),\n        value: createValue(0, {\n            constraint: createConstraint(config.colorMode, config.colorType, index),\n        }),\n        viewProps: config.viewProps,\n    });\n}\nfunction createComponentControllers(doc, config) {\n    const cc = {\n        colorMode: config.colorMode,\n        colorType: config.colorType,\n        parser: parseNumber,\n        viewProps: config.viewProps,\n    };\n    return [0, 1, 2].map((i) => {\n        const c = createComponentController(doc, cc, i);\n        connectValues({\n            primary: config.value,\n            secondary: c.value,\n            forward(p) {\n                const mc = mapColorType(p, config.colorType);\n                return mc.getComponents(config.colorMode)[i];\n            },\n            backward(p, s) {\n                const pickedMode = config.colorMode;\n                const mc = mapColorType(p, config.colorType);\n                const comps = mc.getComponents(pickedMode);\n                comps[i] = s;\n                const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n                return mapColorType(c, 'int');\n            },\n        });\n        return c;\n    });\n}\nfunction createHexController(doc, config) {\n    const c = new TextController(doc, {\n        parser: createColorStringParser('int'),\n        props: ValueMap.fromObject({\n            formatter: colorToHexRgbString,\n        }),\n        value: createValue(IntColor.black()),\n        viewProps: config.viewProps,\n    });\n    connectValues({\n        primary: config.value,\n        secondary: c.value,\n        forward: (p) => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n        backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode),\n    });\n    return [c];\n}\nfunction isColorMode(mode) {\n    return mode !== 'hex';\n}\n/**\n * @hidden\n */\nexport class ColorTextsController {\n    constructor(doc, config) {\n        this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n        this.colorType_ = config.colorType;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.colorMode = createValue(this.value.rawValue.mode);\n        this.ccs_ = this.createComponentControllers_(doc);\n        this.view = new ColorTextsView(doc, {\n            mode: this.colorMode,\n            inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            viewProps: this.viewProps,\n        });\n        this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n    }\n    createComponentControllers_(doc) {\n        const mode = this.colorMode.rawValue;\n        if (isColorMode(mode)) {\n            return createComponentControllers(doc, {\n                colorMode: mode,\n                colorType: this.colorType_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n        return createHexController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n    onModeSelectChange_(ev) {\n        const selectElem = ev.currentTarget;\n        this.colorMode.rawValue = selectElem.value;\n        this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n        this.view.inputViews = this.ccs_.map((cc) => cc.view);\n    }\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { colorToFunctionalRgbString } from '../converter/color-string.js';\nimport { IntColor } from '../model/int-color.js';\nconst cn = ClassName('hpl');\n/**\n * @hidden\n */\nexport class HPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn('c'));\n        this.element.appendChild(colorElem);\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const [h] = c.getComponents('hsv');\n        this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n        const left = mapRange(h, 0, 360, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { constrainRange, mapRange } from '../../../common/number/util.js';\nimport { getHorizontalStepKeys, getStepForKey } from '../../../common/ui.js';\nimport { PointerHandler, } from '../../../common/view/pointer-handler.js';\nimport { IntColor } from '../model/int-color.js';\nimport { getKeyScaleForColor } from '../util.js';\nimport { HPaletteView } from '../view/h-palette.js';\n/**\n * @hidden\n */\nexport class HPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new HPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n        const c = this.value.rawValue;\n        const [, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n","import { getCanvasContext } from '../../../common/dom-util.js';\nimport { mapRange } from '../../../common/number/util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { hsvToRgbInt } from '../model/color-model.js';\nconst cn = ClassName('svp');\nconst CANVAS_RESOL = 64;\n/**\n * @hidden\n */\nexport class SvPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const canvasElem = doc.createElement('canvas');\n        canvasElem.height = CANVAS_RESOL;\n        canvasElem.width = CANVAS_RESOL;\n        canvasElem.classList.add(cn('c'));\n        this.element.appendChild(canvasElem);\n        this.canvasElement = canvasElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const ctx = getCanvasContext(this.canvasElement);\n        if (!ctx) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const hsvComps = c.getComponents('hsv');\n        const width = this.canvasElement.width;\n        const height = this.canvasElement.height;\n        const imgData = ctx.getImageData(0, 0, width, height);\n        const data = imgData.data;\n        for (let iy = 0; iy < height; iy++) {\n            for (let ix = 0; ix < width; ix++) {\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n        const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n        this.markerElem_.style.top = `${top}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { getHorizontalStepKeys, getStepForKey, getVerticalStepKeys, isArrowKey, } from '../../../common/ui.js';\nimport { PointerHandler, } from '../../../common/view/pointer-handler.js';\nimport { IntColor } from '../model/int-color.js';\nimport { getKeyScaleForColor } from '../util.js';\nimport { SvPaletteView } from '../view/sv-palette.js';\n/**\n * @hidden\n */\nexport class SvPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SvPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n        const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n        const [h, , , a] = this.value.rawValue.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n","import { DefiniteRangeConstraint } from '../../../common/constraint/definite-range.js';\nimport { createNumberFormatter, parseNumber, } from '../../../common/converter/number.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { connectValues } from '../../../common/model/value-sync.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { NumberTextController } from '../../../common/number/controller/number-text.js';\nimport { IntColor } from '../model/int-color.js';\nimport { ColorPickerView } from '../view/color-picker.js';\nimport { APaletteController } from './a-palette.js';\nimport { ColorTextsController } from './color-texts.js';\nimport { HPaletteController } from './h-palette.js';\nimport { SvPaletteController } from './sv-palette.js';\n/**\n * @hidden\n */\nexport class ColorPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.hPaletteC_ = new HPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.svPaletteC_ = new SvPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.alphaIcs_ = config.supportsAlpha\n            ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps,\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    props: ValueMap.fromObject({\n                        pointerScale: 0.01,\n                        keyScale: 0.1,\n                        formatter: createNumberFormatter(2),\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                    }),\n                    viewProps: this.viewProps,\n                }),\n            }\n            : null;\n        if (this.alphaIcs_) {\n            connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p) => p.getComponents()[3],\n                backward: (p, s) => {\n                    const comps = p.getComponents();\n                    comps[3] = s;\n                    return new IntColor(comps, p.mode);\n                },\n            });\n        }\n        this.textsC_ = new ColorTextsController(doc, {\n            colorType: config.colorType,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorPickerView(doc, {\n            alphaViews: this.alphaIcs_\n                ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view,\n                }\n                : null,\n            hPaletteView: this.hPaletteC_.view,\n            supportsAlpha: config.supportsAlpha,\n            svPaletteView: this.svPaletteC_.view,\n            textsView: this.textsC_.view,\n            viewProps: this.viewProps,\n        });\n    }\n    get textsController() {\n        return this.textsC_;\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nimport { colorToHexRgbaString } from '../converter/color-string.js';\nconst cn = ClassName('colsw');\n/**\n * @hidden\n */\nexport class ColorSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn('sw'));\n        this.element.appendChild(swatchElem);\n        this.swatchElem_ = swatchElem;\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        this.update_();\n    }\n    update_() {\n        const value = this.value.rawValue;\n        this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n","import { ColorSwatchView } from '../view/color-swatch.js';\n/**\n * @hidden\n */\nexport class ColorSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ColorSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n","import { bindFoldable, Foldable } from '../../../blade/common/model/foldable.js';\nimport { PopupController } from '../../../common/controller/popup.js';\nimport { TextController } from '../../../common/controller/text.js';\nimport { findNextTarget, supportsTouch } from '../../../common/dom-util.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { connectValues } from '../../../common/model/value-sync.js';\nimport { forceCast } from '../../../misc/type-util.js';\nimport { ColorView } from '../view/color.js';\nimport { ColorPickerController } from './color-picker.js';\nimport { ColorSwatchController } from './color-swatch.js';\n/**\n * @hidden\n */\nexport class ColorController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new ColorSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new TextController(doc, {\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                formatter: config.formatter,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new ColorPickerController(doc, {\n            colorType: config.colorType,\n            supportsAlpha: config.supportsAlpha,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(pickerC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            // Next target is in the picker\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            // Next target is the trigger button\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { removeAlphaComponent } from '../model/color-model.js';\nimport { IntColor } from '../model/int-color.js';\nexport function colorToRgbNumber(value) {\n    return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n        return (result << 8) | (Math.floor(comp) & 0xff);\n    }, 0);\n}\nexport function colorToRgbaNumber(value) {\n    return (value.getComponents('rgb').reduce((result, comp, index) => {\n        const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n        return (result << 8) | hex;\n    }, 0) >>> 0);\n}\nexport function numberToRgbColor(num) {\n    return new IntColor([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n}\nexport function numberToRgbaColor(num) {\n    return new IntColor([\n        (num >> 24) & 0xff,\n        (num >> 16) & 0xff,\n        (num >> 8) & 0xff,\n        mapRange(num & 0xff, 0, 255, 0, 1),\n    ], 'rgb');\n}\nexport function colorFromRgbNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbColor(value);\n}\nexport function colorFromRgbaNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbaColor(value);\n}\n","import { isEmpty } from '../../../misc/type-util.js';\nfunction isRgbColorComponent(obj, key) {\n    if (typeof obj !== 'object' || isEmpty(obj)) {\n        return false;\n    }\n    return key in obj && typeof obj[key] === 'number';\n}\nexport function isRgbColorObject(obj) {\n    return (isRgbColorComponent(obj, 'r') &&\n        isRgbColorComponent(obj, 'g') &&\n        isRgbColorComponent(obj, 'b'));\n}\nexport function isRgbaColorObject(obj) {\n    return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nexport function isColorObject(obj) {\n    return isRgbColorObject(obj);\n}\nexport function equalsColor(v1, v2) {\n    if (v1.mode !== v2.mode) {\n        return false;\n    }\n    if (v1.type !== v2.type) {\n        return false;\n    }\n    const comps1 = v1.getComponents();\n    const comps2 = v2.getComponents();\n    for (let i = 0; i < comps1.length; i++) {\n        if (comps1[i] !== comps2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function createColorComponentsFromRgbObject(obj) {\n    return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\n","import { writePrimitive } from '../../../common/primitive.js';\nimport { colorToRgbaNumber, colorToRgbNumber, } from '../converter/color-number.js';\nimport { findColorStringifier, } from '../converter/color-string.js';\nimport { mapColorType } from '../model/colors.js';\nexport function createColorStringWriter(format) {\n    const stringify = findColorStringifier(format);\n    return stringify\n        ? (target, value) => {\n            writePrimitive(target, stringify(value));\n        }\n        : null;\n}\nexport function createColorNumberWriter(supportsAlpha) {\n    const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n    return (target, value) => {\n        writePrimitive(target, colorToNumber(value));\n    };\n}\nexport function writeRgbaColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n    target.writeProperty('a', obj.a);\n}\nexport function writeRgbColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n}\nexport function createColorObjectWriter(supportsAlpha, type) {\n    return (target, inValue) => {\n        if (supportsAlpha) {\n            writeRgbaColorObject(target, inValue, type);\n        }\n        else {\n            writeRgbColorObject(target, inValue, type);\n        }\n    };\n}\n","import { createPlugin } from '../../plugin/plugin.js';\nimport { ColorController } from './controller/color.js';\nimport { colorFromRgbaNumber, colorFromRgbNumber, } from './converter/color-number.js';\nimport { colorToHexRgbaString, colorToHexRgbString, createColorStringParser, } from './converter/color-string.js';\nimport { createColorNumberWriter } from './converter/writer.js';\nimport { equalsColor } from './model/color.js';\nimport { parseColorInputParams } from './util.js';\nfunction shouldSupportAlpha(inputParams) {\n    var _a;\n    if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n        return true;\n    }\n    return false;\n}\nfunction createFormatter(supportsAlpha) {\n    return supportsAlpha\n        ? (v) => colorToHexRgbaString(v, '0x')\n        : (v) => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n    if ('color' in params) {\n        return true;\n    }\n    if (params.view === 'color') {\n        return true;\n    }\n    return false;\n}\n/**\n * @hidden\n */\nexport const NumberColorInputPlugin = createPlugin({\n    id: 'input-color-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        if (!isForColor(params)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { supportsAlpha: shouldSupportAlpha(params) }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => {\n            return args.params.supportsAlpha\n                ? colorFromRgbaNumber\n                : colorFromRgbNumber;\n        },\n        equals: equalsColor,\n        writer: (args) => {\n            return createColorNumberWriter(args.params.supportsAlpha);\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: 'int',\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createFormatter(args.params.supportsAlpha),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { createPlugin } from '../../plugin/plugin.js';\nimport { ColorController } from './controller/color.js';\nimport { colorFromObject } from './converter/color-object.js';\nimport { colorToObjectRgbaString, colorToObjectRgbString, createColorStringParser, } from './converter/color-string.js';\nimport { createColorObjectWriter } from './converter/writer.js';\nimport { equalsColor, isColorObject, isRgbaColorObject, } from './model/color.js';\nimport { mapColorType } from './model/colors.js';\nimport { extractColorType, parseColorInputParams } from './util.js';\nfunction shouldSupportAlpha(initialValue) {\n    return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n    return (value) => {\n        const c = colorFromObject(value, type);\n        return mapColorType(c, 'int');\n    };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n    return (value) => {\n        if (supportsAlpha) {\n            return colorToObjectRgbaString(value, type);\n        }\n        return colorToObjectRgbString(value, type);\n    };\n}\n/**\n * @hidden\n */\nexport const ObjectColorInputPlugin = createPlugin({\n    id: 'input-color-object',\n    type: 'input',\n    accept: (value, params) => {\n        var _a;\n        if (!isColorObject(value)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int' }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => createColorObjectBindingReader(args.params.colorType),\n        equals: equalsColor,\n        writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType),\n    },\n    controller: (args) => {\n        var _a, _b;\n        const supportsAlpha = isRgbaColorObject(args.initialValue);\n        return new ColorController(args.document, {\n            colorType: args.params.colorType,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { createColorComponentsFromRgbObject, isColorObject, } from '../model/color.js';\nimport { mapColorType } from '../model/colors.js';\nimport { FloatColor } from '../model/float-color.js';\nimport { IntColor } from '../model/int-color.js';\nexport function colorFromObject(value, type) {\n    if (!isColorObject(value)) {\n        return mapColorType(IntColor.black(), type);\n    }\n    if (type === 'int') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new IntColor(comps, 'rgb');\n    }\n    if (type === 'float') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new FloatColor(comps, 'rgb');\n    }\n    return mapColorType(IntColor.black(), 'int');\n}\n","import { TpError } from '../../common/tp-error.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { ColorController } from './controller/color.js';\nimport { createColorStringParser, detectStringColorFormat, findColorStringifier, readIntColorString, } from './converter/color-string.js';\nimport { createColorStringWriter } from './converter/writer.js';\nimport { equalsColor } from './model/color.js';\nimport { extractColorType, parseColorInputParams } from './util.js';\n/**\n * @hidden\n */\nexport const StringColorInputPlugin = createPlugin({\n    id: 'input-color-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        if (params.view === 'text') {\n            return null;\n        }\n        const format = detectStringColorFormat(value, extractColorType(params));\n        if (!format) {\n            return null;\n        }\n        const stringifier = findColorStringifier(format);\n        if (!stringifier) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { format: format, stringifier: stringifier }),\n            }\n            : null;\n    },\n    binding: {\n        reader: () => readIntColorString,\n        equals: equalsColor,\n        writer: (args) => {\n            const writer = createColorStringWriter(args.params.format);\n            if (!writer) {\n                throw TpError.notBindable();\n            }\n            return writer;\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: args.params.format.type,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: args.params.stringifier,\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.format.alpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","/**\n * @hidden\n */\nexport class PointNdConstraint {\n    constructor(config) {\n        this.components = config.components;\n        this.asm_ = config.assembly;\n    }\n    constrain(value) {\n        const comps = this.asm_\n            .toComponents(value)\n            .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n        return this.asm_.fromComponents(comps);\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('pndtxt');\n/**\n * @hidden\n */\nexport class PointNdTextView {\n    constructor(doc, config) {\n        this.textViews = config.textViews;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        this.textViews.forEach((v) => {\n            const axisElem = doc.createElement('div');\n            axisElem.classList.add(cn('a'));\n            axisElem.appendChild(v.element);\n            this.element.appendChild(axisElem);\n        });\n    }\n}\n","import { connectValues } from '../../../common/model/value-sync.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { NumberTextController } from '../../../common/number/controller/number-text.js';\nimport { PointNdTextView } from '../view/point-nd-text.js';\nfunction createAxisController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: config.axes[index].textProps,\n        value: createValue(0, {\n            constraint: config.axes[index].constraint,\n        }),\n        viewProps: config.viewProps,\n    });\n}\n/**\n * @hidden\n */\nexport class PointNdTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n        this.acs_.forEach((c, index) => {\n            connectValues({\n                primary: this.value,\n                secondary: c.value,\n                forward: (p) => config.assembly.toComponents(p)[index],\n                backward: (p, s) => {\n                    const comps = config.assembly.toComponents(p);\n                    comps[index] = s;\n                    return config.assembly.fromComponents(comps);\n                },\n            });\n        });\n        this.view = new PointNdTextView(doc, {\n            textViews: this.acs_.map((ac) => ac.view),\n        });\n    }\n    get textControllers() {\n        return this.acs_;\n    }\n}\n","import { BindingApi } from '../../../blade/binding/api/binding.js';\nexport class SliderInputBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(max) {\n        this.controller.valueController.sliderController.props.set('min', max);\n    }\n}\n","import { ListInputBindingApi } from '../../common/api/list.js';\nimport { CompositeConstraint, findConstraint, } from '../../common/constraint/composite.js';\nimport { DefiniteRangeConstraint } from '../../common/constraint/definite-range.js';\nimport { ListConstraint } from '../../common/constraint/list.js';\nimport { ListController } from '../../common/controller/list.js';\nimport { numberFromUnknown, parseNumber } from '../../common/converter/number.js';\nimport { createListConstraint, parseListOptions, } from '../../common/list-util.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { createValue } from '../../common/model/values.js';\nimport { NumberTextController } from '../../common/number/controller/number-text.js';\nimport { createSliderTextProps, SliderTextController, } from '../../common/number/controller/slider-text.js';\nimport { createNumberTextInputParamsParser, createNumberTextPropsObject, createRangeConstraint, createStepConstraint, } from '../../common/number/util.js';\nimport { writePrimitive } from '../../common/primitive.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { SliderInputBindingApi } from './api/slider.js';\nfunction createConstraint(params, initialValue) {\n    const constraints = [];\n    const sc = createStepConstraint(params, initialValue);\n    if (sc) {\n        constraints.push(sc);\n    }\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\n/**\n * @hidden\n */\nexport const NumberInputPlugin = createPlugin({\n    id: 'input-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { options: p.optional.custom(parseListOptions), readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint(args.params, args.initialValue),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n        const drc = c && findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), { keyScale: createValue(textPropsObj.keyScale), max: drc.values.value('max'), min: drc.values.value('min') }))), { parser: parseNumber, value: value, viewProps: args.viewProps }));\n        }\n        return new NumberTextController(args.document, {\n            parser: parseNumber,\n            props: ValueMap.fromObject(textPropsObj),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'number') {\n            return null;\n        }\n        if (args.controller.valueController instanceof SliderTextController) {\n            return new SliderInputBindingApi(args.controller);\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n","import { isEmpty } from '../../../misc/type-util.js';\nexport class Point2d {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    getComponents() {\n        return [this.x, this.y];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        if (typeof x !== 'number' || typeof y !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n        };\n    }\n}\nexport const Point2dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point2d(...comps),\n};\n","import { createSvgIconElement } from '../../../common/dom-util.js';\nimport { bindValue } from '../../../common/model/reactive.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { valueToClassName } from '../../../common/view/reactive.js';\nconst cn = ClassName('p2d');\n/**\n * @hidden\n */\nexport class Point2dView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.expanded, valueToClassName(this.element, cn(undefined, 'expanded')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn('b'));\n        buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n        config.viewProps.bindDisabled(buttonElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n","import { SVG_NS } from '../../../common/dom-util.js';\nimport { mapRange } from '../../../common/number/util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('p2dp');\n/**\n * @hidden\n */\nexport class Point2dPickerView {\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onPropsChange_ = this.onPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        if (config.layout === 'popup') {\n            this.element.classList.add(cn(undefined, 'p'));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const padElem = doc.createElement('div');\n        padElem.classList.add(cn('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n        xAxisElem.classList.add(cn('ax'));\n        xAxisElem.setAttributeNS(null, 'x1', '0');\n        xAxisElem.setAttributeNS(null, 'y1', '50%');\n        xAxisElem.setAttributeNS(null, 'x2', '100%');\n        xAxisElem.setAttributeNS(null, 'y2', '50%');\n        this.svgElem_.appendChild(xAxisElem);\n        const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n        yAxisElem.classList.add(cn('ax'));\n        yAxisElem.setAttributeNS(null, 'x1', '50%');\n        yAxisElem.setAttributeNS(null, 'y1', '0');\n        yAxisElem.setAttributeNS(null, 'x2', '50%');\n        yAxisElem.setAttributeNS(null, 'y2', '100%');\n        this.svgElem_.appendChild(yAxisElem);\n        const lineElem = doc.createElementNS(SVG_NS, 'line');\n        lineElem.classList.add(cn('l'));\n        lineElem.setAttributeNS(null, 'x1', '50%');\n        lineElem.setAttributeNS(null, 'y1', '50%');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn('m'));\n        this.padElement.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const [x, y] = this.value.rawValue.getComponents();\n        const max = this.props_.get('max');\n        const px = mapRange(x, -max, +max, 0, 100);\n        const py = mapRange(y, -max, +max, 0, 100);\n        const ipy = this.props_.get('invertsY') ? 100 - py : py;\n        this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n        this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n        this.markerElem_.style.left = `${px}%`;\n        this.markerElem_.style.top = `${ipy}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onPropsChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n}\n","import { mapRange } from '../../../common/number/util.js';\nimport { getHorizontalStepKeys, getStepForKey, getVerticalStepKeys, isArrowKey, } from '../../../common/ui.js';\nimport { PointerHandler, } from '../../../common/view/pointer-handler.js';\nimport { Point2d } from '../model/point-2d.js';\nimport { Point2dPickerView, } from '../view/point-2d-picker.js';\nfunction computeOffset(ev, keyScales, invertsY) {\n    return [\n        getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),\n        getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n    ];\n}\n/**\n * @hidden\n */\nexport class Point2dPickerController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new Point2dPickerView(doc, {\n            layout: config.layout,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const max = this.props.get('max');\n        const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n        const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n        this.value.setRawValue(new Point2d(px, py), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPadKeyUp_(ev) {\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n","import { bindFoldable, Foldable } from '../../../blade/common/model/foldable.js';\nimport { PopupController } from '../../../common/controller/popup.js';\nimport { findNextTarget, supportsTouch } from '../../../common/dom-util.js';\nimport { ValueMap } from '../../../common/model/value-map.js';\nimport { connectValues } from '../../../common/model/value-sync.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { forceCast } from '../../../misc/type-util.js';\nimport { PointNdTextController } from '../../common/controller/point-nd-text.js';\nimport { Point2dAssembly } from '../model/point-2d.js';\nimport { Point2dView } from '../view/point-2d.js';\nimport { Point2dPickerController } from './point-2d-picker.js';\n/**\n * @hidden\n */\nexport class Point2dController {\n    constructor(doc, config) {\n        var _a, _b;\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n        this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const padC = new Point2dPickerController(doc, {\n            layout: config.pickerLayout,\n            props: new ValueMap({\n                invertsY: createValue(config.invertsY),\n                max: createValue(config.max),\n                xKeyScale: config.axes[0].textProps.value('keyScale'),\n                yKeyScale: config.axes[1].textProps.value('keyScale'),\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        padC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = padC;\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: Point2dAssembly,\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new Point2dView(doc, {\n            expanded: this.foldable_.value('expanded'),\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.textC_.view.element);\n        (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n        (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onPadButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onPadButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            // Next target is in the popup\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            // Next target is the trigger button\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.view.buttonElement.focus();\n            }\n        }\n    }\n}\n","import { Point2d } from '../model/point-2d.js';\nexport function point2dFromUnknown(value) {\n    return Point2d.isObject(value)\n        ? new Point2d(value.x, value.y)\n        : new Point2d();\n}\nexport function writePoint2d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n}\n","import { parseNumber } from '../../common/converter/number.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { getSuitableKeyScale } from '../../common/number/util.js';\nimport { parsePickerLayout } from '../../common/picker-util.js';\nimport { createPointAxis } from '../../common/point-nd/point-axis.js';\nimport { createPointDimensionParser } from '../../common/point-nd/util.js';\nimport { parsePointDimensionParams } from '../../common/point-nd/util.js';\nimport { createDimensionConstraint } from '../../common/point-nd/util.js';\nimport { deepMerge, isEmpty } from '../../misc/type-util.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { PointNdConstraint } from '../common/constraint/point-nd.js';\nimport { Point2dController } from './controller/point-2d.js';\nimport { point2dFromUnknown, writePoint2d } from './converter/point-2d.js';\nimport { Point2d, Point2dAssembly } from './model/point-2d.js';\nfunction createConstraint(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point2dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n        ],\n    });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n    var _a, _b;\n    if (!isEmpty(params.min) || !isEmpty(params.max)) {\n        return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n    }\n    const step = getSuitableKeyScale(params);\n    return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nexport function getSuitableMax(params, initialValue) {\n    var _a, _b;\n    const xr = getSuitableMaxDimensionValue(deepMerge(params, ((_a = params.x) !== null && _a !== void 0 ? _a : {})), initialValue.x);\n    const yr = getSuitableMaxDimensionValue(deepMerge(params, ((_b = params.y) !== null && _b !== void 0 ? _b : {})), initialValue.y);\n    return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n    if (!('y' in params)) {\n        return false;\n    }\n    const yParams = params.y;\n    if (!yParams) {\n        return false;\n    }\n    return 'inverted' in yParams ? !!yParams.inverted : false;\n}\n/**\n * @hidden\n */\nexport const Point2dInputPlugin = createPlugin({\n    id: 'input-point2d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point2d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { expanded: p.optional.boolean, picker: p.optional.custom(parsePickerLayout), readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), { inverted: p.optional.boolean })) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: () => point2dFromUnknown,\n        constraint: (args) => createConstraint(args.params, args.initialValue),\n        equals: Point2d.equals,\n        writer: () => writePoint2d,\n    },\n    controller: (args) => {\n        var _a, _b;\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y];\n        return new Point2dController(doc, {\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            invertsY: shouldInvertY(args.params),\n            max: getSuitableMax(args.params, value.rawValue),\n            parser: parseNumber,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { isEmpty } from '../../../misc/type-util.js';\nexport class Point3d {\n    constructor(x = 0, y = 0, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n        };\n    }\n}\nexport const Point3dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point3d(...comps),\n};\n","import { Point3d } from '../model/point-3d.js';\nexport function point3dFromUnknown(value) {\n    return Point3d.isObject(value)\n        ? new Point3d(value.x, value.y, value.z)\n        : new Point3d();\n}\nexport function writePoint3d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n}\n","import { parseNumber } from '../../common/converter/number.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { createPointAxis } from '../../common/point-nd/point-axis.js';\nimport { createDimensionConstraint, createPointDimensionParser, parsePointDimensionParams, } from '../../common/point-nd/util.js';\nimport { deepMerge } from '../../misc/type-util.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { PointNdConstraint } from '../common/constraint/point-nd.js';\nimport { PointNdTextController } from '../common/controller/point-nd-text.js';\nimport { point3dFromUnknown, writePoint3d } from './converter/point-3d.js';\nimport { Point3d, Point3dAssembly } from './model/point-3d.js';\nfunction createConstraint(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point3dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n        ],\n    });\n}\n/**\n * @hidden\n */\nexport const Point3dInputPlugin = createPlugin({\n    id: 'input-point3d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point3d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point3dFromUnknown,\n        constraint: (args) => createConstraint(args.params, args.initialValue),\n        equals: Point3d.equals,\n        writer: (_args) => writePoint3d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y, args.params.z];\n        return new PointNdTextController(args.document, {\n            assembly: Point3dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { isEmpty } from '../../../misc/type-util.js';\nexport class Point4d {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        const w = obj.w;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number' ||\n            typeof w !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n            w: this.w,\n        };\n    }\n}\nexport const Point4dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point4d(...comps),\n};\n","import { Point4d } from '../model/point-4d.js';\nexport function point4dFromUnknown(value) {\n    return Point4d.isObject(value)\n        ? new Point4d(value.x, value.y, value.z, value.w)\n        : new Point4d();\n}\nexport function writePoint4d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n    target.writeProperty('w', value.w);\n}\n","import { parseNumber } from '../../common/converter/number.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { createPointAxis } from '../../common/point-nd/point-axis.js';\nimport { createDimensionConstraint, createPointDimensionParser, parsePointDimensionParams, } from '../../common/point-nd/util.js';\nimport { deepMerge } from '../../misc/type-util.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { PointNdConstraint } from '../common/constraint/point-nd.js';\nimport { PointNdTextController } from '../common/controller/point-nd-text.js';\nimport { point4dFromUnknown, writePoint4d } from './converter/point-4d.js';\nimport { Point4d, Point4dAssembly } from './model/point-4d.js';\nfunction createConstraint(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point4dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w),\n        ],\n    });\n}\n/**\n * @hidden\n */\nexport const Point4dInputPlugin = createPlugin({\n    id: 'input-point4d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point4d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), w: p.optional.custom(parsePointDimensionParams), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point4dFromUnknown,\n        constraint: (args) => createConstraint(args.params, args.initialValue),\n        equals: Point4d.equals,\n        writer: (_args) => writePoint4d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [\n            args.params.x,\n            args.params.y,\n            args.params.z,\n            args.params.w,\n        ];\n        return new PointNdTextController(args.document, {\n            assembly: Point4dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { ListInputBindingApi } from '../../common/api/list.js';\nimport { CompositeConstraint, findConstraint, } from '../../common/constraint/composite.js';\nimport { ListConstraint } from '../../common/constraint/list.js';\nimport { ListController } from '../../common/controller/list.js';\nimport { TextController } from '../../common/controller/text.js';\nimport { formatString, stringFromUnknown, } from '../../common/converter/string.js';\nimport { createListConstraint, parseListOptions, } from '../../common/list-util.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { writePrimitive } from '../../common/primitive.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\n/**\n * @hidden\n */\nexport const StringInputPlugin = createPlugin({\n    id: 'input-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.optional.constant(false),\n            options: p.optional.custom(parseListOptions),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new TextController(doc, {\n            parser: (v) => v,\n            props: ValueMap.fromObject({\n                formatter: formatString,\n            }),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'string') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n","export const Constants = {\n    monitor: {\n        defaultInterval: 200,\n        defaultRows: 3,\n    },\n};\n","import { ClassName } from '../../../common/view/class-name.js';\nimport { getCssVar } from '../../../common/view/css-vars.js';\nconst cn = ClassName('mll');\n/**\n * @hidden\n */\nexport class MultiLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const textareaElem = doc.createElement('textarea');\n        textareaElem.classList.add(cn('i'));\n        textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        textareaElem.readOnly = true;\n        config.viewProps.bindDisabled(textareaElem);\n        this.element.appendChild(textareaElem);\n        this.textareaElem_ = textareaElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const elem = this.textareaElem_;\n        const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n        const lines = [];\n        this.value.rawValue.forEach((value) => {\n            if (value !== undefined) {\n                lines.push(this.formatter_(value));\n            }\n        });\n        elem.textContent = lines.join('\\n');\n        if (shouldScroll) {\n            elem.scrollTop = elem.scrollHeight;\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n","import { MultiLogView } from '../view/multi-log.js';\n/**\n * @hidden\n */\nexport class MultiLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new MultiLogView(doc, {\n            formatter: config.formatter,\n            rows: config.rows,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n","import { ClassName } from '../../../common/view/class-name.js';\nconst cn = ClassName('sgl');\n/**\n * @hidden\n */\nexport class SingleLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn('i'));\n        inputElem.readOnly = true;\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const values = this.value.rawValue;\n        const lastValue = values[values.length - 1];\n        this.inputElement.value =\n            lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n","import { SingleLogView } from '../view/single-log.js';\n/**\n * @hidden\n */\nexport class SingleLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SingleLogView(doc, {\n            formatter: config.formatter,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n","import { BooleanFormatter, boolFromUnknown, } from '../../common/converter/boolean.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { Constants } from '../../misc/constants.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { MultiLogController } from '../common/controller/multi-log.js';\nimport { SingleLogController } from '../common/controller/single-log.js';\n/**\n * @hidden\n */\nexport const BooleanMonitorPlugin = createPlugin({\n    id: 'monitor-bool',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: BooleanFormatter,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { BindingApi } from '../../../blade/binding/api/binding.js';\nexport class GraphLogMonitorBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n}\n","import { forceReflow, SVG_NS } from '../../../common/dom-util.js';\nimport { mapRange } from '../../../common/number/util.js';\nimport { ClassName } from '../../../common/view/class-name.js';\nimport { getCssVar } from '../../../common/view/css-vars.js';\nconst cn = ClassName('grl');\n/**\n * @hidden\n */\nexport class GraphLogView {\n    constructor(doc, config) {\n        this.onCursorChange_ = this.onCursorChange_.bind(this);\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        this.formatter_ = config.formatter;\n        this.props_ = config.props;\n        this.cursor_ = config.cursor;\n        this.cursor_.emitter.on('change', this.onCursorChange_);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn('g'));\n        svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(cn('t'), ClassName('tt')());\n        this.element.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    get graphElement() {\n        return this.svgElem_;\n    }\n    update_() {\n        const { clientWidth: w, clientHeight: h } = this.element;\n        // Graph\n        const maxIndex = this.value.rawValue.length - 1;\n        const min = this.props_.get('min');\n        const max = this.props_.get('max');\n        const points = [];\n        this.value.rawValue.forEach((v, index) => {\n            if (v === undefined) {\n                return;\n            }\n            const x = mapRange(index, 0, maxIndex, 0, w);\n            const y = mapRange(v, min, max, h, 0);\n            points.push([x, y].join(','));\n        });\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        // Cursor\n        const tooltipElem = this.tooltipElem_;\n        const value = this.value.rawValue[this.cursor_.rawValue];\n        if (value === undefined) {\n            tooltipElem.classList.remove(cn('t', 'a'));\n            return;\n        }\n        const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, w);\n        const ty = mapRange(value, min, max, h, 0);\n        tooltipElem.style.left = `${tx}px`;\n        tooltipElem.style.top = `${ty}px`;\n        tooltipElem.textContent = `${this.formatter_(value)}`;\n        if (!tooltipElem.classList.contains(cn('t', 'a'))) {\n            // Suppresses unwanted initial transition\n            tooltipElem.classList.add(cn('t', 'a'), cn('t', 'in'));\n            forceReflow(tooltipElem);\n            tooltipElem.classList.remove(cn('t', 'in'));\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n    onCursorChange_() {\n        this.update_();\n    }\n}\n","import { exportBladeState, importBladeState, } from '../../../blade/common/controller/blade-state.js';\nimport { supportsTouch } from '../../../common/dom-util.js';\nimport { createValue } from '../../../common/model/values.js';\nimport { mapRange } from '../../../common/number/util.js';\nimport { PointerHandler, } from '../../../common/view/pointer-handler.js';\nimport { GraphLogView } from '../view/graph-log.js';\n/**\n * @hidden\n */\nexport class GraphLogController {\n    constructor(doc, config) {\n        this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n        this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n        this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n        this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n        this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.cursor_ = createValue(-1);\n        this.view = new GraphLogView(doc, {\n            cursor: this.cursor_,\n            formatter: config.formatter,\n            rows: config.rows,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        if (!supportsTouch(doc)) {\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n        }\n        else {\n            const ph = new PointerHandler(this.view.element);\n            ph.emitter.on('down', this.onGraphPointerDown_);\n            ph.emitter.on('move', this.onGraphPointerMove_);\n            ph.emitter.on('up', this.onGraphPointerUp_);\n        }\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            this.props.set('max', result.max);\n            this.props.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            max: this.props.get('max'),\n            min: this.props.get('min'),\n        });\n    }\n    onGraphMouseLeave_() {\n        this.cursor_.rawValue = -1;\n    }\n    onGraphMouseMove_(ev) {\n        const { clientWidth: w } = this.view.element;\n        this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, w, 0, this.value.rawValue.length));\n    }\n    onGraphPointerDown_(ev) {\n        this.onGraphPointerMove_(ev);\n    }\n    onGraphPointerMove_(ev) {\n        if (!ev.data.point) {\n            this.cursor_.rawValue = -1;\n            return;\n        }\n        this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerUp_() {\n        this.cursor_.rawValue = -1;\n    }\n}\n","import { createNumberFormatter, numberFromUnknown, } from '../../common/converter/number.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { ValueMap } from '../../common/model/value-map.js';\nimport { Constants } from '../../misc/constants.js';\nimport { isEmpty } from '../../misc/type-util.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { MultiLogController } from '../common/controller/multi-log.js';\nimport { SingleLogController } from '../common/controller/single-log.js';\nimport { GraphLogMonitorBindingApi } from './api/graph-log.js';\nimport { GraphLogController } from './controller/graph-log.js';\nfunction createFormatter(params) {\n    return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n        return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    return new MultiLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction createGraphMonitor(args) {\n    var _a, _b, _c;\n    return new GraphLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        props: ValueMap.fromObject({\n            max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n            min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n        }),\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction shouldShowGraph(params) {\n    return params.view === 'graph';\n}\n/**\n * @hidden\n */\nexport const NumberMonitorPlugin = createPlugin({\n    id: 'monitor-number',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            format: p.optional.function,\n            max: p.optional.number,\n            min: p.optional.number,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n            view: p.optional.string,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n        reader: (_args) => numberFromUnknown,\n    },\n    controller: (args) => {\n        if (shouldShowGraph(args.params)) {\n            return createGraphMonitor(args);\n        }\n        return createTextMonitor(args);\n    },\n    api: (args) => {\n        if (args.controller.valueController instanceof GraphLogController) {\n            return new GraphLogMonitorBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n","import { formatString, stringFromUnknown, } from '../../common/converter/string.js';\nimport { parseRecord } from '../../common/micro-parsers.js';\nimport { Constants } from '../../misc/constants.js';\nimport { createPlugin } from '../../plugin/plugin.js';\nimport { MultiLogController } from '../common/controller/multi-log.js';\nimport { SingleLogController } from '../common/controller/single-log.js';\n/**\n * @hidden\n */\nexport const StringMonitorPlugin = createPlugin({\n    id: 'monitor-string',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            multiline: p.optional.boolean,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        const value = args.value;\n        const multiline = value.rawValue.length > 1 || args.params.multiline;\n        if (multiline) {\n            return new MultiLogController(args.document, {\n                formatter: formatString,\n                rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new SingleLogController(args.document, {\n            formatter: formatString,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n","import { getWindowDocument, isRgbaColorObject, isRgbColorObject } from '@tweakpane/core'\n// Standard Tweakpane themes from https://tweakpane.github.io/docs/theming/#builder Must be kept in\n// sync with TP...\nconst standard = {\n\tbaseBackgroundColor: 'hsl(230, 7%, 17%)',\n\tbaseBorderRadius: '6px',\n\tbaseFontFamily: 'Roboto Mono, Source Code Pro, Menlo, Courier, monospace',\n\tbaseShadowColor: 'rgba(0, 0, 0, 0.2)',\n\tbladeBorderRadius: '2px',\n\tbladeHorizontalPadding: '4px',\n\tbladeValueWidth: '160px',\n\tbuttonBackgroundColor: 'hsl(230, 7%, 70%)',\n\tbuttonBackgroundColorActive: '#d6d7db',\n\tbuttonBackgroundColorFocus: '#c8cad0',\n\tbuttonBackgroundColorHover: '#bbbcc4',\n\tbuttonForegroundColor: 'hsl(230, 7%, 17%)',\n\tcontainerBackgroundColor: 'rgba(187, 188, 196, 0.1)',\n\tcontainerBackgroundColorActive: 'rgba(187, 188, 196, 0.25)',\n\tcontainerBackgroundColorFocus: 'rgba(187, 188, 196, 0.2)',\n\tcontainerBackgroundColorHover: 'rgba(187, 188, 196, 0.15)',\n\tcontainerForegroundColor: 'hsl(230, 7%, 75%)',\n\tcontainerHorizontalPadding: '4px',\n\tcontainerUnitSize: '20px',\n\tcontainerUnitSpacing: '4px',\n\tcontainerVerticalPadding: '4px',\n\tgrooveForegroundColor: 'rgba(187, 188, 196, 0.1)',\n\tinputBackgroundColor: 'rgba(187, 188, 196, 0.1)',\n\tinputBackgroundColorActive: 'rgba(187, 188, 196, 0.25)',\n\tinputBackgroundColorFocus: 'rgba(187, 188, 196, 0.2)',\n\tinputBackgroundColorHover: 'rgba(187, 188, 196, 0.15)',\n\tinputForegroundColor: 'hsl(230, 7%, 75%)',\n\tlabelForegroundColor: 'rgba(187, 188, 196, 0.7)',\n\tmonitorBackgroundColor: 'rgba(0, 0, 0, 0.2)',\n\tmonitorForegroundColor: 'rgba(187, 188, 196, 0.7)',\n\tpluginImageDraggingColor: 'hsla(230, 100%, 66%, 1)',\n\t// PluginThumbnailListHeight: '400px', pluginThumbnailListThumbSize: '20px',\n\t// pluginThumbnailListWidth: '200px'\n}\n// eslint-disable-next-line unicorn/no-array-reduce\nexport const keys = Object.keys(standard).reduce((acc, key) => {\n\tacc[key] = key\n\treturn acc\n}, {})\nconst light = {\n\tbaseBackgroundColor: 'hsla(230, 5%, 90%, 1.00)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.10)',\n\tbuttonBackgroundColor: 'hsla(230, 7%, 75%, 1.00)',\n\tbuttonBackgroundColorActive: 'hsla(230, 7%, 60%, 1.00)',\n\tbuttonBackgroundColorFocus: 'hsla(230, 7%, 65%, 1.00)',\n\tbuttonBackgroundColorHover: 'hsla(230, 7%, 70%, 1.00)',\n\tbuttonForegroundColor: 'hsla(230, 10%, 30%, 1.00)',\n\tcontainerBackgroundColor: 'hsla(230, 15%, 30%, 0.20)',\n\tcontainerBackgroundColorActive: 'hsla(230, 15%, 30%, 0.32)',\n\tcontainerBackgroundColorFocus: 'hsla(230, 15%, 30%, 0.28)',\n\tcontainerBackgroundColorHover: 'hsla(230, 15%, 30%, 0.24)',\n\tcontainerForegroundColor: 'hsla(230, 10%, 30%, 1.00)',\n\tgrooveForegroundColor: 'hsla(230, 15%, 30%, 0.10)',\n\tinputBackgroundColor: 'hsla(230, 15%, 30%, 0.10)',\n\tinputBackgroundColorActive: 'hsla(230, 15%, 30%, 0.22)',\n\tinputBackgroundColorFocus: 'hsla(230, 15%, 30%, 0.18)',\n\tinputBackgroundColorHover: 'hsla(230, 15%, 30%, 0.14)',\n\tinputForegroundColor: 'hsla(230, 10%, 30%, 1.00)',\n\tlabelForegroundColor: 'hsla(230, 10%, 30%, 0.70)',\n\tmonitorBackgroundColor: 'hsla(230, 15%, 30%, 0.10)',\n\tmonitorForegroundColor: 'hsla(230, 10%, 30%, 0.50)',\n}\nconst iceberg = {\n\tbaseBackgroundColor: 'hsla(230, 20%, 11%, 1.00)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.20)',\n\tbuttonBackgroundColor: 'hsla(230, 10%, 80%, 1.00)',\n\tbuttonBackgroundColorActive: 'hsla(230, 10%, 95%, 1.00)',\n\tbuttonBackgroundColorFocus: 'hsla(230, 10%, 90%, 1.00)',\n\tbuttonBackgroundColorHover: 'hsla(230, 10%, 85%, 1.00)',\n\tbuttonForegroundColor: 'hsla(230, 20%, 11%, 1.00)',\n\tcontainerBackgroundColor: 'hsla(230, 25%, 16%, 1.00)',\n\tcontainerBackgroundColorActive: 'hsla(230, 25%, 31%, 1.00)',\n\tcontainerBackgroundColorFocus: 'hsla(230, 25%, 26%, 1.00)',\n\tcontainerBackgroundColorHover: 'hsla(230, 25%, 21%, 1.00)',\n\tcontainerForegroundColor: 'hsla(230, 10%, 80%, 1.00)',\n\tgrooveForegroundColor: 'hsla(230, 20%, 8%, 1.00)',\n\tinputBackgroundColor: 'hsla(230, 20%, 8%, 1.00)',\n\tinputBackgroundColorActive: 'hsla(230, 28%, 23%, 1.00)',\n\tinputBackgroundColorFocus: 'hsla(230, 28%, 18%, 1.00)',\n\tinputBackgroundColorHover: 'hsla(230, 20%, 13%, 1.00)',\n\tinputForegroundColor: 'hsla(230, 10%, 80%, 1.00)',\n\tlabelForegroundColor: 'hsla(230, 12%, 48%, 1.00)',\n\tmonitorBackgroundColor: 'hsla(230, 20%, 8%, 1.00)',\n\tmonitorForegroundColor: 'hsla(230, 12%, 48%, 1.00)',\n}\nconst jetblack = {\n\tbaseBackgroundColor: 'hsla(0, 0%, 0%, 1.00)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.2)',\n\tbuttonBackgroundColor: 'hsla(0, 0%, 70%, 1.00)',\n\tbuttonBackgroundColorActive: 'hsla(0, 0%, 85%, 1.00)',\n\tbuttonBackgroundColorFocus: 'hsla(0, 0%, 80%, 1.00)',\n\tbuttonBackgroundColorHover: 'hsla(0, 0%, 75%, 1.00)',\n\tbuttonForegroundColor: 'hsla(0, 0%, 0%, 1.00)',\n\tcontainerBackgroundColor: 'hsla(0, 0%, 10%, 1.00)',\n\tcontainerBackgroundColorActive: 'hsla(0, 0%, 25%, 1.00)',\n\tcontainerBackgroundColorFocus: 'hsla(0, 0%, 20%, 1.00)',\n\tcontainerBackgroundColorHover: 'hsla(0, 0%, 15%, 1.00)',\n\tcontainerForegroundColor: 'hsla(0, 0%, 50%, 1.00)',\n\tgrooveForegroundColor: 'hsla(0, 0%, 10%, 1.00)',\n\tinputBackgroundColor: 'hsla(0, 0%, 10%, 1.00)',\n\tinputBackgroundColorActive: 'hsla(0, 0%, 25%, 1.00)',\n\tinputBackgroundColorFocus: 'hsla(0, 0%, 20%, 1.00)',\n\tinputBackgroundColorHover: 'hsla(0, 0%, 15%, 1.00)',\n\tinputForegroundColor: 'hsla(0, 0%, 70%, 1.00)',\n\tlabelForegroundColor: 'hsla(0, 0%, 50%, 1.00)',\n\tmonitorBackgroundColor: 'hsla(0, 0%, 8%, 1.00)',\n\tmonitorForegroundColor: 'hsla(0, 0%, 48%, 1.00)',\n}\nconst retro = {\n\tbaseBackgroundColor: 'hsla(40, 3%, 90%, 1.00)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.30)',\n\tbuttonBackgroundColor: 'hsla(40, 3%, 70%, 1.00)',\n\tbuttonBackgroundColorActive: 'hsla(40, 3%, 55%, 1.00)',\n\tbuttonBackgroundColorFocus: 'hsla(40, 3%, 60%, 1.00)',\n\tbuttonBackgroundColorHover: 'hsla(40, 3%, 65%, 1.00)',\n\tbuttonForegroundColor: 'hsla(40, 3%, 20%, 1.00)',\n\tcontainerBackgroundColor: 'hsla(40, 3%, 70%, 1.00)',\n\tcontainerBackgroundColorActive: 'hsla(40, 3%, 55%, 1.00)',\n\tcontainerBackgroundColorFocus: 'hsla(40, 3%, 60%, 1.00)',\n\tcontainerBackgroundColorHover: 'hsla(40, 3%, 65%, 1.00)',\n\tcontainerForegroundColor: 'hsla(40, 3%, 20%, 1.00)',\n\tgrooveForegroundColor: 'hsla(40, 3%, 40%, 1.00)',\n\tinputBackgroundColor: 'hsla(120, 3%, 20%, 1.00)',\n\tinputBackgroundColorActive: 'hsla(120, 3%, 35%, 1.00)',\n\tinputBackgroundColorFocus: 'hsla(120, 3%, 30%, 1.00)',\n\tinputBackgroundColorHover: 'hsla(120, 3%, 25%, 1.00)',\n\tinputForegroundColor: 'hsla(120, 40%, 60%, 1.00)',\n\tlabelForegroundColor: 'hsla(40, 3%, 50%, 1.00)',\n\tmonitorBackgroundColor: 'hsla(120, 3%, 20%, 1.00)',\n\tmonitorForegroundColor: 'hsla(120, 40%, 60%, 0.80)',\n}\nconst translucent = {\n\tbaseBackgroundColor: 'hsla(0, 0%, 10%, 0.80)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.20)',\n\tbuttonBackgroundColor: 'hsla(0, 0%, 80%, 1.00)',\n\tbuttonBackgroundColorActive: 'hsla(0, 0%, 100%, 1.00)',\n\tbuttonBackgroundColorFocus: 'hsla(0, 0%, 95%, 1.00)',\n\tbuttonBackgroundColorHover: 'hsla(0, 0%, 85%, 1.00)',\n\tbuttonForegroundColor: 'hsla(0, 0%, 0%, 0.80)',\n\tcontainerBackgroundColor: 'hsla(0, 0%, 0%, 0.30)',\n\tcontainerBackgroundColorActive: 'hsla(0, 0%, 0%, 0.60)',\n\tcontainerBackgroundColorFocus: 'hsla(0, 0%, 0%, 0.50)',\n\tcontainerBackgroundColorHover: 'hsla(0, 0%, 0%, 0.40)',\n\tcontainerForegroundColor: 'hsla(0, 0%, 100%, 0.50)',\n\tgrooveForegroundColor: 'hsla(0, 0%, 0%, 0.20)',\n\tinputBackgroundColor: 'hsla(0, 0%, 0%, 0.30)',\n\tinputBackgroundColorActive: 'hsla(0, 0%, 0%, 0.60)',\n\tinputBackgroundColorFocus: 'hsla(0, 0%, 0%, 0.50)',\n\tinputBackgroundColorHover: 'hsla(0, 0%, 0%, 0.40)',\n\tinputForegroundColor: 'hsla(0, 0%, 100%, 0.50)',\n\tlabelForegroundColor: 'hsla(0, 0%, 100%, 0.50)',\n\tmonitorBackgroundColor: 'hsla(0, 0%, 0%, 0.30)',\n\tmonitorForegroundColor: 'hsla(0, 0%, 100%, 0.30)',\n}\nconst vivid = {\n\tbaseBackgroundColor: 'hsla(0, 80%, 40%, 1)',\n\tbaseShadowColor: 'hsla(0, 0%, 0%, 0.2)',\n\tbuttonBackgroundColor: 'hsla(0, 0%, 100%, 1)',\n\tbuttonBackgroundColorActive: 'hsla(0, 0%, 85%, 1)',\n\tbuttonBackgroundColorFocus: 'hsla(0, 0%, 90%, 1)',\n\tbuttonBackgroundColorHover: 'hsla(0, 0%, 95%, 1)',\n\tbuttonForegroundColor: 'hsla(230, 20%, 11%, 1)',\n\tcontainerBackgroundColor: 'hsla(0, 0%, 0%, 0.2)',\n\tcontainerBackgroundColorActive: 'hsla(0, 0%, 0%, 0.35)',\n\tcontainerBackgroundColorFocus: 'hsla(0, 0%, 0%, 0.3)',\n\tcontainerBackgroundColorHover: 'hsla(0, 0%, 0%, 0.25)',\n\tcontainerForegroundColor: 'hsla(0, 0%, 100%, 0.9)',\n\tgrooveForegroundColor: 'hsla(0, 0%, 0%, 0.5)',\n\tinputBackgroundColor: 'hsla(0, 0%, 0%, 0.5)',\n\tinputBackgroundColorActive: 'hsla(0, 0%, 0%, 0.65)',\n\tinputBackgroundColorFocus: 'hsla(0, 0%, 0%, 0.60)',\n\tinputBackgroundColorHover: 'hsla(0, 0%, 0%, 0.55)',\n\tinputForegroundColor: 'hsla(0, 0%, 100%, 0.9)',\n\tlabelForegroundColor: 'hsla(0, 0%, 100%, 0.9)',\n\tmonitorBackgroundColor: 'hsla(0, 0%, 0%, 0.5)',\n\tmonitorForegroundColor: 'hsla(0, 0%, 100%, 0.5)',\n}\nexport const presets = {\n\t/** Dark blue theme. */\n\ticeberg,\n\t/** Extra dark theme. */\n\tjetblack,\n\t/** Standard Tweakpane light theme. */\n\tlight,\n\t/** Light theme with CRT vibes. */\n\tretro,\n\t/** Standard Tweakpane dark theme. This is the default theme. */\n\tstandard,\n\t/** Dark translucent theme. */\n\ttranslucent,\n\t/** Red theme. */\n\tvivid,\n}\n// More humane theme names... Note that the shorthand variables don't work\nconst keyToCssVariableMap = new Map([\n\t// Tweakpane\n\t['baseBackgroundColor', '--tp-base-background-color'],\n\t['baseBorderRadius', '--tp-base-border-radius'],\n\t['baseFontFamily', '--tp-base-font-family'],\n\t['baseShadowColor', '--tp-base-shadow-color'],\n\t['bladeBorderRadius', '--tp-blade-border-radius'],\n\t['bladeHorizontalPadding', '--tp-blade-horizontal-padding'],\n\t['bladeValueWidth', '--tp-blade-value-width'],\n\t['buttonBackgroundColor', '--tp-button-background-color'],\n\t['buttonBackgroundColorActive', '--tp-button-background-color-active'],\n\t['buttonBackgroundColorFocus', '--tp-button-background-color-focus'],\n\t['buttonBackgroundColorHover', '--tp-button-background-color-hover'],\n\t['buttonForegroundColor', '--tp-button-foreground-color'],\n\t['containerBackgroundColor', '--tp-container-background-color'],\n\t['containerBackgroundColorActive', '--tp-container-background-color-active'],\n\t['containerBackgroundColorFocus', '--tp-container-background-color-focus'],\n\t['containerBackgroundColorHover', '--tp-container-background-color-hover'],\n\t['containerForegroundColor', '--tp-container-foreground-color'],\n\t['containerHorizontalPadding', '--tp-container-horizontal-padding'],\n\t['containerUnitSize', '--tp-container-unit-size'],\n\t['containerUnitSpacing', '--tp-container-unit-spacing'],\n\t['containerVerticalPadding', '--tp-container-vertical-padding'],\n\t['grooveForegroundColor', '--tp-groove-foreground-color'],\n\t['inputBackgroundColor', '--tp-input-background-color'],\n\t['inputBackgroundColorActive', '--tp-input-background-color-active'],\n\t['inputBackgroundColorFocus', '--tp-input-background-color-focus'],\n\t['inputBackgroundColorHover', '--tp-input-background-color-hover'],\n\t['inputForegroundColor', '--tp-input-foreground-color'],\n\t['labelForegroundColor', '--tp-label-foreground-color'],\n\t['monitorBackgroundColor', '--tp-monitor-background-color'],\n\t['monitorForegroundColor', '--tp-monitor-foreground-color'],\n\t// Plugins\n\t['pluginImageDraggingColor', '--tp-plugin-image-dragging-color'],\n\t// ['pluginThumbnailListHeight', '--tp-plugin-thumbnail-list-height'],\n\t// ['pluginThumbnailListThumbSize', '--tp-plugin-thumbnail-list-thumb-size'],\n\t// ['pluginThumbnailListWidth', '--tp-plugin-thumbnail-list-width']\n])\n// Just do it dynamically instead of the map? function transformToCustomProperty(str: string):\n// string { return '--tp-' + str.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase();\n// }\nfunction stringToCssValue(v) {\n\tif (v === undefined) {\n\t\treturn undefined\n\t}\n\tif (typeof v === 'string') {\n\t\treturn v\n\t}\n\tif (isRgbaColorObject(v)) {\n\t\treturn `rgba(${v.r}, ${v.g}, ${v.b}, ${v.a})`\n\t}\n\tif (isRgbColorObject(v)) {\n\t\treturn `rgb(${v.r}, ${v.g}, ${v.b})`\n\t}\n}\nfunction expandVariableKey(name) {\n\t// Pass explicit variables through\n\tif (name.startsWith('--tp-')) {\n\t\treturn name\n\t}\n\tconst variableName = keyToCssVariableMap.get(name)\n\tif (variableName) {\n\t\treturn variableName\n\t}\n\tthrow new Error(`Unknown Tweakpane CSS theme map variable key: \"${name}\"`)\n}\n/**\n * Used during SSR to calculate metrics Returns CSS string.\n */\nexport function getValueOrFallback(theme, key) {\n\treturn theme?.[key] === undefined ? stringToCssValue(standard[key]) : stringToCssValue(theme[key])\n}\nexport function applyTheme(element, theme) {\n\tconst rootDocument = getWindowDocument().documentElement\n\tif (theme === undefined) {\n\t\tfor (const k of Object.keys(standard)) {\n\t\t\tconst key = expandVariableKey(k)\n\t\t\tif (element.style.getPropertyValue(key).length > 0) {\n\t\t\t\telement.style.removeProperty(key)\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (const [k, v] of Object.entries(theme)) {\n\t\t\tconst key = expandVariableKey(k)\n\t\t\tconst value = stringToCssValue(v)\n\t\t\t// Only set the variable if it deviates from the standard theme or  the root theme (set\n\t\t\t// by setGlobalDefaultTheme).... but if theme is explicitly standard and not undefined,\n\t\t\t// then apply it anyway so that any global theme is overridden TODO normalize color\n\t\t\t// representation for comparison? TODO tests for this logic\n\t\t\tconst standardValue = standard[k] || undefined\n\t\t\tconst rootValue = rootDocument.style.getPropertyValue(key) || undefined\n\t\t\tconst isDeviationFromRoot = (rootValue && value !== rootValue) ?? false\n\t\t\tconst isDeviationFromStandard = (standardValue && value !== standardValue) ?? false\n\t\t\tif (value !== undefined && (isDeviationFromRoot || (!rootValue && isDeviationFromStandard))) {\n\t\t\t\telement.style.setProperty(key, value)\n\t\t\t} else if (element.style.getPropertyValue(key).length > 0) {\n\t\t\t\telement.style.removeProperty(key)\n\t\t\t}\n\t\t}\n\t}\n}\n/**\n * Sets a default theme for all Tweakpane components on the page. Useful if you have a light / dark\n * mode toggle.\n */\nexport function setGlobalDefaultTheme(theme) {\n\t// Wait for dom ready... better outside?\n\t// eslint-disable-next-line unicorn/prefer-global-this, ts/no-unnecessary-condition\n\tif (window?.document) {\n\t\tapplyTheme(getWindowDocument().documentElement, theme)\n\t}\n}\n// Library exports\nexport default {\n\t/**\n\t * A collection of default theme color schemes, matching those provided in the Tweakpane\n\t * [Panebuilder presets](https://tweakpane.github.io/docs/theming/#builder).\n\t */\n\tpresets,\n\tsetGlobalDefaultTheme,\n}\n","<script>\n\timport { getValueOrFallback } from '../theme.js'\n\timport { DEV } from 'esm-env'\n\texport let theme = void 0\n\texport let keysAdd = []\n\texport let keysSubtract = []\n\texport let extra = void 0\n\tconst showDebugBlocks = false\n\tfunction getRandomCssColor() {\n\t\treturn '#' + Math.floor(Math.random() * 16777215).toString(16)\n\t}\n\tfunction getPixelValue(s) {\n\t\treturn Number.parseFloat(s.replace('px', ''))\n\t}\n\tfunction getTotal(add, sub, extra2 = 0) {\n\t\treturn (\n\t\t\tadd.reduce((acc, key) => (acc += getPixelValue(getValueOrFallback(theme, key))), 0) -\n\t\t\tsub.reduce((acc, key) => (acc += getPixelValue(getValueOrFallback(theme, key))), 0) +\n\t\t\textra2\n\t\t)\n\t}\n\t$: total = getTotal(keysAdd, keysSubtract, extra)\n</script>\n\n{#if total > 0}\n\t<div\n\t\tstyle:background={DEV && showDebugBlocks ? getRandomCssColor() : null}\n\t\tstyle:height=\"{total}px\"\n\t></div>\n{/if}\n","/* eslint-disable ts/no-unsafe-call */\n/* eslint-disable ts/no-explicit-any */\n/* eslint-disable node/no-unsupported-features/node-builtins */\n/* eslint-disable ts/no-unnecessary-type-parameters */\n/* eslint-disable ts/no-unsafe-member-access */\n/* eslint-disable ts/no-unnecessary-type-arguments */\n// Utility functions\n/**\n * For CLS SSR calculation\n */\nexport function rowsForMonitor(buffer, rows, graph) {\n\tif (graph) {\n\t\treturn Math.max(rows ?? 3, 3)\n\t}\n\tif (buffer === undefined && rows === undefined) {\n\t\treturn 1\n\t}\n\tif (buffer === undefined && rows !== undefined) {\n\t\treturn 1\n\t}\n\tif (buffer !== undefined && rows === undefined) {\n\t\treturn buffer > 1 ? 3 : 1\n\t}\n\tif (buffer === 1) {\n\t\treturn 1\n\t}\n\t// Both defined\n\treturn rows ?? 1 // TODO\n}\n/**\n * Fills an array of length `quantity` with a `value`\n */\nexport function fillWith(value, quantity) {\n\treturn Array.from({ length: quantity }, () => value)\n}\n/**\n * There's no way to enforce readonly properties in Svelte components, so this is a workaround. See\n * [general approach](https://github.com/sveltejs/svelte/issues/7712#issuecomment-1642470141) and\n * [runtime error approach](https://github.com/sveltejs/svelte/issues/7712#issuecomment-1642817764)\n *\n * Generally:\n * ```svelte\n * <script>\n *   export let value = \"foo\"\n *   let _value;\n *   // if you want to set init value from outside\n *   // uncomment this line:\n *   // _value = value;\n *   $: value = _value;\n *   $: enforceReadonly(_value, value, \"value\");\n * </script>\n *\n * <input bind:value={_value} />\n *\n * This is not perfect and there are some edge cases it doesn't catch because we have to\n * allow assignment to undefined in some internal cases (via the `allowAssignmentToUndefined` flag).\n *\n */\nexport function enforceReadonly(\n\tinternal,\n\texternal,\n\tcomponentName,\n\tpropertyName,\n\tallowAssignmentToUndefined,\n) {\n\tallowAssignmentToUndefined ??= false\n\tif (\n\t\t!(\n\t\t\texternal === internal ||\n\t\t\t(allowAssignmentToUndefined && internal === undefined && external !== undefined)\n\t\t)\n\t) {\n\t\tconst componentString = componentName ? `<${componentName}> ` : ''\n\t\tconst propertyString = propertyName ? `property \"${propertyName}\" ` : ''\n\t\tconsole.error(\n\t\t\t`Svelte component \"${componentString}\" property \"${propertyString}\" is intended for readonly use.\\nAssigning\\n\"${String(external)}\"\\nto\\n\"${String(internal)}\"\\nis not allowed.`,\n\t\t)\n\t}\n}\nexport function isRootPane(container) {\n\treturn container.constructor.name === 'Pane'\n}\nexport function clamp(value, min, max) {\n\t// Prioritize min over max\n\treturn Math.min(Math.max(value, min), max)\n}\nexport function getElementIndex(element) {\n\tlet index = 0\n\t// eslint-disable-next-line ts/no-restricted-types\n\tlet sibling = element\n\twhile ((sibling = sibling.previousElementSibling) !== null) {\n\t\t// The Element component can add extra stuff to the DOM which will mess up counting...\n\t\t// So we add an extra class to its wrapper and don't let it increment the index.\n\t\t// This was the cause of https://github.com/kitschpatrol/svelte-tweakpane-ui/issues/18\n\t\tif (!sibling.classList.contains('skip-element-index')) {\n\t\t\tindex++\n\t\t}\n\t}\n\treturn index\n}\n// Doesn't create a new object, only works with string keys\nexport function removeKeys(object, ...keys) {\n\tfor (const key of keys) {\n\t\tif (key in object) {\n\t\t\t// eslint-disable-next-line ts/no-dynamic-delete\n\t\t\tdelete object[key]\n\t\t}\n\t}\n\treturn object\n}\nfunction clickBlocker(event) {\n\t// Only block user clicks, not programmatic ones\n\tif (event.isTrusted) event.stopPropagation()\n}\n// Used by folder and pane TODO rewrite to use getSwatchButton etc.\nexport function updateCollapsibility(isUserExpandableEnabled, element, titleBarClass, iconClass) {\n\tif (element) {\n\t\tconst titleBarElement = element.querySelector(`.${titleBarClass}`)\n\t\tif (titleBarElement) {\n\t\t\tconst iconElement = iconClass ? element.querySelector(`.${iconClass}`) : undefined\n\t\t\tif (isUserExpandableEnabled) {\n\t\t\t\ttitleBarElement.removeEventListener('click', clickBlocker, { capture: true })\n\t\t\t\ttitleBarElement.style.cursor = 'pointer'\n\t\t\t\tif (iconElement) iconElement.style.display = 'block'\n\t\t\t} else {\n\t\t\t\t// Expanded = true;\n\t\t\t\ttitleBarElement.addEventListener('click', clickBlocker, { capture: true })\n\t\t\t\ttitleBarElement.style.cursor = 'default'\n\t\t\t\tif (iconElement) iconElement.style.display = 'none'\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconsole.warn(`Title bar element not found with class \"${titleBarClass}\"`)\n\t}\n}\n/**\n * Infers grid dimensions for a given number of items, respecting optional maximums for rows and\n * columns.\n *\n * If no constraints are provided, it creates the most square grid possible.\n *\n * If a single constraint is provided, it lets the undefined axis grow / shrink as needed.\n *\n * If both constraints are provided, values may be clipped.\n */\nexport function getGridDimensions(itemCount, maxColumns, maxRows) {\n\tlet rows\n\tlet columns\n\tif (maxColumns && maxRows) {\n\t\t// No flexing; items can exceed the available slots\n\t\trows = Math.min(Math.ceil(itemCount / maxColumns), maxRows)\n\t\tcolumns = Math.min(maxColumns, itemCount)\n\t} else if (maxColumns) {\n\t\t// Only maxColumns defined, so rows will flex\n\t\trows = Math.ceil(itemCount / maxColumns)\n\t\tcolumns = maxColumns\n\t} else if (maxRows) {\n\t\t// Only maxRows defined, so columns will flex\n\t\tcolumns = Math.ceil(itemCount / maxRows)\n\t\trows = maxRows\n\t} else {\n\t\t// Neither maxColumns nor maxRows defined; create a square grid\n\t\tcolumns = Math.ceil(Math.sqrt(itemCount))\n\t\trows = Math.ceil(itemCount / columns)\n\t}\n\treturn { columns, rows }\n}\n// eslint-disable-next-line ts/consistent-indexed-object-style\nexport function tupleToObject(tuple, keys) {\n\t// eslint-disable-next-line ts/consistent-type-assertions\n\tconst result = {}\n\tfor (const [index, key] of keys.entries()) {\n\t\t// Assert that the assignment is safe\n\t\tresult[key] = tuple[index]\n\t}\n\treturn result\n}\nexport function objectToTuple(object, keys) {\n\treturn keys.map((key) => object[key])\n}\n// Tweakpane  helpers\nexport function pickerIsOpen(blade) {\n\treturn Boolean(blade.controller.valueController?.foldable_?.valMap_?.expanded?.value_)\n}\nexport function getSwatchButton(blade) {\n\tconst swatch =\n\t\tblade.controller?.valueController?.view?.swatchElement?.querySelector('button') ??\n\t\tblade.controller?.valueController?.view?.buttonElement\n\treturn swatch\n}\n// Utility functions\nfunction quaternionToCssTransform(quaternion) {\n\tconst [x, y, z, w] = Array.isArray(quaternion)\n\t\t? quaternion\n\t\t: [quaternion.x, quaternion.y, quaternion.z, quaternion.w]\n\tconst m11 = 1 - 2 * y * y - 2 * z * z\n\tconst m12 = 2 * x * y - 2 * z * w\n\tconst m13 = 2 * x * z + 2 * y * w\n\tconst m21 = 2 * x * y + 2 * z * w\n\tconst m22 = 1 - 2 * x * x - 2 * z * z\n\tconst m23 = 2 * y * z - 2 * x * w\n\tconst m31 = 2 * x * z - 2 * y * w\n\tconst m32 = 2 * y * z + 2 * x * w\n\tconst m33 = 1 - 2 * x * x - 2 * y * y\n\treturn `matrix3d(\n  \t\t${m11}, ${m12}, ${m13}, 0,\n  \t\t${m21}, ${m22}, ${m23}, 0,\n  \t\t${m31}, ${m32}, ${m33}, 0,\n  \t\t0, 0, 0, 1\n\t\t)`\n}\nfunction eulerToCssTransform(rotation, units = 'rad') {\n\tconst [x, y, z] = Array.isArray(rotation) ? rotation : [rotation.x, rotation.y, rotation.z]\n\t// Note negative z\n\treturn `rotateX(${x}${units}) rotateY(${y}${units}) rotateZ(${-z}${units})`\n}\nfunction cubicBezierToEaseFunction(cubicBezier) {\n\tconst [_x1, y1, _x2, y2] = Array.isArray(cubicBezier)\n\t\t? cubicBezier\n\t\t: [cubicBezier.x1, cubicBezier.y1, cubicBezier.x2, cubicBezier.y2]\n\treturn (t) =>\n\t\t(1 - t) ** 3 * 0 + (1 - t) ** 2 * t * 3 * y1 + (1 - t) * t ** 2 * 3 * y2 + t ** 3 * 1\n}\n// Library exports\nexport default {\n\t/**\n\t * Convenience function for creating easing functions ready for Svelte's tween and animation\n\t * systems\n\t * @param cubicBezier - `CubicBezierValue`, probably from a `<CubicBezier>` component\n\t * @returns Tween function\n\t */\n\tcubicBezierToEaseFunction,\n\t/**\n\t * Convenience function for creating CSS-ready euler rotation transforms\n\t * @param rotation - `RotationEulerValue`, probably from a `<RotationEuler>` component\n\t * @param quaternion\n\t * @returns CSS rotate X/Y/Z string ready to be passed into a CSS transform\n\t */\n\teulerToCssTransform,\n\t/**\n\t * Convenience function for creating CSS-ready quaternion rotation transforms\n\t * @param rotation - RotationQuaternionValue, probably from a <RotationQuaternionValue>\n\t * component\n\t * @returns CSS matrix3d string ready to be passed into a CSS transform\n\t */\n\tquaternionToCssTransform,\n}\n","/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */\nfunction forceCast(v) {\n    return v;\n}\nfunction isEmpty(value) {\n    return value === null || value === undefined;\n}\nfunction isObject$1(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction isRecord(value) {\n    return value !== null && typeof value === 'object';\n}\nfunction deepEqualsArray(a1, a2) {\n    if (a1.length !== a2.length) {\n        return false;\n    }\n    for (let i = 0; i < a1.length; i++) {\n        if (a1[i] !== a2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction deepMerge(r1, r2) {\n    const keys = Array.from(new Set([...Object.keys(r1), ...Object.keys(r2)]));\n    return keys.reduce((result, key) => {\n        const v1 = r1[key];\n        const v2 = r2[key];\n        return isRecord(v1) && isRecord(v2)\n            ? Object.assign(Object.assign({}, result), { [key]: deepMerge(v1, v2) }) : Object.assign(Object.assign({}, result), { [key]: key in r2 ? v2 : v1 });\n    }, {});\n}\n\nfunction isBinding(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'target' in value;\n}\n\nconst CREATE_MESSAGE_MAP = {\n    alreadydisposed: () => 'View has been already disposed',\n    invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n    nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n    nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n    notbindable: () => `Value is not bindable`,\n    notcompatible: (context) => `Not compatible with  plugin '${context.id}'`,\n    propertynotfound: (context) => `Property '${context.name}' not found`,\n    shouldneverhappen: () => 'This error should never happen',\n};\nclass TpError {\n    static alreadyDisposed() {\n        return new TpError({ type: 'alreadydisposed' });\n    }\n    static notBindable() {\n        return new TpError({\n            type: 'notbindable',\n        });\n    }\n    static notCompatible(bundleId, id) {\n        return new TpError({\n            type: 'notcompatible',\n            context: {\n                id: `${bundleId}.${id}`,\n            },\n        });\n    }\n    static propertyNotFound(name) {\n        return new TpError({\n            type: 'propertynotfound',\n            context: {\n                name: name,\n            },\n        });\n    }\n    static shouldNeverHappen() {\n        return new TpError({ type: 'shouldneverhappen' });\n    }\n    constructor(config) {\n        var _a;\n        this.message =\n            (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n        this.name = this.constructor.name;\n        this.stack = new Error(this.message).stack;\n        this.type = config.type;\n    }\n    toString() {\n        return this.message;\n    }\n}\n\nclass BindingTarget {\n    constructor(obj, key) {\n        this.obj_ = obj;\n        this.key = key;\n    }\n    static isBindable(obj) {\n        if (obj === null) {\n            return false;\n        }\n        if (typeof obj !== 'object' && typeof obj !== 'function') {\n            return false;\n        }\n        return true;\n    }\n    read() {\n        return this.obj_[this.key];\n    }\n    write(value) {\n        this.obj_[this.key] = value;\n    }\n    writeProperty(name, value) {\n        const valueObj = this.read();\n        if (!BindingTarget.isBindable(valueObj)) {\n            throw TpError.notBindable();\n        }\n        if (!(name in valueObj)) {\n            throw TpError.propertyNotFound(name);\n        }\n        valueObj[name] = value;\n    }\n}\n\nclass Emitter {\n    constructor() {\n        this.observers_ = {};\n    }\n    on(eventName, handler, opt_options) {\n        var _a;\n        let observers = this.observers_[eventName];\n        if (!observers) {\n            observers = this.observers_[eventName] = [];\n        }\n        observers.push({\n            handler: handler,\n            key: (_a = opt_options === null || opt_options === void 0 ? void 0 : opt_options.key) !== null && _a !== void 0 ? _a : handler,\n        });\n        return this;\n    }\n    off(eventName, key) {\n        const observers = this.observers_[eventName];\n        if (observers) {\n            this.observers_[eventName] = observers.filter((observer) => {\n                return observer.key !== key;\n            });\n        }\n        return this;\n    }\n    emit(eventName, event) {\n        const observers = this.observers_[eventName];\n        if (!observers) {\n            return;\n        }\n        observers.forEach((observer) => {\n            observer.handler(event);\n        });\n    }\n}\n\nclass ComplexValue {\n    constructor(initialValue, config) {\n        var _a;\n        this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n        this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n        this.emitter = new Emitter();\n        this.rawValue_ = initialValue;\n    }\n    get constraint() {\n        return this.constraint_;\n    }\n    get rawValue() {\n        return this.rawValue_;\n    }\n    set rawValue(rawValue) {\n        this.setRawValue(rawValue, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(rawValue, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const constrainedValue = this.constraint_\n            ? this.constraint_.constrain(rawValue)\n            : rawValue;\n        const prevValue = this.rawValue_;\n        const changed = !this.equals_(prevValue, constrainedValue);\n        if (!changed && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.rawValue_ = constrainedValue;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: constrainedValue,\n            sender: this,\n        });\n    }\n}\n\nclass PrimitiveValue {\n    constructor(initialValue) {\n        this.emitter = new Emitter();\n        this.value_ = initialValue;\n    }\n    get rawValue() {\n        return this.value_;\n    }\n    set rawValue(value) {\n        this.setRawValue(value, {\n            forceEmit: false,\n            last: true,\n        });\n    }\n    setRawValue(value, options) {\n        const opts = options !== null && options !== void 0 ? options : {\n            forceEmit: false,\n            last: true,\n        };\n        const prevValue = this.value_;\n        if (prevValue === value && !opts.forceEmit) {\n            return;\n        }\n        this.emitter.emit('beforechange', {\n            sender: this,\n        });\n        this.value_ = value;\n        this.emitter.emit('change', {\n            options: opts,\n            previousRawValue: prevValue,\n            rawValue: this.value_,\n            sender: this,\n        });\n    }\n}\n\nclass ReadonlyPrimitiveValue {\n    constructor(value) {\n        this.emitter = new Emitter();\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\n\nfunction createValue(initialValue, config) {\n    const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n    const equals = config === null || config === void 0 ? void 0 : config.equals;\n    if (!constraint && !equals) {\n        return new PrimitiveValue(initialValue);\n    }\n    return new ComplexValue(initialValue, config);\n}\nfunction createReadonlyValue(value) {\n    return [\n        new ReadonlyPrimitiveValue(value),\n        (rawValue, options) => {\n            value.setRawValue(rawValue, options);\n        },\n    ];\n}\n\nclass ValueMap {\n    constructor(valueMap) {\n        this.emitter = new Emitter();\n        this.valMap_ = valueMap;\n        for (const key in this.valMap_) {\n            const v = this.valMap_[key];\n            v.emitter.on('change', () => {\n                this.emitter.emit('change', {\n                    key: key,\n                    sender: this,\n                });\n            });\n        }\n    }\n    static createCore(initialValue) {\n        const keys = Object.keys(initialValue);\n        return keys.reduce((o, key) => {\n            return Object.assign(o, {\n                [key]: createValue(initialValue[key]),\n            });\n        }, {});\n    }\n    static fromObject(initialValue) {\n        const core = this.createCore(initialValue);\n        return new ValueMap(core);\n    }\n    get(key) {\n        return this.valMap_[key].rawValue;\n    }\n    set(key, value) {\n        this.valMap_[key].rawValue = value;\n    }\n    value(key) {\n        return this.valMap_[key];\n    }\n}\n\nclass DefiniteRangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        return Math.min(Math.max(value, min), max);\n    }\n}\n\nclass RangeConstraint {\n    constructor(config) {\n        this.values = ValueMap.fromObject({\n            max: config.max,\n            min: config.min,\n        });\n    }\n    constrain(value) {\n        const max = this.values.get('max');\n        const min = this.values.get('min');\n        let result = value;\n        if (!isEmpty(min)) {\n            result = Math.max(result, min);\n        }\n        if (!isEmpty(max)) {\n            result = Math.min(result, max);\n        }\n        return result;\n    }\n}\n\nclass StepConstraint {\n    constructor(step, origin = 0) {\n        this.step = step;\n        this.origin = origin;\n    }\n    constrain(value) {\n        const o = this.origin % this.step;\n        const r = Math.round((value - o) / this.step);\n        return o + r * this.step;\n    }\n}\n\nclass NumberLiteralNode {\n    constructor(text) {\n        this.text = text;\n    }\n    evaluate() {\n        return Number(this.text);\n    }\n    toString() {\n        return this.text;\n    }\n}\nconst BINARY_OPERATION_MAP = {\n    '**': (v1, v2) => Math.pow(v1, v2),\n    '*': (v1, v2) => v1 * v2,\n    '/': (v1, v2) => v1 / v2,\n    '%': (v1, v2) => v1 % v2,\n    '+': (v1, v2) => v1 + v2,\n    '-': (v1, v2) => v1 - v2,\n    '<<': (v1, v2) => v1 << v2,\n    '>>': (v1, v2) => v1 >> v2,\n    '>>>': (v1, v2) => v1 >>> v2,\n    '&': (v1, v2) => v1 & v2,\n    '^': (v1, v2) => v1 ^ v2,\n    '|': (v1, v2) => v1 | v2,\n};\nclass BinaryOperationNode {\n    constructor(operator, left, right) {\n        this.left = left;\n        this.operator = operator;\n        this.right = right;\n    }\n    evaluate() {\n        const op = BINARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected binary operator: '${this.operator}`);\n        }\n        return op(this.left.evaluate(), this.right.evaluate());\n    }\n    toString() {\n        return [\n            'b(',\n            this.left.toString(),\n            this.operator,\n            this.right.toString(),\n            ')',\n        ].join(' ');\n    }\n}\nconst UNARY_OPERATION_MAP = {\n    '+': (v) => v,\n    '-': (v) => -v,\n    '~': (v) => ~v,\n};\nclass UnaryOperationNode {\n    constructor(operator, expr) {\n        this.operator = operator;\n        this.expression = expr;\n    }\n    evaluate() {\n        const op = UNARY_OPERATION_MAP[this.operator];\n        if (!op) {\n            throw new Error(`unexpected unary operator: '${this.operator}`);\n        }\n        return op(this.expression.evaluate());\n    }\n    toString() {\n        return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n    }\n}\n\nfunction combineReader(parsers) {\n    return (text, cursor) => {\n        for (let i = 0; i < parsers.length; i++) {\n            const result = parsers[i](text, cursor);\n            if (result !== '') {\n                return result;\n            }\n        }\n        return '';\n    };\n}\nfunction readWhitespace(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^\\s+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readNonZeroDigit(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    return ch.match(/^[1-9]$/) ? ch : '';\n}\nfunction readDecimalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readSignedInteger(text, cursor) {\n    const ds = readDecimalDigits(text, cursor);\n    if (ds !== '') {\n        return ds;\n    }\n    const sign = text.substr(cursor, 1);\n    cursor += 1;\n    if (sign !== '-' && sign !== '+') {\n        return '';\n    }\n    const sds = readDecimalDigits(text, cursor);\n    if (sds === '') {\n        return '';\n    }\n    return sign + sds;\n}\nfunction readExponentPart(text, cursor) {\n    const e = text.substr(cursor, 1);\n    cursor += 1;\n    if (e.toLowerCase() !== 'e') {\n        return '';\n    }\n    const si = readSignedInteger(text, cursor);\n    if (si === '') {\n        return '';\n    }\n    return e + si;\n}\nfunction readDecimalIntegerLiteral(text, cursor) {\n    const ch = text.substr(cursor, 1);\n    if (ch === '0') {\n        return ch;\n    }\n    const nzd = readNonZeroDigit(text, cursor);\n    cursor += nzd.length;\n    if (nzd === '') {\n        return '';\n    }\n    return nzd + readDecimalDigits(text, cursor);\n}\nfunction readDecimalLiteral1(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    return dil + dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral2(text, cursor) {\n    const dot = text.substr(cursor, 1);\n    cursor += dot.length;\n    if (dot !== '.') {\n        return '';\n    }\n    const dds = readDecimalDigits(text, cursor);\n    cursor += dds.length;\n    if (dds === '') {\n        return '';\n    }\n    return dot + dds + readExponentPart(text, cursor);\n}\nfunction readDecimalLiteral3(text, cursor) {\n    const dil = readDecimalIntegerLiteral(text, cursor);\n    cursor += dil.length;\n    if (dil === '') {\n        return '';\n    }\n    return dil + readExponentPart(text, cursor);\n}\nconst readDecimalLiteral = combineReader([\n    readDecimalLiteral1,\n    readDecimalLiteral2,\n    readDecimalLiteral3,\n]);\nfunction parseBinaryDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[01]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readBinaryIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0b') {\n        return '';\n    }\n    const bds = parseBinaryDigits(text, cursor);\n    if (bds === '') {\n        return '';\n    }\n    return prefix + bds;\n}\nfunction readOctalDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-7]+/);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readOctalIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0o') {\n        return '';\n    }\n    const ods = readOctalDigits(text, cursor);\n    if (ods === '') {\n        return '';\n    }\n    return prefix + ods;\n}\nfunction readHexDigits(text, cursor) {\n    var _a;\n    const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n    return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n}\nfunction readHexIntegerLiteral(text, cursor) {\n    const prefix = text.substr(cursor, 2);\n    cursor += prefix.length;\n    if (prefix.toLowerCase() !== '0x') {\n        return '';\n    }\n    const hds = readHexDigits(text, cursor);\n    if (hds === '') {\n        return '';\n    }\n    return prefix + hds;\n}\nconst readNonDecimalIntegerLiteral = combineReader([\n    readBinaryIntegerLiteral,\n    readOctalIntegerLiteral,\n    readHexIntegerLiteral,\n]);\nconst readNumericLiteral = combineReader([\n    readNonDecimalIntegerLiteral,\n    readDecimalLiteral,\n]);\n\nfunction parseLiteral(text, cursor) {\n    const num = readNumericLiteral(text, cursor);\n    cursor += num.length;\n    if (num === '') {\n        return null;\n    }\n    return {\n        evaluable: new NumberLiteralNode(num),\n        cursor: cursor,\n    };\n}\nfunction parseParenthesizedExpression(text, cursor) {\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '(') {\n        return null;\n    }\n    const expr = parseExpression(text, cursor);\n    if (!expr) {\n        return null;\n    }\n    cursor = expr.cursor;\n    cursor += readWhitespace(text, cursor).length;\n    const cl = text.substr(cursor, 1);\n    cursor += cl.length;\n    if (cl !== ')') {\n        return null;\n    }\n    return {\n        evaluable: expr.evaluable,\n        cursor: cursor,\n    };\n}\nfunction parsePrimaryExpression(text, cursor) {\n    var _a;\n    return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n}\nfunction parseUnaryExpression(text, cursor) {\n    const expr = parsePrimaryExpression(text, cursor);\n    if (expr) {\n        return expr;\n    }\n    const op = text.substr(cursor, 1);\n    cursor += op.length;\n    if (op !== '+' && op !== '-' && op !== '~') {\n        return null;\n    }\n    const num = parseUnaryExpression(text, cursor);\n    if (!num) {\n        return null;\n    }\n    cursor = num.cursor;\n    return {\n        cursor: cursor,\n        evaluable: new UnaryOperationNode(op, num.evaluable),\n    };\n}\nfunction readBinaryOperator(ops, text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n    if (!op) {\n        return null;\n    }\n    cursor += op.length;\n    cursor += readWhitespace(text, cursor).length;\n    return {\n        cursor: cursor,\n        operator: op,\n    };\n}\nfunction createBinaryOperationExpressionParser(exprParser, ops) {\n    return (text, cursor) => {\n        const firstExpr = exprParser(text, cursor);\n        if (!firstExpr) {\n            return null;\n        }\n        cursor = firstExpr.cursor;\n        let expr = firstExpr.evaluable;\n        for (;;) {\n            const op = readBinaryOperator(ops, text, cursor);\n            if (!op) {\n                break;\n            }\n            cursor = op.cursor;\n            const nextExpr = exprParser(text, cursor);\n            if (!nextExpr) {\n                return null;\n            }\n            cursor = nextExpr.cursor;\n            expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n        }\n        return expr\n            ? {\n                cursor: cursor,\n                evaluable: expr,\n            }\n            : null;\n    };\n}\nconst parseBinaryOperationExpression = [\n    ['**'],\n    ['*', '/', '%'],\n    ['+', '-'],\n    ['<<', '>>>', '>>'],\n    ['&'],\n    ['^'],\n    ['|'],\n].reduce((parser, ops) => {\n    return createBinaryOperationExpressionParser(parser, ops);\n}, parseUnaryExpression);\nfunction parseExpression(text, cursor) {\n    cursor += readWhitespace(text, cursor).length;\n    return parseBinaryOperationExpression(text, cursor);\n}\nfunction parseEcmaNumberExpression(text) {\n    const expr = parseExpression(text, 0);\n    if (!expr) {\n        return null;\n    }\n    const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n    if (cursor !== text.length) {\n        return null;\n    }\n    return expr.evaluable;\n}\n\nfunction parseNumber(text) {\n    var _a;\n    const r = parseEcmaNumberExpression(text);\n    return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n}\nfunction numberFromUnknown(value) {\n    if (typeof value === 'number') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        const pv = parseNumber(value);\n        if (!isEmpty(pv)) {\n            return pv;\n        }\n    }\n    return 0;\n}\nfunction numberToString(value) {\n    return String(value);\n}\nfunction createNumberFormatter(digits) {\n    return (value) => {\n        return value.toFixed(Math.max(Math.min(digits, 20), 0));\n    };\n}\n\nfunction mapRange(value, start1, end1, start2, end2) {\n    const p = (value - start1) / (end1 - start1);\n    return start2 + p * (end2 - start2);\n}\nfunction getDecimalDigits(value) {\n    const text = String(value.toFixed(10));\n    const frac = text.split('.')[1];\n    return frac.replace(/0+$/, '').length;\n}\nfunction constrainRange(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction loopRange(value, max) {\n    return ((value % max) + max) % max;\n}\nfunction getSuitableDecimalDigits(params, rawValue) {\n    return !isEmpty(params.step)\n        ? getDecimalDigits(params.step)\n        : Math.max(getDecimalDigits(rawValue), 2);\n}\nfunction getSuitableKeyScale(params) {\n    var _a;\n    return (_a = params.step) !== null && _a !== void 0 ? _a : 1;\n}\nfunction getSuitablePointerScale(params, rawValue) {\n    var _a;\n    const base = Math.abs((_a = params.step) !== null && _a !== void 0 ? _a : rawValue);\n    return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n}\nfunction createStepConstraint(params, initialValue) {\n    if (!isEmpty(params.step)) {\n        return new StepConstraint(params.step, initialValue);\n    }\n    return null;\n}\nfunction createRangeConstraint(params) {\n    if (!isEmpty(params.max) && !isEmpty(params.min)) {\n        return new DefiniteRangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        return new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        });\n    }\n    return null;\n}\nfunction createNumberTextPropsObject(params, initialValue) {\n    var _a, _b, _c;\n    return {\n        formatter: (_a = params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(params, initialValue)),\n        keyScale: (_b = params.keyScale) !== null && _b !== void 0 ? _b : getSuitableKeyScale(params),\n        pointerScale: (_c = params.pointerScale) !== null && _c !== void 0 ? _c : getSuitablePointerScale(params, initialValue),\n    };\n}\nfunction createNumberTextInputParamsParser(p) {\n    return {\n        format: p.optional.function,\n        keyScale: p.optional.number,\n        max: p.optional.number,\n        min: p.optional.number,\n        pointerScale: p.optional.number,\n        step: p.optional.number,\n    };\n}\n\nfunction createPointAxis(config) {\n    return {\n        constraint: config.constraint,\n        textProps: ValueMap.fromObject(createNumberTextPropsObject(config.params, config.initialValue)),\n    };\n}\n\nclass BladeApi {\n    constructor(controller) {\n        this.controller = controller;\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n    get disabled() {\n        return this.controller.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller.viewProps.set('disabled', disabled);\n    }\n    get hidden() {\n        return this.controller.viewProps.get('hidden');\n    }\n    set hidden(hidden) {\n        this.controller.viewProps.set('hidden', hidden);\n    }\n    dispose() {\n        this.controller.viewProps.set('disposed', true);\n    }\n    importState(state) {\n        return this.controller.importState(state);\n    }\n    exportState() {\n        return this.controller.exportState();\n    }\n}\n\nclass TpEvent {\n    constructor(target) {\n        this.target = target;\n    }\n}\nclass TpChangeEvent extends TpEvent {\n    constructor(target, value, last) {\n        super(target);\n        this.value = value;\n        this.last = last !== null && last !== void 0 ? last : true;\n    }\n}\nclass TpFoldEvent extends TpEvent {\n    constructor(target, expanded) {\n        super(target);\n        this.expanded = expanded;\n    }\n}\nclass TpTabSelectEvent extends TpEvent {\n    constructor(target, index) {\n        super(target);\n        this.index = index;\n    }\n}\nclass TpMouseEvent extends TpEvent {\n    constructor(target, nativeEvent) {\n        super(target);\n        this.native = nativeEvent;\n    }\n}\n\nclass BindingApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', this.onValueChange_);\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get key() {\n        return this.controller.value.binding.target.key;\n    }\n    get tag() {\n        return this.controller.tag;\n    }\n    set tag(tag) {\n        this.controller.tag = tag;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.controller.value.fetch();\n    }\n    onValueChange_(ev) {\n        const value = this.controller.value;\n        this.emitter_.emit('change', new TpChangeEvent(this, forceCast(value.binding.target.read()), ev.options.last));\n    }\n}\n\nclass InputBindingValue {\n    constructor(value, binding) {\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = binding;\n        this.value_ = value;\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.emitter = new Emitter();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = this.binding.read();\n    }\n    push() {\n        this.binding.write(this.value_.rawValue);\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.push();\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isInputBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && 'write' in b;\n}\n\nfunction parseObject(value, keyToParserMap) {\n    const keys = Object.keys(keyToParserMap);\n    const result = keys.reduce((tmp, key) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const parser = keyToParserMap[key];\n        const result = parser(value[key]);\n        return result.succeeded\n            ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n    }, {});\n    return forceCast(result);\n}\nfunction parseArray(value, parseItem) {\n    return value.reduce((tmp, item) => {\n        if (tmp === undefined) {\n            return undefined;\n        }\n        const result = parseItem(item);\n        if (!result.succeeded || result.value === undefined) {\n            return undefined;\n        }\n        return [...tmp, result.value];\n    }, []);\n}\nfunction isObject(value) {\n    if (value === null) {\n        return false;\n    }\n    return typeof value === 'object';\n}\nfunction createMicroParserBuilder(parse) {\n    return (optional) => (v) => {\n        if (!optional && v === undefined) {\n            return {\n                succeeded: false,\n                value: undefined,\n            };\n        }\n        if (optional && v === undefined) {\n            return {\n                succeeded: true,\n                value: undefined,\n            };\n        }\n        const result = parse(v);\n        return result !== undefined\n            ? {\n                succeeded: true,\n                value: result,\n            }\n            : {\n                succeeded: false,\n                value: undefined,\n            };\n    };\n}\nfunction createMicroParserBuilders(optional) {\n    return {\n        custom: (parse) => createMicroParserBuilder(parse)(optional),\n        boolean: createMicroParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n        number: createMicroParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n        string: createMicroParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n        function: createMicroParserBuilder((v) =>\n        typeof v === 'function' ? v : undefined)(optional),\n        constant: (value) => createMicroParserBuilder((v) => (v === value ? value : undefined))(optional),\n        raw: createMicroParserBuilder((v) => v)(optional),\n        object: (keyToParserMap) => createMicroParserBuilder((v) => {\n            if (!isObject(v)) {\n                return undefined;\n            }\n            return parseObject(v, keyToParserMap);\n        })(optional),\n        array: (itemParser) => createMicroParserBuilder((v) => {\n            if (!Array.isArray(v)) {\n                return undefined;\n            }\n            return parseArray(v, itemParser);\n        })(optional),\n    };\n}\nconst MicroParsers = {\n    optional: createMicroParserBuilders(true),\n    required: createMicroParserBuilders(false),\n};\nfunction parseRecord(value, keyToParserMap) {\n    const map = keyToParserMap(MicroParsers);\n    const result = MicroParsers.required.object(map)(value);\n    return result.succeeded ? result.value : undefined;\n}\n\nfunction importBladeState(state, superImport, parser, callback) {\n    if (superImport && !superImport(state)) {\n        return false;\n    }\n    const result = parseRecord(state, parser);\n    return result ? callback(result) : false;\n}\nfunction exportBladeState(superExport, thisState) {\n    var _a;\n    return deepMerge((_a = superExport === null || superExport === void 0 ? void 0 : superExport()) !== null && _a !== void 0 ? _a : {}, thisState);\n}\n\nfunction isValueBladeController(bc) {\n    return 'value' in bc;\n}\n\nfunction isBindingValue(v) {\n    if (!isObject$1(v) || !('binding' in v)) {\n        return false;\n    }\n    const b = v.binding;\n    return isBinding(b);\n}\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\nfunction forceReflow(element) {\n    element.offsetHeight;\n}\nfunction disableTransitionTemporarily(element, callback) {\n    const t = element.style.transition;\n    element.style.transition = 'none';\n    callback();\n    element.style.transition = t;\n}\nfunction supportsTouch(doc) {\n    return doc.ontouchstart !== undefined;\n}\nfunction getGlobalObject() {\n    return globalThis;\n}\nfunction getWindowDocument() {\n    const globalObj = forceCast(getGlobalObject());\n    return globalObj.document;\n}\nfunction getCanvasContext(canvasElement) {\n    const win = canvasElement.ownerDocument.defaultView;\n    if (!win) {\n        return null;\n    }\n    const isBrowser = 'document' in win;\n    return isBrowser\n        ? canvasElement.getContext('2d', {\n            willReadFrequently: true,\n        })\n        : null;\n}\nconst ICON_ID_TO_INNER_HTML_MAP = {\n    check: '<path d=\"M2 8l4 4l8 -8\"/>',\n    dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n    p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n};\nfunction createSvgIconElement(document, iconId) {\n    const elem = document.createElementNS(SVG_NS, 'svg');\n    elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n    return elem;\n}\nfunction insertElementAt(parentElement, element, index) {\n    parentElement.insertBefore(element, parentElement.children[index]);\n}\nfunction removeElement(element) {\n    if (element.parentElement) {\n        element.parentElement.removeChild(element);\n    }\n}\nfunction removeChildElements(element) {\n    while (element.children.length > 0) {\n        element.removeChild(element.children[0]);\n    }\n}\nfunction removeChildNodes(element) {\n    while (element.childNodes.length > 0) {\n        element.removeChild(element.childNodes[0]);\n    }\n}\nfunction findNextTarget(ev) {\n    if (ev.relatedTarget) {\n        return forceCast(ev.relatedTarget);\n    }\n    if ('explicitOriginalTarget' in ev) {\n        return ev.explicitOriginalTarget;\n    }\n    return null;\n}\n\nfunction bindValue(value, applyValue) {\n    value.emitter.on('change', (ev) => {\n        applyValue(ev.rawValue);\n    });\n    applyValue(value.rawValue);\n}\nfunction bindValueMap(valueMap, key, applyValue) {\n    bindValue(valueMap.value(key), applyValue);\n}\n\nconst PREFIX = 'tp';\nfunction ClassName(viewName) {\n    const fn = (opt_elementName, opt_modifier) => {\n        return [\n            PREFIX,\n            '-',\n            viewName,\n            'v',\n            opt_elementName ? `_${opt_elementName}` : '',\n            opt_modifier ? `-${opt_modifier}` : '',\n        ].join('');\n    };\n    return fn;\n}\n\nconst cn$r = ClassName('lbl');\nfunction createLabelNode(doc, label) {\n    const frag = doc.createDocumentFragment();\n    const lineNodes = label.split('\\n').map((line) => {\n        return doc.createTextNode(line);\n    });\n    lineNodes.forEach((lineNode, index) => {\n        if (index > 0) {\n            frag.appendChild(doc.createElement('br'));\n        }\n        frag.appendChild(lineNode);\n    });\n    return frag;\n}\nclass LabelView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$r());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('div');\n        labelElem.classList.add(cn$r('l'));\n        bindValueMap(config.props, 'label', (value) => {\n            if (isEmpty(value)) {\n                this.element.classList.add(cn$r(undefined, 'nol'));\n            }\n            else {\n                this.element.classList.remove(cn$r(undefined, 'nol'));\n                removeChildNodes(labelElem);\n                labelElem.appendChild(createLabelNode(doc, value));\n            }\n        });\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const valueElem = doc.createElement('div');\n        valueElem.classList.add(cn$r('v'));\n        this.element.appendChild(valueElem);\n        this.valueElement = valueElem;\n    }\n}\n\nclass LabelController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.valueController = config.valueController;\n        this.viewProps = config.valueController.viewProps;\n        this.view = new LabelView(doc, {\n            props: config.props,\n            viewProps: this.viewProps,\n        });\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            label: p.optional.string,\n        }), (result) => {\n            this.props.set('label', result.label);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            label: this.props.get('label'),\n        });\n    }\n}\n\nfunction getAllBladePositions() {\n    return ['veryfirst', 'first', 'last', 'verylast'];\n}\n\nconst cn$q = ClassName('');\nconst POS_TO_CLASS_NAME_MAP = {\n    veryfirst: 'vfst',\n    first: 'fst',\n    last: 'lst',\n    verylast: 'vlst',\n};\nclass BladeController {\n    constructor(config) {\n        this.parent_ = null;\n        this.blade = config.blade;\n        this.view = config.view;\n        this.viewProps = config.viewProps;\n        const elem = this.view.element;\n        this.blade.value('positions').emitter.on('change', () => {\n            getAllBladePositions().forEach((pos) => {\n                elem.classList.remove(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n            this.blade.get('positions').forEach((pos) => {\n                elem.classList.add(cn$q(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n            });\n        });\n        this.viewProps.handleDispose(() => {\n            removeElement(elem);\n        });\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(parent) {\n        this.parent_ = parent;\n        this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n    }\n    importState(state) {\n        return importBladeState(state, null, (p) => ({\n            disabled: p.required.boolean,\n            hidden: p.required.boolean,\n        }), (result) => {\n            this.viewProps.importState(result);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(null, Object.assign({}, this.viewProps.exportState()));\n    }\n}\n\nclass LabeledValueBladeController extends BladeController {\n    constructor(doc, config) {\n        if (config.value !== config.valueController.value) {\n            throw TpError.shouldNeverHappen();\n        }\n        const viewProps = config.valueController.viewProps;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.props,\n            valueController: config.valueController,\n        });\n        super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                props: config.props,\n                viewProps: viewProps,\n            }), viewProps: viewProps }));\n        this.labelController = lc;\n        this.value = config.value;\n        this.valueController = config.valueController;\n        this.view.valueElement.appendChild(this.valueController.view.element);\n    }\n    importState(state) {\n        return importBladeState(state, (s) => {\n            var _a, _b, _c;\n            return super.importState(s) &&\n                this.labelController.importProps(s) &&\n                ((_c = (_b = (_a = this.valueController).importProps) === null || _b === void 0 ? void 0 : _b.call(_a, state)) !== null && _c !== void 0 ? _c : true);\n        }, (p) => ({\n            value: p.optional.raw,\n        }), (result) => {\n            if (result.value) {\n                this.value.rawValue = result.value;\n            }\n            return true;\n        });\n    }\n    exportState() {\n        var _a, _b, _c;\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({ value: this.value.rawValue }, this.labelController.exportProps()), ((_c = (_b = (_a = this.valueController).exportProps) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : {})));\n    }\n}\n\nfunction excludeValue(state) {\n    const result = Object.assign({}, state);\n    delete result.value;\n    return result;\n}\nclass BindingController extends LabeledValueBladeController {\n    constructor(doc, config) {\n        super(doc, config);\n        this.tag = config.tag;\n    }\n    importState(state) {\n        return importBladeState(state,\n        (_s) => super.importState(excludeValue(state)), (p) => ({\n            tag: p.optional.string,\n        }), (result) => {\n            this.tag = result.tag;\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => excludeValue(super.exportState()), {\n            binding: {\n                key: this.value.binding.target.key,\n                value: this.value.binding.target.read(),\n            },\n            tag: this.tag,\n        });\n    }\n}\nfunction isBindingController(bc) {\n    return isValueBladeController(bc) && isBindingValue(bc.value);\n}\n\nclass InputBindingController extends BindingController {\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            binding: p.required.object({\n                value: p.required.raw,\n            }),\n        }), (result) => {\n            this.value.binding.inject(result.binding.value);\n            this.value.fetch();\n            return true;\n        });\n    }\n}\nfunction isInputBindingController(bc) {\n    return isValueBladeController(bc) && isInputBindingValue(bc.value);\n}\n\nfunction fillBuffer(buffer, bufferSize) {\n    while (buffer.length < bufferSize) {\n        buffer.push(undefined);\n    }\n}\nfunction initializeBuffer(bufferSize) {\n    const buffer = [];\n    fillBuffer(buffer, bufferSize);\n    return buffer;\n}\nfunction createTrimmedBuffer(buffer) {\n    const index = buffer.indexOf(undefined);\n    return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n}\nfunction createPushedBuffer(buffer, newValue) {\n    const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n    if (newBuffer.length > buffer.length) {\n        newBuffer.splice(0, newBuffer.length - buffer.length);\n    }\n    else {\n        fillBuffer(newBuffer, buffer.length);\n    }\n    return newBuffer;\n}\n\nclass MonitorBindingValue {\n    constructor(config) {\n        this.emitter = new Emitter();\n        this.onTick_ = this.onTick_.bind(this);\n        this.onValueBeforeChange_ = this.onValueBeforeChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.binding = config.binding;\n        this.value_ = createValue(initializeBuffer(config.bufferSize));\n        this.value_.emitter.on('beforechange', this.onValueBeforeChange_);\n        this.value_.emitter.on('change', this.onValueChange_);\n        this.ticker = config.ticker;\n        this.ticker.emitter.on('tick', this.onTick_);\n        this.fetch();\n    }\n    get rawValue() {\n        return this.value_.rawValue;\n    }\n    set rawValue(rawValue) {\n        this.value_.rawValue = rawValue;\n    }\n    setRawValue(rawValue, options) {\n        this.value_.setRawValue(rawValue, options);\n    }\n    fetch() {\n        this.value_.rawValue = createPushedBuffer(this.value_.rawValue, this.binding.read());\n    }\n    onTick_() {\n        this.fetch();\n    }\n    onValueBeforeChange_(ev) {\n        this.emitter.emit('beforechange', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n    onValueChange_(ev) {\n        this.emitter.emit('change', Object.assign(Object.assign({}, ev), { sender: this }));\n    }\n}\nfunction isMonitorBindingValue(v) {\n    if (!('binding' in v)) {\n        return false;\n    }\n    const b = v['binding'];\n    return isBinding(b) && 'read' in b && !('write' in b);\n}\n\nclass MonitorBindingController extends BindingController {\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            binding: {\n                readonly: true,\n            },\n        });\n    }\n}\nfunction isMonitorBindingController(bc) {\n    return (isValueBladeController(bc) &&\n        isMonitorBindingValue(bc.value));\n}\n\nclass ButtonApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller.buttonController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.buttonController.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.buttonController.emitter;\n        emitter.on(eventName, (ev) => {\n            bh(new TpMouseEvent(this, ev.nativeEvent));\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        const emitter = this.controller.buttonController.emitter;\n        emitter.off(eventName, handler);\n        return this;\n    }\n}\n\nfunction applyClass(elem, className, active) {\n    if (active) {\n        elem.classList.add(className);\n    }\n    else {\n        elem.classList.remove(className);\n    }\n}\nfunction valueToClassName(elem, className) {\n    return (value) => {\n        applyClass(elem, className, value);\n    };\n}\nfunction bindValueToTextContent(value, elem) {\n    bindValue(value, (text) => {\n        elem.textContent = text !== null && text !== void 0 ? text : '';\n    });\n}\n\nconst cn$p = ClassName('btn');\nclass ButtonView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$p());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$p('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$p('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n    }\n}\n\nclass ButtonController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new ButtonView(doc, {\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            title: p.optional.string,\n        }), (result) => {\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            title: this.props.get('title'),\n        });\n    }\n    onClick_(ev) {\n        this.emitter.emit('click', {\n            nativeEvent: ev,\n            sender: this,\n        });\n    }\n}\n\nclass ButtonBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = new ButtonController(doc, {\n            props: config.buttonProps,\n            viewProps: config.viewProps,\n        });\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: config.viewProps,\n        });\n        this.buttonController = bc;\n        this.labelController = lc;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s) &&\n            this.buttonController.importProps(s) &&\n            this.labelController.importProps(s), () => ({}), () => true);\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), Object.assign(Object.assign({}, this.buttonController.exportProps()), this.labelController.exportProps()));\n    }\n}\n\nclass Semver {\n    constructor(text) {\n        const [core, prerelease] = text.split('-');\n        const coreComps = core.split('.');\n        this.major = parseInt(coreComps[0], 10);\n        this.minor = parseInt(coreComps[1], 10);\n        this.patch = parseInt(coreComps[2], 10);\n        this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n    }\n    toString() {\n        const core = [this.major, this.minor, this.patch].join('.');\n        return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n    }\n}\n\nconst VERSION$1 = new Semver('2.0.5');\n\nfunction createPlugin(plugin) {\n    return Object.assign({ core: VERSION$1 }, plugin);\n}\n\nconst ButtonBladePlugin = createPlugin({\n    id: 'button',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('button'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonBladeController(args.document, {\n            blade: args.blade,\n            buttonProps: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonBladeController) {\n            return new ButtonApi(args.controller);\n        }\n        return null;\n    },\n});\n\nfunction addButtonAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n}\nfunction addFolderAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n}\nfunction addTabAsBlade(api, params) {\n    return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n}\n\nfunction isRefreshable(value) {\n    if (!isObject$1(value)) {\n        return false;\n    }\n    return 'refresh' in value && typeof value.refresh === 'function';\n}\n\nfunction createBindingTarget(obj, key) {\n    if (!BindingTarget.isBindable(obj)) {\n        throw TpError.notBindable();\n    }\n    return new BindingTarget(obj, key);\n}\nclass RackApi {\n    constructor(controller, pool) {\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.controller_ = controller;\n        this.emitter_ = new Emitter();\n        this.pool_ = pool;\n        const rack = this.controller_.rack;\n        rack.emitter.on('valuechange', this.onRackValueChange_);\n    }\n    get children() {\n        return this.controller_.rack.children.map((bc) => this.pool_.createApi(bc));\n    }\n    addBinding(object, key, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBinding(doc, createBindingTarget(object, key), params);\n        const api = this.pool_.createBindingApi(bc);\n        return this.add(api, params.index);\n    }\n    addFolder(params) {\n        return addFolderAsBlade(this, params);\n    }\n    addButton(params) {\n        return addButtonAsBlade(this, params);\n    }\n    addTab(params) {\n        return addTabAsBlade(this, params);\n    }\n    add(api, opt_index) {\n        const bc = api.controller;\n        this.controller_.rack.add(bc, opt_index);\n        return api;\n    }\n    remove(api) {\n        this.controller_.rack.remove(api.controller);\n    }\n    addBlade(params) {\n        const doc = this.controller_.element.ownerDocument;\n        const bc = this.pool_.createBlade(doc, params);\n        const api = this.pool_.createApi(bc);\n        return this.add(api, params.index);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    refresh() {\n        this.children.forEach((c) => {\n            if (isRefreshable(c)) {\n                c.refresh();\n            }\n        });\n    }\n    onRackValueChange_(ev) {\n        const bc = ev.bladeController;\n        const api = this.pool_.createApi(bc);\n        const binding = isBindingValue(bc.value) ? bc.value.binding : null;\n        this.emitter_.emit('change', new TpChangeEvent(api, binding ? binding.target.read() : bc.value.rawValue, ev.options.last));\n    }\n}\n\nclass ContainerBladeApi extends BladeApi {\n    constructor(controller, pool) {\n        super(controller);\n        this.rackApi_ = new RackApi(controller.rackController, pool);\n    }\n    refresh() {\n        this.rackApi_.refresh();\n    }\n}\n\nclass ContainerBladeController extends BladeController {\n    constructor(config) {\n        super({\n            blade: config.blade,\n            view: config.view,\n            viewProps: config.rackController.viewProps,\n        });\n        this.rackController = config.rackController;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            children: p.required.array(p.required.raw),\n        }), (result) => {\n            return this.rackController.rack.children.every((c, index) => {\n                return c.importState(result.children[index]);\n            });\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            children: this.rackController.rack.children.map((c) => c.exportState()),\n        });\n    }\n}\nfunction isContainerBladeController(bc) {\n    return 'rackController' in bc;\n}\n\nclass NestedOrderedSet {\n    constructor(extract) {\n        this.emitter = new Emitter();\n        this.items_ = [];\n        this.cache_ = new Set();\n        this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n        this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n        this.extract_ = extract;\n    }\n    get items() {\n        return this.items_;\n    }\n    allItems() {\n        return Array.from(this.cache_);\n    }\n    find(callback) {\n        for (const item of this.allItems()) {\n            if (callback(item)) {\n                return item;\n            }\n        }\n        return null;\n    }\n    includes(item) {\n        return this.cache_.has(item);\n    }\n    add(item, opt_index) {\n        if (this.includes(item)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const index = opt_index !== undefined ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        this.cache_.add(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.emitter.on('add', this.onSubListAdd_);\n            subList.emitter.on('remove', this.onSubListRemove_);\n            subList.allItems().forEach((i) => {\n                this.cache_.add(i);\n            });\n        }\n        this.emitter.emit('add', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        this.cache_.delete(item);\n        const subList = this.extract_(item);\n        if (subList) {\n            subList.allItems().forEach((i) => {\n                this.cache_.delete(i);\n            });\n            subList.emitter.off('add', this.onSubListAdd_);\n            subList.emitter.off('remove', this.onSubListRemove_);\n        }\n        this.emitter.emit('remove', {\n            index: index,\n            item: item,\n            root: this,\n            target: this,\n        });\n    }\n    onSubListAdd_(ev) {\n        this.cache_.add(ev.item);\n        this.emitter.emit('add', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n    onSubListRemove_(ev) {\n        this.cache_.delete(ev.item);\n        this.emitter.emit('remove', {\n            index: ev.index,\n            item: ev.item,\n            root: this,\n            target: ev.target,\n        });\n    }\n}\n\nfunction findValueBladeController(bcs, v) {\n    for (let i = 0; i < bcs.length; i++) {\n        const bc = bcs[i];\n        if (isValueBladeController(bc) && bc.value === v) {\n            return bc;\n        }\n    }\n    return null;\n}\nfunction findSubBladeControllerSet(bc) {\n    return isContainerBladeController(bc)\n        ? bc.rackController.rack['bcSet_']\n        : null;\n}\nclass Rack {\n    constructor(config) {\n        var _a, _b;\n        this.emitter = new Emitter();\n        this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n        this.onSetAdd_ = this.onSetAdd_.bind(this);\n        this.onSetRemove_ = this.onSetRemove_.bind(this);\n        this.onChildDispose_ = this.onChildDispose_.bind(this);\n        this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n        this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n        this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n        this.onRackLayout_ = this.onRackLayout_.bind(this);\n        this.onRackValueChange_ = this.onRackValueChange_.bind(this);\n        this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n        (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n        this.viewProps = config.viewProps;\n        this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n        this.bcSet_.emitter.on('add', this.onSetAdd_);\n        this.bcSet_.emitter.on('remove', this.onSetRemove_);\n    }\n    get children() {\n        return this.bcSet_.items;\n    }\n    add(bc, opt_index) {\n        var _a;\n        (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n        bc.parent = this;\n        this.bcSet_.add(bc, opt_index);\n    }\n    remove(bc) {\n        bc.parent = null;\n        this.bcSet_.remove(bc);\n    }\n    find(finder) {\n        return this.bcSet_.allItems().filter(finder);\n    }\n    onSetAdd_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('add', {\n            bladeController: ev.item,\n            index: ev.index,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n        bc.blade\n            .value('positions')\n            .emitter.on('change', this.onChildPositionsChange_);\n        bc.viewProps.handleDispose(this.onChildDispose_);\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.on('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.on('layout', this.onRackLayout_);\n                emitter.on('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    onSetRemove_(ev) {\n        this.updatePositions_();\n        const root = ev.target === ev.root;\n        this.emitter.emit('remove', {\n            bladeController: ev.item,\n            root: root,\n            sender: this,\n        });\n        if (!root) {\n            return;\n        }\n        const bc = ev.item;\n        if (isValueBladeController(bc)) {\n            bc.value.emitter.off('change', this.onChildValueChange_);\n        }\n        else if (isContainerBladeController(bc)) {\n            const rack = bc.rackController.rack;\n            if (rack) {\n                const emitter = rack.emitter;\n                emitter.off('layout', this.onRackLayout_);\n                emitter.off('valuechange', this.onRackValueChange_);\n            }\n        }\n    }\n    updatePositions_() {\n        const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n        const firstVisibleItem = visibleItems[0];\n        const lastVisibleItem = visibleItems[visibleItems.length - 1];\n        this.bcSet_.items.forEach((bc) => {\n            const ps = [];\n            if (bc === firstVisibleItem) {\n                ps.push('first');\n                if (!this.blade_ ||\n                    this.blade_.get('positions').includes('veryfirst')) {\n                    ps.push('veryfirst');\n                }\n            }\n            if (bc === lastVisibleItem) {\n                ps.push('last');\n                if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                    ps.push('verylast');\n                }\n            }\n            bc.blade.set('positions', ps);\n        });\n    }\n    onChildPositionsChange_() {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildViewPropsChange_(_ev) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onChildDispose_() {\n        const disposedUcs = this.bcSet_.items.filter((bc) => {\n            return bc.viewProps.get('disposed');\n        });\n        disposedUcs.forEach((bc) => {\n            this.bcSet_.remove(bc);\n        });\n    }\n    onChildValueChange_(ev) {\n        const bc = findValueBladeController(this.find(isValueBladeController), ev.sender);\n        if (!bc) {\n            throw TpError.alreadyDisposed();\n        }\n        this.emitter.emit('valuechange', {\n            bladeController: bc,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onRackLayout_(_) {\n        this.updatePositions_();\n        this.emitter.emit('layout', {\n            sender: this,\n        });\n    }\n    onRackValueChange_(ev) {\n        this.emitter.emit('valuechange', {\n            bladeController: ev.bladeController,\n            options: ev.options,\n            sender: this,\n        });\n    }\n    onBladePositionsChange_() {\n        this.updatePositions_();\n    }\n}\n\nclass RackController {\n    constructor(config) {\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        this.element = config.element;\n        this.viewProps = config.viewProps;\n        const rack = new Rack({\n            blade: config.root ? undefined : config.blade,\n            viewProps: config.viewProps,\n        });\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.rack = rack;\n        this.viewProps.handleDispose(() => {\n            for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                const bc = this.rack.children[i];\n                bc.viewProps.set('disposed', true);\n            }\n        });\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        insertElementAt(this.element, ev.bladeController.view.element, ev.index);\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        removeElement(ev.bladeController.view.element);\n    }\n}\n\nfunction createBlade() {\n    return new ValueMap({\n        positions: createValue([], {\n            equals: deepEqualsArray,\n        }),\n    });\n}\n\nclass Foldable extends ValueMap {\n    constructor(valueMap) {\n        super(valueMap);\n    }\n    static create(expanded) {\n        const coreObj = {\n            completed: true,\n            expanded: expanded,\n            expandedHeight: null,\n            shouldFixHeight: false,\n            temporaryExpanded: null,\n        };\n        const core = ValueMap.createCore(coreObj);\n        return new Foldable(core);\n    }\n    get styleExpanded() {\n        var _a;\n        return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n    }\n    get styleHeight() {\n        if (!this.styleExpanded) {\n            return '0';\n        }\n        const exHeight = this.get('expandedHeight');\n        if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n            return `${exHeight}px`;\n        }\n        return 'auto';\n    }\n    bindExpandedClass(elem, expandedClassName) {\n        const onExpand = () => {\n            const expanded = this.styleExpanded;\n            if (expanded) {\n                elem.classList.add(expandedClassName);\n            }\n            else {\n                elem.classList.remove(expandedClassName);\n            }\n        };\n        bindValueMap(this, 'expanded', onExpand);\n        bindValueMap(this, 'temporaryExpanded', onExpand);\n    }\n    cleanUpTransition() {\n        this.set('shouldFixHeight', false);\n        this.set('expandedHeight', null);\n        this.set('completed', true);\n    }\n}\nfunction computeExpandedFolderHeight(folder, containerElement) {\n    let height = 0;\n    disableTransitionTemporarily(containerElement, () => {\n        folder.set('expandedHeight', null);\n        folder.set('temporaryExpanded', true);\n        forceReflow(containerElement);\n        height = containerElement.clientHeight;\n        folder.set('temporaryExpanded', null);\n        forceReflow(containerElement);\n    });\n    return height;\n}\nfunction applyHeight(foldable, elem) {\n    elem.style.height = foldable.styleHeight;\n}\nfunction bindFoldable(foldable, elem) {\n    foldable.value('expanded').emitter.on('beforechange', () => {\n        foldable.set('completed', false);\n        if (isEmpty(foldable.get('expandedHeight'))) {\n            const h = computeExpandedFolderHeight(foldable, elem);\n            if (h > 0) {\n                foldable.set('expandedHeight', h);\n            }\n        }\n        foldable.set('shouldFixHeight', true);\n        forceReflow(elem);\n    });\n    foldable.emitter.on('change', () => {\n        applyHeight(foldable, elem);\n    });\n    applyHeight(foldable, elem);\n    elem.addEventListener('transitionend', (ev) => {\n        if (ev.propertyName !== 'height') {\n            return;\n        }\n        foldable.cleanUpTransition();\n    });\n}\n\nclass FolderApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.controller.foldable\n            .value('expanded')\n            .emitter.on('change', (ev) => {\n            this.emitter_.emit('fold', new TpFoldEvent(this, ev.sender.rawValue));\n        });\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n    }\n    get expanded() {\n        return this.controller.foldable.get('expanded');\n    }\n    set expanded(expanded) {\n        this.controller.foldable.set('expanded', expanded);\n    }\n    get title() {\n        return this.controller.props.get('title');\n    }\n    set title(title) {\n        this.controller.props.set('title', title);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        return this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nconst bladeContainerClassName = ClassName('cnt');\n\nclass FolderView {\n    constructor(doc, config) {\n        var _a;\n        this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n        this.element = doc.createElement('div');\n        this.element.classList.add(this.className_(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        this.foldable_ = config.foldable;\n        this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n        bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(this.className_('b'));\n        bindValueMap(config.props, 'title', (title) => {\n            if (isEmpty(title)) {\n                this.element.classList.add(this.className_(undefined, 'not'));\n            }\n            else {\n                this.element.classList.remove(this.className_(undefined, 'not'));\n            }\n        });\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(this.className_('i'));\n        this.element.appendChild(indentElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(this.className_('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(this.className_('m'));\n        this.buttonElement.appendChild(markElem);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(this.className_('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nclass FolderController extends ContainerBladeController {\n    constructor(doc, config) {\n        var _a;\n        const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n        const view = new FolderView(doc, {\n            foldable: foldable,\n            props: config.props,\n            viewName: config.root ? 'rot' : undefined,\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                root: config.root,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onTitleClick_ = this.onTitleClick_.bind(this);\n        this.props = config.props;\n        this.foldable = foldable;\n        bindFoldable(this.foldable, this.view.containerElement);\n        this.rackController.rack.emitter.on('add', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.rackController.rack.emitter.on('remove', () => {\n            this.foldable.cleanUpTransition();\n        });\n        this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n    }\n    get document() {\n        return this.view.element.ownerDocument;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            expanded: p.required.boolean,\n            title: p.optional.string,\n        }), (result) => {\n            this.foldable.set('expanded', result.expanded);\n            this.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            expanded: this.foldable.get('expanded'),\n            title: this.props.get('title'),\n        });\n    }\n    onTitleClick_() {\n        this.foldable.set('expanded', !this.foldable.get('expanded'));\n    }\n}\n\nconst FolderBladePlugin = createPlugin({\n    id: 'folder',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            title: p.required.string,\n            view: p.required.constant('folder'),\n            expanded: p.optional.boolean,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new FolderController(args.document, {\n            blade: args.blade,\n            expanded: args.params.expanded,\n            props: ValueMap.fromObject({\n                title: args.params.title,\n            }),\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FolderController)) {\n            return null;\n        }\n        return new FolderApi(args.controller, args.pool);\n    },\n});\n\nconst cn$o = ClassName('');\nfunction valueToModifier(elem, modifier) {\n    return valueToClassName(elem, cn$o(undefined, modifier));\n}\nclass ViewProps extends ValueMap {\n    constructor(valueMap) {\n        var _a;\n        super(valueMap);\n        this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n        this.onParentChange_ = this.onParentChange_.bind(this);\n        this.onParentGlobalDisabledChange_ =\n            this.onParentGlobalDisabledChange_.bind(this);\n        [this.globalDisabled_, this.setGlobalDisabled_] = createReadonlyValue(createValue(this.getGlobalDisabled_()));\n        this.value('disabled').emitter.on('change', this.onDisabledChange_);\n        this.value('parent').emitter.on('change', this.onParentChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n    }\n    static create(opt_initialValue) {\n        var _a, _b, _c;\n        const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n        return new ViewProps(ValueMap.createCore({\n            disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n            disposed: false,\n            hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n        }));\n    }\n    get globalDisabled() {\n        return this.globalDisabled_;\n    }\n    bindClassModifiers(elem) {\n        bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n        bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n    }\n    bindDisabled(target) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            target.disabled = disabled;\n        });\n    }\n    bindTabIndex(elem) {\n        bindValue(this.globalDisabled_, (disabled) => {\n            elem.tabIndex = disabled ? -1 : 0;\n        });\n    }\n    handleDispose(callback) {\n        this.value('disposed').emitter.on('change', (disposed) => {\n            if (disposed) {\n                callback();\n            }\n        });\n    }\n    importState(state) {\n        this.set('disabled', state.disabled);\n        this.set('hidden', state.hidden);\n    }\n    exportState() {\n        return {\n            disabled: this.get('disabled'),\n            hidden: this.get('hidden'),\n        };\n    }\n    getGlobalDisabled_() {\n        const parent = this.get('parent');\n        const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n        return parentDisabled || this.get('disabled');\n    }\n    updateGlobalDisabled_() {\n        this.setGlobalDisabled_(this.getGlobalDisabled_());\n    }\n    onDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentGlobalDisabledChange_() {\n        this.updateGlobalDisabled_();\n    }\n    onParentChange_(ev) {\n        var _a;\n        const prevParent = ev.previousRawValue;\n        prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n        (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        this.updateGlobalDisabled_();\n    }\n}\n\nconst cn$n = ClassName('tbp');\nclass TabPageView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$n());\n        config.viewProps.bindClassModifiers(this.element);\n        const containerElem = doc.createElement('div');\n        containerElem.classList.add(cn$n('c'));\n        this.element.appendChild(containerElem);\n        this.containerElement = containerElem;\n    }\n}\n\nconst cn$m = ClassName('tbi');\nclass TabItemView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$m());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValueMap(config.props, 'selected', (selected) => {\n            if (selected) {\n                this.element.classList.add(cn$m(undefined, 'sel'));\n            }\n            else {\n                this.element.classList.remove(cn$m(undefined, 'sel'));\n            }\n        });\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$m('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$m('t'));\n        bindValueToTextContent(config.props.value('title'), titleElem);\n        this.buttonElement.appendChild(titleElem);\n        this.titleElement = titleElem;\n    }\n}\n\nclass TabItemController {\n    constructor(doc, config) {\n        this.emitter = new Emitter();\n        this.onClick_ = this.onClick_.bind(this);\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new TabItemView(doc, {\n            props: config.props,\n            viewProps: config.viewProps,\n        });\n        this.view.buttonElement.addEventListener('click', this.onClick_);\n    }\n    onClick_() {\n        this.emitter.emit('click', {\n            sender: this,\n        });\n    }\n}\n\nclass TabPageController extends ContainerBladeController {\n    constructor(doc, config) {\n        const view = new TabPageView(doc, {\n            viewProps: config.viewProps,\n        });\n        super(Object.assign(Object.assign({}, config), { rackController: new RackController({\n                blade: config.blade,\n                element: view.containerElement,\n                viewProps: config.viewProps,\n            }), view: view }));\n        this.onItemClick_ = this.onItemClick_.bind(this);\n        this.ic_ = new TabItemController(doc, {\n            props: config.itemProps,\n            viewProps: ViewProps.create(),\n        });\n        this.ic_.emitter.on('click', this.onItemClick_);\n        this.props = config.props;\n        bindValueMap(this.props, 'selected', (selected) => {\n            this.itemController.props.set('selected', selected);\n            this.viewProps.set('hidden', !selected);\n        });\n    }\n    get itemController() {\n        return this.ic_;\n    }\n    importState(state) {\n        return importBladeState(state, (s) => super.importState(s), (p) => ({\n            selected: p.required.boolean,\n            title: p.required.string,\n        }), (result) => {\n            this.ic_.props.set('selected', result.selected);\n            this.ic_.props.set('title', result.title);\n            return true;\n        });\n    }\n    exportState() {\n        return exportBladeState(() => super.exportState(), {\n            selected: this.ic_.props.get('selected'),\n            title: this.ic_.props.get('title'),\n        });\n    }\n    onItemClick_() {\n        this.props.set('selected', true);\n    }\n}\n\nclass TabApi extends ContainerBladeApi {\n    constructor(controller, pool) {\n        super(controller, pool);\n        this.emitter_ = new Emitter();\n        this.onSelect_ = this.onSelect_.bind(this);\n        this.pool_ = pool;\n        this.rackApi_.on('change', (ev) => {\n            this.emitter_.emit('change', ev);\n        });\n        this.controller.tab.selectedIndex.emitter.on('change', this.onSelect_);\n    }\n    get pages() {\n        return this.rackApi_.children;\n    }\n    addPage(params) {\n        const doc = this.controller.view.element.ownerDocument;\n        const pc = new TabPageController(doc, {\n            blade: createBlade(),\n            itemProps: ValueMap.fromObject({\n                selected: false,\n                title: params.title,\n            }),\n            props: ValueMap.fromObject({\n                selected: false,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        const papi = this.pool_.createApi(pc);\n        return this.rackApi_.add(papi, params.index);\n    }\n    removePage(index) {\n        this.rackApi_.remove(this.rackApi_.children[index]);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n    onSelect_(ev) {\n        this.emitter_.emit('select', new TpTabSelectEvent(this, ev.rawValue));\n    }\n}\n\nclass TabPageApi extends ContainerBladeApi {\n    get title() {\n        var _a;\n        return (_a = this.controller.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller.itemController.props.set('title', title);\n    }\n    get selected() {\n        return this.controller.props.get('selected');\n    }\n    set selected(selected) {\n        this.controller.props.set('selected', selected);\n    }\n    get children() {\n        return this.rackApi_.children;\n    }\n    addButton(params) {\n        return this.rackApi_.addButton(params);\n    }\n    addFolder(params) {\n        return this.rackApi_.addFolder(params);\n    }\n    addTab(params) {\n        return this.rackApi_.addTab(params);\n    }\n    add(api, opt_index) {\n        this.rackApi_.add(api, opt_index);\n    }\n    remove(api) {\n        this.rackApi_.remove(api);\n    }\n    addBinding(object, key, opt_params) {\n        return this.rackApi_.addBinding(object, key, opt_params);\n    }\n    addBlade(params) {\n        return this.rackApi_.addBlade(params);\n    }\n}\n\nconst INDEX_NOT_SELECTED = -1;\nclass Tab {\n    constructor() {\n        this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n        this.empty = createValue(true);\n        this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n        this.items_ = [];\n    }\n    add(item, opt_index) {\n        const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n        this.items_.splice(index, 0, item);\n        item.emitter.on('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    remove(item) {\n        const index = this.items_.indexOf(item);\n        if (index < 0) {\n            return;\n        }\n        this.items_.splice(index, 1);\n        item.emitter.off('change', this.onItemSelectedChange_);\n        this.keepSelection_();\n    }\n    keepSelection_() {\n        if (this.items_.length === 0) {\n            this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n            this.empty.rawValue = true;\n            return;\n        }\n        const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n        if (firstSelIndex < 0) {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === 0;\n            });\n            this.selectedIndex.rawValue = 0;\n        }\n        else {\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === firstSelIndex;\n            });\n            this.selectedIndex.rawValue = firstSelIndex;\n        }\n        this.empty.rawValue = false;\n    }\n    onItemSelectedChange_(ev) {\n        if (ev.rawValue) {\n            const index = this.items_.findIndex((s) => s === ev.sender);\n            this.items_.forEach((s, i) => {\n                s.rawValue = i === index;\n            });\n            this.selectedIndex.rawValue = index;\n        }\n        else {\n            this.keepSelection_();\n        }\n    }\n}\n\nconst cn$l = ClassName('tab');\nclass TabView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$l(), bladeContainerClassName());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.empty, valueToClassName(this.element, cn$l(undefined, 'nop')));\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(cn$l('t'));\n        this.element.appendChild(titleElem);\n        this.itemsElement = titleElem;\n        const indentElem = doc.createElement('div');\n        indentElem.classList.add(cn$l('i'));\n        this.element.appendChild(indentElem);\n        const contentsElem = doc.createElement('div');\n        contentsElem.classList.add(cn$l('c'));\n        this.element.appendChild(contentsElem);\n        this.contentsElement = contentsElem;\n    }\n}\n\nclass TabController extends ContainerBladeController {\n    constructor(doc, config) {\n        const tab = new Tab();\n        const view = new TabView(doc, {\n            empty: tab.empty,\n            viewProps: config.viewProps,\n        });\n        super({\n            blade: config.blade,\n            rackController: new RackController({\n                blade: config.blade,\n                element: view.contentsElement,\n                viewProps: config.viewProps,\n            }),\n            view: view,\n        });\n        this.onRackAdd_ = this.onRackAdd_.bind(this);\n        this.onRackRemove_ = this.onRackRemove_.bind(this);\n        const rack = this.rackController.rack;\n        rack.emitter.on('add', this.onRackAdd_);\n        rack.emitter.on('remove', this.onRackRemove_);\n        this.tab = tab;\n    }\n    add(pc, opt_index) {\n        this.rackController.rack.add(pc, opt_index);\n    }\n    remove(index) {\n        this.rackController.rack.remove(this.rackController.rack.children[index]);\n    }\n    onRackAdd_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n        pc.itemController.viewProps.set('parent', this.viewProps);\n        this.tab.add(pc.props.value('selected'));\n    }\n    onRackRemove_(ev) {\n        if (!ev.root) {\n            return;\n        }\n        const pc = ev.bladeController;\n        removeElement(pc.itemController.view.element);\n        pc.itemController.viewProps.set('parent', null);\n        this.tab.remove(pc.props.value('selected'));\n    }\n}\n\nconst TabBladePlugin = createPlugin({\n    id: 'tab',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            pages: p.required.array(p.required.object({ title: p.required.string })),\n            view: p.required.constant('tab'),\n        }));\n        if (!result || result.pages.length === 0) {\n            return null;\n        }\n        return { params: result };\n    },\n    controller(args) {\n        const c = new TabController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n        args.params.pages.forEach((p) => {\n            const pc = new TabPageController(args.document, {\n                blade: createBlade(),\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: p.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            c.add(pc);\n        });\n        return c;\n    },\n    api(args) {\n        if (args.controller instanceof TabController) {\n            return new TabApi(args.controller, args.pool);\n        }\n        if (args.controller instanceof TabPageController) {\n            return new TabPageApi(args.controller, args.pool);\n        }\n        return null;\n    },\n});\n\nfunction createBladeController(plugin, args) {\n    const ac = plugin.accept(args.params);\n    if (!ac) {\n        return null;\n    }\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n    }));\n    return plugin.controller({\n        blade: createBlade(),\n        document: args.document,\n        params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: params === null || params === void 0 ? void 0 : params.disabled, hidden: params === null || params === void 0 ? void 0 : params.hidden })),\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n}\n\nclass ListInputBindingApi extends BindingApi {\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n}\n\nclass ManualTicker {\n    constructor() {\n        this.disabled = false;\n        this.emitter = new Emitter();\n    }\n    dispose() { }\n    tick() {\n        if (this.disabled) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass IntervalTicker {\n    constructor(doc, interval) {\n        this.disabled_ = false;\n        this.timerId_ = null;\n        this.onTick_ = this.onTick_.bind(this);\n        this.doc_ = doc;\n        this.emitter = new Emitter();\n        this.interval_ = interval;\n        this.setTimer_();\n    }\n    get disabled() {\n        return this.disabled_;\n    }\n    set disabled(inactive) {\n        this.disabled_ = inactive;\n        if (this.disabled_) {\n            this.clearTimer_();\n        }\n        else {\n            this.setTimer_();\n        }\n    }\n    dispose() {\n        this.clearTimer_();\n    }\n    clearTimer_() {\n        if (this.timerId_ === null) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            win.clearInterval(this.timerId_);\n        }\n        this.timerId_ = null;\n    }\n    setTimer_() {\n        this.clearTimer_();\n        if (this.interval_ <= 0) {\n            return;\n        }\n        const win = this.doc_.defaultView;\n        if (win) {\n            this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n        }\n    }\n    onTick_() {\n        if (this.disabled_) {\n            return;\n        }\n        this.emitter.emit('tick', {\n            sender: this,\n        });\n    }\n}\n\nclass CompositeConstraint {\n    constructor(constraints) {\n        this.constraints = constraints;\n    }\n    constrain(value) {\n        return this.constraints.reduce((result, c) => {\n            return c.constrain(result);\n        }, value);\n    }\n}\nfunction findConstraint(c, constraintClass) {\n    if (c instanceof constraintClass) {\n        return c;\n    }\n    if (c instanceof CompositeConstraint) {\n        const result = c.constraints.reduce((tmpResult, sc) => {\n            if (tmpResult) {\n                return tmpResult;\n            }\n            return sc instanceof constraintClass ? sc : null;\n        }, null);\n        if (result) {\n            return result;\n        }\n    }\n    return null;\n}\n\nclass ListConstraint {\n    constructor(options) {\n        this.values = ValueMap.fromObject({\n            options: options,\n        });\n    }\n    constrain(value) {\n        const opts = this.values.get('options');\n        if (opts.length === 0) {\n            return value;\n        }\n        const matched = opts.filter((item) => {\n            return item.value === value;\n        }).length > 0;\n        return matched ? value : opts[0].value;\n    }\n}\n\nfunction parseListOptions(value) {\n    var _a;\n    const p = MicroParsers;\n    if (Array.isArray(value)) {\n        return (_a = parseRecord({ items: value }, (p) => ({\n            items: p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            })),\n        }))) === null || _a === void 0 ? void 0 : _a.items;\n    }\n    if (typeof value === 'object') {\n        return p.required.raw(value)\n            .value;\n    }\n    return undefined;\n}\nfunction normalizeListOptions(options) {\n    if (Array.isArray(options)) {\n        return options;\n    }\n    const items = [];\n    Object.keys(options).forEach((text) => {\n        items.push({ text: text, value: options[text] });\n    });\n    return items;\n}\nfunction createListConstraint(options) {\n    return !isEmpty(options)\n        ? new ListConstraint(normalizeListOptions(forceCast(options)))\n        : null;\n}\n\nconst cn$k = ClassName('lst');\nclass ListView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$k());\n        config.viewProps.bindClassModifiers(this.element);\n        const selectElem = doc.createElement('select');\n        selectElem.classList.add(cn$k('s'));\n        config.viewProps.bindDisabled(selectElem);\n        this.element.appendChild(selectElem);\n        this.selectElement = selectElem;\n        const markElem = doc.createElement('div');\n        markElem.classList.add(cn$k('m'));\n        markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        this.element.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value_ = config.value;\n        bindValueMap(this.props_, 'options', (opts) => {\n            removeChildElements(this.selectElement);\n            opts.forEach((item) => {\n                const optionElem = doc.createElement('option');\n                optionElem.textContent = item.text;\n                this.selectElement.appendChild(optionElem);\n            });\n            this.update_();\n        });\n    }\n    update_() {\n        const values = this.props_.get('options').map((o) => o.value);\n        this.selectElement.selectedIndex = values.indexOf(this.value_.rawValue);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ListController {\n    constructor(doc, config) {\n        this.onSelectChange_ = this.onSelectChange_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ListView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.selectElement.addEventListener('change', this.onSelectChange_);\n    }\n    onSelectChange_(e) {\n        const selectElem = forceCast(e.currentTarget);\n        this.value.rawValue =\n            this.props.get('options')[selectElem.selectedIndex].value;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            options: p.required.custom(parseListOptions),\n        }), (result) => {\n            this.props.set('options', normalizeListOptions(result.options));\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            options: this.props.get('options'),\n        });\n    }\n}\n\nconst cn$j = ClassName('pop');\nclass PopupView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$j());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.shows, valueToClassName(this.element, cn$j(undefined, 'v')));\n    }\n}\n\nclass PopupController {\n    constructor(doc, config) {\n        this.shows = createValue(false);\n        this.viewProps = config.viewProps;\n        this.view = new PopupView(doc, {\n            shows: this.shows,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$i = ClassName('txt');\nclass TextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$i());\n        config.viewProps.bindClassModifiers(this.element);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$i('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value_.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass TextController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new TextView(doc, {\n            props: config.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = parsedValue;\n        }\n        this.view.refresh();\n    }\n}\n\nfunction boolToString(value) {\n    return String(value);\n}\nfunction boolFromUnknown(value) {\n    if (value === 'false') {\n        return false;\n    }\n    return !!value;\n}\nfunction BooleanFormatter(value) {\n    return boolToString(value);\n}\n\nfunction composeParsers(parsers) {\n    return (text) => {\n        return parsers.reduce((result, parser) => {\n            if (result !== null) {\n                return result;\n            }\n            return parser(text);\n        }, null);\n    };\n}\n\nconst innerFormatter = createNumberFormatter(0);\nfunction formatPercentage(value) {\n    return innerFormatter(value) + '%';\n}\n\nfunction stringFromUnknown(value) {\n    return String(value);\n}\nfunction formatString(value) {\n    return value;\n}\n\nfunction connectValues({ primary, secondary, forward, backward, }) {\n    let changing = false;\n    function preventFeedback(callback) {\n        if (changing) {\n            return;\n        }\n        changing = true;\n        callback();\n        changing = false;\n    }\n    primary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    secondary.emitter.on('change', (ev) => {\n        preventFeedback(() => {\n            primary.setRawValue(backward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), ev.options);\n        });\n    });\n    preventFeedback(() => {\n        secondary.setRawValue(forward(primary.rawValue, secondary.rawValue), {\n            forceEmit: false,\n            last: true,\n        });\n    });\n}\n\nfunction getStepForKey(keyScale, keys) {\n    const step = keyScale * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n    if (keys.upKey) {\n        return +step;\n    }\n    else if (keys.downKey) {\n        return -step;\n    }\n    return 0;\n}\nfunction getVerticalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowDown',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowUp',\n    };\n}\nfunction getHorizontalStepKeys(ev) {\n    return {\n        altKey: ev.altKey,\n        downKey: ev.key === 'ArrowLeft',\n        shiftKey: ev.shiftKey,\n        upKey: ev.key === 'ArrowRight',\n    };\n}\nfunction isVerticalArrowKey(key) {\n    return key === 'ArrowUp' || key === 'ArrowDown';\n}\nfunction isArrowKey(key) {\n    return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n}\n\nfunction computeOffset$1(ev, elem) {\n    var _a, _b;\n    const win = elem.ownerDocument.defaultView;\n    const rect = elem.getBoundingClientRect();\n    return {\n        x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n        y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n    };\n}\nclass PointerHandler {\n    constructor(element) {\n        this.lastTouch_ = null;\n        this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n        this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n        this.onMouseDown_ = this.onMouseDown_.bind(this);\n        this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n        this.onTouchMove_ = this.onTouchMove_.bind(this);\n        this.onTouchStart_ = this.onTouchStart_.bind(this);\n        this.elem_ = element;\n        this.emitter = new Emitter();\n        element.addEventListener('touchstart', this.onTouchStart_, {\n            passive: false,\n        });\n        element.addEventListener('touchmove', this.onTouchMove_, {\n            passive: true,\n        });\n        element.addEventListener('touchend', this.onTouchEnd_);\n        element.addEventListener('mousedown', this.onMouseDown_);\n    }\n    computePosition_(offset) {\n        const rect = this.elem_.getBoundingClientRect();\n        return {\n            bounds: {\n                width: rect.width,\n                height: rect.height,\n            },\n            point: offset\n                ? {\n                    x: offset.x,\n                    y: offset.y,\n                }\n                : null,\n        };\n    }\n    onMouseDown_(ev) {\n        var _a;\n        ev.preventDefault();\n        (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n        const doc = this.elem_.ownerDocument;\n        doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseMove_(ev) {\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onDocumentMouseUp_(ev) {\n        const doc = this.elem_.ownerDocument;\n        doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n        doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n    onTouchStart_(ev) {\n        ev.preventDefault();\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('down', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchMove_(ev) {\n        const touch = ev.targetTouches.item(0);\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('move', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n        this.lastTouch_ = touch;\n    }\n    onTouchEnd_(ev) {\n        var _a;\n        const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n        const rect = this.elem_.getBoundingClientRect();\n        this.emitter.emit('up', {\n            altKey: ev.altKey,\n            data: this.computePosition_(touch\n                ? {\n                    x: touch.clientX - rect.left,\n                    y: touch.clientY - rect.top,\n                }\n                : undefined),\n            sender: this,\n            shiftKey: ev.shiftKey,\n        });\n    }\n}\n\nconst cn$h = ClassName('txt');\nclass NumberTextView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$h(), cn$h(undefined, 'num'));\n        if (config.arrayPosition) {\n            this.element.classList.add(cn$h(undefined, config.arrayPosition));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$h('i'));\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n        this.dragging_ = config.dragging;\n        this.dragging_.emitter.on('change', this.onDraggingChange_);\n        this.element.classList.add(cn$h());\n        this.inputElement.classList.add(cn$h('i'));\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$h('k'));\n        this.element.appendChild(knobElem);\n        this.knobElement = knobElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'svg');\n        guideElem.classList.add(cn$h('g'));\n        this.knobElement.appendChild(guideElem);\n        const bodyElem = doc.createElementNS(SVG_NS, 'path');\n        bodyElem.classList.add(cn$h('gb'));\n        guideElem.appendChild(bodyElem);\n        this.guideBodyElem_ = bodyElem;\n        const headElem = doc.createElementNS(SVG_NS, 'path');\n        headElem.classList.add(cn$h('gh'));\n        guideElem.appendChild(headElem);\n        this.guideHeadElem_ = headElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(ClassName('tt')());\n        this.knobElement.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.refresh();\n    }\n    onDraggingChange_(ev) {\n        if (ev.rawValue === null) {\n            this.element.classList.remove(cn$h(undefined, 'drg'));\n            return;\n        }\n        this.element.classList.add(cn$h(undefined, 'drg'));\n        const x = ev.rawValue / this.props_.get('pointerScale');\n        const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n        const adx = constrainRange(-aox, -4, +4);\n        this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n        this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n        const formatter = this.props_.get('formatter');\n        this.tooltipElem_.textContent = formatter(this.value.rawValue);\n        this.tooltipElem_.style.left = `${x}px`;\n    }\n    refresh() {\n        const formatter = this.props_.get('formatter');\n        this.inputElement.value = formatter(this.value.rawValue);\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\nclass NumberTextController {\n    constructor(doc, config) {\n        var _a;\n        this.originRawValue_ = 0;\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n        this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.parser_ = config.parser;\n        this.props = config.props;\n        this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.dragging_ = createValue(null);\n        this.view = new NumberTextView(doc, {\n            arrayPosition: config.arrayPosition,\n            dragging: this.dragging_,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n        this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n        const ph = new PointerHandler(this.view.knobElement);\n        ph.emitter.on('down', this.onPointerDown_);\n        ph.emitter.on('move', this.onPointerMove_);\n        ph.emitter.on('up', this.onPointerUp_);\n    }\n    constrainValue_(value) {\n        var _a, _b;\n        const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('min');\n        const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('max');\n        let v = value;\n        if (min !== undefined) {\n            v = Math.max(v, min);\n        }\n        if (max !== undefined) {\n            v = Math.min(v, max);\n        }\n        return v;\n    }\n    onInputChange_(e) {\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        const parsedValue = this.parser_(value);\n        if (!isEmpty(parsedValue)) {\n            this.value.rawValue = this.constrainValue_(parsedValue);\n        }\n        this.view.refresh();\n    }\n    onInputKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onInputKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getVerticalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPointerDown_() {\n        this.originRawValue_ = this.value.rawValue;\n        this.dragging_.rawValue = 0;\n    }\n    computeDraggingValue_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const dx = data.point.x - data.bounds.width / 2;\n        return this.constrainValue_(this.originRawValue_ + dx * this.props.get('pointerScale'));\n    }\n    onPointerMove_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: false,\n            last: false,\n        });\n        this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n    }\n    onPointerUp_(ev) {\n        const v = this.computeDraggingValue_(ev.data);\n        if (v === null) {\n            return;\n        }\n        this.value.setRawValue(v, {\n            forceEmit: true,\n            last: true,\n        });\n        this.dragging_.rawValue = null;\n    }\n}\n\nconst cn$g = ClassName('sld');\nclass SliderView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$g());\n        config.viewProps.bindClassModifiers(this.element);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(cn$g('t'));\n        config.viewProps.bindTabIndex(trackElem);\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const knobElem = doc.createElement('div');\n        knobElem.classList.add(cn$g('k'));\n        this.trackElement.appendChild(knobElem);\n        this.knobElement = knobElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('min'), this.props_.get('max'), 0, 100), 0, 100);\n        this.knobElement.style.width = `${p}%`;\n    }\n    onChange_() {\n        this.update_();\n    }\n}\n\nclass SliderController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.props = config.props;\n        this.view = new SliderView(doc, {\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.trackElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n        this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('min'), this.props.get('max')), opts);\n    }\n    onPointerDownOrMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue + step, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(this.props.get('keyScale'), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$f = ClassName('sldtxt');\nclass SliderTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$f());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(cn$f('s'));\n        this.sliderView_ = config.sliderView;\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$f('t'));\n        this.textView_ = config.textView;\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nclass SliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sliderC_ = new SliderController(doc, {\n            props: config.sliderProps,\n            value: config.value,\n            viewProps: this.viewProps,\n        });\n        this.textC_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            sliderProps: config.sliderProps,\n            value: config.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new SliderTextView(doc, {\n            sliderView: this.sliderC_.view,\n            textView: this.textC_.view,\n        });\n    }\n    get sliderController() {\n        return this.sliderC_;\n    }\n    get textController() {\n        return this.textC_;\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            const sliderProps = this.sliderC_.props;\n            sliderProps.set('max', result.max);\n            sliderProps.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        const sliderProps = this.sliderC_.props;\n        return exportBladeState(null, {\n            max: sliderProps.get('max'),\n            min: sliderProps.get('min'),\n        });\n    }\n}\nfunction createSliderTextProps(config) {\n    return {\n        sliderProps: new ValueMap({\n            keyScale: config.keyScale,\n            max: config.max,\n            min: config.min,\n        }),\n        textProps: new ValueMap({\n            formatter: createValue(config.formatter),\n            keyScale: config.keyScale,\n            pointerScale: createValue(config.pointerScale),\n        }),\n    };\n}\n\nconst CSS_VAR_MAP = {\n    containerUnitSize: 'cnt-usz',\n};\nfunction getCssVar(key) {\n    return `--${CSS_VAR_MAP[key]}`;\n}\n\nfunction createPointDimensionParser(p) {\n    return createNumberTextInputParamsParser(p);\n}\nfunction parsePointDimensionParams(value) {\n    if (!isRecord(value)) {\n        return undefined;\n    }\n    return parseRecord(value, createPointDimensionParser);\n}\nfunction createDimensionConstraint(params, initialValue) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    const cs = createStepConstraint(params, initialValue);\n    if (cs) {\n        constraints.push(cs);\n    }\n    const rs = createRangeConstraint(params);\n    if (rs) {\n        constraints.push(rs);\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction isCompatible(ver) {\n    if (!ver) {\n        return false;\n    }\n    return ver.major === VERSION$1.major;\n}\n\nfunction parsePickerLayout(value) {\n    if (value === 'inline' || value === 'popup') {\n        return value;\n    }\n    return undefined;\n}\n\nfunction writePrimitive(target, value) {\n    target.write(value);\n}\n\nconst cn$e = ClassName('ckb');\nclass CheckboxView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$e());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(cn$e('l'));\n        this.element.appendChild(labelElem);\n        this.labelElement = labelElem;\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$e('i'));\n        inputElem.type = 'checkbox';\n        this.labelElement.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.viewProps.bindDisabled(this.inputElement);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(cn$e('w'));\n        this.labelElement.appendChild(wrapperElem);\n        const markElem = createSvgIconElement(doc, 'check');\n        wrapperElem.appendChild(markElem);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        this.inputElement.checked = this.value.rawValue;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass CheckboxController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.onLabelMouseDown_ = this.onLabelMouseDown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CheckboxView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.inputElement.addEventListener('change', this.onInputChange_);\n        this.view.labelElement.addEventListener('mousedown', this.onLabelMouseDown_);\n    }\n    onInputChange_(ev) {\n        const inputElem = forceCast(ev.currentTarget);\n        this.value.rawValue = inputElem.checked;\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n    onLabelMouseDown_(ev) {\n        ev.preventDefault();\n    }\n}\n\nfunction createConstraint$6(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst BooleanInputPlugin = createPlugin({\n    id: 'input-bool',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            options: p.optional.custom(parseListOptions),\n            readonly: p.optional.constant(false),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        constraint: (args) => createConstraint$6(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new CheckboxController(doc, {\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'boolean') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst cn$d = ClassName('col');\nclass ColorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$d());\n        config.foldable.bindExpandedClass(this.element, cn$d(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, cn$d(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$d('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$d('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$d('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$d('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nfunction rgbToHslInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const c = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    const l = (cmin + cmax) / 2;\n    if (c !== 0) {\n        s = c / (1 - Math.abs(cmax + cmin - 1));\n        if (rp === cmax) {\n            h = (gp - bp) / c;\n        }\n        else if (gp === cmax) {\n            h = 2 + (bp - rp) / c;\n        }\n        else {\n            h = 4 + (rp - gp) / c;\n        }\n        h = h / 6 + (h < 0 ? 1 : 0);\n    }\n    return [h * 360, s * 100, l * 100];\n}\nfunction hslToRgbInt(h, s, l) {\n    const hp = ((h % 360) + 360) % 360;\n    const sp = constrainRange(s / 100, 0, 1);\n    const lp = constrainRange(l / 100, 0, 1);\n    const c = (1 - Math.abs(2 * lp - 1)) * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = lp - c / 2;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction rgbToHsvInt(r, g, b) {\n    const rp = constrainRange(r / 255, 0, 1);\n    const gp = constrainRange(g / 255, 0, 1);\n    const bp = constrainRange(b / 255, 0, 1);\n    const cmax = Math.max(rp, gp, bp);\n    const cmin = Math.min(rp, gp, bp);\n    const d = cmax - cmin;\n    let h;\n    if (d === 0) {\n        h = 0;\n    }\n    else if (cmax === rp) {\n        h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n    }\n    else if (cmax === gp) {\n        h = 60 * ((bp - rp) / d + 2);\n    }\n    else {\n        h = 60 * ((rp - gp) / d + 4);\n    }\n    const s = cmax === 0 ? 0 : d / cmax;\n    const v = cmax;\n    return [h, s * 100, v * 100];\n}\nfunction hsvToRgbInt(h, s, v) {\n    const hp = loopRange(h, 360);\n    const sp = constrainRange(s / 100, 0, 1);\n    const vp = constrainRange(v / 100, 0, 1);\n    const c = vp * sp;\n    const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n    const m = vp - c;\n    let rp, gp, bp;\n    if (hp >= 0 && hp < 60) {\n        [rp, gp, bp] = [c, x, 0];\n    }\n    else if (hp >= 60 && hp < 120) {\n        [rp, gp, bp] = [x, c, 0];\n    }\n    else if (hp >= 120 && hp < 180) {\n        [rp, gp, bp] = [0, c, x];\n    }\n    else if (hp >= 180 && hp < 240) {\n        [rp, gp, bp] = [0, x, c];\n    }\n    else if (hp >= 240 && hp < 300) {\n        [rp, gp, bp] = [x, 0, c];\n    }\n    else {\n        [rp, gp, bp] = [c, 0, x];\n    }\n    return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n}\nfunction hslToHsvInt(h, s, l) {\n    const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n    return [\n        h,\n        sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n        l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n    ];\n}\nfunction hsvToHslInt(h, s, v) {\n    const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n    return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n}\nfunction removeAlphaComponent(comps) {\n    return [comps[0], comps[1], comps[2]];\n}\nfunction appendAlphaComponent(comps, alpha) {\n    return [comps[0], comps[1], comps[2], alpha];\n}\nconst MODE_CONVERTER_MAP = {\n    hsl: {\n        hsl: (h, s, l) => [h, s, l],\n        hsv: hslToHsvInt,\n        rgb: hslToRgbInt,\n    },\n    hsv: {\n        hsl: hsvToHslInt,\n        hsv: (h, s, v) => [h, s, v],\n        rgb: hsvToRgbInt,\n    },\n    rgb: {\n        hsl: rgbToHslInt,\n        hsv: rgbToHsvInt,\n        rgb: (r, g, b) => [r, g, b],\n    },\n};\nfunction getColorMaxComponents(mode, type) {\n    return [\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n    ];\n}\nfunction loopHueRange(hue, max) {\n    return hue === max ? max : loopRange(hue, max);\n}\nfunction constrainColorComponents(components, mode, type) {\n    var _a;\n    const ms = getColorMaxComponents(mode, type);\n    return [\n        mode === 'rgb'\n            ? constrainRange(components[0], 0, ms[0])\n            : loopHueRange(components[0], ms[0]),\n        constrainRange(components[1], 0, ms[1]),\n        constrainRange(components[2], 0, ms[2]),\n        constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n    ];\n}\nfunction convertColorType(comps, mode, from, to) {\n    const fms = getColorMaxComponents(mode, from);\n    const tms = getColorMaxComponents(mode, to);\n    return comps.map((c, index) => (c / fms[index]) * tms[index]);\n}\nfunction convertColor(components, from, to) {\n    const intComps = convertColorType(components, from.mode, from.type, 'int');\n    const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n    return convertColorType(result, to.mode, 'int', to.type);\n}\n\nclass IntColor {\n    static black() {\n        return new IntColor([0, 0, 0], 'rgb');\n    }\n    constructor(comps, mode) {\n        this.type = 'int';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst cn$c = ClassName('colp');\nclass ColorPickerView {\n    constructor(doc, config) {\n        this.alphaViews_ = null;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$c());\n        config.viewProps.bindClassModifiers(this.element);\n        const hsvElem = doc.createElement('div');\n        hsvElem.classList.add(cn$c('hsv'));\n        const svElem = doc.createElement('div');\n        svElem.classList.add(cn$c('sv'));\n        this.svPaletteView_ = config.svPaletteView;\n        svElem.appendChild(this.svPaletteView_.element);\n        hsvElem.appendChild(svElem);\n        const hElem = doc.createElement('div');\n        hElem.classList.add(cn$c('h'));\n        this.hPaletteView_ = config.hPaletteView;\n        hElem.appendChild(this.hPaletteView_.element);\n        hsvElem.appendChild(hElem);\n        this.element.appendChild(hsvElem);\n        const rgbElem = doc.createElement('div');\n        rgbElem.classList.add(cn$c('rgb'));\n        this.textsView_ = config.textsView;\n        rgbElem.appendChild(this.textsView_.element);\n        this.element.appendChild(rgbElem);\n        if (config.alphaViews) {\n            this.alphaViews_ = {\n                palette: config.alphaViews.palette,\n                text: config.alphaViews.text,\n            };\n            const aElem = doc.createElement('div');\n            aElem.classList.add(cn$c('a'));\n            const apElem = doc.createElement('div');\n            apElem.classList.add(cn$c('ap'));\n            apElem.appendChild(this.alphaViews_.palette.element);\n            aElem.appendChild(apElem);\n            const atElem = doc.createElement('div');\n            atElem.classList.add(cn$c('at'));\n            atElem.appendChild(this.alphaViews_.text.element);\n            aElem.appendChild(atElem);\n            this.element.appendChild(aElem);\n        }\n    }\n    get allFocusableElements() {\n        const elems = [\n            this.svPaletteView_.element,\n            this.hPaletteView_.element,\n            this.textsView_.modeSelectElement,\n            ...this.textsView_.inputViews.map((v) => v.inputElement),\n        ];\n        if (this.alphaViews_) {\n            elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n        }\n        return elems;\n    }\n}\n\nfunction parseColorType(value) {\n    return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n}\nfunction parseColorInputParams(params) {\n    return parseRecord(params, (p) => ({\n        color: p.optional.object({\n            alpha: p.optional.boolean,\n            type: p.optional.custom(parseColorType),\n        }),\n        expanded: p.optional.boolean,\n        picker: p.optional.custom(parsePickerLayout),\n        readonly: p.optional.constant(false),\n    }));\n}\nfunction getKeyScaleForColor(forAlpha) {\n    return forAlpha ? 0.1 : 1;\n}\nfunction extractColorType(params) {\n    var _a;\n    return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n}\n\nclass FloatColor {\n    constructor(comps, mode) {\n        this.type = 'float';\n        this.mode = mode;\n        this.comps_ = constrainColorComponents(comps, mode, this.type);\n    }\n    getComponents(opt_mode) {\n        return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type: this.type }), this.comps_[3]);\n    }\n    toRgbaObject() {\n        const rgbComps = this.getComponents('rgb');\n        return {\n            r: rgbComps[0],\n            g: rgbComps[1],\n            b: rgbComps[2],\n            a: rgbComps[3],\n        };\n    }\n}\n\nconst TYPE_TO_CONSTRUCTOR_MAP = {\n    int: (comps, mode) => new IntColor(comps, mode),\n    float: (comps, mode) => new FloatColor(comps, mode),\n};\nfunction createColor(comps, mode, type) {\n    return TYPE_TO_CONSTRUCTOR_MAP[type](comps, mode);\n}\nfunction isFloatColor(c) {\n    return c.type === 'float';\n}\nfunction isIntColor(c) {\n    return c.type === 'int';\n}\nfunction convertFloatToInt(cf) {\n    const comps = cf.getComponents();\n    const ms = getColorMaxComponents(cf.mode, 'int');\n    return new IntColor([\n        Math.round(mapRange(comps[0], 0, 1, 0, ms[0])),\n        Math.round(mapRange(comps[1], 0, 1, 0, ms[1])),\n        Math.round(mapRange(comps[2], 0, 1, 0, ms[2])),\n        comps[3],\n    ], cf.mode);\n}\nfunction convertIntToFloat(ci) {\n    const comps = ci.getComponents();\n    const ms = getColorMaxComponents(ci.mode, 'int');\n    return new FloatColor([\n        mapRange(comps[0], 0, ms[0], 0, 1),\n        mapRange(comps[1], 0, ms[1], 0, 1),\n        mapRange(comps[2], 0, ms[2], 0, 1),\n        comps[3],\n    ], ci.mode);\n}\nfunction mapColorType(c, type) {\n    if (c.type === type) {\n        return c;\n    }\n    if (isIntColor(c) && type === 'float') {\n        return convertIntToFloat(c);\n    }\n    if (isFloatColor(c) && type === 'int') {\n        return convertFloatToInt(c);\n    }\n    throw TpError.shouldNeverHappen();\n}\n\nfunction equalsStringColorFormat(f1, f2) {\n    return (f1.alpha === f2.alpha &&\n        f1.mode === f2.mode &&\n        f1.notation === f2.notation &&\n        f1.type === f2.type);\n}\nfunction parseCssNumberOrPercentage(text, max) {\n    const m = text.match(/^(.+)%$/);\n    if (!m) {\n        return Math.min(parseFloat(text), max);\n    }\n    return Math.min(parseFloat(m[1]) * 0.01 * max, max);\n}\nconst ANGLE_TO_DEG_MAP = {\n    deg: (angle) => angle,\n    grad: (angle) => (angle * 360) / 400,\n    rad: (angle) => (angle * 360) / (2 * Math.PI),\n    turn: (angle) => angle * 360,\n};\nfunction parseCssNumberOrAngle(text) {\n    const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n    if (!m) {\n        return parseFloat(text);\n    }\n    const angle = parseFloat(m[1]);\n    const unit = m[2];\n    return ANGLE_TO_DEG_MAP[unit](angle);\n}\nfunction parseFunctionalRgbColorComponents(text) {\n    const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbColor(text) {\n    const comps = parseFunctionalRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalRgbaColorComponents(text) {\n    const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrPercentage(m[1], 255),\n        parseCssNumberOrPercentage(m[2], 255),\n        parseCssNumberOrPercentage(m[3], 255),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalRgbaColor(text) {\n    const comps = parseFunctionalRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseFunctionalHslColorComponents(text) {\n    const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslColor(text) {\n    const comps = parseFunctionalHslColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHslaColorComponents(text) {\n    const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseCssNumberOrAngle(m[1]),\n        parseCssNumberOrPercentage(m[2], 100),\n        parseCssNumberOrPercentage(m[3], 100),\n        parseCssNumberOrPercentage(m[4], 1),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction parseFunctionalHslaColor(text) {\n    const comps = parseHslaColorComponents(text);\n    return comps ? new IntColor(comps, 'hsl') : null;\n}\nfunction parseHexRgbColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbColor(text) {\n    const comps = parseHexRgbColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseHexRgbaColorComponents(text) {\n    const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n    if (mRgb) {\n        return [\n            parseInt(mRgb[1] + mRgb[1], 16),\n            parseInt(mRgb[2] + mRgb[2], 16),\n            parseInt(mRgb[3] + mRgb[3], 16),\n            mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n    if (mRrggbb) {\n        return [\n            parseInt(mRrggbb[1], 16),\n            parseInt(mRrggbb[2], 16),\n            parseInt(mRrggbb[3], 16),\n            mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n        ];\n    }\n    return null;\n}\nfunction parseHexRgbaColor(text) {\n    const comps = parseHexRgbaColorComponents(text);\n    return comps ? new IntColor(comps, 'rgb') : null;\n}\nfunction parseObjectRgbColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n    ];\n    if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nfunction parseObjectRgbaColorComponents(text) {\n    const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n    if (!m) {\n        return null;\n    }\n    const comps = [\n        parseFloat(m[1]),\n        parseFloat(m[2]),\n        parseFloat(m[3]),\n        parseFloat(m[4]),\n    ];\n    if (isNaN(comps[0]) ||\n        isNaN(comps[1]) ||\n        isNaN(comps[2]) ||\n        isNaN(comps[3])) {\n        return null;\n    }\n    return comps;\n}\nfunction createObjectRgbaColorParser(type) {\n    return (text) => {\n        const comps = parseObjectRgbaColorComponents(text);\n        return comps ? createColor(comps, 'rgb', type) : null;\n    };\n}\nconst PARSER_AND_RESULT = [\n    {\n        parser: parseHexRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseHexRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n        },\n    },\n    {\n        parser: parseFunctionalRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseFunctionalHslColorComponents,\n        result: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseHslaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n        },\n    },\n    {\n        parser: parseObjectRgbColorComponents,\n        result: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n    {\n        parser: parseObjectRgbaColorComponents,\n        result: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'object',\n        },\n    },\n];\nfunction detectStringColor(text) {\n    return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n        if (prev) {\n            return prev;\n        }\n        return parser(text) ? detection : null;\n    }, null);\n}\nfunction detectStringColorFormat(text, type = 'int') {\n    const r = detectStringColor(text);\n    if (!r) {\n        return null;\n    }\n    if (r.notation === 'hex' && type !== 'float') {\n        return Object.assign(Object.assign({}, r), { type: 'int' });\n    }\n    if (r.notation === 'func') {\n        return Object.assign(Object.assign({}, r), { type: type });\n    }\n    return null;\n}\nfunction createColorStringParser(type) {\n    const parsers = [\n        parseHexRgbColor,\n        parseHexRgbaColor,\n        parseFunctionalRgbColor,\n        parseFunctionalRgbaColor,\n        parseFunctionalHslColor,\n        parseFunctionalHslaColor,\n    ];\n    if (type === 'int') {\n        parsers.push(createObjectRgbColorParser('int'), createObjectRgbaColorParser('int'));\n    }\n    if (type === 'float') {\n        parsers.push(createObjectRgbColorParser('float'), createObjectRgbaColorParser('float'));\n    }\n    const parser = composeParsers(parsers);\n    return (text) => {\n        const result = parser(text);\n        return result ? mapColorType(result, type) : null;\n    };\n}\nfunction readIntColorString(value) {\n    const parser = createColorStringParser('int');\n    if (typeof value !== 'string') {\n        return IntColor.black();\n    }\n    const result = parser(value);\n    return result !== null && result !== void 0 ? result : IntColor.black();\n}\nfunction zerofill(comp) {\n    const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n}\nfunction colorToHexRgbString(value, prefix = '#') {\n    const hexes = removeAlphaComponent(value.getComponents('rgb'))\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToHexRgbaString(value, prefix = '#') {\n    const rgbaComps = value.getComponents('rgb');\n    const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n        .map(zerofill)\n        .join('');\n    return `${prefix}${hexes}`;\n}\nfunction colorToFunctionalRgbString(value) {\n    const formatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('rgb')).map((comp) => formatter(comp));\n    return `rgb(${comps.join(', ')})`;\n}\nfunction colorToFunctionalRgbaString(value) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(0);\n    const ci = mapColorType(value, 'int');\n    const comps = ci.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return formatter(comp);\n    });\n    return `rgba(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = removeAlphaComponent(ci.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n    return `hsl(${comps.join(', ')})`;\n}\nfunction colorToFunctionalHslaString(value) {\n    const formatters = [\n        createNumberFormatter(0),\n        formatPercentage,\n        formatPercentage,\n        createNumberFormatter(2),\n    ];\n    const ci = mapColorType(value, 'int');\n    const comps = ci\n        .getComponents('hsl')\n        .map((comp, index) => formatters[index](comp));\n    return `hsla(${comps.join(', ')})`;\n}\nfunction colorToObjectRgbString(value, type) {\n    const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b'];\n    const cc = mapColorType(value, type);\n    const comps = removeAlphaComponent(cc.getComponents('rgb')).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbColorFormatter(type) {\n    return (value) => colorToObjectRgbString(value, type);\n}\nfunction colorToObjectRgbaString(value, type) {\n    const aFormatter = createNumberFormatter(2);\n    const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n    const names = ['r', 'g', 'b', 'a'];\n    const cc = mapColorType(value, type);\n    const comps = cc.getComponents('rgb').map((comp, index) => {\n        const formatter = index === 3 ? aFormatter : rgbFormatter;\n        return `${names[index]}: ${formatter(comp)}`;\n    });\n    return `{${comps.join(', ')}}`;\n}\nfunction createObjectRgbaColorFormatter(type) {\n    return (value) => colorToObjectRgbaString(value, type);\n}\nconst FORMAT_AND_STRINGIFIERS = [\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'hex',\n            type: 'int',\n        },\n        stringifier: colorToHexRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'rgb',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalRgbaString,\n    },\n    {\n        format: {\n            alpha: false,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslString,\n    },\n    {\n        format: {\n            alpha: true,\n            mode: 'hsl',\n            notation: 'func',\n            type: 'int',\n        },\n        stringifier: colorToFunctionalHslaString,\n    },\n    ...['int', 'float'].reduce((prev, type) => {\n        return [\n            ...prev,\n            {\n                format: {\n                    alpha: false,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbColorFormatter(type),\n            },\n            {\n                format: {\n                    alpha: true,\n                    mode: 'rgb',\n                    notation: 'object',\n                    type: type,\n                },\n                stringifier: createObjectRgbaColorFormatter(type),\n            },\n        ];\n    }, []),\n];\nfunction findColorStringifier(format) {\n    return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n        if (prev) {\n            return prev;\n        }\n        return equalsStringColorFormat(fas.format, format)\n            ? fas.stringifier\n            : null;\n    }, null);\n}\n\nconst cn$b = ClassName('apl');\nclass APaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$b());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const barElem = doc.createElement('div');\n        barElem.classList.add(cn$b('b'));\n        this.element.appendChild(barElem);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$b('c'));\n        barElem.appendChild(colorElem);\n        this.colorElem_ = colorElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$b('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(cn$b('p'));\n        this.markerElem_.appendChild(previewElem);\n        this.previewElem_ = previewElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const rgbaComps = c.getComponents('rgb');\n        const leftColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n        const rightColor = new IntColor([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n        const gradientComps = [\n            'to right',\n            colorToFunctionalRgbaString(leftColor),\n            colorToFunctionalRgbaString(rightColor),\n        ];\n        this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n        this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n        const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass APaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new APaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const alpha = d.point.x / d.bounds.width;\n        const c = this.value.rawValue;\n        const [h, s, v] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, alpha], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, s, v, a + step], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(true), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$a = ClassName('coltxt');\nfunction createModeSelectElement(doc) {\n    const selectElem = doc.createElement('select');\n    const items = [\n        { text: 'RGB', value: 'rgb' },\n        { text: 'HSL', value: 'hsl' },\n        { text: 'HSV', value: 'hsv' },\n        { text: 'HEX', value: 'hex' },\n    ];\n    selectElem.appendChild(items.reduce((frag, item) => {\n        const optElem = doc.createElement('option');\n        optElem.textContent = item.text;\n        optElem.value = item.value;\n        frag.appendChild(optElem);\n        return frag;\n    }, doc.createDocumentFragment()));\n    return selectElem;\n}\nclass ColorTextsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$a());\n        config.viewProps.bindClassModifiers(this.element);\n        const modeElem = doc.createElement('div');\n        modeElem.classList.add(cn$a('m'));\n        this.modeElem_ = createModeSelectElement(doc);\n        this.modeElem_.classList.add(cn$a('ms'));\n        modeElem.appendChild(this.modeSelectElement);\n        config.viewProps.bindDisabled(this.modeElem_);\n        const modeMarkerElem = doc.createElement('div');\n        modeMarkerElem.classList.add(cn$a('mm'));\n        modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n        modeElem.appendChild(modeMarkerElem);\n        this.element.appendChild(modeElem);\n        const inputsElem = doc.createElement('div');\n        inputsElem.classList.add(cn$a('w'));\n        this.element.appendChild(inputsElem);\n        this.inputsElem_ = inputsElem;\n        this.inputViews_ = config.inputViews;\n        this.applyInputViews_();\n        bindValue(config.mode, (mode) => {\n            this.modeElem_.value = mode;\n        });\n    }\n    get modeSelectElement() {\n        return this.modeElem_;\n    }\n    get inputViews() {\n        return this.inputViews_;\n    }\n    set inputViews(inputViews) {\n        this.inputViews_ = inputViews;\n        this.applyInputViews_();\n    }\n    applyInputViews_() {\n        removeChildElements(this.inputsElem_);\n        const doc = this.element.ownerDocument;\n        this.inputViews_.forEach((v) => {\n            const compElem = doc.createElement('div');\n            compElem.classList.add(cn$a('c'));\n            compElem.appendChild(v.element);\n            this.inputsElem_.appendChild(compElem);\n        });\n    }\n}\n\nfunction createFormatter$2(type) {\n    return createNumberFormatter(type === 'float' ? 2 : 0);\n}\nfunction createConstraint$5(mode, type, index) {\n    const max = getColorMaxComponents(mode, type)[index];\n    return new DefiniteRangeConstraint({\n        min: 0,\n        max: max,\n    });\n}\nfunction createComponentController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: ValueMap.fromObject({\n            formatter: createFormatter$2(config.colorType),\n            keyScale: getKeyScaleForColor(false),\n            pointerScale: config.colorType === 'float' ? 0.01 : 1,\n        }),\n        value: createValue(0, {\n            constraint: createConstraint$5(config.colorMode, config.colorType, index),\n        }),\n        viewProps: config.viewProps,\n    });\n}\nfunction createComponentControllers(doc, config) {\n    const cc = {\n        colorMode: config.colorMode,\n        colorType: config.colorType,\n        parser: parseNumber,\n        viewProps: config.viewProps,\n    };\n    return [0, 1, 2].map((i) => {\n        const c = createComponentController(doc, cc, i);\n        connectValues({\n            primary: config.value,\n            secondary: c.value,\n            forward(p) {\n                const mc = mapColorType(p, config.colorType);\n                return mc.getComponents(config.colorMode)[i];\n            },\n            backward(p, s) {\n                const pickedMode = config.colorMode;\n                const mc = mapColorType(p, config.colorType);\n                const comps = mc.getComponents(pickedMode);\n                comps[i] = s;\n                const c = createColor(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, config.colorType);\n                return mapColorType(c, 'int');\n            },\n        });\n        return c;\n    });\n}\nfunction createHexController(doc, config) {\n    const c = new TextController(doc, {\n        parser: createColorStringParser('int'),\n        props: ValueMap.fromObject({\n            formatter: colorToHexRgbString,\n        }),\n        value: createValue(IntColor.black()),\n        viewProps: config.viewProps,\n    });\n    connectValues({\n        primary: config.value,\n        secondary: c.value,\n        forward: (p) => new IntColor(removeAlphaComponent(p.getComponents()), p.mode),\n        backward: (p, s) => new IntColor(appendAlphaComponent(removeAlphaComponent(s.getComponents(p.mode)), p.getComponents()[3]), p.mode),\n    });\n    return [c];\n}\nfunction isColorMode(mode) {\n    return mode !== 'hex';\n}\nclass ColorTextsController {\n    constructor(doc, config) {\n        this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n        this.colorType_ = config.colorType;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.colorMode = createValue(this.value.rawValue.mode);\n        this.ccs_ = this.createComponentControllers_(doc);\n        this.view = new ColorTextsView(doc, {\n            mode: this.colorMode,\n            inputViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            viewProps: this.viewProps,\n        });\n        this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n    }\n    createComponentControllers_(doc) {\n        const mode = this.colorMode.rawValue;\n        if (isColorMode(mode)) {\n            return createComponentControllers(doc, {\n                colorMode: mode,\n                colorType: this.colorType_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n        return createHexController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n    onModeSelectChange_(ev) {\n        const selectElem = ev.currentTarget;\n        this.colorMode.rawValue = selectElem.value;\n        this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n        this.view.inputViews = this.ccs_.map((cc) => cc.view);\n    }\n}\n\nconst cn$9 = ClassName('hpl');\nclass HPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$9());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const colorElem = doc.createElement('div');\n        colorElem.classList.add(cn$9('c'));\n        this.element.appendChild(colorElem);\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$9('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const c = this.value.rawValue;\n        const [h] = c.getComponents('hsv');\n        this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new IntColor([h, 100, 100], 'hsv'));\n        const left = mapRange(h, 0, 360, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass HPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new HPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n        const c = this.value.rawValue;\n        const [, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([hue, s, v, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const [h, s, v, a] = c.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h + step, s, v, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const step = getStepForKey(getKeyScaleForColor(false), getHorizontalStepKeys(ev));\n        if (step === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nconst cn$8 = ClassName('svp');\nconst CANVAS_RESOL = 64;\nclass SvPaletteView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$8());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const canvasElem = doc.createElement('canvas');\n        canvasElem.height = CANVAS_RESOL;\n        canvasElem.width = CANVAS_RESOL;\n        canvasElem.classList.add(cn$8('c'));\n        this.element.appendChild(canvasElem);\n        this.canvasElement = canvasElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$8('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.update_();\n    }\n    update_() {\n        const ctx = getCanvasContext(this.canvasElement);\n        if (!ctx) {\n            return;\n        }\n        const c = this.value.rawValue;\n        const hsvComps = c.getComponents('hsv');\n        const width = this.canvasElement.width;\n        const height = this.canvasElement.height;\n        const imgData = ctx.getImageData(0, 0, width, height);\n        const data = imgData.data;\n        for (let iy = 0; iy < height; iy++) {\n            for (let ix = 0; ix < width; ix++) {\n                const s = mapRange(ix, 0, width, 0, 100);\n                const v = mapRange(iy, 0, height, 100, 0);\n                const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                const i = (iy * width + ix) * 4;\n                data[i] = rgbComps[0];\n                data[i + 1] = rgbComps[1];\n                data[i + 2] = rgbComps[2];\n                data[i + 3] = 255;\n            }\n        }\n        ctx.putImageData(imgData, 0, 0);\n        const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n        this.markerElem_.style.left = `${left}%`;\n        const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n        this.markerElem_.style.top = `${top}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass SvPaletteController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SvPaletteView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.element);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n        const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n        const [h, , , a] = this.value.rawValue.getComponents('hsv');\n        this.value.setRawValue(new IntColor([h, saturation, value, a], 'hsv'), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(new IntColor([h, s + ds, v + dv, a], 'hsv'), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        const keyScale = getKeyScaleForColor(false);\n        const ds = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const dv = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (ds === 0 && dv === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass ColorPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.hPaletteC_ = new HPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.svPaletteC_ = new SvPaletteController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.alphaIcs_ = config.supportsAlpha\n            ? {\n                palette: new APaletteController(doc, {\n                    value: this.value,\n                    viewProps: this.viewProps,\n                }),\n                text: new NumberTextController(doc, {\n                    parser: parseNumber,\n                    props: ValueMap.fromObject({\n                        pointerScale: 0.01,\n                        keyScale: 0.1,\n                        formatter: createNumberFormatter(2),\n                    }),\n                    value: createValue(0, {\n                        constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                    }),\n                    viewProps: this.viewProps,\n                }),\n            }\n            : null;\n        if (this.alphaIcs_) {\n            connectValues({\n                primary: this.value,\n                secondary: this.alphaIcs_.text.value,\n                forward: (p) => p.getComponents()[3],\n                backward: (p, s) => {\n                    const comps = p.getComponents();\n                    comps[3] = s;\n                    return new IntColor(comps, p.mode);\n                },\n            });\n        }\n        this.textsC_ = new ColorTextsController(doc, {\n            colorType: config.colorType,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorPickerView(doc, {\n            alphaViews: this.alphaIcs_\n                ? {\n                    palette: this.alphaIcs_.palette.view,\n                    text: this.alphaIcs_.text.view,\n                }\n                : null,\n            hPaletteView: this.hPaletteC_.view,\n            supportsAlpha: config.supportsAlpha,\n            svPaletteView: this.svPaletteC_.view,\n            textsView: this.textsC_.view,\n            viewProps: this.viewProps,\n        });\n    }\n    get textsController() {\n        return this.textsC_;\n    }\n}\n\nconst cn$7 = ClassName('colsw');\nclass ColorSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$7());\n        config.viewProps.bindClassModifiers(this.element);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(cn$7('sw'));\n        this.element.appendChild(swatchElem);\n        this.swatchElem_ = swatchElem;\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$7('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        this.update_();\n    }\n    update_() {\n        const value = this.value.rawValue;\n        this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass ColorSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new ColorSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nclass ColorController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new ColorSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new TextController(doc, {\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                formatter: config.formatter,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new ColorView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new ColorPickerController(doc, {\n            colorType: config.colorType,\n            supportsAlpha: config.supportsAlpha,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(pickerC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction colorToRgbNumber(value) {\n    return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n        return (result << 8) | (Math.floor(comp) & 0xff);\n    }, 0);\n}\nfunction colorToRgbaNumber(value) {\n    return (value.getComponents('rgb').reduce((result, comp, index) => {\n        const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n        return (result << 8) | hex;\n    }, 0) >>> 0);\n}\nfunction numberToRgbColor(num) {\n    return new IntColor([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n}\nfunction numberToRgbaColor(num) {\n    return new IntColor([\n        (num >> 24) & 0xff,\n        (num >> 16) & 0xff,\n        (num >> 8) & 0xff,\n        mapRange(num & 0xff, 0, 255, 0, 1),\n    ], 'rgb');\n}\nfunction colorFromRgbNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbColor(value);\n}\nfunction colorFromRgbaNumber(value) {\n    if (typeof value !== 'number') {\n        return IntColor.black();\n    }\n    return numberToRgbaColor(value);\n}\n\nfunction isRgbColorComponent(obj, key) {\n    if (typeof obj !== 'object' || isEmpty(obj)) {\n        return false;\n    }\n    return key in obj && typeof obj[key] === 'number';\n}\nfunction isRgbColorObject(obj) {\n    return (isRgbColorComponent(obj, 'r') &&\n        isRgbColorComponent(obj, 'g') &&\n        isRgbColorComponent(obj, 'b'));\n}\nfunction isRgbaColorObject(obj) {\n    return isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n}\nfunction isColorObject(obj) {\n    return isRgbColorObject(obj);\n}\nfunction equalsColor(v1, v2) {\n    if (v1.mode !== v2.mode) {\n        return false;\n    }\n    if (v1.type !== v2.type) {\n        return false;\n    }\n    const comps1 = v1.getComponents();\n    const comps2 = v2.getComponents();\n    for (let i = 0; i < comps1.length; i++) {\n        if (comps1[i] !== comps2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction createColorComponentsFromRgbObject(obj) {\n    return 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n}\n\nfunction createColorStringWriter(format) {\n    const stringify = findColorStringifier(format);\n    return stringify\n        ? (target, value) => {\n            writePrimitive(target, stringify(value));\n        }\n        : null;\n}\nfunction createColorNumberWriter(supportsAlpha) {\n    const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n    return (target, value) => {\n        writePrimitive(target, colorToNumber(value));\n    };\n}\nfunction writeRgbaColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n    target.writeProperty('a', obj.a);\n}\nfunction writeRgbColorObject(target, value, type) {\n    const cc = mapColorType(value, type);\n    const obj = cc.toRgbaObject();\n    target.writeProperty('r', obj.r);\n    target.writeProperty('g', obj.g);\n    target.writeProperty('b', obj.b);\n}\nfunction createColorObjectWriter(supportsAlpha, type) {\n    return (target, inValue) => {\n        if (supportsAlpha) {\n            writeRgbaColorObject(target, inValue, type);\n        }\n        else {\n            writeRgbColorObject(target, inValue, type);\n        }\n    };\n}\n\nfunction shouldSupportAlpha$1(inputParams) {\n    var _a;\n    if ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha) {\n        return true;\n    }\n    return false;\n}\nfunction createFormatter$1(supportsAlpha) {\n    return supportsAlpha\n        ? (v) => colorToHexRgbaString(v, '0x')\n        : (v) => colorToHexRgbString(v, '0x');\n}\nfunction isForColor(params) {\n    if ('color' in params) {\n        return true;\n    }\n    if (params.view === 'color') {\n        return true;\n    }\n    return false;\n}\nconst NumberColorInputPlugin = createPlugin({\n    id: 'input-color-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        if (!isForColor(params)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { supportsAlpha: shouldSupportAlpha$1(params) }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => {\n            return args.params.supportsAlpha\n                ? colorFromRgbaNumber\n                : colorFromRgbNumber;\n        },\n        equals: equalsColor,\n        writer: (args) => {\n            return createColorNumberWriter(args.params.supportsAlpha);\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: 'int',\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createFormatter$1(args.params.supportsAlpha),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction colorFromObject(value, type) {\n    if (!isColorObject(value)) {\n        return mapColorType(IntColor.black(), type);\n    }\n    if (type === 'int') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new IntColor(comps, 'rgb');\n    }\n    if (type === 'float') {\n        const comps = createColorComponentsFromRgbObject(value);\n        return new FloatColor(comps, 'rgb');\n    }\n    return mapColorType(IntColor.black(), 'int');\n}\n\nfunction shouldSupportAlpha(initialValue) {\n    return isRgbaColorObject(initialValue);\n}\nfunction createColorObjectBindingReader(type) {\n    return (value) => {\n        const c = colorFromObject(value, type);\n        return mapColorType(c, 'int');\n    };\n}\nfunction createColorObjectFormatter(supportsAlpha, type) {\n    return (value) => {\n        if (supportsAlpha) {\n            return colorToObjectRgbaString(value, type);\n        }\n        return colorToObjectRgbString(value, type);\n    };\n}\nconst ObjectColorInputPlugin = createPlugin({\n    id: 'input-color-object',\n    type: 'input',\n    accept: (value, params) => {\n        var _a;\n        if (!isColorObject(value)) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { colorType: (_a = extractColorType(params)) !== null && _a !== void 0 ? _a : 'int' }),\n            }\n            : null;\n    },\n    binding: {\n        reader: (args) => createColorObjectBindingReader(args.params.colorType),\n        equals: equalsColor,\n        writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), args.params.colorType),\n    },\n    controller: (args) => {\n        var _a, _b;\n        const supportsAlpha = isRgbaColorObject(args.initialValue);\n        return new ColorController(args.document, {\n            colorType: args.params.colorType,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: createColorObjectFormatter(supportsAlpha, args.params.colorType),\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: supportsAlpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst StringColorInputPlugin = createPlugin({\n    id: 'input-color-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        if (params.view === 'text') {\n            return null;\n        }\n        const format = detectStringColorFormat(value, extractColorType(params));\n        if (!format) {\n            return null;\n        }\n        const stringifier = findColorStringifier(format);\n        if (!stringifier) {\n            return null;\n        }\n        const result = parseColorInputParams(params);\n        return result\n            ? {\n                initialValue: value,\n                params: Object.assign(Object.assign({}, result), { format: format, stringifier: stringifier }),\n            }\n            : null;\n    },\n    binding: {\n        reader: () => readIntColorString,\n        equals: equalsColor,\n        writer: (args) => {\n            const writer = createColorStringWriter(args.params.format);\n            if (!writer) {\n                throw TpError.notBindable();\n            }\n            return writer;\n        },\n    },\n    controller: (args) => {\n        var _a, _b;\n        return new ColorController(args.document, {\n            colorType: args.params.format.type,\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            formatter: args.params.stringifier,\n            parser: createColorStringParser('int'),\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            supportsAlpha: args.params.format.alpha,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass PointNdConstraint {\n    constructor(config) {\n        this.components = config.components;\n        this.asm_ = config.assembly;\n    }\n    constrain(value) {\n        const comps = this.asm_\n            .toComponents(value)\n            .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n        return this.asm_.fromComponents(comps);\n    }\n}\n\nconst cn$6 = ClassName('pndtxt');\nclass PointNdTextView {\n    constructor(doc, config) {\n        this.textViews = config.textViews;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$6());\n        this.textViews.forEach((v) => {\n            const axisElem = doc.createElement('div');\n            axisElem.classList.add(cn$6('a'));\n            axisElem.appendChild(v.element);\n            this.element.appendChild(axisElem);\n        });\n    }\n}\n\nfunction createAxisController(doc, config, index) {\n    return new NumberTextController(doc, {\n        arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n        parser: config.parser,\n        props: config.axes[index].textProps,\n        value: createValue(0, {\n            constraint: config.axes[index].constraint,\n        }),\n        viewProps: config.viewProps,\n    });\n}\nclass PointNdTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n        this.acs_.forEach((c, index) => {\n            connectValues({\n                primary: this.value,\n                secondary: c.value,\n                forward: (p) => config.assembly.toComponents(p)[index],\n                backward: (p, s) => {\n                    const comps = config.assembly.toComponents(p);\n                    comps[index] = s;\n                    return config.assembly.fromComponents(comps);\n                },\n            });\n        });\n        this.view = new PointNdTextView(doc, {\n            textViews: this.acs_.map((ac) => ac.view),\n        });\n    }\n    get textControllers() {\n        return this.acs_;\n    }\n}\n\nclass SliderInputBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(max) {\n        this.controller.valueController.sliderController.props.set('min', max);\n    }\n}\n\nfunction createConstraint$4(params, initialValue) {\n    const constraints = [];\n    const sc = createStepConstraint(params, initialValue);\n    if (sc) {\n        constraints.push(sc);\n    }\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst NumberInputPlugin = createPlugin({\n    id: 'input-number',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { options: p.optional.custom(parseListOptions), readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint$4(args.params, args.initialValue),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textPropsObj = createNumberTextPropsObject(args.params, value.rawValue);\n        const drc = c && findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps(Object.assign(Object.assign({}, textPropsObj), { keyScale: createValue(textPropsObj.keyScale), max: drc.values.value('max'), min: drc.values.value('min') }))), { parser: parseNumber, value: value, viewProps: args.viewProps }));\n        }\n        return new NumberTextController(args.document, {\n            parser: parseNumber,\n            props: ValueMap.fromObject(textPropsObj),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'number') {\n            return null;\n        }\n        if (args.controller.valueController instanceof SliderTextController) {\n            return new SliderInputBindingApi(args.controller);\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nclass Point2d {\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n    getComponents() {\n        return [this.x, this.y];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        if (typeof x !== 'number' || typeof y !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n        };\n    }\n}\nconst Point2dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point2d(...comps),\n};\n\nconst cn$5 = ClassName('p2d');\nclass Point2dView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$5());\n        config.viewProps.bindClassModifiers(this.element);\n        bindValue(config.expanded, valueToClassName(this.element, cn$5(undefined, 'expanded')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(cn$5('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(cn$5('b'));\n        buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n        config.viewProps.bindDisabled(buttonElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(cn$5('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(cn$5('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nconst cn$4 = ClassName('p2dp');\nclass Point2dPickerView {\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onPropsChange_ = this.onPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.props_ = config.props;\n        this.props_.emitter.on('change', this.onPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$4());\n        if (config.layout === 'popup') {\n            this.element.classList.add(cn$4(undefined, 'p'));\n        }\n        config.viewProps.bindClassModifiers(this.element);\n        const padElem = doc.createElement('div');\n        padElem.classList.add(cn$4('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$4('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n        xAxisElem.classList.add(cn$4('ax'));\n        xAxisElem.setAttributeNS(null, 'x1', '0');\n        xAxisElem.setAttributeNS(null, 'y1', '50%');\n        xAxisElem.setAttributeNS(null, 'x2', '100%');\n        xAxisElem.setAttributeNS(null, 'y2', '50%');\n        this.svgElem_.appendChild(xAxisElem);\n        const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n        yAxisElem.classList.add(cn$4('ax'));\n        yAxisElem.setAttributeNS(null, 'x1', '50%');\n        yAxisElem.setAttributeNS(null, 'y1', '0');\n        yAxisElem.setAttributeNS(null, 'x2', '50%');\n        yAxisElem.setAttributeNS(null, 'y2', '100%');\n        this.svgElem_.appendChild(yAxisElem);\n        const lineElem = doc.createElementNS(SVG_NS, 'line');\n        lineElem.classList.add(cn$4('l'));\n        lineElem.setAttributeNS(null, 'x1', '50%');\n        lineElem.setAttributeNS(null, 'y1', '50%');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(cn$4('m'));\n        this.padElement.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const [x, y] = this.value.rawValue.getComponents();\n        const max = this.props_.get('max');\n        const px = mapRange(x, -max, +max, 0, 100);\n        const py = mapRange(y, -max, +max, 0, 100);\n        const ipy = this.props_.get('invertsY') ? 100 - py : py;\n        this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n        this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n        this.markerElem_.style.left = `${px}%`;\n        this.markerElem_.style.top = `${ipy}%`;\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onPropsChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n}\n\nfunction computeOffset(ev, keyScales, invertsY) {\n    return [\n        getStepForKey(keyScales[0], getHorizontalStepKeys(ev)),\n        getStepForKey(keyScales[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n    ];\n}\nclass Point2dPickerController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new Point2dPickerView(doc, {\n            layout: config.layout,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n    }\n    handlePointerEvent_(d, opts) {\n        if (!d.point) {\n            return;\n        }\n        const max = this.props.get('max');\n        const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n        const py = mapRange(this.props.get('invertsY') ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n        this.value.setRawValue(new Point2d(px, py), opts);\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.handlePointerEvent_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPadKeyUp_(ev) {\n        const [dx, dy] = computeOffset(ev, [this.props.get('xKeyScale'), this.props.get('yKeyScale')], this.props.get('invertsY'));\n        if (dx === 0 && dy === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass Point2dController {\n    constructor(doc, config) {\n        var _a, _b;\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n        this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const padC = new Point2dPickerController(doc, {\n            layout: config.pickerLayout,\n            props: new ValueMap({\n                invertsY: createValue(config.invertsY),\n                max: createValue(config.max),\n                xKeyScale: config.axes[0].textProps.value('keyScale'),\n                yKeyScale: config.axes[1].textProps.value('keyScale'),\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        padC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = padC;\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: Point2dAssembly,\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new Point2dView(doc, {\n            expanded: this.foldable_.value('expanded'),\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.textC_.view.element);\n        (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n        (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    get textController() {\n        return this.textC_;\n    }\n    onPadButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onPadButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction point2dFromUnknown(value) {\n    return Point2d.isObject(value)\n        ? new Point2d(value.x, value.y)\n        : new Point2d();\n}\nfunction writePoint2d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n}\n\nfunction createConstraint$3(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point2dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n        ],\n    });\n}\nfunction getSuitableMaxDimensionValue(params, rawValue) {\n    var _a, _b;\n    if (!isEmpty(params.min) || !isEmpty(params.max)) {\n        return Math.max(Math.abs((_a = params.min) !== null && _a !== void 0 ? _a : 0), Math.abs((_b = params.max) !== null && _b !== void 0 ? _b : 0));\n    }\n    const step = getSuitableKeyScale(params);\n    return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n}\nfunction getSuitableMax(params, initialValue) {\n    var _a, _b;\n    const xr = getSuitableMaxDimensionValue(deepMerge(params, ((_a = params.x) !== null && _a !== void 0 ? _a : {})), initialValue.x);\n    const yr = getSuitableMaxDimensionValue(deepMerge(params, ((_b = params.y) !== null && _b !== void 0 ? _b : {})), initialValue.y);\n    return Math.max(xr, yr);\n}\nfunction shouldInvertY(params) {\n    if (!('y' in params)) {\n        return false;\n    }\n    const yParams = params.y;\n    if (!yParams) {\n        return false;\n    }\n    return 'inverted' in yParams ? !!yParams.inverted : false;\n}\nconst Point2dInputPlugin = createPlugin({\n    id: 'input-point2d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point2d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { expanded: p.optional.boolean, picker: p.optional.custom(parsePickerLayout), readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.object(Object.assign(Object.assign({}, createPointDimensionParser(p)), { inverted: p.optional.boolean })) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: () => point2dFromUnknown,\n        constraint: (args) => createConstraint$3(args.params, args.initialValue),\n        equals: Point2d.equals,\n        writer: () => writePoint2d,\n    },\n    controller: (args) => {\n        var _a, _b;\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y];\n        return new Point2dController(doc, {\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            invertsY: shouldInvertY(args.params),\n            max: getSuitableMax(args.params, value.rawValue),\n            parser: parseNumber,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point3d {\n    constructor(x = 0, y = 0, z = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n        };\n    }\n}\nconst Point3dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point3d(...comps),\n};\n\nfunction point3dFromUnknown(value) {\n    return Point3d.isObject(value)\n        ? new Point3d(value.x, value.y, value.z)\n        : new Point3d();\n}\nfunction writePoint3d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n}\n\nfunction createConstraint$2(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point3dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n        ],\n    });\n}\nconst Point3dInputPlugin = createPlugin({\n    id: 'input-point3d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point3d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point3dFromUnknown,\n        constraint: (args) => createConstraint$2(args.params, args.initialValue),\n        equals: Point3d.equals,\n        writer: (_args) => writePoint3d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [args.params.x, args.params.y, args.params.z];\n        return new PointNdTextController(args.document, {\n            assembly: Point3dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass Point4d {\n    constructor(x = 0, y = 0, z = 0, w = 0) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        const x = obj.x;\n        const y = obj.y;\n        const z = obj.z;\n        const w = obj.w;\n        if (typeof x !== 'number' ||\n            typeof y !== 'number' ||\n            typeof z !== 'number' ||\n            typeof w !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n    }\n    toObject() {\n        return {\n            x: this.x,\n            y: this.y,\n            z: this.z,\n            w: this.w,\n        };\n    }\n}\nconst Point4dAssembly = {\n    toComponents: (p) => p.getComponents(),\n    fromComponents: (comps) => new Point4d(...comps),\n};\n\nfunction point4dFromUnknown(value) {\n    return Point4d.isObject(value)\n        ? new Point4d(value.x, value.y, value.z, value.w)\n        : new Point4d();\n}\nfunction writePoint4d(target, value) {\n    target.writeProperty('x', value.x);\n    target.writeProperty('y', value.y);\n    target.writeProperty('z', value.z);\n    target.writeProperty('w', value.w);\n}\n\nfunction createConstraint$1(params, initialValue) {\n    return new PointNdConstraint({\n        assembly: Point4dAssembly,\n        components: [\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.x), initialValue.x),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.y), initialValue.y),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.z), initialValue.z),\n            createDimensionConstraint(Object.assign(Object.assign({}, params), params.w), initialValue.w),\n        ],\n    });\n}\nconst Point4dInputPlugin = createPlugin({\n    id: 'input-point4d',\n    type: 'input',\n    accept: (value, params) => {\n        if (!Point4d.isObject(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createPointDimensionParser(p)), { readonly: p.optional.constant(false), w: p.optional.custom(parsePointDimensionParams), x: p.optional.custom(parsePointDimensionParams), y: p.optional.custom(parsePointDimensionParams), z: p.optional.custom(parsePointDimensionParams) })));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => point4dFromUnknown,\n        constraint: (args) => createConstraint$1(args.params, args.initialValue),\n        equals: Point4d.equals,\n        writer: (_args) => writePoint4d,\n    },\n    controller: (args) => {\n        const value = args.value;\n        const c = args.constraint;\n        const dParams = [\n            args.params.x,\n            args.params.y,\n            args.params.z,\n            args.params.w,\n        ];\n        return new PointNdTextController(args.document, {\n            assembly: Point4dAssembly,\n            axes: value.rawValue.getComponents().map((comp, i) => {\n                var _a;\n                return createPointAxis({\n                    constraint: c.components[i],\n                    initialValue: comp,\n                    params: deepMerge(args.params, ((_a = dParams[i]) !== null && _a !== void 0 ? _a : {})),\n                });\n            }),\n            parser: parseNumber,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const lc = createListConstraint(params.options);\n    if (lc) {\n        constraints.push(lc);\n    }\n    return new CompositeConstraint(constraints);\n}\nconst StringInputPlugin = createPlugin({\n    id: 'input-string',\n    type: 'input',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.optional.constant(false),\n            options: p.optional.custom(parseListOptions),\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller: (args) => {\n        const doc = args.document;\n        const value = args.value;\n        const c = args.constraint;\n        const lc = c && findConstraint(c, ListConstraint);\n        if (lc) {\n            return new ListController(doc, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new TextController(doc, {\n            parser: (v) => v,\n            props: ValueMap.fromObject({\n                formatter: formatString,\n            }),\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (typeof args.controller.value.rawValue !== 'string') {\n            return null;\n        }\n        if (args.controller.valueController instanceof ListController) {\n            return new ListInputBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst Constants = {\n    monitor: {\n        defaultInterval: 200,\n        defaultRows: 3,\n    },\n};\n\nconst cn$3 = ClassName('mll');\nclass MultiLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$3());\n        config.viewProps.bindClassModifiers(this.element);\n        const textareaElem = doc.createElement('textarea');\n        textareaElem.classList.add(cn$3('i'));\n        textareaElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        textareaElem.readOnly = true;\n        config.viewProps.bindDisabled(textareaElem);\n        this.element.appendChild(textareaElem);\n        this.textareaElem_ = textareaElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const elem = this.textareaElem_;\n        const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n        const lines = [];\n        this.value.rawValue.forEach((value) => {\n            if (value !== undefined) {\n                lines.push(this.formatter_(value));\n            }\n        });\n        elem.textContent = lines.join('\\n');\n        if (shouldScroll) {\n            elem.scrollTop = elem.scrollHeight;\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass MultiLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new MultiLogView(doc, {\n            formatter: config.formatter,\n            rows: config.rows,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst cn$2 = ClassName('sgl');\nclass SingleLogView {\n    constructor(doc, config) {\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.formatter_ = config.formatter;\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$2());\n        config.viewProps.bindClassModifiers(this.element);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(cn$2('i'));\n        inputElem.readOnly = true;\n        inputElem.type = 'text';\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    update_() {\n        const values = this.value.rawValue;\n        const lastValue = values[values.length - 1];\n        this.inputElement.value =\n            lastValue !== undefined ? this.formatter_(lastValue) : '';\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n}\n\nclass SingleLogController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new SingleLogView(doc, {\n            formatter: config.formatter,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst BooleanMonitorPlugin = createPlugin({\n    id: 'monitor-bool',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'boolean') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: BooleanFormatter,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: BooleanFormatter,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass GraphLogMonitorBindingApi extends BindingApi {\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n}\n\nconst cn$1 = ClassName('grl');\nclass GraphLogView {\n    constructor(doc, config) {\n        this.onCursorChange_ = this.onCursorChange_.bind(this);\n        this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn$1());\n        config.viewProps.bindClassModifiers(this.element);\n        this.formatter_ = config.formatter;\n        this.props_ = config.props;\n        this.cursor_ = config.cursor;\n        this.cursor_.emitter.on('change', this.onCursorChange_);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(cn$1('g'));\n        svgElem.style.height = `calc(var(${getCssVar('containerUnitSize')}) * ${config.rows})`;\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        const tooltipElem = doc.createElement('div');\n        tooltipElem.classList.add(cn$1('t'), ClassName('tt')());\n        this.element.appendChild(tooltipElem);\n        this.tooltipElem_ = tooltipElem;\n        config.value.emitter.on('change', this.onValueUpdate_);\n        this.value = config.value;\n        this.update_();\n    }\n    get graphElement() {\n        return this.svgElem_;\n    }\n    update_() {\n        const { clientWidth: w, clientHeight: h } = this.element;\n        const maxIndex = this.value.rawValue.length - 1;\n        const min = this.props_.get('min');\n        const max = this.props_.get('max');\n        const points = [];\n        this.value.rawValue.forEach((v, index) => {\n            if (v === undefined) {\n                return;\n            }\n            const x = mapRange(index, 0, maxIndex, 0, w);\n            const y = mapRange(v, min, max, h, 0);\n            points.push([x, y].join(','));\n        });\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        const tooltipElem = this.tooltipElem_;\n        const value = this.value.rawValue[this.cursor_.rawValue];\n        if (value === undefined) {\n            tooltipElem.classList.remove(cn$1('t', 'a'));\n            return;\n        }\n        const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, w);\n        const ty = mapRange(value, min, max, h, 0);\n        tooltipElem.style.left = `${tx}px`;\n        tooltipElem.style.top = `${ty}px`;\n        tooltipElem.textContent = `${this.formatter_(value)}`;\n        if (!tooltipElem.classList.contains(cn$1('t', 'a'))) {\n            tooltipElem.classList.add(cn$1('t', 'a'), cn$1('t', 'in'));\n            forceReflow(tooltipElem);\n            tooltipElem.classList.remove(cn$1('t', 'in'));\n        }\n    }\n    onValueUpdate_() {\n        this.update_();\n    }\n    onCursorChange_() {\n        this.update_();\n    }\n}\n\nclass GraphLogController {\n    constructor(doc, config) {\n        this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n        this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n        this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n        this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n        this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n        this.props = config.props;\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.cursor_ = createValue(-1);\n        this.view = new GraphLogView(doc, {\n            cursor: this.cursor_,\n            formatter: config.formatter,\n            rows: config.rows,\n            props: this.props,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        if (!supportsTouch(doc)) {\n            this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n            this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n        }\n        else {\n            const ph = new PointerHandler(this.view.element);\n            ph.emitter.on('down', this.onGraphPointerDown_);\n            ph.emitter.on('move', this.onGraphPointerMove_);\n            ph.emitter.on('up', this.onGraphPointerUp_);\n        }\n    }\n    importProps(state) {\n        return importBladeState(state, null, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n        }), (result) => {\n            this.props.set('max', result.max);\n            this.props.set('min', result.min);\n            return true;\n        });\n    }\n    exportProps() {\n        return exportBladeState(null, {\n            max: this.props.get('max'),\n            min: this.props.get('min'),\n        });\n    }\n    onGraphMouseLeave_() {\n        this.cursor_.rawValue = -1;\n    }\n    onGraphMouseMove_(ev) {\n        const { clientWidth: w } = this.view.element;\n        this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, w, 0, this.value.rawValue.length));\n    }\n    onGraphPointerDown_(ev) {\n        this.onGraphPointerMove_(ev);\n    }\n    onGraphPointerMove_(ev) {\n        if (!ev.data.point) {\n            this.cursor_.rawValue = -1;\n            return;\n        }\n        this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n    }\n    onGraphPointerUp_() {\n        this.cursor_.rawValue = -1;\n    }\n}\n\nfunction createFormatter(params) {\n    return !isEmpty(params.format) ? params.format : createNumberFormatter(2);\n}\nfunction createTextMonitor(args) {\n    var _a;\n    if (args.value.rawValue.length === 1) {\n        return new SingleLogController(args.document, {\n            formatter: createFormatter(args.params),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    return new MultiLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction createGraphMonitor(args) {\n    var _a, _b, _c;\n    return new GraphLogController(args.document, {\n        formatter: createFormatter(args.params),\n        rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n        props: ValueMap.fromObject({\n            max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 100,\n            min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n        }),\n        value: args.value,\n        viewProps: args.viewProps,\n    });\n}\nfunction shouldShowGraph(params) {\n    return params.view === 'graph';\n}\nconst NumberMonitorPlugin = createPlugin({\n    id: 'monitor-number',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            format: p.optional.function,\n            max: p.optional.number,\n            min: p.optional.number,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n            view: p.optional.string,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n        reader: (_args) => numberFromUnknown,\n    },\n    controller: (args) => {\n        if (shouldShowGraph(args.params)) {\n            return createGraphMonitor(args);\n        }\n        return createTextMonitor(args);\n    },\n    api: (args) => {\n        if (args.controller.valueController instanceof GraphLogController) {\n            return new GraphLogMonitorBindingApi(args.controller);\n        }\n        return null;\n    },\n});\n\nconst StringMonitorPlugin = createPlugin({\n    id: 'monitor-string',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (typeof value !== 'string') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            multiline: p.optional.boolean,\n            readonly: p.required.constant(true),\n            rows: p.optional.number,\n        }));\n        return result\n            ? {\n                initialValue: value,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n    },\n    controller: (args) => {\n        var _a;\n        const value = args.value;\n        const multiline = value.rawValue.length > 1 || args.params.multiline;\n        if (multiline) {\n            return new MultiLogController(args.document, {\n                formatter: formatString,\n                rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : Constants.monitor.defaultRows,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new SingleLogController(args.document, {\n            formatter: formatString,\n            value: value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass BladeApiCache {\n    constructor() {\n        this.map_ = new Map();\n    }\n    get(bc) {\n        var _a;\n        return (_a = this.map_.get(bc)) !== null && _a !== void 0 ? _a : null;\n    }\n    has(bc) {\n        return this.map_.has(bc);\n    }\n    add(bc, api) {\n        this.map_.set(bc, api);\n        bc.viewProps.handleDispose(() => {\n            this.map_.delete(bc);\n        });\n        return api;\n    }\n}\n\nclass ReadWriteBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n        this.writer_ = config.writer;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n    write(value) {\n        this.writer_(this.target, value);\n    }\n    inject(value) {\n        this.write(this.reader_(value));\n    }\n}\n\nfunction createInputBindingController(plugin, args) {\n    var _a;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const valueArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        label: p.optional.string,\n        tag: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(valueArgs);\n    const constraint = plugin.binding.constraint\n        ? plugin.binding.constraint(valueArgs)\n        : undefined;\n    const binding = new ReadWriteBinding({\n        reader: reader,\n        target: args.target,\n        writer: plugin.binding.writer(valueArgs),\n    });\n    const value = new InputBindingValue(createValue(reader(result.initialValue), {\n        constraint: constraint,\n        equals: plugin.binding.equals,\n    }), binding);\n    const controller = plugin.controller({\n        constraint: constraint,\n        document: args.document,\n        initialValue: result.initialValue,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    return new InputBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_a = params === null || params === void 0 ? void 0 : params.label) !== null && _a !== void 0 ? _a : null : args.target.key,\n        }),\n        tag: params === null || params === void 0 ? void 0 : params.tag,\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass ReadonlyBinding {\n    constructor(config) {\n        this.target = config.target;\n        this.reader_ = config.reader;\n    }\n    read() {\n        return this.reader_(this.target.read());\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nfunction createMonitorBindingController(plugin, args) {\n    var _a, _b, _c;\n    const result = plugin.accept(args.target.read(), args.params);\n    if (isEmpty(result)) {\n        return null;\n    }\n    const bindingArgs = {\n        target: args.target,\n        initialValue: result.initialValue,\n        params: result.params,\n    };\n    const params = parseRecord(args.params, (p) => ({\n        bufferSize: p.optional.number,\n        disabled: p.optional.boolean,\n        hidden: p.optional.boolean,\n        interval: p.optional.number,\n        label: p.optional.string,\n    }));\n    const reader = plugin.binding.reader(bindingArgs);\n    const bufferSize = (_b = (_a = params === null || params === void 0 ? void 0 : params.bufferSize) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n        plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n    const value = new MonitorBindingValue({\n        binding: new ReadonlyBinding({\n            reader: reader,\n            target: args.target,\n        }),\n        bufferSize: bufferSize,\n        ticker: createTicker(args.document, params === null || params === void 0 ? void 0 : params.interval),\n    });\n    const controller = plugin.controller({\n        document: args.document,\n        params: result.params,\n        value: value,\n        viewProps: ViewProps.create({\n            disabled: params === null || params === void 0 ? void 0 : params.disabled,\n            hidden: params === null || params === void 0 ? void 0 : params.hidden,\n        }),\n    });\n    controller.viewProps.bindDisabled(value.ticker);\n    controller.viewProps.handleDispose(() => {\n        value.ticker.dispose();\n    });\n    return new MonitorBindingController(args.document, {\n        blade: createBlade(),\n        props: ValueMap.fromObject({\n            label: 'label' in args.params ? (_c = params === null || params === void 0 ? void 0 : params.label) !== null && _c !== void 0 ? _c : null : args.target.key,\n        }),\n        value: value,\n        valueController: controller,\n    });\n}\n\nclass PluginPool {\n    constructor(apiCache) {\n        this.pluginsMap_ = {\n            blades: [],\n            inputs: [],\n            monitors: [],\n        };\n        this.apiCache_ = apiCache;\n    }\n    getAll() {\n        return [\n            ...this.pluginsMap_.blades,\n            ...this.pluginsMap_.inputs,\n            ...this.pluginsMap_.monitors,\n        ];\n    }\n    register(bundleId, r) {\n        if (!isCompatible(r.core)) {\n            throw TpError.notCompatible(bundleId, r.id);\n        }\n        if (r.type === 'blade') {\n            this.pluginsMap_.blades.unshift(r);\n        }\n        else if (r.type === 'input') {\n            this.pluginsMap_.inputs.unshift(r);\n        }\n        else if (r.type === 'monitor') {\n            this.pluginsMap_.monitors.unshift(r);\n        }\n    }\n    createInput_(document, target, params) {\n        return this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n            document: document,\n            target: target,\n            params: params,\n        }), null);\n    }\n    createMonitor_(document, target, params) {\n        return this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n            document: document,\n            params: params,\n            target: target,\n        }), null);\n    }\n    createBinding(doc, target, params) {\n        const initialValue = target.read();\n        if (isEmpty(initialValue)) {\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        const ic = this.createInput_(doc, target, params);\n        if (ic) {\n            return ic;\n        }\n        const mc = this.createMonitor_(doc, target, params);\n        if (mc) {\n            return mc;\n        }\n        throw new TpError({\n            context: {\n                key: target.key,\n            },\n            type: 'nomatchingcontroller',\n        });\n    }\n    createBlade(document, params) {\n        const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n            document: document,\n            params: params,\n        }), null);\n        if (!bc) {\n            throw new TpError({\n                type: 'nomatchingview',\n                context: {\n                    params: params,\n                },\n            });\n        }\n        return bc;\n    }\n    createInputBindingApi_(bc) {\n        const api = this.pluginsMap_.inputs.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createMonitorBindingApi_(bc) {\n        const api = this.pluginsMap_.monitors.reduce((result, plugin) => {\n            var _a, _b;\n            if (result) {\n                return result;\n            }\n            return ((_b = (_a = plugin.api) === null || _a === void 0 ? void 0 : _a.call(plugin, {\n                controller: bc,\n            })) !== null && _b !== void 0 ? _b : null);\n        }, null);\n        return this.apiCache_.add(bc, api !== null && api !== void 0 ? api : new BindingApi(bc));\n    }\n    createBindingApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isInputBindingController(bc)) {\n            return this.createInputBindingApi_(bc);\n        }\n        if (isMonitorBindingController(bc)) {\n            return this.createMonitorBindingApi_(bc);\n        }\n        throw TpError.shouldNeverHappen();\n    }\n    createApi(bc) {\n        if (this.apiCache_.has(bc)) {\n            return this.apiCache_.get(bc);\n        }\n        if (isBindingController(bc)) {\n            return this.createBindingApi(bc);\n        }\n        const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n            controller: bc,\n            pool: this,\n        }), null);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return this.apiCache_.add(bc, api);\n    }\n}\n\nconst sharedCache = new BladeApiCache();\nfunction createDefaultPluginPool() {\n    const pool = new PluginPool(sharedCache);\n    [\n        Point2dInputPlugin,\n        Point3dInputPlugin,\n        Point4dInputPlugin,\n        StringInputPlugin,\n        NumberInputPlugin,\n        StringColorInputPlugin,\n        ObjectColorInputPlugin,\n        NumberColorInputPlugin,\n        BooleanInputPlugin,\n        BooleanMonitorPlugin,\n        StringMonitorPlugin,\n        NumberMonitorPlugin,\n        ButtonBladePlugin,\n        FolderBladePlugin,\n        TabBladePlugin,\n    ].forEach((p) => {\n        pool.register('core', p);\n    });\n    return pool;\n}\n\nclass ListBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get options() {\n        return this.controller.valueController.props.get('options');\n    }\n    set options(options) {\n        this.controller.valueController.props.set('options', options);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nclass SeparatorBladeApi extends BladeApi {\n}\n\nclass SliderBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get max() {\n        return this.controller.valueController.sliderController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.sliderController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.sliderController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.sliderController.props.set('min', min);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nclass TextBladeApi extends BladeApi {\n    /**\n     * @hidden\n     */\n    constructor(controller) {\n        super(controller);\n        this.emitter_ = new Emitter();\n        this.controller.value.emitter.on('change', (ev) => {\n            this.emitter_.emit('change', new TpChangeEvent(this, ev.rawValue));\n        });\n    }\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get formatter() {\n        return this.controller.valueController.props.get('formatter');\n    }\n    set formatter(formatter) {\n        this.controller.valueController.props.set('formatter', formatter);\n    }\n    get value() {\n        return this.controller.value.rawValue;\n    }\n    set value(value) {\n        this.controller.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev);\n        }, {\n            key: handler,\n        });\n        return this;\n    }\n    off(eventName, handler) {\n        this.emitter_.off(eventName, handler);\n        return this;\n    }\n}\n\nconst ListBladePlugin = (function () {\n    return {\n        id: 'list',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                options: p.required.custom(parseListOptions),\n                value: p.required.raw,\n                view: p.required.constant('list'),\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            const lc = new ListConstraint(normalizeListOptions(args.params.options));\n            const value = createValue(args.params.value, {\n                constraint: lc,\n            });\n            const ic = new ListController(args.document, {\n                props: new ValueMap({\n                    options: lc.values.value('options'),\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: value,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ListController)) {\n                return null;\n            }\n            return new ListBladeApi(args.controller);\n        },\n    };\n})();\n\nclass RootApi extends FolderApi {\n    /**\n     * @hidden\n     */\n    constructor(controller, pool) {\n        super(controller, pool);\n    }\n    get element() {\n        return this.controller.view.element;\n    }\n}\n\n/**\n * @hidden\n */\nclass RootController extends FolderController {\n    constructor(doc, config) {\n        super(doc, {\n            expanded: config.expanded,\n            blade: config.blade,\n            props: config.props,\n            root: true,\n            viewProps: config.viewProps,\n        });\n    }\n}\n\nconst cn = ClassName('spr');\n/**\n * @hidden\n */\nclass SeparatorView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(cn());\n        config.viewProps.bindClassModifiers(this.element);\n        const hrElem = doc.createElement('hr');\n        hrElem.classList.add(cn('r'));\n        this.element.appendChild(hrElem);\n    }\n}\n\n/**\n * @hidden\n */\nclass SeparatorController extends BladeController {\n    /**\n     * @hidden\n     */\n    constructor(doc, config) {\n        super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                viewProps: config.viewProps,\n            }) }));\n    }\n}\n\nconst SeparatorBladePlugin = {\n    id: 'separator',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('separator'),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new SeparatorController(args.document, {\n            blade: args.blade,\n            viewProps: args.viewProps,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof SeparatorController)) {\n            return null;\n        }\n        return new SeparatorBladeApi(args.controller);\n    },\n};\n\nconst SliderBladePlugin = {\n    id: 'slider',\n    type: 'blade',\n    core: VERSION$1,\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            max: p.required.number,\n            min: p.required.number,\n            view: p.required.constant('slider'),\n            format: p.optional.function,\n            label: p.optional.string,\n            value: p.optional.number,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b;\n        const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n        const drc = new DefiniteRangeConstraint({\n            max: args.params.max,\n            min: args.params.min,\n        });\n        const v = createValue(initialValue, {\n            constraint: drc,\n        });\n        const vc = new SliderTextController(args.document, Object.assign(Object.assign({}, createSliderTextProps({\n            formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n            keyScale: createValue(1),\n            max: drc.values.value('max'),\n            min: drc.values.value('min'),\n            pointerScale: getSuitablePointerScale(args.params, initialValue),\n        })), { parser: parseNumber, value: v, viewProps: args.viewProps }));\n        return new LabeledValueBladeController(args.document, {\n            blade: args.blade,\n            props: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            value: v,\n            valueController: vc,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof LabeledValueBladeController)) {\n            return null;\n        }\n        if (!(args.controller.valueController instanceof SliderTextController)) {\n            return null;\n        }\n        return new SliderBladeApi(args.controller);\n    },\n};\n\nconst TextBladePlugin = (function () {\n    return {\n        id: 'text',\n        type: 'blade',\n        core: VERSION$1,\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                parse: p.required.function,\n                value: p.required.raw,\n                view: p.required.constant('text'),\n                format: p.optional.function,\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a;\n            const v = createValue(args.params.value);\n            const ic = new TextController(args.document, {\n                parser: args.params.parse,\n                props: ValueMap.fromObject({\n                    formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                }),\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: v,\n                valueController: ic,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof TextController)) {\n                return null;\n            }\n            return new TextBladeApi(args.controller);\n        },\n    };\n})();\n\nfunction createDefaultWrapperElement(doc) {\n    const elem = doc.createElement('div');\n    elem.classList.add(ClassName('dfw')());\n    if (doc.body) {\n        doc.body.appendChild(elem);\n    }\n    return elem;\n}\nfunction embedStyle(doc, id, css) {\n    if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n        return;\n    }\n    const styleElem = doc.createElement('style');\n    styleElem.dataset.tpStyle = id;\n    styleElem.textContent = css;\n    doc.head.appendChild(styleElem);\n}\n/**\n * The root pane of Tweakpane.\n */\nclass Pane extends RootApi {\n    constructor(opt_config) {\n        var _a, _b;\n        const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n        const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n        const pool = createDefaultPluginPool();\n        const rootController = new RootController(doc, {\n            expanded: config.expanded,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                title: config.title,\n            }),\n            viewProps: ViewProps.create(),\n        });\n        super(rootController, pool);\n        this.pool_ = pool;\n        this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n        this.containerElem_.appendChild(this.element);\n        this.doc_ = doc;\n        this.usesDefaultWrapper_ = !config.container;\n        this.setUpDefaultPlugins_();\n    }\n    get document() {\n        if (!this.doc_) {\n            throw TpError.alreadyDisposed();\n        }\n        return this.doc_;\n    }\n    dispose() {\n        const containerElem = this.containerElem_;\n        if (!containerElem) {\n            throw TpError.alreadyDisposed();\n        }\n        if (this.usesDefaultWrapper_) {\n            const parentElem = containerElem.parentElement;\n            if (parentElem) {\n                parentElem.removeChild(containerElem);\n            }\n        }\n        this.containerElem_ = null;\n        this.doc_ = null;\n        super.dispose();\n    }\n    registerPlugin(bundle) {\n        if (bundle.css) {\n            embedStyle(this.document, `plugin-${bundle.id}`, bundle.css);\n        }\n        const plugins = 'plugin' in bundle\n            ? [bundle.plugin]\n            : 'plugins' in bundle\n                ? bundle.plugins\n                : [];\n        plugins.forEach((p) => {\n            this.pool_.register(bundle.id, p);\n        });\n    }\n    setUpDefaultPlugins_() {\n        this.registerPlugin({\n            id: 'default',\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            css: '.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:\"\";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:\"\";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:\"\";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',\n            plugins: [\n                ListBladePlugin,\n                SeparatorBladePlugin,\n                SliderBladePlugin,\n                TabBladePlugin,\n                TextBladePlugin,\n            ],\n        });\n    }\n}\n\nconst VERSION = new Semver('4.0.5');\n\nexport { BladeApi, ButtonApi, FolderApi, ListBladeApi, ListInputBindingApi, Pane, Semver, SeparatorBladeApi, SliderBladeApi, SliderInputBindingApi, TabApi, TabPageApi, TextBladeApi, TpChangeEvent, VERSION };\n","<script>\n\timport ClsPad from './ClsPad.svelte'\n\timport { applyTheme } from '../theme.js'\n\timport { updateCollapsibility } from '../utils.js'\n\timport { BROWSER } from 'esm-env'\n\timport { getContext, onDestroy, setContext, tick } from 'svelte'\n\timport { writable } from 'svelte/store'\n\timport { Pane as TpPane } from 'tweakpane'\n\texport let title = void 0\n\texport let userExpandable = true\n\texport let expanded = true\n\texport let theme = void 0\n\texport let scale = 1\n\texport let userCreatedPane = true\n\texport let tpPane = void 0\n\tconst parentStore = writable()\n\tconst existingParentStore = getContext('parentStore')\n\tlet pluginsRegistered = []\n\tconst registerPlugin = (plugin) => {\n\t\tif (tpPane === void 0) {\n\t\t\tconsole.warn(`tpPane is undefined, failed to register plugin \"${plugin.id}\"`)\n\t\t} else if (!pluginsRegistered.includes(plugin.id)) {\n\t\t\ttpPane?.registerPlugin(plugin)\n\t\t\tpluginsRegistered.push(plugin.id)\n\t\t}\n\t}\n\tsetContext('registerPlugin', registerPlugin)\n\tsetContext('userCreatedPane', userCreatedPane)\n\tif ($existingParentStore !== void 0) {\n\t\tconsole.warn('<Panes> must not be nested')\n\t}\n\tif (BROWSER) {\n\t\t$parentStore = new TpPane({ expanded, title })\n\t\t$parentStore.on('fold', () => {\n\t\t\tif ($parentStore.expanded !== void 0 && expanded !== $parentStore.expanded) {\n\t\t\t\texpanded = $parentStore.expanded\n\t\t\t}\n\t\t})\n\t\ttpPane = $parentStore\n\t\tsetContext('parentStore', parentStore)\n\t\tonDestroy(() => {\n\t\t\t$parentStore.dispose()\n\t\t})\n\t} else {\n\t\tsetContext('parentStore', writable(true))\n\t}\n\tfunction setScale(scale2) {\n\t\tif (tpPane) {\n\t\t\tif (scale2 === 1) {\n\t\t\t\ttpPane.element.style.removeProperty('transform-origin')\n\t\t\t\ttpPane.element.style.removeProperty('transform')\n\t\t\t\ttpPane.element.style.removeProperty('width')\n\t\t\t} else {\n\t\t\t\tconst clampedScale = Math.max(0, scale2)\n\t\t\t\ttpPane.element.style.transformOrigin = '0 0'\n\t\t\t\ttpPane.element.style.transform = `scale(${clampedScale})`\n\t\t\t\ttpPane.element.style.width = `${100 / clampedScale}%`\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateExpanded(expanded2) {\n\t\tvoid tick().then(() => {\n\t\t\tif (tpPane?.expanded !== void 0 && expanded2 !== void 0 && tpPane.expanded !== expanded2) {\n\t\t\t\ttpPane.expanded = expanded2\n\t\t\t}\n\t\t})\n\t}\n\t$: tpPane?.element && tpPane?.element.classList.add('svelte-tweakpane-ui')\n\t$: tpPane && setScale(scale)\n\t$: tpPane && updateCollapsibility(userExpandable, tpPane.element, 'tp-rotv_b', 'tp-rotv_m')\n\t$: tpPane && title !== void 0 && (tpPane.title = title.length > 0 ? title : ' ')\n\t$: tpPane && applyTheme(tpPane.element, theme)\n\t$: tpPane && updateExpanded(expanded)\n</script>\n\n{#if BROWSER}\n\t<slot />\n{:else if expanded}\n\t{#if title === undefined}\n\t\t<ClsPad keysAdd={['containerVerticalPadding']} {theme} />\n\t{:else}\n\t\t<ClsPad\n\t\t\tkeysAdd={[\n\t\t\t\t'containerVerticalPadding',\n\t\t\t\t'containerVerticalPadding',\n\t\t\t\t'containerVerticalPadding',\n\t\t\t\t'containerUnitSize',\n\t\t\t]}\n\t\t\t{theme}\n\t\t/>\n\t{/if}\n\t<slot />\n{:else if title === undefined}\n\t<!-- Nothing renders -->\n{:else}\n\t<ClsPad keysAdd={['containerVerticalPadding', 'containerUnitSize']} {theme} />\n{/if}\n\n<style>\n\t/* Blade labels */\n\t:global(div.svelte-tweakpane-ui div.tp-lblv_l) {\n\t\toverflow: hidden;\n\t\tpadding-right: var(--cnt-hp);\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t/* Pane title label */\n\t:global(div.svelte-tweakpane-ui div.tp-rotv_t) {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n</style>\n","<script>\n\timport GenericPane from './GenericPane.svelte'\n\timport { removeKeys } from '../utils.js'\n\timport { onMount } from 'svelte'\n\texport let expanded = void 0\n\texport let width = void 0\n\texport let tpPane = void 0\n\texport let theme = {\n\t\tbaseBorderRadius: '0px',\n\t\tbaseShadowColor: 'hsla(0, 0%, 0%, 0)',\n\t\t// BladeBorderRadius: '0px'\n\t}\n\tlet containerElement\n\tonMount(() => {\n\t\tif (tpPane) {\n\t\t\tconst fixedContainer = tpPane.element.parentElement\n\t\t\tcontainerElement.append(tpPane.element)\n\t\t\tfixedContainer?.remove()\n\t\t} else {\n\t\t\tconsole.warn('tpPane is undefined')\n\t\t}\n\t})\n</script>\n\n<div bind:this={containerElement} style:width={width === undefined ? null : `${width}px`}>\n\t<GenericPane bind:expanded bind:tpPane {theme} {...removeKeys($$restProps, 'position')}>\n\t\t<slot />\n\t</GenericPane>\n</div>\n","<script context=\"module\"></script>\n\n<script>\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport InternalPaneInline from '../internal/InternalPaneInline.svelte'\n\timport { getElementIndex, isRootPane } from '../utils.js'\n\timport { BROWSER } from 'esm-env'\n\timport { createEventDispatcher, getContext, onDestroy, onMount } from 'svelte'\n\texport let title = 'Button'\n\texport let label = void 0\n\texport let disabled = false\n\texport let theme = void 0\n\tconst parentStore = getContext('parentStore')\n\tconst userCreatedPane = getContext('userCreatedPane')\n\tconst dispatch = createEventDispatcher()\n\tlet indexElement\n\tlet button\n\tlet index\n\tfunction create() {\n\t\tif (button) button.dispose()\n\t\tbutton = $parentStore.addButton({\n\t\t\tdisabled,\n\t\t\tindex,\n\t\t\tlabel,\n\t\t\ttitle,\n\t\t})\n\t\tbutton.on('click', () => {\n\t\t\tdispatch('click')\n\t\t})\n\t}\n\tonMount(() => {\n\t\tindex = indexElement ? getElementIndex(indexElement) : 0\n\t})\n\tonDestroy(() => {\n\t\tbutton?.dispose()\n\t})\n\t$: index !== void 0 && $parentStore && !button && create()\n\t$: button && (button.title = title)\n\t$: button && (button.label = label)\n\t$: button && (button.disabled = disabled)\n\t$: theme &&\n\t\t$parentStore &&\n\t\t(userCreatedPane || !isRootPane($parentStore)) &&\n\t\tconsole.warn(\n\t\t\t'Set theme on the <Pane> component, not on its children! (Check nested <Button> components for a theme prop.)',\n\t\t)\n</script>\n\n{#if parentStore}\n\t{#if BROWSER}\n\t\t<div bind:this={indexElement} style=\"display: none;\"></div>\n\t{:else}\n\t\t<ClsPad keysAdd={['containerUnitSize', 'containerVerticalPadding']} {theme} />\n\t{/if}\n{:else}\n\t<InternalPaneInline {theme} userCreatedPane={false}>\n\t\t<svelte:self on:click {disabled} {label} {title} />\n\t</InternalPaneInline>\n{/if}\n","<script context=\"module\"></script>\n\n<script generics=\"U extends BladeOptions, V extends BladeRef\">\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport InternalPaneInline from '../internal/InternalPaneInline.svelte'\n\timport { enforceReadonly, getElementIndex, isRootPane } from '../utils.js'\n\timport { BROWSER, DEV } from 'esm-env'\n\timport { getContext, onDestroy, onMount } from 'svelte'\n\texport let options\n\texport let disabled = false\n\texport let theme = void 0\n\texport let ref = void 0\n\texport let plugin = void 0\n\tconst registerPlugin = getContext('registerPlugin')\n\tconst parentStore = getContext('parentStore')\n\tconst userCreatedPane = getContext('userCreatedPane')\n\tlet indexElement\n\tlet index\n\tlet _ref\n\tfunction create() {\n\t\tif (_ref) _ref.dispose()\n\t\tif (plugin !== void 0) {\n\t\t\tregisterPlugin(plugin)\n\t\t}\n\t\t_ref = $parentStore.addBlade({\n\t\t\tindex,\n\t\t\t...options,\n\t\t\tdisabled,\n\t\t\t// Why last?\n\t\t})\n\t\tref = _ref\n\t}\n\tonMount(() => {\n\t\tindex = indexElement ? getElementIndex(indexElement) : 0\n\t})\n\tonDestroy(() => {\n\t\t_ref?.dispose()\n\t})\n\t$: DEV && enforceReadonly(_ref, ref, 'Blade', 'ref', true)\n\t$: options && $parentStore && index !== void 0 && create()\n\t$: _ref && (_ref.disabled = disabled)\n\t$: theme &&\n\t\t$parentStore &&\n\t\t(userCreatedPane || !isRootPane($parentStore)) &&\n\t\tconsole.warn(\n\t\t\t'Set theme on the <Pane> component, not on its children! (Check nested <Blade> components for a theme prop.)',\n\t\t)\n</script>\n\n{#if parentStore}\n\t{#if BROWSER}\n\t\t<div bind:this={indexElement} style=\"display: none;\"></div>\n\t{:else}\n\t\t<ClsPad keysAdd={['containerVerticalPadding']} {theme} />\n\t{/if}\n{:else}\n\t<InternalPaneInline {theme} userCreatedPane={false}>\n\t\t<svelte:self bind:disabled bind:options bind:plugin bind:ref />\n\t</InternalPaneInline>\n{/if}\n","import { TpEvent, BladeApi, Emitter, ButtonController, ViewProps, ValueMap, PlainView, BladeController, LabelController, createPlugin, parseRecord, TpChangeEvent, isEmpty, mapRange, constrainRange, createNumberFormatter, ClassName, bindValueMap, valueToClassName, SVG_NS, bindValue, createValue, PointerHandler, isArrowKey, getStepForKey, getHorizontalStepKeys, getVerticalStepKeys, RangeConstraint, PointNdTextController, parseNumber, Foldable, TextController, PopupController, connectValues, bindFoldable, forceCast, findNextTarget, supportsTouch, LabeledValueBladeController, PointNdConstraint, GraphLogController, createPushedBuffer, initializeBuffer, ManualTicker, IntervalTicker, Constants, TpError, createNumberTextPropsObject, findConstraint, DefiniteRangeConstraint, createNumberTextInputParamsParser, createRangeConstraint, createStepConstraint, CompositeConstraint, writePrimitive, boolFromUnknown, numberFromUnknown, stringFromUnknown } from '@tweakpane/core';\n\nclass ButtonCellApi {\n    constructor(controller) {\n        this.controller_ = controller;\n    }\n    get disabled() {\n        return this.controller_.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller_.viewProps.set('disabled', disabled);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller_.props.set('title', title);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller_.emitter;\n        emitter.on(eventName, () => {\n            bh(new TpEvent(this));\n        });\n        return this;\n    }\n}\n\nclass TpButtonGridEvent extends TpEvent {\n    constructor(target, cell, index) {\n        super(target);\n        this.cell = cell;\n        this.index = index;\n    }\n}\n\nclass ButtonGridApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.cellToApiMap_ = new Map();\n        this.emitter_ = new Emitter();\n        const gc = this.controller.valueController;\n        gc.cellControllers.forEach((cc, i) => {\n            const api = new ButtonCellApi(cc);\n            this.cellToApiMap_.set(cc, api);\n            cc.emitter.on('click', () => {\n                const x = i % gc.size[0];\n                const y = Math.floor(i / gc.size[0]);\n                this.emitter_.emit('click', {\n                    event: new TpButtonGridEvent(this, api, [x, y]),\n                });\n            });\n        });\n    }\n    cell(x, y) {\n        const gc = this.controller.valueController;\n        const cc = gc.cellControllers[y * gc.size[0] + x];\n        return this.cellToApiMap_.get(cc);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.emitter_.on(eventName, (ev) => {\n            bh(ev.event);\n        });\n        return this;\n    }\n}\n\nclass ButtonGridController {\n    constructor(doc, config) {\n        this.size = config.size;\n        const [w, h] = this.size;\n        const bcs = [];\n        for (let y = 0; y < h; y++) {\n            for (let x = 0; x < w; x++) {\n                const bc = new ButtonController(doc, {\n                    props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                    viewProps: ViewProps.create(),\n                });\n                bcs.push(bc);\n            }\n        }\n        this.cellCs_ = bcs;\n        this.viewProps = ViewProps.create();\n        this.viewProps.handleDispose(() => {\n            this.cellCs_.forEach((c) => {\n                c.viewProps.set('disposed', true);\n            });\n        });\n        this.view = new PlainView(doc, {\n            viewProps: this.viewProps,\n            viewName: 'btngrid',\n        });\n        this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n        this.cellCs_.forEach((bc) => {\n            this.view.element.appendChild(bc.view.element);\n        });\n    }\n    get cellControllers() {\n        return this.cellCs_;\n    }\n}\n\nclass ButtonGridBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = config.valueController;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: bc.viewProps,\n        });\n        this.valueController = bc;\n        this.labelController = lc;\n    }\n}\n\nconst ButtonGridBladePlugin = createPlugin({\n    id: 'buttongrid',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            cells: p.required.function,\n            size: p.required.array(p.required.number),\n            view: p.required.constant('buttongrid'),\n            label: p.optional.string,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        return new ButtonGridBladeController(args.document, {\n            blade: args.blade,\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            valueController: new ButtonGridController(args.document, {\n                cellConfig: args.params.cells,\n                size: args.params.size,\n            }),\n        });\n    },\n    api(args) {\n        if (args.controller instanceof ButtonGridBladeController) {\n            return new ButtonGridApi(args.controller);\n        }\n        return null;\n    },\n});\n\nclass CubicBezierApi extends BladeApi {\n    get label() {\n        return this.controller.labelController.props.get('label');\n    }\n    set label(label) {\n        this.controller.labelController.props.set('label', label);\n    }\n    get value() {\n        return this.controller.valueController.value.rawValue;\n    }\n    set value(value) {\n        this.controller.valueController.value.rawValue = value;\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.controller.valueController.value.emitter.on(eventName, (ev) => {\n            bh(new TpChangeEvent(this, ev.rawValue, ev.options.last));\n        });\n        return this;\n    }\n}\n\nfunction interpolate(x1, x2, t) {\n    return x1 * (1 - t) + x2 * t;\n}\nconst MAX_ITERATION = 20;\nconst X_DELTA = 0.001;\nconst CACHE_RESOLUTION = 100;\nfunction y(cb, x) {\n    let dt = 0.25;\n    let t = 0.5;\n    let y = -1;\n    for (let i = 0; i < MAX_ITERATION; i++) {\n        const [tx, ty] = cb.curve(t);\n        t += dt * (tx < x ? 1 : -1);\n        y = ty;\n        dt *= 0.5;\n        if (Math.abs(x - tx) < X_DELTA) {\n            break;\n        }\n    }\n    return y;\n}\nclass CubicBezier {\n    constructor(x1 = 0, y1 = 0, x2 = 1, y2 = 1) {\n        this.cache_ = [];\n        this.comps_ = [x1, y1, x2, y2];\n    }\n    get x1() {\n        return this.comps_[0];\n    }\n    get y1() {\n        return this.comps_[1];\n    }\n    get x2() {\n        return this.comps_[2];\n    }\n    get y2() {\n        return this.comps_[3];\n    }\n    static isObject(obj) {\n        if (isEmpty(obj)) {\n            return false;\n        }\n        if (!Array.isArray(obj)) {\n            return false;\n        }\n        return (typeof obj[0] === 'number' &&\n            typeof obj[1] === 'number' &&\n            typeof obj[2] === 'number' &&\n            typeof obj[3] === 'number');\n    }\n    static equals(v1, v2) {\n        return (v1.x1 === v2.x1 && v1.y1 === v2.y1 && v1.x2 === v2.x2 && v1.y2 === v2.y2);\n    }\n    curve(t) {\n        const x01 = interpolate(0, this.x1, t);\n        const y01 = interpolate(0, this.y1, t);\n        const x12 = interpolate(this.x1, this.x2, t);\n        const y12 = interpolate(this.y1, this.y2, t);\n        const x23 = interpolate(this.x2, 1, t);\n        const y23 = interpolate(this.y2, 1, t);\n        const xr0 = interpolate(x01, x12, t);\n        const yr0 = interpolate(y01, y12, t);\n        const xr1 = interpolate(x12, x23, t);\n        const yr1 = interpolate(y12, y23, t);\n        return [interpolate(xr0, xr1, t), interpolate(yr0, yr1, t)];\n    }\n    y(x) {\n        if (this.cache_.length === 0) {\n            const cache = [];\n            for (let i = 0; i < CACHE_RESOLUTION; i++) {\n                cache.push(y(this, mapRange(i, 0, CACHE_RESOLUTION - 1, 0, 1)));\n            }\n            this.cache_ = cache;\n        }\n        return this.cache_[Math.round(mapRange(constrainRange(x, 0, 1), 0, 1, 0, CACHE_RESOLUTION - 1))];\n    }\n    toObject() {\n        return [this.comps_[0], this.comps_[1], this.comps_[2], this.comps_[3]];\n    }\n}\nconst CubicBezierAssembly = {\n    toComponents: (p) => p.toObject(),\n    fromComponents: (comps) => new CubicBezier(...comps),\n};\n\nfunction cubicBezierToString(cb) {\n    const formatter = createNumberFormatter(2);\n    const comps = cb.toObject().map((c) => formatter(c));\n    return `cubic-bezier(${comps.join(', ')})`;\n}\nconst COMPS_EMPTY = [0, 0.5, 0.5, 1];\nfunction cubicBezierFromString(text) {\n    const m = text.match(/^cubic-bezier\\s*\\(\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*\\)$/);\n    if (!m) {\n        return new CubicBezier(...COMPS_EMPTY);\n    }\n    const comps = [m[1], m[2], m[3], m[4]].reduce((comps, comp) => {\n        if (!comps) {\n            return null;\n        }\n        const n = Number(comp);\n        if (isNaN(n)) {\n            return null;\n        }\n        return [...comps, n];\n    }, []);\n    return new CubicBezier(...(comps !== null && comps !== void 0 ? comps : COMPS_EMPTY));\n}\n\nconst className$7 = ClassName('cbz');\nclass CubicBezierView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$7());\n        config.viewProps.bindClassModifiers(this.element);\n        config.foldable.bindExpandedClass(this.element, className$7(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$7(undefined, 'cpl')));\n        const headElem = doc.createElement('div');\n        headElem.classList.add(className$7('h'));\n        this.element.appendChild(headElem);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(className$7('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        const iconElem = doc.createElementNS(SVG_NS, 'svg');\n        iconElem.innerHTML = '<path d=\"M2 13C8 13 8 3 14 3\"/>';\n        buttonElem.appendChild(iconElem);\n        headElem.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(className$7('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(className$7('p'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nconst className$6 = ClassName('cbzp');\nclass CubicBezierPickerView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$6());\n        config.viewProps.bindClassModifiers(this.element);\n        const graphElem = doc.createElement('div');\n        graphElem.classList.add(className$6('g'));\n        this.element.appendChild(graphElem);\n        this.graphElement = graphElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(className$6('t'));\n        this.element.appendChild(textElem);\n        this.textElement = textElem;\n    }\n}\n\nfunction waitToBeAddedToDom(elem, callback) {\n    const ob = new MutationObserver((ml) => {\n        for (const m of ml) {\n            if (m.type !== 'childList') {\n                continue;\n            }\n            m.addedNodes.forEach((elem) => {\n                if (!elem.contains(elem)) {\n                    return;\n                }\n                callback();\n                ob.disconnect();\n            });\n        }\n    });\n    const doc = elem.ownerDocument;\n    ob.observe(doc.body, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n    });\n}\n\nconst className$5 = ClassName('cbzg');\n// TODO: Apply to core\nfunction compose(h1, h2) {\n    return (input) => h2(h1(input));\n}\nclass CubicBezierGraphView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$5());\n        config.viewProps.bindClassModifiers(this.element);\n        config.viewProps.bindTabIndex(this.element);\n        const previewElem = doc.createElement('div');\n        previewElem.classList.add(className$5('p'));\n        this.element.appendChild(previewElem);\n        this.previewElement = previewElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(className$5('g'));\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const guideElem = doc.createElementNS(SVG_NS, 'path');\n        guideElem.classList.add(className$5('u'));\n        this.svgElem_.appendChild(guideElem);\n        this.guideElem_ = guideElem;\n        const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n        lineElem.classList.add(className$5('l'));\n        this.svgElem_.appendChild(lineElem);\n        this.lineElem_ = lineElem;\n        this.handleElems_ = [doc.createElement('div'), doc.createElement('div')];\n        this.handleElems_.forEach((elem) => {\n            elem.classList.add(className$5('h'));\n            this.element.appendChild(elem);\n        });\n        this.vectorElems_ = [\n            doc.createElementNS(SVG_NS, 'line'),\n            doc.createElementNS(SVG_NS, 'line'),\n        ];\n        this.vectorElems_.forEach((elem) => {\n            elem.classList.add(className$5('v'));\n            this.svgElem_.appendChild(elem);\n        });\n        this.value_ = config.value;\n        this.value_.emitter.on('change', this.onValueChange_.bind(this));\n        this.sel_ = config.selection;\n        this.handleElems_.forEach((elem, index) => {\n            bindValue(this.sel_, compose((selection) => selection === index, valueToClassName(elem, className$5('h', 'sel'))));\n        });\n        waitToBeAddedToDom(this.element, () => {\n            this.refresh();\n        });\n    }\n    getVertMargin_(h) {\n        return h * 0.25;\n    }\n    valueToPosition(x, y) {\n        const { clientWidth: w, clientHeight: h } = this.element;\n        const vm = this.getVertMargin_(h);\n        return {\n            x: mapRange(x, 0, 1, 0, w),\n            y: mapRange(y, 0, 1, h - vm, vm),\n        };\n    }\n    positionToValue(x, y) {\n        const bounds = this.element.getBoundingClientRect();\n        const w = bounds.width;\n        const h = bounds.height;\n        const vm = this.getVertMargin_(h);\n        return {\n            x: constrainRange(mapRange(x, 0, w, 0, 1), 0, 1),\n            y: mapRange(y, h - vm, vm, 0, 1),\n        };\n    }\n    refresh() {\n        this.guideElem_.setAttributeNS(null, 'd', [0, 1]\n            .map((index) => {\n            const p1 = this.valueToPosition(0, index);\n            const p2 = this.valueToPosition(1, index);\n            return [`M ${p1.x},${p1.y}`, `L ${p2.x},${p2.y}`].join(' ');\n        })\n            .join(' '));\n        const bezier = this.value_.rawValue;\n        const points = [];\n        let t = 0;\n        for (;;) {\n            const p = this.valueToPosition(...bezier.curve(t));\n            points.push([p.x, p.y].join(','));\n            if (t >= 1) {\n                break;\n            }\n            t = Math.min(t + 0.05, 1);\n        }\n        this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n        const obj = bezier.toObject();\n        [0, 1].forEach((index) => {\n            const p1 = this.valueToPosition(index, index);\n            const p2 = this.valueToPosition(obj[index * 2], obj[index * 2 + 1]);\n            const vElem = this.vectorElems_[index];\n            vElem.setAttributeNS(null, 'x1', String(p1.x));\n            vElem.setAttributeNS(null, 'y1', String(p1.y));\n            vElem.setAttributeNS(null, 'x2', String(p2.x));\n            vElem.setAttributeNS(null, 'y2', String(p2.y));\n            const hElem = this.handleElems_[index];\n            hElem.style.left = `${p2.x}px`;\n            hElem.style.top = `${p2.y}px`;\n        });\n    }\n    onValueChange_() {\n        this.refresh();\n    }\n}\n\nconst TICK_COUNT = 24;\nconst PREVIEW_DELAY = 400;\nconst PREVIEW_DURATION = 1000;\nconst className$4 = ClassName('cbzprv');\nclass CubicBezierPreviewView {\n    constructor(doc, config) {\n        this.stopped_ = true;\n        this.startTime_ = -1;\n        this.requestId_ = -1;\n        this.onDispose_ = this.onDispose_.bind(this);\n        this.onTimer_ = this.onTimer_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$4());\n        config.viewProps.bindClassModifiers(this.element);\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(className$4('g'));\n        this.element.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        const ticksElem = doc.createElementNS(SVG_NS, 'path');\n        ticksElem.classList.add(className$4('t'));\n        this.svgElem_.appendChild(ticksElem);\n        this.ticksElem_ = ticksElem;\n        const markerElem = doc.createElement('div');\n        markerElem.classList.add(className$4('m'));\n        this.element.appendChild(markerElem);\n        this.markerElem_ = markerElem;\n        this.value_ = config.value;\n        this.value_.emitter.on('change', this.onValueChange_);\n        config.viewProps.handleDispose(this.onDispose_);\n        waitToBeAddedToDom(this.element, () => {\n            this.refresh();\n        });\n    }\n    play() {\n        this.stop();\n        this.updateMarker_(0);\n        this.markerElem_.classList.add(className$4('m', 'a'));\n        this.startTime_ = new Date().getTime() + PREVIEW_DELAY;\n        this.stopped_ = false;\n        this.requestId_ = requestAnimationFrame(this.onTimer_);\n    }\n    stop() {\n        cancelAnimationFrame(this.requestId_);\n        this.stopped_ = true;\n        this.markerElem_.classList.remove(className$4('m', 'a'));\n    }\n    onDispose_() {\n        this.stop();\n    }\n    updateMarker_(progress) {\n        const p = this.value_.rawValue.y(constrainRange(progress, 0, 1));\n        this.markerElem_.style.left = `${p * 100}%`;\n    }\n    refresh() {\n        const { clientWidth: w, clientHeight: h } = this.svgElem_;\n        const ds = [];\n        const bezier = this.value_.rawValue;\n        for (let i = 0; i < TICK_COUNT; i++) {\n            const px = mapRange(i, 0, TICK_COUNT - 1, 0, 1);\n            const x = mapRange(bezier.y(px), 0, 1, 0, w);\n            ds.push(`M ${x},0 v${h}`);\n        }\n        this.ticksElem_.setAttributeNS(null, 'd', ds.join(' '));\n    }\n    onTimer_() {\n        if (this.startTime_ === null) {\n            return;\n        }\n        const dt = new Date().getTime() - this.startTime_;\n        const p = dt / PREVIEW_DURATION;\n        this.updateMarker_(p);\n        if (dt > PREVIEW_DURATION + PREVIEW_DELAY) {\n            this.stop();\n        }\n        if (!this.stopped_) {\n            this.requestId_ = requestAnimationFrame(this.onTimer_);\n        }\n    }\n    onValueChange_() {\n        this.refresh();\n        this.play();\n    }\n}\n\nfunction getDistance(x1, y1, x2, y2) {\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction lockAngle(x1, y1, x2, y2) {\n    const d = getDistance(x1, y1, x2, y2);\n    const a = Math.atan2(y2 - y1, x2 - x1);\n    const la = (Math.round(a / (Math.PI / 4)) * Math.PI) / 4;\n    return {\n        x: x1 + Math.cos(la) * d,\n        y: y1 + Math.sin(la) * d,\n    };\n}\nclass CubicBezierGraphController {\n    constructor(doc, config) {\n        this.onKeyDown_ = this.onKeyDown_.bind(this);\n        this.onKeyUp_ = this.onKeyUp_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.keyScale_ = config.keyScale;\n        this.value = config.value;\n        this.sel_ = createValue(0);\n        this.viewProps = config.viewProps;\n        this.view = new CubicBezierGraphView(doc, {\n            selection: this.sel_,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.element.addEventListener('keydown', this.onKeyDown_);\n        this.view.element.addEventListener('keyup', this.onKeyUp_);\n        this.prevView_ = new CubicBezierPreviewView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.prevView_.element.addEventListener('mousedown', (ev) => {\n            ev.stopImmediatePropagation();\n            ev.preventDefault();\n            this.prevView_.play();\n        });\n        this.view.previewElement.appendChild(this.prevView_.element);\n        const ptHandler = new PointerHandler(this.view.element);\n        ptHandler.emitter.on('down', this.onPointerDown_);\n        ptHandler.emitter.on('move', this.onPointerMove_);\n        ptHandler.emitter.on('up', this.onPointerUp_);\n    }\n    refresh() {\n        this.view.refresh();\n        this.prevView_.refresh();\n        this.prevView_.play();\n    }\n    updateValue_(point, locksAngle, opts) {\n        const index = this.sel_.rawValue;\n        const comps = this.value.rawValue.toObject();\n        const vp = this.view.positionToValue(point.x, point.y);\n        const v = locksAngle ? lockAngle(index, index, vp.x, vp.y) : vp;\n        comps[index * 2] = v.x;\n        comps[index * 2 + 1] = v.y;\n        this.value.setRawValue(new CubicBezier(...comps), opts);\n    }\n    onPointerDown_(ev) {\n        const data = ev.data;\n        if (!data.point) {\n            return;\n        }\n        const bezier = this.value.rawValue;\n        const p1 = this.view.valueToPosition(bezier.x1, bezier.y1);\n        const d1 = getDistance(data.point.x, data.point.y, p1.x, p1.y);\n        const p2 = this.view.valueToPosition(bezier.x2, bezier.y2);\n        const d2 = getDistance(data.point.x, data.point.y, p2.x, p2.y);\n        this.sel_.rawValue = d1 <= d2 ? 0 : 1;\n        this.updateValue_(data.point, ev.shiftKey, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerMove_(ev) {\n        const data = ev.data;\n        if (!data.point) {\n            return;\n        }\n        this.updateValue_(data.point, ev.shiftKey, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        const data = ev.data;\n        if (!data.point) {\n            return;\n        }\n        this.updateValue_(data.point, ev.shiftKey, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n    onKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const index = this.sel_.rawValue;\n        const comps = this.value.rawValue.toObject();\n        const keyScale = this.keyScale_.rawValue;\n        comps[index * 2] += getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        comps[index * 2 + 1] += getStepForKey(keyScale, getVerticalStepKeys(ev));\n        this.value.setRawValue(new CubicBezier(...comps), {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onKeyUp_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const keyScale = this.keyScale_.rawValue;\n        const xStep = getStepForKey(keyScale, getHorizontalStepKeys(ev));\n        const yStep = getStepForKey(keyScale, getVerticalStepKeys(ev));\n        if (xStep === 0 && yStep === 0) {\n            return;\n        }\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n    }\n}\n\nclass CubicBezierPickerController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new CubicBezierPickerView(doc, {\n            viewProps: this.viewProps,\n        });\n        this.gc_ = new CubicBezierGraphController(doc, {\n            keyScale: config.axis.textProps.value('keyScale'),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.graphElement.appendChild(this.gc_.view.element);\n        const xAxis = Object.assign(Object.assign({}, config.axis), { constraint: new RangeConstraint({ max: 1, min: 0 }) });\n        const yAxis = Object.assign(Object.assign({}, config.axis), { constraint: undefined });\n        this.tc_ = new PointNdTextController(doc, {\n            assembly: CubicBezierAssembly,\n            axes: [xAxis, yAxis, xAxis, yAxis],\n            parser: parseNumber,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.tc_.view.element);\n    }\n    get allFocusableElements() {\n        return [\n            this.gc_.view.element,\n            ...this.tc_.view.textViews.map((v) => v.inputElement),\n        ];\n    }\n    refresh() {\n        this.gc_.refresh();\n    }\n}\n\nclass CubicBezierController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.view = new CubicBezierView(doc, {\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n            viewProps: this.viewProps,\n        });\n        this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n        this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n        this.tc_ = new TextController(doc, {\n            parser: cubicBezierFromString,\n            props: ValueMap.fromObject({\n                formatter: cubicBezierToString,\n            }),\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view.textElement.appendChild(this.tc_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const pickerC = new CubicBezierPickerController(doc, {\n            axis: config.axis,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        pickerC.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.pickerC_ = pickerC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(this.pickerC_.view.element);\n            bindValue(this.popC_.shows, (shows) => {\n                if (shows) {\n                    pickerC.refresh();\n                }\n            });\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.pickerC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    onButtonBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const nextTarget = forceCast(ev.relatedTarget);\n        if (!nextTarget || !this.popC_.view.element.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.pickerC_.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            // Next target is in the popup\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            // Next target is the trigger button\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        if (ev.key === 'Escape') {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n}\n\nfunction createConstraint$1() {\n    return new PointNdConstraint({\n        assembly: CubicBezierAssembly,\n        components: [0, 1, 2, 3].map((index) => index % 2 === 0\n            ? new RangeConstraint({\n                min: 0,\n                max: 1,\n            })\n            : undefined),\n    });\n}\nconst CubicBezierBladePlugin = createPlugin({\n    id: 'cubicbezier',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            value: p.required.array(p.required.number),\n            view: p.required.constant('cubicbezier'),\n            expanded: p.optional.boolean,\n            label: p.optional.string,\n            picker: p.optional.custom((v) => {\n                return v === 'inline' || v === 'popup' ? v : undefined;\n            }),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b;\n        const rv = new CubicBezier(...args.params.value);\n        const v = createValue(rv, {\n            constraint: createConstraint$1(),\n            equals: CubicBezier.equals,\n        });\n        const vc = new CubicBezierController(args.document, {\n            axis: {\n                textProps: ValueMap.fromObject({\n                    keyScale: 0.1,\n                    pointerScale: 0.01,\n                    formatter: createNumberFormatter(2),\n                }),\n            },\n            expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n            pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n            value: v,\n            viewProps: args.viewProps,\n        });\n        return new LabeledValueBladeController(args.document, {\n            blade: args.blade,\n            props: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            value: v,\n            valueController: vc,\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof LabeledValueBladeController)) {\n            return null;\n        }\n        if (!(args.controller.valueController instanceof CubicBezierController)) {\n            return null;\n        }\n        return new CubicBezierApi(args.controller);\n    },\n});\n\nclass FpsGraphBladeApi extends BladeApi {\n    get fps() {\n        return this.controller.valueController.fps;\n    }\n    get max() {\n        return this.controller.valueController.props.get('max');\n    }\n    set max(max) {\n        this.controller.valueController.props.set('max', max);\n    }\n    get min() {\n        return this.controller.valueController.props.get('min');\n    }\n    set min(min) {\n        this.controller.valueController.props.set('min', min);\n    }\n    begin() {\n        this.controller.valueController.begin();\n    }\n    end() {\n        this.controller.valueController.end();\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        const emitter = this.controller.valueController.ticker.emitter;\n        emitter.on(eventName, () => {\n            bh(new TpEvent(this));\n        });\n        return this;\n    }\n}\n\nconst MAX_TIMESTAMPS = 20;\nclass Fpswatch {\n    constructor() {\n        this.start_ = null;\n        this.duration_ = 0;\n        this.fps_ = null;\n        this.frameCount_ = 0;\n        this.timestamps_ = [];\n    }\n    get duration() {\n        return this.duration_;\n    }\n    get fps() {\n        return this.fps_;\n    }\n    begin(now) {\n        this.start_ = now.getTime();\n    }\n    calculateFps_(nowTime) {\n        if (this.timestamps_.length === 0) {\n            return null;\n        }\n        const ts = this.timestamps_[0];\n        return (1000 * (this.frameCount_ - ts.frameCount)) / (nowTime - ts.time);\n    }\n    compactTimestamps_() {\n        if (this.timestamps_.length <= MAX_TIMESTAMPS) {\n            return;\n        }\n        const len = this.timestamps_.length - MAX_TIMESTAMPS;\n        this.timestamps_.splice(0, len);\n        const df = this.timestamps_[0].frameCount;\n        this.timestamps_.forEach((ts) => {\n            ts.frameCount -= df;\n        });\n        this.frameCount_ -= df;\n    }\n    end(now) {\n        if (this.start_ === null) {\n            return;\n        }\n        const t = now.getTime();\n        this.duration_ = t - this.start_;\n        this.start_ = null;\n        this.fps_ = this.calculateFps_(t);\n        this.timestamps_.push({\n            frameCount: this.frameCount_,\n            time: t,\n        });\n        ++this.frameCount_;\n        this.compactTimestamps_();\n    }\n}\n\nconst className$3 = ClassName('fps');\nclass FpsView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$3());\n        config.viewProps.bindClassModifiers(this.element);\n        this.graphElement = doc.createElement('div');\n        this.graphElement.classList.add(className$3('g'));\n        this.element.appendChild(this.graphElement);\n        const labelElement = doc.createElement('div');\n        labelElement.classList.add(className$3('l'));\n        this.element.appendChild(labelElement);\n        const valueElement = doc.createElement('span');\n        valueElement.classList.add(className$3('v'));\n        valueElement.textContent = '--';\n        labelElement.appendChild(valueElement);\n        this.valueElement = valueElement;\n        const unitElement = doc.createElement('span');\n        unitElement.classList.add(className$3('u'));\n        unitElement.textContent = 'FPS';\n        labelElement.appendChild(unitElement);\n    }\n}\n\nclass FpsGraphController {\n    constructor(doc, config) {\n        this.stopwatch_ = new Fpswatch();\n        this.onTick_ = this.onTick_.bind(this);\n        this.ticker = config.ticker;\n        this.ticker.emitter.on('tick', this.onTick_);\n        this.props = config.props;\n        this.value_ = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new FpsView(doc, {\n            viewProps: this.viewProps,\n        });\n        this.graphC_ = new GraphLogController(doc, {\n            formatter: createNumberFormatter(0),\n            props: this.props,\n            rows: config.rows,\n            value: this.value_,\n            viewProps: this.viewProps,\n        });\n        this.view.graphElement.appendChild(this.graphC_.view.element);\n        this.viewProps.handleDispose(() => {\n            this.graphC_.viewProps.set('disposed', true);\n            this.ticker.dispose();\n        });\n    }\n    get fps() {\n        return this.stopwatch_.fps;\n    }\n    begin() {\n        this.stopwatch_.begin(new Date());\n    }\n    end() {\n        this.stopwatch_.end(new Date());\n    }\n    onTick_() {\n        const fps = this.fps;\n        if (fps !== null) {\n            const buffer = this.value_.rawValue;\n            this.value_.rawValue = createPushedBuffer(buffer, fps);\n            this.view.valueElement.textContent = fps.toFixed(0);\n        }\n    }\n}\n\nclass FpsGraphBladeController extends BladeController {\n    constructor(doc, config) {\n        const fc = config.valueController;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: fc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: fc.viewProps,\n        });\n        this.valueController = fc;\n        this.labelController = lc;\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\nconst FpsGraphBladePlugin = createPlugin({\n    id: 'fpsgraph',\n    type: 'blade',\n    accept(params) {\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('fpsgraph'),\n            interval: p.optional.number,\n            label: p.optional.string,\n            rows: p.optional.number,\n            max: p.optional.number,\n            min: p.optional.number,\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b, _c, _d;\n        const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n        return new FpsGraphBladeController(args.document, {\n            blade: args.blade,\n            labelProps: ValueMap.fromObject({\n                label: args.params.label,\n            }),\n            valueController: new FpsGraphController(args.document, {\n                props: ValueMap.fromObject({\n                    max: (_b = args.params.max) !== null && _b !== void 0 ? _b : 90,\n                    min: (_c = args.params.min) !== null && _c !== void 0 ? _c : 0,\n                }),\n                rows: (_d = args.params.rows) !== null && _d !== void 0 ? _d : 2,\n                ticker: createTicker(args.document, interval),\n                value: createValue(initializeBuffer(80)),\n                viewProps: args.viewProps,\n            }),\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof FpsGraphBladeController)) {\n            return null;\n        }\n        return new FpsGraphBladeApi(args.controller);\n    },\n});\n\nclass Interval {\n    constructor(min, max) {\n        this.min = min;\n        this.max = max;\n    }\n    static isObject(obj) {\n        if (typeof obj !== 'object' || obj === null) {\n            return false;\n        }\n        const min = obj.min;\n        const max = obj.max;\n        if (typeof min !== 'number' || typeof max !== 'number') {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.min === v2.min && v1.max === v2.max;\n    }\n    get length() {\n        return this.max - this.min;\n    }\n    toObject() {\n        return {\n            min: this.min,\n            max: this.max,\n        };\n    }\n}\nconst IntervalAssembly = {\n    fromComponents: (comps) => new Interval(comps[0], comps[1]),\n    toComponents: (p) => [p.min, p.max],\n};\n\nclass IntervalConstraint {\n    constructor(edge) {\n        this.edge = edge;\n    }\n    constrain(value) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        if (value.min <= value.max) {\n            return new Interval((_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value.min)) !== null && _b !== void 0 ? _b : value.min, (_d = (_c = this.edge) === null || _c === void 0 ? void 0 : _c.constrain(value.max)) !== null && _d !== void 0 ? _d : value.max);\n        }\n        const c = (value.min + value.max) / 2;\n        return new Interval((_f = (_e = this.edge) === null || _e === void 0 ? void 0 : _e.constrain(c)) !== null && _f !== void 0 ? _f : c, (_h = (_g = this.edge) === null || _g === void 0 ? void 0 : _g.constrain(c)) !== null && _h !== void 0 ? _h : c);\n    }\n}\n\nconst className$2 = ClassName('rsltxt');\nclass RangeSliderTextView {\n    constructor(doc, config) {\n        this.sliderView_ = config.sliderView;\n        this.textView_ = config.textView;\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$2());\n        const sliderElem = doc.createElement('div');\n        sliderElem.classList.add(className$2('s'));\n        sliderElem.appendChild(this.sliderView_.element);\n        this.element.appendChild(sliderElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(className$2('t'));\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nconst className$1 = ClassName('rsl');\nclass RangeSliderView {\n    constructor(doc, config) {\n        this.onSliderPropsChange_ = this.onSliderPropsChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.sliderProps_ = config.sliderProps;\n        this.sliderProps_.emitter.on('change', this.onSliderPropsChange_);\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$1());\n        config.viewProps.bindClassModifiers(this.element);\n        this.value_ = config.value;\n        this.value_.emitter.on('change', this.onValueChange_);\n        const trackElem = doc.createElement('div');\n        trackElem.classList.add(className$1('t'));\n        this.element.appendChild(trackElem);\n        this.trackElement = trackElem;\n        const barElem = doc.createElement('div');\n        barElem.classList.add(className$1('b'));\n        trackElem.appendChild(barElem);\n        this.barElement = barElem;\n        const knobElems = ['min', 'max'].map((modifier) => {\n            const elem = doc.createElement('div');\n            elem.classList.add(className$1('k'), className$1('k', modifier));\n            trackElem.appendChild(elem);\n            return elem;\n        });\n        this.knobElements = [knobElems[0], knobElems[1]];\n        this.update_();\n    }\n    valueToX_(value) {\n        const min = this.sliderProps_.get('min');\n        const max = this.sliderProps_.get('max');\n        return constrainRange(mapRange(value, min, max, 0, 1), 0, 1) * 100;\n    }\n    update_() {\n        const v = this.value_.rawValue;\n        if (v.length === 0) {\n            this.element.classList.add(className$1(undefined, 'zero'));\n        }\n        else {\n            this.element.classList.remove(className$1(undefined, 'zero'));\n        }\n        const xs = [this.valueToX_(v.min), this.valueToX_(v.max)];\n        this.barElement.style.left = `${xs[0]}%`;\n        this.barElement.style.right = `${100 - xs[1]}%`;\n        this.knobElements.forEach((elem, index) => {\n            elem.style.left = `${xs[index]}%`;\n        });\n    }\n    onSliderPropsChange_() {\n        this.update_();\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass RangeSliderController {\n    constructor(doc, config) {\n        this.grabbing_ = null;\n        this.grabOffset_ = 0;\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.sliderProps = config.sliderProps;\n        this.viewProps = config.viewProps;\n        this.value = config.value;\n        this.view = new RangeSliderView(doc, {\n            sliderProps: this.sliderProps,\n            value: this.value,\n            viewProps: config.viewProps,\n        });\n        const ptHandler = new PointerHandler(this.view.trackElement);\n        ptHandler.emitter.on('down', this.onPointerDown_);\n        ptHandler.emitter.on('move', this.onPointerMove_);\n        ptHandler.emitter.on('up', this.onPointerUp_);\n    }\n    ofs_() {\n        if (this.grabbing_ === 'min') {\n            return this.view.knobElements[0].getBoundingClientRect().width / 2;\n        }\n        if (this.grabbing_ === 'max') {\n            return -this.view.knobElements[1].getBoundingClientRect().width / 2;\n        }\n        return 0;\n    }\n    valueFromData_(data) {\n        if (!data.point) {\n            return null;\n        }\n        const p = (data.point.x + this.ofs_()) / data.bounds.width;\n        const min = this.sliderProps.get('min');\n        const max = this.sliderProps.get('max');\n        return mapRange(p, 0, 1, min, max);\n    }\n    onPointerDown_(ev) {\n        if (!ev.data.point) {\n            return;\n        }\n        const p = ev.data.point.x / ev.data.bounds.width;\n        const v = this.value.rawValue;\n        const min = this.sliderProps.get('min');\n        const max = this.sliderProps.get('max');\n        const pmin = mapRange(v.min, min, max, 0, 1);\n        const pmax = mapRange(v.max, min, max, 0, 1);\n        if (Math.abs(pmax - p) <= 0.025) {\n            this.grabbing_ = 'max';\n        }\n        else if (Math.abs(pmin - p) <= 0.025) {\n            this.grabbing_ = 'min';\n        }\n        else if (p >= pmin && p <= pmax) {\n            this.grabbing_ = 'length';\n            this.grabOffset_ = mapRange(p - pmin, 0, 1, 0, max - min);\n        }\n        else if (p < pmin) {\n            this.grabbing_ = 'min';\n            this.onPointerMove_(ev);\n        }\n        else if (p > pmax) {\n            this.grabbing_ = 'max';\n            this.onPointerMove_(ev);\n        }\n    }\n    applyPointToValue_(data, opts) {\n        const v = this.valueFromData_(data);\n        if (v === null) {\n            return;\n        }\n        const rmin = this.sliderProps.get('min');\n        const rmax = this.sliderProps.get('max');\n        if (this.grabbing_ === 'min') {\n            this.value.setRawValue(new Interval(v, this.value.rawValue.max), opts);\n        }\n        else if (this.grabbing_ === 'max') {\n            this.value.setRawValue(new Interval(this.value.rawValue.min, v), opts);\n        }\n        else if (this.grabbing_ === 'length') {\n            const len = this.value.rawValue.length;\n            let min = v - this.grabOffset_;\n            let max = min + len;\n            if (min < rmin) {\n                min = rmin;\n                max = rmin + len;\n            }\n            else if (max > rmax) {\n                min = rmax - len;\n                max = rmax;\n            }\n            this.value.setRawValue(new Interval(min, max), opts);\n        }\n    }\n    onPointerMove_(ev) {\n        this.applyPointToValue_(ev.data, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_(ev) {\n        this.applyPointToValue_(ev.data, {\n            forceEmit: true,\n            last: true,\n        });\n        this.grabbing_ = null;\n    }\n}\n\nclass RangeSliderTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sc_ = new RangeSliderController(doc, config);\n        const axis = {\n            constraint: config.constraint,\n            textProps: config.textProps,\n        };\n        this.tc_ = new PointNdTextController(doc, {\n            assembly: IntervalAssembly,\n            axes: [axis, axis],\n            parser: config.parser,\n            value: this.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new RangeSliderTextView(doc, {\n            sliderView: this.sc_.view,\n            textView: this.tc_.view,\n        });\n    }\n    get textController() {\n        return this.tc_;\n    }\n}\n\nfunction intervalFromUnknown(value) {\n    return Interval.isObject(value)\n        ? new Interval(value.min, value.max)\n        : new Interval(0, 0);\n}\nfunction writeInterval(target, value) {\n    target.writeProperty('max', value.max);\n    target.writeProperty('min', value.min);\n}\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const rc = createRangeConstraint(params);\n    if (rc) {\n        constraints.push(rc);\n    }\n    const sc = createStepConstraint(params);\n    if (sc) {\n        constraints.push(sc);\n    }\n    return new IntervalConstraint(new CompositeConstraint(constraints));\n}\nconst IntervalInputPlugin = createPlugin({\n    id: 'input-interval',\n    type: 'input',\n    accept: (exValue, params) => {\n        if (!Interval.isObject(exValue)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { readonly: p.optional.constant(false) })));\n        return result\n            ? {\n                initialValue: new Interval(exValue.min, exValue.max),\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => intervalFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        equals: Interval.equals,\n        writer: (_args) => writeInterval,\n    },\n    controller(args) {\n        const v = args.value;\n        const c = args.constraint;\n        if (!(c instanceof IntervalConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const midValue = (v.rawValue.min + v.rawValue.max) / 2;\n        const textProps = ValueMap.fromObject(createNumberTextPropsObject(args.params, midValue));\n        const drc = c.edge && findConstraint(c.edge, DefiniteRangeConstraint);\n        if (drc) {\n            return new RangeSliderTextController(args.document, {\n                constraint: c.edge,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    keyScale: textProps.value('keyScale'),\n                    max: drc.values.value('max'),\n                    min: drc.values.value('min'),\n                }),\n                textProps: textProps,\n                value: v,\n                viewProps: args.viewProps,\n            });\n        }\n        const axis = {\n            constraint: c.edge,\n            textProps: textProps,\n        };\n        return new PointNdTextController(args.document, {\n            assembly: IntervalAssembly,\n            axes: [axis, axis],\n            parser: parseNumber,\n            value: v,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nclass RadioCellApi {\n    constructor(controller) {\n        this.controller_ = controller;\n    }\n    get disabled() {\n        return this.controller_.viewProps.get('disabled');\n    }\n    set disabled(disabled) {\n        this.controller_.viewProps.set('disabled', disabled);\n    }\n    get title() {\n        var _a;\n        return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n    }\n    set title(title) {\n        this.controller_.props.set('title', title);\n    }\n}\n\nclass TpRadioGridChangeEvent extends TpChangeEvent {\n    constructor(target, cell, index, value, last) {\n        super(target, value, last);\n        this.cell = cell;\n        this.index = index;\n    }\n}\n\nclass RadioGridApi extends BladeApi {\n    constructor(controller) {\n        super(controller);\n        this.cellToApiMap_ = new Map();\n        const gc = this.controller.valueController;\n        gc.cellControllers.forEach((cc) => {\n            const api = new RadioCellApi(cc);\n            this.cellToApiMap_.set(cc, api);\n        });\n    }\n    get value() {\n        return this.controller.value;\n    }\n    cell(x, y) {\n        const gc = this.controller.valueController;\n        const cc = gc.cellControllers[y * gc.size[0] + x];\n        return this.cellToApiMap_.get(cc);\n    }\n    on(eventName, handler) {\n        const bh = handler.bind(this);\n        this.controller.value.emitter.on(eventName, (ev) => {\n            const gc = this.controller.valueController;\n            const cc = gc.findCellByValue(ev.rawValue);\n            if (!cc) {\n                return;\n            }\n            const capi = this.cellToApiMap_.get(cc);\n            if (!capi) {\n                return;\n            }\n            const i = gc.cellControllers.indexOf(cc);\n            bh(new TpRadioGridChangeEvent(this, capi, [i % gc.size[0], Math.floor(i / gc.size[0])], ev.rawValue));\n        });\n    }\n}\n\nconst className = ClassName('rad');\nclass RadioView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        const labelElem = doc.createElement('label');\n        labelElem.classList.add(className('l'));\n        this.element.appendChild(labelElem);\n        const inputElem = doc.createElement('input');\n        inputElem.classList.add(className('i'));\n        inputElem.name = config.name;\n        inputElem.type = 'radio';\n        config.viewProps.bindDisabled(inputElem);\n        labelElem.appendChild(inputElem);\n        this.inputElement = inputElem;\n        const bodyElem = doc.createElement('div');\n        bodyElem.classList.add(className('b'));\n        labelElem.appendChild(bodyElem);\n        const titleElem = doc.createElement('div');\n        titleElem.classList.add(className('t'));\n        bodyElem.appendChild(titleElem);\n        bindValueMap(config.props, 'title', (title) => {\n            titleElem.textContent = title;\n        });\n    }\n}\n\nclass RadioController {\n    constructor(doc, config) {\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.view = new RadioView(doc, {\n            name: config.name,\n            props: this.props,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nclass RadioGridController {\n    constructor(doc, config) {\n        this.cellCs_ = [];\n        this.cellValues_ = [];\n        this.onCellInputChange_ = this.onCellInputChange_.bind(this);\n        this.size = config.size;\n        const [w, h] = this.size;\n        for (let y = 0; y < h; y++) {\n            for (let x = 0; x < w; x++) {\n                const bc = new RadioController(doc, {\n                    name: config.groupName,\n                    props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                    viewProps: ViewProps.create(),\n                });\n                this.cellCs_.push(bc);\n                this.cellValues_.push(config.cellConfig(x, y).value);\n            }\n        }\n        this.value = config.value;\n        bindValue(this.value, (value) => {\n            const cc = this.findCellByValue(value);\n            if (!cc) {\n                return;\n            }\n            cc.view.inputElement.checked = true;\n        });\n        this.viewProps = ViewProps.create();\n        this.view = new PlainView(doc, {\n            viewProps: this.viewProps,\n            viewName: 'radgrid',\n        });\n        this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n        this.cellCs_.forEach((bc) => {\n            bc.view.inputElement.addEventListener('change', this.onCellInputChange_);\n            this.view.element.appendChild(bc.view.element);\n        });\n    }\n    get cellControllers() {\n        return this.cellCs_;\n    }\n    findCellByValue(value) {\n        const index = this.cellValues_.findIndex((v) => v === value);\n        if (index < 0) {\n            return null;\n        }\n        return this.cellCs_[index];\n    }\n    onCellInputChange_(ev) {\n        const inputElem = ev.currentTarget;\n        const index = this.cellCs_.findIndex((c) => c.view.inputElement === inputElem);\n        if (index < 0) {\n            return;\n        }\n        this.value.rawValue = this.cellValues_[index];\n    }\n}\n\nconst RadioGridBladePlugin = (function () {\n    return createPlugin({\n        id: 'radiogrid',\n        type: 'blade',\n        accept(params) {\n            const result = parseRecord(params, (p) => ({\n                cells: p.required.function,\n                groupName: p.required.string,\n                size: p.required.array(p.required.number),\n                value: p.required.raw,\n                view: p.required.constant('radiogrid'),\n                label: p.optional.string,\n            }));\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            const value = createValue(args.params.value);\n            return new LabeledValueBladeController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                value: value,\n                valueController: new RadioGridController(args.document, {\n                    groupName: args.params.groupName,\n                    cellConfig: args.params.cells,\n                    size: args.params.size,\n                    value: value,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueBladeController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof RadioGridController)) {\n                return null;\n            }\n            return new RadioGridApi(args.controller);\n        },\n    });\n})();\n\nfunction createRadioGridInputPlugin(config) {\n    return createPlugin({\n        id: 'input-radiogrid',\n        type: 'input',\n        accept(value, params) {\n            if (!config.isType(value)) {\n                return null;\n            }\n            const result = parseRecord(params, (p) => ({\n                cells: p.required.function,\n                groupName: p.required.string,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('radiogrid'),\n            }));\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: config.binding,\n        controller: (args) => {\n            return new RadioGridController(args.document, {\n                cellConfig: args.params.cells,\n                groupName: args.params.groupName,\n                size: args.params.size,\n                value: args.value,\n            });\n        },\n    });\n}\nconst RadioGruidNumberInputPlugin = createRadioGridInputPlugin({\n    isType: (value) => {\n        return typeof value === 'number';\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        writer: (_args) => writePrimitive,\n    },\n});\nconst RadioGruidStringInputPlugin = createRadioGridInputPlugin({\n    isType: (value) => {\n        return typeof value === 'string';\n    },\n    binding: {\n        reader: (_args) => stringFromUnknown,\n        writer: (_args) => writePrimitive,\n    },\n});\nconst RadioGruidBooleanInputPlugin = createRadioGridInputPlugin({\n    isType: (value) => {\n        return typeof value === 'boolean';\n    },\n    binding: {\n        reader: (_args) => boolFromUnknown,\n        writer: (_args) => writePrimitive,\n    },\n});\n\nconst id = 'essentials';\nconst css = '.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\"\";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}';\nconst plugins = [\n    ButtonGridBladePlugin,\n    CubicBezierBladePlugin,\n    FpsGraphBladePlugin,\n    IntervalInputPlugin,\n    RadioGridBladePlugin,\n    RadioGruidBooleanInputPlugin,\n    RadioGruidNumberInputPlugin,\n    RadioGruidStringInputPlugin,\n];\n\nexport { ButtonCellApi, ButtonGridApi, ButtonGridController, CubicBezier, CubicBezierApi, CubicBezierAssembly, CubicBezierController, CubicBezierGraphController, CubicBezierGraphView, CubicBezierPickerController, CubicBezierPickerView, CubicBezierPreviewView, CubicBezierView, FpsGraphBladeApi, FpsGraphController, FpsView, Fpswatch, Interval, IntervalAssembly, IntervalConstraint, RadioCellApi, RadioController, RadioGridApi, RadioGridController, RadioView, RangeSliderController, RangeSliderTextController, RangeSliderTextView, RangeSliderView, TpRadioGridChangeEvent, css, id, plugins };\n","var toStringFunction = Function.prototype.toString;\nvar create = Object.create;\nvar toStringObject = Object.prototype.toString;\n/**\n * @classdesc Fallback cache for when WeakMap is not natively supported\n */\nvar LegacyCache = /** @class */ (function () {\n    function LegacyCache() {\n        this._keys = [];\n        this._values = [];\n    }\n    LegacyCache.prototype.has = function (key) {\n        return !!~this._keys.indexOf(key);\n    };\n    LegacyCache.prototype.get = function (key) {\n        return this._values[this._keys.indexOf(key)];\n    };\n    LegacyCache.prototype.set = function (key, value) {\n        this._keys.push(key);\n        this._values.push(value);\n    };\n    return LegacyCache;\n}());\nfunction createCacheLegacy() {\n    return new LegacyCache();\n}\nfunction createCacheModern() {\n    return new WeakMap();\n}\n/**\n * Get a new cache object to prevent circular references.\n */\nvar createCache = typeof WeakMap !== 'undefined' ? createCacheModern : createCacheLegacy;\n/**\n * Get an empty version of the object with the same prototype it has.\n */\nfunction getCleanClone(prototype) {\n    if (!prototype) {\n        return create(null);\n    }\n    var Constructor = prototype.constructor;\n    if (Constructor === Object) {\n        return prototype === Object.prototype ? {} : create(prototype);\n    }\n    if (Constructor &&\n        ~toStringFunction.call(Constructor).indexOf('[native code]')) {\n        try {\n            return new Constructor();\n        }\n        catch (_a) { }\n    }\n    return create(prototype);\n}\nfunction getRegExpFlagsLegacy(regExp) {\n    var flags = '';\n    if (regExp.global) {\n        flags += 'g';\n    }\n    if (regExp.ignoreCase) {\n        flags += 'i';\n    }\n    if (regExp.multiline) {\n        flags += 'm';\n    }\n    if (regExp.unicode) {\n        flags += 'u';\n    }\n    if (regExp.sticky) {\n        flags += 'y';\n    }\n    return flags;\n}\nfunction getRegExpFlagsModern(regExp) {\n    return regExp.flags;\n}\n/**\n * Get the flags to apply to the copied regexp.\n */\nvar getRegExpFlags = /test/g.flags === 'g' ? getRegExpFlagsModern : getRegExpFlagsLegacy;\nfunction getTagLegacy(value) {\n    var type = toStringObject.call(value);\n    return type.substring(8, type.length - 1);\n}\nfunction getTagModern(value) {\n    return value[Symbol.toStringTag] || getTagLegacy(value);\n}\n/**\n * Get the tag of the value passed, so that the correct copier can be used.\n */\nvar getTag = typeof Symbol !== 'undefined' ? getTagModern : getTagLegacy;\n\nvar defineProperty = Object.defineProperty, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar _a = Object.prototype, hasOwnProperty = _a.hasOwnProperty, propertyIsEnumerable = _a.propertyIsEnumerable;\nvar SUPPORTS_SYMBOL = typeof getOwnPropertySymbols === 'function';\nfunction getStrictPropertiesModern(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Get the properites used when copying objects strictly. This includes both keys and symbols.\n */\nvar getStrictProperties = SUPPORTS_SYMBOL\n    ? getStrictPropertiesModern\n    : getOwnPropertyNames;\n/**\n * Striclty copy all properties contained on the object.\n */\nfunction copyOwnPropertiesStrict(value, clone, state) {\n    var properties = getStrictProperties(value);\n    for (var index = 0, length_1 = properties.length, property = void 0, descriptor = void 0; index < length_1; ++index) {\n        property = properties[index];\n        if (property === 'callee' || property === 'caller') {\n            continue;\n        }\n        descriptor = getOwnPropertyDescriptor(value, property);\n        if (!descriptor) {\n            // In extra edge cases where the property descriptor cannot be retrived, fall back to\n            // the loose assignment.\n            clone[property] = state.copier(value[property], state);\n            continue;\n        }\n        // Only clone the value if actually a value, not a getter / setter.\n        if (!descriptor.get && !descriptor.set) {\n            descriptor.value = state.copier(descriptor.value, state);\n        }\n        try {\n            defineProperty(clone, property, descriptor);\n        }\n        catch (error) {\n            // Tee above can fail on node in edge cases, so fall back to the loose assignment.\n            clone[property] = descriptor.value;\n        }\n    }\n    return clone;\n}\n/**\n * Deeply copy the indexed values in the array.\n */\nfunction copyArrayLoose(array, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(array, clone);\n    for (var index = 0, length_2 = array.length; index < length_2; ++index) {\n        clone[index] = state.copier(array[index], state);\n    }\n    return clone;\n}\n/**\n * Deeply copy the indexed values in the array, as well as any custom properties.\n */\nfunction copyArrayStrict(array, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(array, clone);\n    return copyOwnPropertiesStrict(array, clone, state);\n}\n/**\n * Copy the contents of the ArrayBuffer.\n */\nfunction copyArrayBuffer(arrayBuffer, _state) {\n    return arrayBuffer.slice(0);\n}\n/**\n * Create a new Blob with the contents of the original.\n */\nfunction copyBlob(blob, _state) {\n    return blob.slice(0, blob.size, blob.type);\n}\n/**\n * Create a new DataView with the contents of the original.\n */\nfunction copyDataView(dataView, state) {\n    return new state.Constructor(copyArrayBuffer(dataView.buffer));\n}\n/**\n * Create a new Date based on the time of the original.\n */\nfunction copyDate(date, state) {\n    return new state.Constructor(date.getTime());\n}\n/**\n * Deeply copy the keys and values of the original.\n */\nfunction copyMapLoose(map, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(map, clone);\n    map.forEach(function (value, key) {\n        clone.set(key, state.copier(value, state));\n    });\n    return clone;\n}\n/**\n * Deeply copy the keys and values of the original, as well as any custom properties.\n */\nfunction copyMapStrict(map, state) {\n    return copyOwnPropertiesStrict(map, copyMapLoose(map, state), state);\n}\nfunction copyObjectLooseLegacy(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    for (var key in object) {\n        if (hasOwnProperty.call(object, key)) {\n            clone[key] = state.copier(object[key], state);\n        }\n    }\n    return clone;\n}\nfunction copyObjectLooseModern(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    for (var key in object) {\n        if (hasOwnProperty.call(object, key)) {\n            clone[key] = state.copier(object[key], state);\n        }\n    }\n    var symbols = getOwnPropertySymbols(object);\n    for (var index = 0, length_3 = symbols.length, symbol = void 0; index < length_3; ++index) {\n        symbol = symbols[index];\n        if (propertyIsEnumerable.call(object, symbol)) {\n            clone[symbol] = state.copier(object[symbol], state);\n        }\n    }\n    return clone;\n}\n/**\n * Deeply copy the properties (keys and symbols) and values of the original.\n */\nvar copyObjectLoose = SUPPORTS_SYMBOL\n    ? copyObjectLooseModern\n    : copyObjectLooseLegacy;\n/**\n * Deeply copy the properties (keys and symbols) and values of the original, as well\n * as any hidden or non-enumerable properties.\n */\nfunction copyObjectStrict(object, state) {\n    var clone = getCleanClone(state.prototype);\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(object, clone);\n    return copyOwnPropertiesStrict(object, clone, state);\n}\n/**\n * Create a new primitive wrapper from the value of the original.\n */\nfunction copyPrimitiveWrapper(primitiveObject, state) {\n    return new state.Constructor(primitiveObject.valueOf());\n}\n/**\n * Create a new RegExp based on the value and flags of the original.\n */\nfunction copyRegExp(regExp, state) {\n    var clone = new state.Constructor(regExp.source, getRegExpFlags(regExp));\n    clone.lastIndex = regExp.lastIndex;\n    return clone;\n}\n/**\n * Return the original value (an identity function).\n *\n * @note\n * THis is used for objects that cannot be copied, such as WeakMap.\n */\nfunction copySelf(value, _state) {\n    return value;\n}\n/**\n * Deeply copy the values of the original.\n */\nfunction copySetLoose(set, state) {\n    var clone = new state.Constructor();\n    // set in the cache immediately to be able to reuse the object recursively\n    state.cache.set(set, clone);\n    set.forEach(function (value) {\n        clone.add(state.copier(value, state));\n    });\n    return clone;\n}\n/**\n * Deeply copy the values of the original, as well as any custom properties.\n */\nfunction copySetStrict(set, state) {\n    return copyOwnPropertiesStrict(set, copySetLoose(set, state), state);\n}\n\nvar isArray = Array.isArray;\nvar assign = Object.assign;\nvar getPrototypeOf = Object.getPrototypeOf || (function (obj) { return obj.__proto__; });\nvar DEFAULT_LOOSE_OPTIONS = {\n    array: copyArrayLoose,\n    arrayBuffer: copyArrayBuffer,\n    blob: copyBlob,\n    dataView: copyDataView,\n    date: copyDate,\n    error: copySelf,\n    map: copyMapLoose,\n    object: copyObjectLoose,\n    regExp: copyRegExp,\n    set: copySetLoose,\n};\nvar DEFAULT_STRICT_OPTIONS = assign({}, DEFAULT_LOOSE_OPTIONS, {\n    array: copyArrayStrict,\n    map: copyMapStrict,\n    object: copyObjectStrict,\n    set: copySetStrict,\n});\n/**\n * Get the copiers used for each specific object tag.\n */\nfunction getTagSpecificCopiers(options) {\n    return {\n        Arguments: options.object,\n        Array: options.array,\n        ArrayBuffer: options.arrayBuffer,\n        Blob: options.blob,\n        Boolean: copyPrimitiveWrapper,\n        DataView: options.dataView,\n        Date: options.date,\n        Error: options.error,\n        Float32Array: options.arrayBuffer,\n        Float64Array: options.arrayBuffer,\n        Int8Array: options.arrayBuffer,\n        Int16Array: options.arrayBuffer,\n        Int32Array: options.arrayBuffer,\n        Map: options.map,\n        Number: copyPrimitiveWrapper,\n        Object: options.object,\n        Promise: copySelf,\n        RegExp: options.regExp,\n        Set: options.set,\n        String: copyPrimitiveWrapper,\n        WeakMap: copySelf,\n        WeakSet: copySelf,\n        Uint8Array: options.arrayBuffer,\n        Uint8ClampedArray: options.arrayBuffer,\n        Uint16Array: options.arrayBuffer,\n        Uint32Array: options.arrayBuffer,\n        Uint64Array: options.arrayBuffer,\n    };\n}\n/**\n * Create a custom copier based on the object-specific copy methods passed.\n */\nfunction createCopier(options) {\n    var normalizedOptions = assign({}, DEFAULT_LOOSE_OPTIONS, options);\n    var tagSpecificCopiers = getTagSpecificCopiers(normalizedOptions);\n    var array = tagSpecificCopiers.Array, object = tagSpecificCopiers.Object;\n    function copier(value, state) {\n        state.prototype = state.Constructor = undefined;\n        if (!value || typeof value !== 'object') {\n            return value;\n        }\n        if (state.cache.has(value)) {\n            return state.cache.get(value);\n        }\n        state.prototype = getPrototypeOf(value);\n        state.Constructor = state.prototype && state.prototype.constructor;\n        // plain objects\n        if (!state.Constructor || state.Constructor === Object) {\n            return object(value, state);\n        }\n        // arrays\n        if (isArray(value)) {\n            return array(value, state);\n        }\n        var tagSpecificCopier = tagSpecificCopiers[getTag(value)];\n        if (tagSpecificCopier) {\n            return tagSpecificCopier(value, state);\n        }\n        return typeof value.then === 'function' ? value : object(value, state);\n    }\n    return function copy(value) {\n        return copier(value, {\n            Constructor: undefined,\n            cache: createCache(),\n            copier: copier,\n            prototype: undefined,\n        });\n    };\n}\n/**\n * Create a custom copier based on the object-specific copy methods passed, defaulting to the\n * same internals as `copyStrict`.\n */\nfunction createStrictCopier(options) {\n    return createCopier(assign({}, DEFAULT_STRICT_OPTIONS, options));\n}\n/**\n * Copy an value deeply as much as possible, where strict recreation of object properties\n * are maintained. All properties (including non-enumerable ones) are copied with their\n * original property descriptors on both objects and arrays.\n */\nvar copyStrict = createStrictCopier({});\n/**\n * Copy an value deeply as much as possible.\n */\nvar index = createCopier({});\n\nexport { copyStrict, createCopier, createStrictCopier, index as default };\n//# sourceMappingURL=index.mjs.map\n","var getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Combine two comparators into a single comparators.\n */\nfunction combineComparators(comparatorA, comparatorB) {\n    return function isEqual(a, b, state) {\n        return comparatorA(a, b, state) && comparatorB(a, b, state);\n    };\n}\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nfunction createIsCircular(areItemsEqual) {\n    return function isCircular(a, b, state) {\n        if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n            return areItemsEqual(a, b, state);\n        }\n        var cache = state.cache;\n        var cachedA = cache.get(a);\n        var cachedB = cache.get(b);\n        if (cachedA && cachedB) {\n            return cachedA === b && cachedB === a;\n        }\n        cache.set(a, b);\n        cache.set(b, a);\n        var result = areItemsEqual(a, b, state);\n        cache.delete(a);\n        cache.delete(b);\n        return result;\n    };\n}\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nfunction getStrictProperties(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Whether the object contains the property passed as an own property.\n */\nvar hasOwn = Object.hasOwn ||\n    (function (object, property) {\n        return hasOwnProperty.call(object, property);\n    });\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nfunction sameValueZeroEqual(a, b) {\n    return a === b || (!a && !b && a !== a && b !== b);\n}\n\nvar PREACT_VNODE = '__v';\nvar PREACT_OWNER = '__o';\nvar REACT_OWNER = '_owner';\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, keys = Object.keys;\n/**\n * Whether the arrays are equal in value.\n */\nfunction areArraysEqual(a, b, state) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the dates passed are equal in value.\n */\nfunction areDatesEqual(a, b) {\n    return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n/**\n * Whether the errors passed are equal in value.\n */\nfunction areErrorsEqual(a, b) {\n    return (a.name === b.name &&\n        a.message === b.message &&\n        a.cause === b.cause &&\n        a.stack === b.stack);\n}\n/**\n * Whether the functions passed are equal in value.\n */\nfunction areFunctionsEqual(a, b) {\n    return a === b;\n}\n/**\n * Whether the `Map`s are equal in value.\n */\nfunction areMapsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.entries();\n    var aResult;\n    var bResult;\n    var index = 0;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.entries();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (matchedIndices[matchIndex]) {\n                matchIndex++;\n                continue;\n            }\n            var aEntry = aResult.value;\n            var bEntry = bResult.value;\n            if (state.equals(aEntry[0], bEntry[0], index, matchIndex, a, b, state) &&\n                state.equals(aEntry[1], bEntry[1], aEntry[0], bEntry[0], a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n        index++;\n    }\n    return true;\n}\n/**\n * Whether the numbers are equal in value.\n */\nvar areNumbersEqual = sameValueZeroEqual;\n/**\n * Whether the objects are equal in value.\n */\nfunction areObjectsEqual(a, b, state) {\n    var properties = keys(a);\n    var index = properties.length;\n    if (keys(b).length !== index) {\n        return false;\n    }\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        if (!isPropertyEqual(a, b, state, properties[index])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nfunction areObjectsEqualStrict(a, b, state) {\n    var properties = getStrictProperties(a);\n    var index = properties.length;\n    if (getStrictProperties(b).length !== index) {\n        return false;\n    }\n    var property;\n    var descriptorA;\n    var descriptorB;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (!isPropertyEqual(a, b, state, property)) {\n            return false;\n        }\n        descriptorA = getOwnPropertyDescriptor(a, property);\n        descriptorB = getOwnPropertyDescriptor(b, property);\n        if ((descriptorA || descriptorB) &&\n            (!descriptorA ||\n                !descriptorB ||\n                descriptorA.configurable !== descriptorB.configurable ||\n                descriptorA.enumerable !== descriptorB.enumerable ||\n                descriptorA.writable !== descriptorB.writable)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nfunction arePrimitiveWrappersEqual(a, b) {\n    return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n/**\n * Whether the regexps passed are equal in value.\n */\nfunction areRegExpsEqual(a, b) {\n    return a.source === b.source && a.flags === b.flags;\n}\n/**\n * Whether the `Set`s are equal in value.\n */\nfunction areSetsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.values();\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.values();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (!matchedIndices[matchIndex] &&\n                state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the TypedArray instances are equal in value.\n */\nfunction areTypedArraysEqual(a, b) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (a[index] !== b[index]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the URL instances are equal in value.\n */\nfunction areUrlsEqual(a, b) {\n    return (a.hostname === b.hostname &&\n        a.pathname === b.pathname &&\n        a.protocol === b.protocol &&\n        a.port === b.port &&\n        a.hash === b.hash &&\n        a.username === b.username &&\n        a.password === b.password);\n}\nfunction isPropertyEqual(a, b, state, property) {\n    if ((property === REACT_OWNER ||\n        property === PREACT_OWNER ||\n        property === PREACT_VNODE) &&\n        (a.$$typeof || b.$$typeof)) {\n        return true;\n    }\n    return (hasOwn(b, property) &&\n        state.equals(a[property], b[property], property, property, a, b, state));\n}\n\nvar ARGUMENTS_TAG = '[object Arguments]';\nvar BOOLEAN_TAG = '[object Boolean]';\nvar DATE_TAG = '[object Date]';\nvar ERROR_TAG = '[object Error]';\nvar MAP_TAG = '[object Map]';\nvar NUMBER_TAG = '[object Number]';\nvar OBJECT_TAG = '[object Object]';\nvar REG_EXP_TAG = '[object RegExp]';\nvar SET_TAG = '[object Set]';\nvar STRING_TAG = '[object String]';\nvar URL_TAG = '[object URL]';\nvar isArray = Array.isArray;\nvar isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView\n    ? ArrayBuffer.isView\n    : null;\nvar assign = Object.assign;\nvar getTag = Object.prototype.toString.call.bind(Object.prototype.toString);\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nfunction createEqualityComparator(_a) {\n    var areArraysEqual = _a.areArraysEqual, areDatesEqual = _a.areDatesEqual, areErrorsEqual = _a.areErrorsEqual, areFunctionsEqual = _a.areFunctionsEqual, areMapsEqual = _a.areMapsEqual, areNumbersEqual = _a.areNumbersEqual, areObjectsEqual = _a.areObjectsEqual, arePrimitiveWrappersEqual = _a.arePrimitiveWrappersEqual, areRegExpsEqual = _a.areRegExpsEqual, areSetsEqual = _a.areSetsEqual, areTypedArraysEqual = _a.areTypedArraysEqual, areUrlsEqual = _a.areUrlsEqual;\n    /**\n     * compare the value of the two objects and return true if they are equivalent in values\n     */\n    return function comparator(a, b, state) {\n        // If the items are strictly equal, no need to do a value comparison.\n        if (a === b) {\n            return true;\n        }\n        // If either of the items are nullish and fail the strictly equal check\n        // above, then they must be unequal.\n        if (a == null || b == null) {\n            return false;\n        }\n        var type = typeof a;\n        if (type !== typeof b) {\n            return false;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                return areNumbersEqual(a, b, state);\n            }\n            if (type === 'function') {\n                return areFunctionsEqual(a, b, state);\n            }\n            // If a primitive value that is not strictly equal, it must be unequal.\n            return false;\n        }\n        var constructor = a.constructor;\n        // Checks are listed in order of commonality of use-case:\n        //   1. Common complex object types (plain object, array)\n        //   2. Common data values (date, regexp)\n        //   3. Less-common complex object types (map, set)\n        //   4. Less-common data values (promise, primitive wrappers)\n        // Inherently this is both subjective and assumptive, however\n        // when reviewing comparable libraries in the wild this order\n        // appears to be generally consistent.\n        // Constructors should match, otherwise there is potential for false positives\n        // between class and subclass or custom object and POJO.\n        if (constructor !== b.constructor) {\n            return false;\n        }\n        // `isPlainObject` only checks against the object's own realm. Cross-realm\n        // comparisons are rare, and will be handled in the ultimate fallback, so\n        // we can avoid capturing the string tag.\n        if (constructor === Object) {\n            return areObjectsEqual(a, b, state);\n        }\n        // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n        // the string tag or doing an `instanceof` check.\n        if (isArray(a)) {\n            return areArraysEqual(a, b, state);\n        }\n        // `isTypedArray()` works on all possible TypedArray classes, so we can avoid\n        // capturing the string tag or comparing against all possible constructors.\n        if (isTypedArray != null && isTypedArray(a)) {\n            return areTypedArraysEqual(a, b, state);\n        }\n        // Try to fast-path equality checks for other complex object types in the\n        // same realm to avoid capturing the string tag. Strict equality is used\n        // instead of `instanceof` because it is more performant for the common\n        // use-case. If someone is subclassing a native class, it will be handled\n        // with the string tag comparison.\n        if (constructor === Date) {\n            return areDatesEqual(a, b, state);\n        }\n        if (constructor === RegExp) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (constructor === Map) {\n            return areMapsEqual(a, b, state);\n        }\n        if (constructor === Set) {\n            return areSetsEqual(a, b, state);\n        }\n        // Since this is a custom object, capture the string tag to determing its type.\n        // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n        var tag = getTag(a);\n        if (tag === DATE_TAG) {\n            return areDatesEqual(a, b, state);\n        }\n        // For RegExp, the properties are not enumerable, and therefore will give false positives if\n        // tested like a standard object.\n        if (tag === REG_EXP_TAG) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (tag === MAP_TAG) {\n            return areMapsEqual(a, b, state);\n        }\n        if (tag === SET_TAG) {\n            return areSetsEqual(a, b, state);\n        }\n        if (tag === OBJECT_TAG) {\n            // The exception for value comparison is custom `Promise`-like class instances. These should\n            // be treated the same as standard `Promise` objects, which means strict equality, and if\n            // it reaches this point then that strict equality comparison has already failed.\n            return (typeof a.then !== 'function' &&\n                typeof b.then !== 'function' &&\n                areObjectsEqual(a, b, state));\n        }\n        // If a URL tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === URL_TAG) {\n            return areUrlsEqual(a, b, state);\n        }\n        // If an error tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === ERROR_TAG) {\n            return areErrorsEqual(a, b, state);\n        }\n        // If an arguments tag, it should be treated as a standard object.\n        if (tag === ARGUMENTS_TAG) {\n            return areObjectsEqual(a, b, state);\n        }\n        // As the penultimate fallback, check if the values passed are primitive wrappers. This\n        // is very rare in modern JS, which is why it is deprioritized compared to all other object\n        // types.\n        if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n            return arePrimitiveWrappersEqual(a, b, state);\n        }\n        // If not matching any tags that require a specific type of comparison, then we hard-code false because\n        // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n        //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n        //     comparison that can be made.\n        //   - For types that can be introspected, but rarely have requirements to be compared\n        //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n        //     use-cases (may be included in a future release, if requested enough).\n        //   - For types that can be introspected but do not have an objective definition of what\n        //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n        // In all cases, these decisions should be reevaluated based on changes to the language and\n        // common development practices.\n        return false;\n    };\n}\n/**\n * Create the configuration object used for building comparators.\n */\nfunction createEqualityComparatorConfig(_a) {\n    var circular = _a.circular, createCustomConfig = _a.createCustomConfig, strict = _a.strict;\n    var config = {\n        areArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areArraysEqual,\n        areDatesEqual: areDatesEqual,\n        areErrorsEqual: areErrorsEqual,\n        areFunctionsEqual: areFunctionsEqual,\n        areMapsEqual: strict\n            ? combineComparators(areMapsEqual, areObjectsEqualStrict)\n            : areMapsEqual,\n        areNumbersEqual: areNumbersEqual,\n        areObjectsEqual: strict\n            ? areObjectsEqualStrict\n            : areObjectsEqual,\n        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,\n        areRegExpsEqual: areRegExpsEqual,\n        areSetsEqual: strict\n            ? combineComparators(areSetsEqual, areObjectsEqualStrict)\n            : areSetsEqual,\n        areTypedArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areTypedArraysEqual,\n        areUrlsEqual: areUrlsEqual,\n    };\n    if (createCustomConfig) {\n        config = assign({}, config, createCustomConfig(config));\n    }\n    if (circular) {\n        var areArraysEqual$1 = createIsCircular(config.areArraysEqual);\n        var areMapsEqual$1 = createIsCircular(config.areMapsEqual);\n        var areObjectsEqual$1 = createIsCircular(config.areObjectsEqual);\n        var areSetsEqual$1 = createIsCircular(config.areSetsEqual);\n        config = assign({}, config, {\n            areArraysEqual: areArraysEqual$1,\n            areMapsEqual: areMapsEqual$1,\n            areObjectsEqual: areObjectsEqual$1,\n            areSetsEqual: areSetsEqual$1,\n        });\n    }\n    return config;\n}\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nfunction createInternalEqualityComparator(compare) {\n    return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {\n        return compare(a, b, state);\n    };\n}\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nfunction createIsEqual(_a) {\n    var circular = _a.circular, comparator = _a.comparator, createState = _a.createState, equals = _a.equals, strict = _a.strict;\n    if (createState) {\n        return function isEqual(a, b) {\n            var _a = createState(), _b = _a.cache, cache = _b === void 0 ? circular ? new WeakMap() : undefined : _b, meta = _a.meta;\n            return comparator(a, b, {\n                cache: cache,\n                equals: equals,\n                meta: meta,\n                strict: strict,\n            });\n        };\n    }\n    if (circular) {\n        return function isEqual(a, b) {\n            return comparator(a, b, {\n                cache: new WeakMap(),\n                equals: equals,\n                meta: undefined,\n                strict: strict,\n            });\n        };\n    }\n    var state = {\n        cache: undefined,\n        equals: equals,\n        meta: undefined,\n        strict: strict,\n    };\n    return function isEqual(a, b) {\n        return comparator(a, b, state);\n    };\n}\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nvar deepEqual = createCustomEqual();\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nvar strictDeepEqual = createCustomEqual({ strict: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nvar circularDeepEqual = createCustomEqual({ circular: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularDeepEqual = createCustomEqual({\n    circular: true,\n    strict: true,\n});\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nvar shallowEqual = createCustomEqual({\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nvar strictShallowEqual = createCustomEqual({\n    strict: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nvar circularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n    strict: true,\n});\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nfunction createCustomEqual(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.circular, circular = _a === void 0 ? false : _a, createCustomInternalComparator = options.createInternalComparator, createState = options.createState, _b = options.strict, strict = _b === void 0 ? false : _b;\n    var config = createEqualityComparatorConfig(options);\n    var comparator = createEqualityComparator(config);\n    var equals = createCustomInternalComparator\n        ? createCustomInternalComparator(comparator)\n        : createInternalEqualityComparator(comparator);\n    return createIsEqual({ circular: circular, comparator: comparator, createState: createState, equals: equals, strict: strict });\n}\n\nexport { circularDeepEqual, circularShallowEqual, createCustomEqual, deepEqual, sameValueZeroEqual, shallowEqual, strictCircularDeepEqual, strictCircularShallowEqual, strictDeepEqual, strictShallowEqual };\n//# sourceMappingURL=index.mjs.map\n","<script context=\"module\"></script>\n\n<script generics=\"T extends BindingObject, U extends BindingOptions, V extends BindingRef\">\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport InternalPaneInline from '../internal/InternalPaneInline.svelte'\n\timport { enforceReadonly, getElementIndex, isRootPane } from '../utils.js'\n\timport { BROWSER, DEV } from 'esm-env'\n\timport copy from 'fast-copy'\n\timport { shallowEqual } from 'fast-equals'\n\timport { createEventDispatcher, getContext, onDestroy, onMount } from 'svelte'\n\texport let object\n\texport let key\n\texport let disabled = false\n\texport let label = void 0\n\texport let options = void 0\n\texport let theme = void 0\n\texport let ref = void 0\n\texport let plugin = void 0\n\tconst registerPlugin = getContext('registerPlugin')\n\tconst parentStore = getContext('parentStore')\n\tconst userCreatedPane = getContext('userCreatedPane')\n\tlet _ref\n\tlet indexElement\n\tlet index\n\tfunction create() {\n\t\tif (_ref) _ref.dispose()\n\t\tif (plugin !== void 0) {\n\t\t\tregisterPlugin(plugin)\n\t\t}\n\t\t_ref = $parentStore.addBinding(object, key, {\n\t\t\tindex,\n\t\t\tlabel,\n\t\t\t...options,\n\t\t\tdisabled,\n\t\t\t// Why last?\n\t\t})\n\t\tref = _ref\n\t\t_ref.on('change', onTweakpaneChange)\n\t}\n\tonMount(() => {\n\t\tindex = indexElement ? getElementIndex(indexElement) : 0\n\t})\n\tonDestroy(() => {\n\t\t_ref?.dispose()\n\t})\n\tconst dispatch = createEventDispatcher()\n\tfunction safeCopy(value) {\n\t\tif (value instanceof File) {\n\t\t\treturn new File([value], value.name, {\n\t\t\t\tlastModified: value.lastModified,\n\t\t\t\ttype: value.type,\n\t\t\t})\n\t\t}\n\t\tif (BROWSER && value instanceof HTMLImageElement) {\n\t\t\tconst copy2 = new Image()\n\t\t\tcopy2.src = value.src\n\t\t\treturn copy2\n\t\t}\n\t\treturn copy(value)\n\t}\n\tlet lastObject = object\n\tlet lastValue = safeCopy(object[key])\n\tlet internalChange = false\n\tfunction onBoundValueChange(object2) {\n\t\tif (lastObject !== object2) {\n\t\t\tinternalChange = false\n\t\t}\n\t\tif (!shallowEqual(object2[key], lastValue)) {\n\t\t\tlastValue = safeCopy(object2[key])\n\t\t\tdispatch('change', {\n\t\t\t\tvalue: safeCopy(object2[key]),\n\t\t\t\torigin: internalChange ? 'internal' : 'external',\n\t\t\t})\n\t\t\tif (!internalChange && _ref) {\n\t\t\t\t_ref.off('change', onTweakpaneChange)\n\t\t\t\t_ref.refresh()\n\t\t\t\t_ref.on('change', onTweakpaneChange)\n\t\t\t}\n\t\t}\n\t\tinternalChange = false\n\t\tif (lastObject !== object2) {\n\t\t\tlastObject = object2\n\t\t\tcreate()\n\t\t}\n\t}\n\tfunction onTweakpaneChange() {\n\t\tinternalChange = true\n\t\tobject[key] = safeCopy(object[key])\n\t}\n\t$: DEV && enforceReadonly(_ref, ref, 'Binding', 'ref', true)\n\t$: options, $parentStore !== void 0 && index !== void 0 && create()\n\t$: _ref !== void 0 && (_ref.disabled = disabled)\n\t$: _ref !== void 0 && (_ref.label = label)\n\t$: $parentStore !== void 0 && onBoundValueChange(object)\n\t$: theme &&\n\t\t$parentStore !== void 0 &&\n\t\t(userCreatedPane || !isRootPane($parentStore)) &&\n\t\tconsole.warn(\n\t\t\t'Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)',\n\t\t)\n</script>\n\n{#if parentStore}\n\t{#if BROWSER}\n\t\t<div bind:this={indexElement} style=\"display: none;\"></div>\n\t{:else}\n\t\t<ClsPad keysAdd={['containerVerticalPadding', 'containerUnitSize']} {theme} />\n\t{/if}\n{:else}\n\t<InternalPaneInline {theme} userCreatedPane={false}>\n\t\t<svelte:self\n\t\t\tbind:disabled\n\t\t\tbind:key\n\t\t\tbind:label\n\t\t\tbind:object\n\t\t\tbind:options\n\t\t\tbind:plugin\n\t\t\tbind:ref\n\t\t\ton:change\n\t\t/>\n\t</InternalPaneInline>\n{/if}\n","<script context=\"module\"></script>\n\n<script\n\tgenerics=\"T extends any, U extends BindingOptions = BindingOptions, V extends BindingRef = BindingRef\"\n>\n\timport Binding from '../core/Binding.svelte'\n\timport { shallowEqual } from 'fast-equals'\n\texport let value\n\texport let ref = void 0\n\texport let options = void 0\n\tconst key = Symbol('key')\n\tfunction getValue() {\n\t\treturn value\n\t}\n\tfunction setValue() {\n\t\tif (!shallowEqual(value, object[key])) {\n\t\t\tobject[key] = value\n\t\t}\n\t}\n\t$: object = { [key]: getValue() }\n\t$: value = object[key]\n\t$: value, setValue()\n</script>\n\n<Binding bind:object bind:ref on:change {key} {options} {...$$restProps} />\n","<script context=\"module\"></script>\n\n<script\n\tgenerics=\"T extends any, U extends GenericInputOptions = GenericInputOptions, V extends GenericInputRef = GenericInputRef\"\n>\n\timport GenericBinding from './GenericBinding.svelte'\n\texport let options = void 0\n\texport let ref = void 0\n\texport let value\n\tlet optionsInternal\n\t$: optionsInternal = {\n\t\t...options,\n\t\treadonly: false,\n\t}\n</script>\n\n<GenericBinding bind:value bind:ref on:change options={optionsInternal} {...$$restProps} />\n","<script context=\"module\"></script>\n\n<script>\n\timport GenericInput from '../internal/GenericInput.svelte'\n\texport let value\n</script>\n\n<GenericInput bind:value on:change {...$$restProps} />\n","<script context=\"module\"></script>\n\n<script\n\tgenerics=\"T extends any, U extends GenericInputFoldingOptions = GenericInputFoldingOptions, V extends GenericInputFoldingRef = GenericInputFoldingRef\"\n>\n\timport GenericInput from './GenericInput.svelte'\n\timport { updateCollapsibility } from '../utils.js'\n\texport let value\n\texport let ref = void 0\n\texport let options = void 0\n\texport let userExpandable = true\n\texport let expanded = false\n\texport let buttonClass = ''\n\texport let picker = void 0\n\tlet optionsInternal\n\tlet gotBinding = false\n\tconst initialExpanded = expanded\n\tlet internalExpanded = initialExpanded\n\t$: if (!gotBinding && ref) {\n\t\tgotBinding = true\n\t\tref.controller?.valueController?.foldable_?.value('expanded').emitter.on('change', (event) => {\n\t\t\tinternalExpanded = event.rawValue\n\t\t\texpanded = internalExpanded\n\t\t})\n\t}\n\t$: optionsInternal = {\n\t\t...options,\n\t\texpanded: initialExpanded,\n\t\t// Only set once\n\t\tpicker,\n\t}\n\t$: ref && buttonClass && updateCollapsibility(userExpandable ?? true, ref.element, buttonClass)\n\t$: ref &&\n\t\tbuttonClass &&\n\t\texpanded !== internalExpanded &&\n\t\tref.element.querySelectorAll(`.${buttonClass}`).length > 0 &&\n\t\tref.element.querySelector(`.${buttonClass}`)?.click()\n</script>\n\n<GenericInput bind:value bind:ref on:change options={optionsInternal} {...$$restProps} />\n","<script context=\"module\"></script>\n\n<script>\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport GenericInputFolding from '../internal/GenericInputFolding.svelte'\n\timport { objectToTuple } from '../utils'\n\timport { fillWith } from '../utils'\n\timport { isColorObject, isRgbaColorObject, isRgbColorObject } from '@tweakpane/core'\n\timport { BROWSER } from 'esm-env'\n\timport { shallowEqual } from 'fast-equals'\n\texport let value\n\texport let expanded = void 0\n\texport let type = void 0\n\tlet internalValue\n\tlet options\n\tlet ref\n\tconst buttonClass = 'tp-colswv_b'\n\tfunction updateInternalValueFromValue() {\n\t\tif (typeof value === 'string') {\n\t\t\tif (internalValue !== value) {\n\t\t\t\tinternalValue = value\n\t\t\t}\n\t\t} else if (isColorObject(value)) {\n\t\t\tif (!shallowEqual(value, internalValue)) {\n\t\t\t\tinternalValue = { ...value }\n\t\t\t}\n\t\t} else if (Array.isArray(value)) {\n\t\t\tlet newInternalValue =\n\t\t\t\tvalue.length === 4\n\t\t\t\t\t? { r: value[0], g: value[1], b: value[2], a: value[3] }\n\t\t\t\t\t: value.length === 3\n\t\t\t\t\t\t? { r: value[0], g: value[1], b: value[2] }\n\t\t\t\t\t\t: void 0\n\t\t\tif (newInternalValue === void 0) {\n\t\t\t\tconsole.error('Unreachable')\n\t\t\t} else if (!shallowEqual(newInternalValue, internalValue)) {\n\t\t\t\tinternalValue = newInternalValue\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('Unreachable')\n\t\t}\n\t}\n\tfunction updateValueFromInternalValue() {\n\t\tif (typeof value === 'string' && typeof internalValue === 'string') {\n\t\t\tif (internalValue !== value) {\n\t\t\t\tvalue = internalValue\n\t\t\t}\n\t\t} else if (Array.isArray(value) && isColorObject(internalValue)) {\n\t\t\tconst newValue = isRgbaColorObject(internalValue)\n\t\t\t\t? objectToTuple(internalValue, ['r', 'g', 'b', 'a'])\n\t\t\t\t: isRgbColorObject(internalValue)\n\t\t\t\t\t? objectToTuple(internalValue, ['r', 'g', 'b'])\n\t\t\t\t\t: void 0\n\t\t\tif (newValue === void 0) {\n\t\t\t\tconsole.error('Unreachable color type mismatch')\n\t\t\t} else if (!shallowEqual(newValue, value)) {\n\t\t\t\tvalue = newValue\n\t\t\t}\n\t\t} else if (isColorObject(value) && isColorObject(internalValue)) {\n\t\t\tif (!shallowEqual(internalValue, value)) {\n\t\t\t\tvalue = { ...internalValue }\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('Unreachable color type mismatch')\n\t\t}\n\t}\n\tfunction addListeners() {\n\t\tref.on('change', () => {\n\t\t\tref.refresh()\n\t\t})\n\t}\n\t$: value, updateInternalValueFromValue()\n\t$: internalValue, updateValueFromInternalValue()\n\t$: ref !== void 0 && addListeners()\n\t$: options = {\n\t\tcolor: {\n\t\t\ttype,\n\t\t},\n\t\tview: 'color',\n\t}\n</script>\n\n<GenericInputFolding\n\tbind:value={internalValue}\n\tbind:expanded\n\tbind:ref\n\ton:change\n\t{buttonClass}\n\t{options}\n\t{...$$restProps}\n/>\n{#if !BROWSER && expanded && $$props.picker === 'inline'}\n\t<!-- Main swatch -->\n\t<ClsPad keysAdd={fillWith('containerUnitSize', 6)} theme={$$props.theme} />\n\t<ClsPad keysAdd={fillWith('containerUnitSpacing', 3)} theme={$$props.theme} />\n\t{#if isRgbaColorObject(internalValue)}\n\t\t<ClsPad keysAdd={fillWith('containerUnitSize', 1)} theme={$$props.theme} />\n\t\t<ClsPad extra={2} keysAdd={fillWith('containerVerticalPadding', 2)} theme={$$props.theme} />\n\t{/if}\n{/if}\n","import { ClassName, createPlugin, CompositeConstraint, parseRecord } from '@tweakpane/core';\n\n// Create a class name generator from the view name\n// ClassName('tmp') will generate a CSS class name like `tp-tmpv`\nconst containerClassName = ClassName('ctn');\nconst inputClassName = ClassName('input');\nconst deleteButtonClassName = ClassName('btn');\nclass FilePluginView {\n    constructor(doc, config) {\n        // Root\n        this.element = doc.createElement('div');\n        // Container\n        this.container = doc.createElement('div');\n        this.container.classList.add(containerClassName());\n        config.viewProps.bindClassModifiers(this.container);\n        // File input field\n        this.input = doc.createElement('input');\n        this.input.classList.add(inputClassName());\n        this.input.setAttribute('type', 'file');\n        this.input.setAttribute('accept', config.filetypes ? config.filetypes.join(',') : '*');\n        this.input.style.height = `calc(20px * ${config.lineCount})`;\n        // Icon\n        this.fileIcon = doc.createElement('div');\n        this.fileIcon.classList.add(containerClassName('icon'));\n        // Text\n        this.text = doc.createElement('span');\n        this.text.classList.add(containerClassName('text'));\n        // Warning text\n        this.warning = doc.createElement('span');\n        this.warning.classList.add(containerClassName('warning'));\n        this.warning.innerHTML = config.invalidFiletypeMessage;\n        this.warning.style.display = 'none';\n        // Delete button\n        this.deleteButton = doc.createElement('button');\n        this.deleteButton.classList.add(deleteButtonClassName('b'));\n        this.deleteButton.innerHTML = 'Delete';\n        this.deleteButton.style.display = 'none';\n        this.container.appendChild(this.input);\n        this.container.appendChild(this.fileIcon);\n        this.element.appendChild(this.container);\n        this.element.appendChild(this.warning);\n        this.element.appendChild(this.deleteButton);\n    }\n    /**\n     * Changes the style of the container based on whether the user is dragging or not.\n     * @param state if the user is dragging or not.\n     */\n    changeDraggingState(state) {\n        var _a, _b;\n        if (state) {\n            (_a = this.container) === null || _a === void 0 ? void 0 : _a.classList.add(containerClassName('input_area_dragging'));\n        }\n        else {\n            (_b = this.container) === null || _b === void 0 ? void 0 : _b.classList.remove(containerClassName('input_area_dragging'));\n        }\n    }\n}\n\nclass FilePluginController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new FilePluginView(doc, {\n            viewProps: this.viewProps,\n            value: config.value,\n            invalidFiletypeMessage: config.invalidFiletypeMessage,\n            lineCount: config.lineCount,\n            filetypes: config.filetypes,\n        });\n        this.config = config;\n        // Bind event handlers\n        this.onFile = this.onFile.bind(this);\n        this.onDrop = this.onDrop.bind(this);\n        this.onDragOver = this.onDragOver.bind(this);\n        this.onDragLeave = this.onDragLeave.bind(this);\n        this.onDeleteClick = this.onDeleteClick.bind(this);\n        this.view.input.addEventListener('change', this.onFile);\n        this.view.element.addEventListener('drop', this.onDrop);\n        this.view.element.addEventListener('dragover', this.onDragOver);\n        this.view.element.addEventListener('dragleave', this.onDragLeave);\n        this.view.deleteButton.addEventListener('click', this.onDeleteClick);\n        this.value.emitter.on('change', () => this.handleValueChange());\n        // Dispose event handlers\n        this.viewProps.handleDispose(() => {\n            this.view.input.removeEventListener('change', this.onFile);\n            this.view.element.removeEventListener('drop', this.onDrop);\n            this.view.element.removeEventListener('dragover', this.onDragOver);\n            this.view.element.removeEventListener('dragleave', this.onDragLeave);\n            this.view.deleteButton.removeEventListener('click', this.onDeleteClick);\n        });\n    }\n    /**\n     * Called when the value of the input changes.\n     * @param event change event.\n     */\n    onFile(_event) {\n        const input = this.view.input;\n        // Check if user has chosen a file.\n        // If it's valid, we update the value. Otherwise, show warning.\n        if (input.files && input.files.length > 0) {\n            const file = input.files[0];\n            if (!this.isFileValid(file)) {\n                this.showWarning();\n            }\n            else {\n                this.value.setRawValue(file);\n            }\n        }\n    }\n    /**\n     * Shows warning text for 5 seconds.\n     */\n    showWarning() {\n        this.view.warning.style.display = 'block';\n        setTimeout(() => {\n            // Resetting warning text\n            this.view.warning.style.display = 'none';\n        }, 5000);\n    }\n    /**\n     * Checks if the file is valid with the given filetypes.\n     * @param file File object\n     * @returns true if the file is valid.\n     */\n    isFileValid(file) {\n        var _a;\n        const filetypes = this.config.filetypes;\n        const fileExtension = '.' + ((_a = file.name.split('.').pop()) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        return !(filetypes &&\n            filetypes.length > 0 &&\n            !filetypes.includes(fileExtension) &&\n            fileExtension);\n    }\n    /**\n     * Event handler when the delete HTML button is clicked.\n     * It resets the `rawValue` of the controller.\n     */\n    onDeleteClick() {\n        const file = this.value.rawValue;\n        if (file) {\n            // Resetting the value\n            this.value.setRawValue(null);\n            // Resetting the input\n            this.view.input.value = '';\n            // Resetting the warning text\n            this.view.warning.style.display = 'none';\n        }\n    }\n    /**\n     * Called when the user drags over a file.\n     * Updates the style of the container.\n     * @param event drag event.\n     */\n    onDragOver(event) {\n        event.preventDefault();\n        this.view.changeDraggingState(true);\n    }\n    /**\n     * Called when the user leaves the container while dragging.\n     * Updates the style of the container.\n     */\n    onDragLeave() {\n        this.view.changeDraggingState(false);\n    }\n    /**\n     * Called when the user drops a file in the container.\n     * Either shows a warning if it's invalid or updates the value if it's valid.\n     * @param ev drag event.\n     */\n    onDrop(ev) {\n        if (ev instanceof DragEvent) {\n            // Prevent default behavior (Prevent file from being opened)\n            ev.preventDefault();\n            if (ev.dataTransfer) {\n                if (ev.dataTransfer.files) {\n                    // We only change the value if the user has dropped a single file\n                    const filesArray = [ev.dataTransfer.files][0];\n                    if (filesArray.length == 1) {\n                        const file = filesArray.item(0);\n                        if (file) {\n                            if (!this.isFileValid(file)) {\n                                this.showWarning();\n                            }\n                            else {\n                                this.value.setRawValue(file);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this.view.changeDraggingState(false);\n    }\n    /**\n     * Called when the value (bound to the controller) changes (e.g. when the file is selected).\n     */\n    handleValueChange() {\n        const fileObj = this.value.rawValue;\n        const containerEl = this.view.container;\n        const textEl = this.view.text;\n        const fileIconEl = this.view.fileIcon;\n        const deleteButton = this.view.deleteButton;\n        if (fileObj) {\n            // Setting the text of the file to the element\n            textEl.textContent = fileObj.name;\n            // Removing icon and adding text\n            containerEl.appendChild(textEl);\n            if (containerEl.contains(fileIconEl)) {\n                containerEl.removeChild(fileIconEl);\n            }\n            // Resetting warning text\n            this.view.warning.style.display = 'none';\n            // Adding button to delete\n            deleteButton.style.display = 'block';\n            containerEl.style.border = 'unset';\n        }\n        else {\n            // Setting the text of the file to the element\n            textEl.textContent = '';\n            // Removing text and adding icon\n            containerEl.appendChild(fileIconEl);\n            containerEl.removeChild(textEl);\n            // Resetting warning text\n            this.view.warning.style.display = 'none';\n            // Hiding button and resetting border\n            deleteButton.style.display = 'none';\n            containerEl.style.border = '1px dashed #717070';\n        }\n    }\n}\n\nconst TweakpaneFileInputPlugin = createPlugin({\n    id: 'file-input',\n    // type: The plugin type.\n    type: 'input',\n    accept(exValue, params) {\n        if (typeof exValue !== 'string') {\n            // Return null to deny the user input\n            return null;\n        }\n        // Parse parameters object\n        const result = parseRecord(params, (p) => ({\n            // `view` option may be useful to provide a custom control for primitive values\n            view: p.required.constant('file-input'),\n            invalidFiletypeMessage: p.optional.string,\n            lineCount: p.optional.number,\n            filetypes: p.optional.array(p.required.string),\n        }));\n        if (!result) {\n            return null;\n        }\n        // Return a typed value and params to accept the user input\n        return {\n            initialValue: exValue,\n            params: result,\n        };\n    },\n    binding: {\n        reader(_args) {\n            return (exValue) => {\n                // Convert an external unknown value into the internal value\n                return exValue instanceof File ? exValue : null;\n            };\n        },\n        constraint(_args) {\n            return new CompositeConstraint([]);\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                // Use `target.write()` to write the primitive value to the target,\n                // or `target.writeProperty()` to write a property of the target\n                target.write(inValue);\n            };\n        },\n    },\n    controller(args) {\n        var _a, _b;\n        const defaultNumberOfLines = 3;\n        const defaultFiletypeWarningText = 'Unaccepted file type.';\n        // Create a controller for the plugin\n        return new FilePluginController(args.document, {\n            value: args.value,\n            viewProps: args.viewProps,\n            invalidFiletypeMessage: (_a = args.params.invalidFiletypeMessage) !== null && _a !== void 0 ? _a : defaultFiletypeWarningText,\n            lineCount: (_b = args.params.lineCount) !== null && _b !== void 0 ? _b : defaultNumberOfLines,\n            filetypes: args.params.filetypes,\n        });\n    },\n});\n\n// Export your plugin(s) as constant `plugins`\nconst id = 'file-input';\nconst css = '.tp-ctnv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ctnv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-ctnv:hover{background-color:var(--in-bg-h)}.tp-ctnv:focus{background-color:var(--in-bg-f)}.tp-ctnv:active{background-color:var(--in-bg-a)}.tp-ctnv:disabled{opacity:.5}.tp-ctnv{cursor:pointer;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;height:100%;width:100%;border:1px dashed #717070;border-radius:5px}.tp-ctnv.tp-v-disabled{opacity:.5}.tp-ctnv_input_area_dragging{border:1px dashed #6774ff;background-color:rgba(88,88,185,.231372549)}.tp-ctnv_warning{color:var(--in-fg);bottom:2px;display:inline-block;font-size:.9em;height:-moz-max-content;height:max-content;line-height:1.5;opacity:.5;white-space:normal;width:-moz-max-content;width:max-content;word-wrap:break-word;text-align:right;width:100%;margin-top:var(--cnt-vp)}.tp-ctnv_text{color:var(--in-fg);bottom:2px;display:inline-block;font-size:.9em;height:-moz-max-content;height:max-content;line-height:.9;margin:.2rem;max-height:100%;max-width:100%;opacity:.5;position:absolute;right:2px;text-align:right;white-space:normal;width:-moz-max-content;width:max-content;word-wrap:break-word}.tp-ctnv_frac{background-color:var(--in-fg);border-radius:1px;height:2px;left:50%;margin-top:-1px;position:absolute;top:50%}.tp-ctnv_icon{box-sizing:border-box;position:absolute;display:block;transform:scale(var(--ggs, 1));width:16px;height:6px;border:2px solid;border-top:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;margin-top:8px;opacity:.5}.tp-ctnv_icon::after{content:\"\";display:block;box-sizing:border-box;position:absolute;width:8px;height:8px;border-left:2px solid;border-top:2px solid;transform:rotate(45deg);left:2px;bottom:4px}.tp-ctnv_icon::before{content:\"\";display:block;box-sizing:border-box;position:absolute;border-radius:3px;width:2px;height:10px;background:currentColor;left:5px;bottom:3px}.tp-btnv_b{margin-top:10px}.tp-inputv{opacity:0}';\nconst plugins = [TweakpaneFileInputPlugin];\n\nexport { css, id, plugins };\n","import { ClassName, createPlugin, parseRecord } from '@tweakpane/core';\n\nfunction createPlaceholderImage() {\n    const svg = `\n\t<svg width=\"320\" height=\"50\" xmlns=\"http://www.w3.org/2000/svg\">\n  <style>\n    text {\n      font-family: \"Menlo\", monospace;\n      font-size: 12px;\n\t\t\tfill: gray;\n    }\n  </style>\n  <text x=\"50%\" y=\"55%\" text-anchor=\"middle\">\n    No Image\n  </text>\n</svg>`;\n    const blob = new Blob([svg], { type: 'image/svg+xml' });\n    const image = new Image();\n    image.src = URL.createObjectURL(blob);\n    return image;\n}\nfunction loadImage(src) {\n    const image = new Image();\n    image.crossOrigin = 'anonymous';\n    image.src = src;\n    // image.onload = () => {\n    // };\n    // image.onerror = reject;\n    return image;\n}\n\nconst className = ClassName('img');\nclass PluginView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        this.input = doc.createElement('input');\n        this.input.classList.add(className('input'));\n        this.input.setAttribute('type', 'file');\n        this.input.setAttribute('accept', config.extensions.join(','));\n        this.image_ = doc.createElement('img');\n        this.image_.id = 'tpimg_' + Math.random().toString(36).slice(2); // need unique for drop\n        this.image_.classList.add(className('image'));\n        this.image_.classList.add(className(`image_${config.imageFit}`));\n        this.image_.crossOrigin = 'anonymous';\n        this.image_.onclick = (event) => {\n            return config.clickCallback\n                ? config.clickCallback(event, this.input)\n                : this.input.click();\n        };\n        this.element.classList.add(className('area_root'));\n        this.element.appendChild(this.image_);\n        this.element.appendChild(this.input);\n    }\n    changeImage(src) {\n        this.image_.src = src;\n    }\n    changeDraggingState(state) {\n        const el = this.element;\n        if (state) {\n            el === null || el === void 0 ? void 0 : el.classList.add(className('area_dragging'));\n        }\n        else {\n            el === null || el === void 0 ? void 0 : el.classList.remove(className('area_dragging'));\n        }\n    }\n}\n\nlet placeholderImage = null;\nclass PluginController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new PluginView(doc, {\n            viewProps: this.viewProps,\n            extensions: config.extensions,\n            imageFit: config.imageFit,\n            clickCallback: config.clickCallback,\n        });\n        this.onFile = this.onFile.bind(this);\n        this.onDrop = this.onDrop.bind(this);\n        this.onDragStart = this.onDragStart.bind(this);\n        this.onDragOver = this.onDragOver.bind(this);\n        this.onDragLeave = this.onDragLeave.bind(this);\n        this.view.input.addEventListener('change', this.onFile);\n        this.view.element.addEventListener('drop', this.onDrop);\n        this.view.element.addEventListener('dragstart', this.onDragStart);\n        this.view.element.addEventListener('dragover', this.onDragOver);\n        this.view.element.addEventListener('dragleave', this.onDragLeave);\n        this.viewProps.handleDispose(() => {\n            this.view.input.removeEventListener('change', this.onFile);\n            this.view.element.removeEventListener('drop', this.onDrop);\n            this.view.element.removeEventListener('dragstart', this.onDragStart);\n            this.view.element.removeEventListener('dragover', this.onDragOver);\n            this.view.element.removeEventListener('dragleave', this.onDragLeave);\n        });\n        this.value.emitter.on('change', () => this.handleValueChange());\n        this.handleValueChange();\n    }\n    onFile(event) {\n        const files = (event === null || event === void 0 ? void 0 : event.target).files;\n        if (!files || !files.length)\n            return;\n        const file = files[0];\n        this.setValue(file);\n        // this.updateImage(url);\n    }\n    onDrop(event) {\n        event.preventDefault();\n        try {\n            const { dataTransfer } = event;\n            const file = dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.files[0];\n            if (file) {\n                // const url = URL.createObjectURL(file);\n                // this.updateImage(url);\n                this.setValue(file);\n            }\n            else {\n                const imgId = dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.getData('img-id');\n                if (imgId) {\n                    const img = document.getElementById(imgId);\n                    this.setValue(img);\n                }\n                else {\n                    const url = dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.getData('url');\n                    if (!url)\n                        throw new Error('No url');\n                    this.setValue(url);\n                }\n                // loadImage(url).then(async (image) => {\n                // \tconsole.log('drop', image);\n                // \tconst clone = await cloneImage(image);\n                // \t// this.updateImage(clone.src);\n                // \tthis.setValue(clone);\n                // });\n            }\n        }\n        catch (e) {\n            console.error('Could not parse the dropped image', e);\n        }\n        finally {\n            this.view.changeDraggingState(false);\n        }\n    }\n    onDragStart(event) {\n        var _a, _b;\n        (_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData('img-id', this.view.image_.id);\n        (_b = event.dataTransfer) === null || _b === void 0 ? void 0 : _b.setDragImage(this.view.image_, 0, 0);\n    }\n    onDragOver(event) {\n        event.preventDefault();\n        this.view.changeDraggingState(true);\n    }\n    onDragLeave() {\n        this.view.changeDraggingState(false);\n    }\n    handleImage(image) {\n        if (image instanceof HTMLImageElement) {\n            this.updateImage(image.src);\n        }\n        else if (typeof image === 'string' || !image) {\n            if (image === 'placeholder' || !image) {\n                image = this.handlePlaceholderImage().src;\n            }\n            this.updateImage(image);\n        }\n        else {\n            this.setValue(image);\n        }\n    }\n    updateImage(src) {\n        this.view.changeImage(src);\n    }\n    setValue(src) {\n        if (src instanceof HTMLImageElement) {\n            this.value.setRawValue(src);\n        }\n        else if (src instanceof File) {\n            const url = URL.createObjectURL(src) + '#' + src.name;\n            src.src = url;\n            const img = loadImage(url);\n            // \t.catch(() => {\n            // \t// URL.revokeObjectURL(url);\n            // });\n            // URL.revokeObjectURL(url); //todo: revoke sometime.\n            this.value.setRawValue(img || src);\n        }\n        else if (src) {\n            this.value.setRawValue(loadImage(src));\n        }\n        else {\n            this.value.setRawValue(this.handlePlaceholderImage());\n        }\n    }\n    handleValueChange() {\n        this.handleImage(this.value.rawValue);\n    }\n    handlePlaceholderImage() {\n        if (!placeholderImage) {\n            placeholderImage = createPlaceholderImage();\n        }\n        return placeholderImage;\n    }\n}\n\nconst DEFAULT_EXTENSIONS = ['.jpg', '.png', '.gif'];\nconst TweakpaneImagePlugin = createPlugin({\n    id: 'input-image',\n    type: 'input',\n    accept(exValue, params) {\n        if (!(exValue instanceof HTMLImageElement || typeof exValue === 'string')) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('input-image'),\n            acceptUrl: p.optional.boolean,\n            clickCallback: p.optional.function,\n            imageFit: p.optional.custom((v) => v === 'contain' || v === 'cover' ? v : undefined),\n            extensions: p.optional.array(p.required.string),\n        }));\n        if (!result) {\n            return null;\n        }\n        return {\n            initialValue: exValue,\n            params: result,\n        };\n    },\n    binding: {\n        reader(_args) {\n            return (exValue) => {\n                if (exValue.src !== undefined) {\n                    return exValue.src === '' ? 'placeholder' : exValue.src;\n                }\n                else {\n                    return typeof exValue === 'string' ? exValue : exValue;\n                }\n            };\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                target.write(inValue);\n            };\n        },\n    },\n    controller(args) {\n        var _a, _b;\n        return new PluginController(args.document, {\n            value: args.value,\n            imageFit: (_a = args.params.imageFit) !== null && _a !== void 0 ? _a : 'cover',\n            clickCallback: args.params.clickCallback,\n            viewProps: args.viewProps,\n            extensions: (_b = args.params.extensions) !== null && _b !== void 0 ? _b : DEFAULT_EXTENSIONS,\n        });\n    },\n});\n\nconst id = 'input-image';\nconst css = '.tp-imgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-imgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-imgv:hover{background-color:var(--in-bg-h)}.tp-imgv:focus{background-color:var(--in-bg-f)}.tp-imgv:active{background-color:var(--in-bg-a)}.tp-imgv:disabled{opacity:.5}:root{--tp-plugin-image-dragging-color: hsla(230, 100%, 66%, 1)}.tp-imgv{cursor:pointer;display:inline-flex;height:auto !important;max-height:calc(var(--cnt-usz)*3);border-radius:4px;position:relative}.tp-imgv.tp-v-disabled{opacity:.5}.tp-imgv_input{width:0;height:0;pointer-events:none;visibility:hidden}.tp-imgv_image{width:100%;height:-moz-max-content;height:max-content;max-height:calc(var(--cnt-usz)*3);border:0}.tp-imgv_image_contain{-o-object-fit:contain;object-fit:contain}.tp-imgv_image_cover{-o-object-fit:cover;object-fit:cover}.tp-imgv_area_root{transition:opacity .16s ease-in-out}.tp-imgv_area_dragging{border:2px dashed var(--tp-plugin-image-dragging-color);border-radius:4px;opacity:.6}';\nconst plugins = [TweakpaneImagePlugin];\n\nexport { css, id, plugins };\n","<script generics=\"T extends number | IntervalSliderValue\">\n\timport GenericInput from './GenericInput.svelte'\n\texport let value\n\texport let options = void 0\n\texport let min = void 0\n\texport let max = void 0\n\texport let step = void 0\n\texport let pointerScale = void 0\n\texport let keyScale = void 0\n\texport let format = void 0\n\texport let ref = void 0\n\tlet formatProxy = format\n\t$: formatProxy !== format && (formatProxy = format)\n\tlet optionsInternal\n\t$: optionsInternal = {\n\t\tmin,\n\t\tmax,\n\t\tformat: formatProxy,\n\t\tkeyScale,\n\t\tpointerScale,\n\t\tstep,\n\t\t...options,\n\t}\n</script>\n\n<GenericInput bind:value bind:ref on:change options={optionsInternal} {...$$restProps} />\n","<script context=\"module\"></script>\n\n<script generics=\"T extends any\">\n\timport Blade from '../core/Blade.svelte'\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport {} from '../utils'\n\timport { BROWSER } from 'esm-env'\n\timport copy from 'fast-copy'\n\timport { shallowEqual } from 'fast-equals'\n\timport { createEventDispatcher } from 'svelte'\n\texport let value\n\texport let options\n\texport let label = void 0\n\tconst dispatch = createEventDispatcher()\n\tlet listBlade\n\tlet bladeOptions\n\tfunction addEvent() {\n\t\tlistBlade.on('change', (event) => {\n\t\t\tif (!shallowEqual(event.value, value)) {\n\t\t\t\tvalue = event.value\n\t\t\t\tdispatch('change', {\n\t\t\t\t\tvalue: copy(value),\n\t\t\t\t\torigin: 'internal',\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\tfunction getInitialValue() {\n\t\tif (value === void 0) {\n\t\t\tconst internalOptions = getInternalOptions(options)\n\t\t\tif (Array.isArray(internalOptions)) {\n\t\t\t\tvalue = internalOptions[0].value\n\t\t\t\treturn value\n\t\t\t}\n\t\t\tvalue = internalOptions[Object.keys(internalOptions)[0]]\n\t\t\treturn value\n\t\t}\n\t\treturn value\n\t}\n\tfunction isArrayStyleListOptions(object) {\n\t\treturn (\n\t\t\tArray.isArray(object) &&\n\t\t\tobject.every(\n\t\t\t\t(item) => typeof item === 'object' && item !== null && 'text' in item && 'value' in item,\n\t\t\t)\n\t\t)\n\t}\n\tfunction isObjectStyleListOptions(object) {\n\t\treturn typeof object === 'object' && object !== null && !Array.isArray(object)\n\t}\n\tfunction getInternalOptions(options2) {\n\t\treturn isArrayStyleListOptions(options2)\n\t\t\t? options2\n\t\t\t: isObjectStyleListOptions(options2)\n\t\t\t\t? options2\n\t\t\t\t: options2.map((value2) => ({\n\t\t\t\t\t\tvalue: value2,\n\t\t\t\t\t\ttext: typeof value2 === 'object' ? JSON.stringify(value2) : String(value2),\n\t\t\t\t\t}))\n\t}\n\tfunction setValue() {\n\t\tif (!shallowEqual(listBlade.value, value)) {\n\t\t\tlistBlade.value = value\n\t\t\tdispatch('change', {\n\t\t\t\tvalue: copy(value),\n\t\t\t\torigin: 'external',\n\t\t\t})\n\t\t}\n\t}\n\t$: bladeOptions = {\n\t\tvalue: getInitialValue(),\n\t\tlabel,\n\t\toptions: getInternalOptions(options),\n\t\tview: 'list',\n\t}\n\t$: listBlade && addEvent()\n\t$: value, listBlade && setValue()\n</script>\n\n<Blade bind:ref={listBlade} options={bladeOptions} {...$$restProps} />\n{#if !BROWSER}\n\t<ClsPad keysAdd={['containerUnitSize']} theme={$$props.theme} />\n{/if}\n","import { ClassName, SVG_NS, removeElement, constrainRange, createValue, PointerHandler, NumberTextController, createRangeConstraint, createStepConstraint, CompositeConstraint, createPlugin, writePrimitive, numberFromUnknown, createNumberTextPropsObject, ValueMap, parseNumber, parseRecord, createNumberTextInputParamsParser, createNumberFormatter, getDecimalDigits } from '@tweakpane/core';\n\nconst className$1 = ClassName('ckr');\nclass RingView {\n    constructor(doc, config) {\n        this.tickElems_ = [];\n        this.labelElems_ = [];\n        this.boundsWidth_ = -1;\n        this.onShowsTooltipChange_ = this.onShowsTooltipChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.formatters_ = config.formatters;\n        this.unit_ = config.unit;\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$1(), className$1(undefined, `m${config.seriesId}`));\n        config.viewProps.bindClassModifiers(this.element);\n        this.value_ = config.value;\n        this.value_.emitter.on('change', this.onValueChange_);\n        config.showsTooltip.emitter.on('change', this.onShowsTooltipChange_);\n        const wrapperElem = doc.createElement('div');\n        wrapperElem.classList.add(className$1('w'));\n        this.element.appendChild(wrapperElem);\n        this.offsetElem_ = doc.createElement('div');\n        this.offsetElem_.classList.add(className$1('o'));\n        wrapperElem.appendChild(this.offsetElem_);\n        this.svgElem_ = doc.createElementNS(SVG_NS, 'svg');\n        this.svgElem_.classList.add(className$1('g'));\n        this.offsetElem_.appendChild(this.svgElem_);\n        this.tooltipElem_ = doc.createElement('div');\n        this.tooltipElem_.classList.add(ClassName('tt')(), className$1('tt'));\n        this.element.appendChild(this.tooltipElem_);\n        this.waitToBeAdded_();\n    }\n    // Waits to be added to DOM tree to build initial scale elements\n    waitToBeAdded_() {\n        const ob = new IntersectionObserver((entries) => {\n            entries.forEach((entry) => {\n                if (entry.target !== this.element || entry.intersectionRatio === 0) {\n                    return;\n                }\n                this.update();\n                ob.disconnect();\n            });\n        }, {\n            root: null,\n        });\n        ob.observe(this.element);\n    }\n    rebuildScaleIfNeeded_(bw) {\n        if (this.boundsWidth_ === bw) {\n            return;\n        }\n        this.boundsWidth_ = bw;\n        this.tickElems_.forEach((elem) => {\n            removeElement(elem);\n        });\n        this.tickElems_ = [];\n        this.labelElems_.forEach((elem) => {\n            removeElement(elem);\n        });\n        this.labelElems_ = [];\n        const doc = this.element.ownerDocument;\n        const tpu = this.unit_.ticks;\n        const uw = this.unit_.pixels;\n        const halfUnitCount = Math.ceil(bw / 2 / uw) + 1;\n        const unitCount = halfUnitCount * 2 + 1;\n        const tickCount = unitCount * tpu;\n        const tickWidth = uw / tpu;\n        for (let i = 0; i < tickCount; i++) {\n            const x = i * tickWidth;\n            if (i % tpu === 0) {\n                const lineElem = doc.createElementNS(SVG_NS, 'line');\n                lineElem.classList.add(className$1('mjt'));\n                lineElem.setAttributeNS(null, 'x1', String(x));\n                lineElem.setAttributeNS(null, 'y1', '0');\n                lineElem.setAttributeNS(null, 'x2', String(x));\n                lineElem.setAttributeNS(null, 'y2', '2');\n                this.svgElem_.appendChild(lineElem);\n                this.tickElems_.push(lineElem);\n                const labelElem = doc.createElement('div');\n                labelElem.classList.add(className$1('l'));\n                labelElem.style.left = `${x}px`;\n                this.offsetElem_.appendChild(labelElem);\n                this.labelElems_.push(labelElem);\n            }\n            else {\n                const lineElem = doc.createElementNS(SVG_NS, 'line');\n                lineElem.classList.add(className$1('mnt'));\n                lineElem.setAttributeNS(null, 'x1', String(x));\n                lineElem.setAttributeNS(null, 'y1', '0');\n                lineElem.setAttributeNS(null, 'x2', String(x));\n                lineElem.setAttributeNS(null, 'y2', '2');\n                this.svgElem_.appendChild(lineElem);\n                this.tickElems_.push(lineElem);\n            }\n        }\n    }\n    updateScale_(bw) {\n        const uv = this.unit_.value;\n        const uw = this.unit_.pixels;\n        const v = this.value_.rawValue;\n        const halfUnitCount = Math.ceil(bw / 2 / uw) + 1;\n        const ov = v - (v % uv) - uv * halfUnitCount;\n        const opacity = (tv) => {\n            return (1 -\n                Math.pow(constrainRange(Math.abs(v - tv) / ((bw / 2) * (uv / uw)), 0, 1), 10));\n        };\n        this.labelElems_.forEach((elem, i) => {\n            const lv = ov + i * uv;\n            elem.textContent = this.formatters_.ring(lv);\n            elem.style.opacity = String(opacity(lv));\n        });\n        const tpu = this.unit_.ticks;\n        this.tickElems_.forEach((elem, i) => {\n            const lv = ov + (i / tpu) * uv;\n            elem.style.opacity = String(opacity(lv));\n        });\n    }\n    update() {\n        const bw = this.element.getBoundingClientRect().width;\n        const uv = this.unit_.value;\n        const uw = this.unit_.pixels;\n        const v = this.value_.rawValue;\n        const halfUnitCount = Math.ceil(bw / 2 / uw) + 1;\n        const offsetFromCenter = ((v % uv) + uv * halfUnitCount) * (uw / uv);\n        const offset = bw / 2 - offsetFromCenter;\n        this.offsetElem_.style.transform = `translateX(${offset}px)`;\n        this.tooltipElem_.textContent = this.formatters_.text(v);\n        this.rebuildScaleIfNeeded_(bw);\n        this.updateScale_(bw);\n    }\n    onValueChange_() {\n        this.update();\n    }\n    onShowsTooltipChange_(ev) {\n        if (ev.rawValue) {\n            this.element.classList.add(className$1(undefined, 'tt'));\n        }\n        else {\n            this.element.classList.remove(className$1(undefined, 'tt'));\n        }\n    }\n}\n\nclass RingController {\n    constructor(doc, config) {\n        this.ox_ = 0;\n        this.ov_ = 0;\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.tooltipEnabled_ = config.tooltipEnabled;\n        this.unit_ = config.unit;\n        this.showsTooltip_ = createValue(false);\n        this.view = new RingView(doc, {\n            formatters: config.formatters,\n            seriesId: config.seriesId,\n            showsTooltip: this.showsTooltip_,\n            unit: config.unit,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const ptHandler = new PointerHandler(this.view.element);\n        ptHandler.emitter.on('down', this.onPointerDown_);\n        ptHandler.emitter.on('move', this.onPointerMove_);\n        ptHandler.emitter.on('up', this.onPointerUp_);\n    }\n    onPointerDown_(ev) {\n        const data = ev.data;\n        if (!data.point) {\n            return;\n        }\n        this.ox_ = data.point.x;\n        this.ov_ = this.value.rawValue;\n        if (this.tooltipEnabled_) {\n            this.showsTooltip_.rawValue = true;\n        }\n    }\n    onPointerMove_(ev) {\n        const data = ev.data;\n        if (!data.point) {\n            return;\n        }\n        const dx = data.point.x - this.ox_;\n        const uw = this.unit_.pixels;\n        const uv = this.unit_.value;\n        this.value.setRawValue(this.ov_ - (dx / uw) * uv, {\n            forceEmit: false,\n            last: false,\n        });\n    }\n    onPointerUp_() {\n        this.value.setRawValue(this.value.rawValue, {\n            forceEmit: true,\n            last: true,\n        });\n        this.showsTooltip_.rawValue = false;\n    }\n}\n\nconst className = ClassName('ckrtxt');\nclass RingTextView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        const ringElem = doc.createElement('div');\n        ringElem.classList.add(className('r'));\n        ringElem.appendChild(config.ringView.element);\n        this.element.appendChild(ringElem);\n        const textElem = doc.createElement('div');\n        textElem.classList.add(className('t'));\n        textElem.appendChild(config.textView.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nclass RingTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.rc_ = new RingController(doc, {\n            formatters: {\n                ring: config.ringFormatter,\n                text: config.textProps.get('formatter'),\n            },\n            seriesId: config.seriesId,\n            tooltipEnabled: false,\n            unit: config.ringUnit,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.tc_ = new NumberTextController(doc, {\n            parser: config.parser,\n            props: config.textProps,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new RingTextView(doc, {\n            ringView: this.rc_.view,\n            textView: this.tc_.view,\n        });\n    }\n}\n\nfunction createConstraint(params) {\n    const constraints = [];\n    const cr = createRangeConstraint(params);\n    if (cr) {\n        constraints.push(cr);\n    }\n    const cs = createStepConstraint(params);\n    if (cs) {\n        constraints.push(cs);\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction parseSeries(value) {\n    return value === 0 || value === 1 || value === 2 ? value : undefined;\n}\nfunction getRingSeries(series) {\n    return series !== undefined ? String(series) : '0';\n}\nfunction createRingFormatter(ringUnit) {\n    const f = createNumberFormatter(getDecimalDigits(ringUnit.value));\n    return (value) => {\n        const text = f(value);\n        const ch = text.substr(0, 1);\n        const hasSign = ch === '-' || ch === '+';\n        return text + (hasSign ? ' ' : '');\n    };\n}\nconst RingInputPlugin = createPlugin({\n    id: 'input-ring',\n    type: 'input',\n    accept(exValue, params) {\n        if (typeof exValue !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { series: p.optional.custom(parseSeries), unit: p.optional.object({\n                pixels: p.required.number,\n                ticks: p.required.number,\n                value: p.required.number,\n            }), view: p.required.constant('cameraring'), wide: p.optional.boolean })));\n        return result\n            ? {\n                initialValue: exValue,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller(args) {\n        var _a, _b, _c;\n        const ringUnit = (_a = args.params.unit) !== null && _a !== void 0 ? _a : {\n            ticks: 5,\n            pixels: 40,\n            value: 10,\n        };\n        const ringFormatter = createRingFormatter(ringUnit);\n        const textPropsObj = createNumberTextPropsObject(args.params, args.initialValue);\n        if (args.params.wide) {\n            return new RingController(args.document, {\n                formatters: {\n                    ring: ringFormatter,\n                    text: textPropsObj.formatter,\n                },\n                seriesId: (_b = getRingSeries(args.params.series)) !== null && _b !== void 0 ? _b : '0',\n                tooltipEnabled: true,\n                unit: ringUnit,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        const textProps = ValueMap.fromObject(textPropsObj);\n        return new RingTextController(args.document, {\n            parser: parseNumber,\n            ringFormatter: ringFormatter,\n            ringUnit: ringUnit,\n            seriesId: (_c = getRingSeries(args.params.series)) !== null && _c !== void 0 ? _c : '0',\n            textProps: textProps,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst WheelInputPlugin = createPlugin({\n    id: 'input-wheel',\n    type: 'input',\n    accept(exValue, params) {\n        if (typeof exValue !== 'number') {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { amount: p.optional.number, view: p.required.constant('camerawheel'), wide: p.optional.boolean })));\n        return result\n            ? {\n                initialValue: exValue,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        reader: (_args) => numberFromUnknown,\n        constraint: (args) => createConstraint(args.params),\n        writer: (_args) => writePrimitive,\n    },\n    controller(args) {\n        var _a, _b;\n        const ringFormatter = createNumberFormatter(0);\n        const textPropsObj = createNumberTextPropsObject(args.params, args.initialValue);\n        if (args.params.wide) {\n            return new RingController(args.document, {\n                formatters: {\n                    ring: ringFormatter,\n                    text: textPropsObj.formatter,\n                },\n                seriesId: 'w',\n                tooltipEnabled: true,\n                unit: {\n                    ticks: 10,\n                    pixels: 40,\n                    value: ((_a = args.params.amount) !== null && _a !== void 0 ? _a : textPropsObj.pointerScale) * 40,\n                },\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new RingTextController(args.document, {\n            parser: parseNumber,\n            ringFormatter: ringFormatter,\n            ringUnit: {\n                ticks: 10,\n                pixels: 40,\n                value: ((_b = args.params.amount) !== null && _b !== void 0 ? _b : textPropsObj.pointerScale) * 40,\n            },\n            seriesId: 'w',\n            textProps: ValueMap.fromObject(textPropsObj),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst id = 'camerakit';\nconst css = '.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:\"\";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:\"\";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--cnt-usz));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}';\nconst plugins = [RingInputPlugin, WheelInputPlugin];\n\nexport { css, id, plugins };\n","import { SVG_NS, ClassName, createValue, PointerHandler, isArrowKey, getStepForKey, getHorizontalStepKeys, getVerticalStepKeys, bindValueMap, valueToClassName, Foldable, PointNdTextController, PopupController, connectValues, bindFoldable, forceCast, findNextTarget, supportsTouch, ValueMap, createNumberFormatter, isEmpty, StepConstraint, RangeConstraint, CompositeConstraint, createPlugin, PointNdConstraint, TpError, parseNumber, parseRecord, parsePointDimensionParams, parsePickerLayout } from '@tweakpane/core';\n\nclass Rotation {\n    multiply(b) {\n        return this.format(this.quat.multiply(b.quat));\n    }\n    premultiply(a) {\n        return this.format(a.multiply(this));\n    }\n    slerp(b, t) {\n        return this.format(this.quat.slerp(b.quat, t));\n    }\n}\n\nfunction clamp(x, l, h) {\n    return Math.min(Math.max(x, l), h);\n}\n\nfunction lofi(x, d) {\n    return Math.floor(x / d) * d;\n}\n\nfunction mod(x, d) {\n    return x - lofi(x, d);\n}\n\nfunction sanitizeAngle(angle) {\n    return mod(angle + Math.PI, Math.PI * 2.0) - Math.PI;\n}\n\nclass Euler extends Rotation {\n    static fromQuaternion(quat, order, unit) {\n        const m = quat.toMat3();\n        const [i, j, k, sign] = order === 'XYZ' ? [0, 1, 2, 1] :\n            order === 'XZY' ? [0, 2, 1, -1] :\n                order === 'YXZ' ? [1, 0, 2, -1] :\n                    order === 'YZX' ? [1, 2, 0, 1] :\n                        order === 'ZXY' ? [2, 0, 1, 1] :\n                            [2, 1, 0, -1];\n        const result = [0.0, 0.0, 0.0];\n        const c = m[k + i * 3];\n        result[j] = -sign * Math.asin(clamp(c, -1, 1.0));\n        if (Math.abs(c) < 0.999999) {\n            result[i] = sign * Math.atan2(m[k + j * 3], m[k * 4]);\n            result[k] = sign * Math.atan2(m[j + i * 3], m[i * 4]);\n        }\n        else {\n            // \"y is 90deg\" cases\n            result[i] = sign * Math.atan2(-m[j + k * 3], m[j * 4]);\n        }\n        if (Math.abs(result[i]) + Math.abs(result[k]) > Math.PI) {\n            // \"two big revolutions\" cases\n            result[i] = sanitizeAngle(result[i] + Math.PI);\n            result[j] = sanitizeAngle(Math.PI - result[j]);\n            result[k] = sanitizeAngle(result[k] + Math.PI);\n        }\n        return new Euler(...result, order).reunit(unit);\n    }\n    constructor(x, y, z, order, unit) {\n        super();\n        this.x = x !== null && x !== void 0 ? x : 0.0;\n        this.y = y !== null && y !== void 0 ? y : 0.0;\n        this.z = z !== null && z !== void 0 ? z : 0.0;\n        this.order = order !== null && order !== void 0 ? order : 'XYZ';\n        this.unit = unit !== null && unit !== void 0 ? unit : 'rad';\n    }\n    get quat() {\n        return Quaternion.fromEuler(this);\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    toEuler(order, unit) {\n        return this.reorder(order).reunit(unit);\n    }\n    format(r) {\n        if (r instanceof Euler) {\n            return r.reorder(this.order);\n        }\n        return r.toEuler(this.order, this.unit);\n    }\n    reorder(order) {\n        if (order === this.order) {\n            return this;\n        }\n        return this.quat.toEuler(order, this.unit);\n    }\n    reunit(unit) {\n        const prev2Rad = {\n            deg: Math.PI / 180.0,\n            rad: 1.0,\n            turn: 2.0 * Math.PI,\n        }[this.unit];\n        const rad2Next = {\n            deg: 180.0 / Math.PI,\n            rad: 1.0,\n            turn: 0.5 / Math.PI,\n        }[unit];\n        const prev2Next = prev2Rad * rad2Next;\n        return new Euler(prev2Next * this.x, prev2Next * this.y, prev2Next * this.z, this.order, unit);\n    }\n}\n\nclass Quaternion extends Rotation {\n    static fromAxisAngle(axis, angle) {\n        const halfAngle = angle / 2.0;\n        const sinHalfAngle = Math.sin(halfAngle);\n        return new Quaternion(axis.x * sinHalfAngle, axis.y * sinHalfAngle, axis.z * sinHalfAngle, Math.cos(halfAngle));\n    }\n    static fromEuler(eulerr) {\n        const euler = eulerr.reunit('rad');\n        const [i, j, k, sign] = euler.order === 'XYZ' ? [0, 1, 2, 1] :\n            euler.order === 'XZY' ? [0, 2, 1, -1] :\n                euler.order === 'YXZ' ? [1, 0, 2, -1] :\n                    euler.order === 'YZX' ? [1, 2, 0, 1] :\n                        euler.order === 'ZXY' ? [2, 0, 1, 1] :\n                            [2, 1, 0, -1];\n        const compo = euler.getComponents();\n        const ti = 0.5 * compo[i];\n        const tj = 0.5 * sign * compo[j];\n        const tk = 0.5 * compo[k];\n        const ci = Math.cos(ti);\n        const cj = Math.cos(tj);\n        const ck = Math.cos(tk);\n        const si = Math.sin(ti);\n        const sj = Math.sin(tj);\n        const sk = Math.sin(tk);\n        const result = [\n            0.0,\n            0.0,\n            0.0,\n            ck * cj * ci + sk * sj * si,\n        ];\n        result[i] = ck * cj * si - sk * sj * ci;\n        result[j] = sign * (ck * sj * ci + sk * cj * si);\n        result[k] = sk * cj * ci - ck * sj * si;\n        return new Quaternion(...result);\n    }\n    static lookRotation(look, up) {\n        const { normal, tangent, binormal } = look.orthoNormalize(up);\n        const m11 = binormal.x;\n        const m12 = tangent.x;\n        const m13 = normal.x;\n        const m21 = binormal.y;\n        const m22 = tangent.y;\n        const m23 = normal.y;\n        const m31 = binormal.z;\n        const m32 = tangent.z;\n        const m33 = normal.z;\n        // Ref: https://github.com/mrdoob/three.js/blob/master/src/math/Quaternion.js\n        // Ref: http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n        const trace = m11 + m22 + m33;\n        if (trace > 0.0) {\n            const s = 0.5 / Math.sqrt(trace + 1.0);\n            return new Quaternion((m32 - m23) * s, (m13 - m31) * s, (m21 - m12) * s, 0.25 / s);\n        }\n        else if (m11 > m22 && m11 > m33) {\n            const s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n            return new Quaternion(0.25 * s, (m12 + m21) / s, (m13 + m31) / s, (m32 - m23) / s);\n        }\n        else if (m22 > m33) {\n            const s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n            return new Quaternion((m12 + m21) / s, 0.25 * s, (m23 + m32) / s, (m13 - m31) / s);\n        }\n        else {\n            const s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n            return new Quaternion((m13 + m31) / s, (m23 + m32) / s, 0.25 * s, (m21 - m12) / s);\n        }\n    }\n    constructor(x, y, z, w) {\n        super();\n        this.x = x !== null && x !== void 0 ? x : 0.0;\n        this.y = y !== null && y !== void 0 ? y : 0.0;\n        this.z = z !== null && z !== void 0 ? z : 0.0;\n        this.w = w !== null && w !== void 0 ? w : 1.0;\n    }\n    get quat() {\n        return this;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z, this.w];\n    }\n    toEuler(order, unit) {\n        return Euler.fromQuaternion(this, order, unit);\n    }\n    get lengthSq() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }\n    get length() {\n        return Math.sqrt(this.lengthSq);\n    }\n    get normalized() {\n        const l = this.length;\n        if (l === 0.0) {\n            return new Quaternion();\n        }\n        return new Quaternion(this.x / l, this.y / l, this.z / l, this.w / l);\n    }\n    get negated() {\n        return new Quaternion(-this.x, -this.y, -this.z, -this.w);\n    }\n    get ban360s() {\n        return (this.w < 0.0) ? this.negated : this;\n    }\n    multiply(br) {\n        const b = br.quat;\n        return new Quaternion(this.w * b.x + this.x * b.w + this.y * b.z - this.z * b.y, this.w * b.y - this.x * b.z + this.y * b.w + this.z * b.x, this.w * b.z + this.x * b.y - this.y * b.x + this.z * b.w, this.w * b.w - this.x * b.x - this.y * b.y - this.z * b.z);\n    }\n    format(r) {\n        return r.quat;\n    }\n    slerp(br, t) {\n        let b = br.quat;\n        if (t === 0.0) {\n            return this;\n        }\n        if (t === 1.0) {\n            return b;\n        }\n        // Ref: https://github.com/mrdoob/three.js/blob/master/src/math/Quaternion.js\n        // Ref: http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n        const a = this.ban360s;\n        b = b.ban360s;\n        let cosHalfTheta = a.w * b.w + a.x * b.x + a.y * b.y + a.z * b.z;\n        if (cosHalfTheta < 0.0) {\n            b = b.negated;\n            cosHalfTheta = -cosHalfTheta;\n        }\n        // I think you two are same\n        if (cosHalfTheta >= 1.0) {\n            return a;\n        }\n        const sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n        // fallback to simple lerp\n        if (sqrSinHalfTheta <= Number.EPSILON) {\n            const s = 1.0 - t;\n            return new Quaternion(s * a.x + t * b.x, s * a.y + t * b.y, s * a.z + t * b.z, s * a.w + t * b.w).normalized;\n        }\n        // welcome\n        const sinHalfTheta = Math.sqrt(sqrSinHalfTheta);\n        const halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n        const ratioA = Math.sin((1.0 - t) * halfTheta) / sinHalfTheta;\n        const ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n        return new Quaternion(a.x * ratioA + b.x * ratioB, a.y * ratioA + b.y * ratioB, a.z * ratioA + b.z * ratioB, a.w * ratioA + b.w * ratioB);\n    }\n    toMat3() {\n        const { x, y, z, w } = this;\n        return [\n            1.0 - 2.0 * y * y - 2.0 * z * z, 2.0 * x * y + 2.0 * z * w, 2.0 * x * z - 2.0 * y * w,\n            2.0 * x * y - 2.0 * z * w, 1.0 - 2.0 * x * x - 2.0 * z * z, 2.0 * y * z + 2.0 * x * w,\n            2.0 * x * z + 2.0 * y * w, 2.0 * y * z - 2.0 * x * w, 1.0 - 2.0 * x * x - 2.0 * y * y,\n        ];\n    }\n}\n\nclass PointProjector {\n    constructor() {\n        this.offset = [0.0, 0.0, -5];\n        this.fov = 30.0;\n        this.aspect = 1.0;\n        this.viewport = [0, 0, 1, 1];\n    }\n    project(v) {\n        const vcx = (this.viewport[0] + this.viewport[2]) * 0.5;\n        const vcy = (this.viewport[1] + this.viewport[3]) * 0.5;\n        const vw = (this.viewport[2] - this.viewport[0]);\n        const vh = (this.viewport[3] - this.viewport[1]);\n        const p = 1.0 / Math.tan(this.fov * Math.PI / 360.0);\n        const sz = -(v.z + this.offset[2]);\n        const sx = vcx + (v.x + this.offset[0]) / sz * p * vw * 0.5 / this.aspect;\n        const sy = vcy - (v.y + this.offset[1]) / sz * p * vh * 0.5;\n        return [sx, sy];\n    }\n}\n\nclass SVGLineStrip {\n    constructor(doc, vertices, projector) {\n        this.element = doc.createElementNS(SVG_NS, 'path');\n        this.vertices = vertices;\n        this.projector = projector;\n    }\n    /**\n     * Make sure rotation is normalized!\n     */\n    setRotation(rotation) {\n        let pathStr = '';\n        this.vertices.forEach((vertex, iVertex) => {\n            const transformed = vertex.applyQuaternion(rotation);\n            const [sx, sy] = this.projector.project(transformed);\n            const cmd = iVertex === 0 ? 'M' : 'L';\n            pathStr += `${cmd}${sx} ${sy}`;\n        });\n        this.element.setAttributeNS(null, 'd', pathStr);\n        return this;\n    }\n}\n\nclass Vector3 {\n    constructor(x, y, z) {\n        this.x = x !== null && x !== void 0 ? x : 0.0;\n        this.y = y !== null && y !== void 0 ? y : 0.0;\n        this.z = z !== null && z !== void 0 ? z : 0.0;\n    }\n    getComponents() {\n        return [this.x, this.y, this.z];\n    }\n    get lengthSq() {\n        return this.x * this.x + this.y * this.y + this.z * this.z;\n    }\n    get length() {\n        return Math.sqrt(this.lengthSq);\n    }\n    get normalized() {\n        const l = this.length;\n        if (l === 0.0) {\n            return new Vector3();\n        }\n        return new Vector3(this.x / l, this.y / l, this.z / l);\n    }\n    get negated() {\n        return new Vector3(-this.x, -this.y, -this.z);\n    }\n    add(v) {\n        return new Vector3(this.x + v.x, this.y + v.y, this.z + v.z);\n    }\n    sub(v) {\n        return new Vector3(this.x - v.x, this.y - v.y, this.z - v.z);\n    }\n    scale(s) {\n        return new Vector3(this.x * s, this.y * s, this.z * s);\n    }\n    dot(v) {\n        return this.x * v.x + this.y * v.y + this.z * v.z;\n    }\n    cross(v) {\n        return new Vector3(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);\n    }\n    orthoNormalize(tangent) {\n        const normal = this.normalized;\n        tangent = tangent.normalized;\n        let dotNT = normal.dot(tangent);\n        if (dotNT === 1.0) {\n            if (Math.abs(normal.y) > Math.abs(normal.z)) {\n                tangent = new Vector3(0.0, 0.0, 1.0);\n            }\n            else {\n                tangent = new Vector3(0.0, 1.0, 0.0);\n            }\n            dotNT = normal.dot(tangent);\n        }\n        tangent = tangent.sub(normal.scale(dotNT)).normalized;\n        const binormal = tangent.cross(normal);\n        return {\n            normal,\n            tangent,\n            binormal,\n        };\n    }\n    applyQuaternion(q) {\n        const ix = q.w * this.x + q.y * this.z - q.z * this.y;\n        const iy = q.w * this.y + q.z * this.x - q.x * this.z;\n        const iz = q.w * this.z + q.x * this.y - q.y * this.x;\n        const iw = -q.x * this.x - q.y * this.y - q.z * this.z;\n        return new Vector3(ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y, iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z, iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x);\n    }\n}\n\nfunction createArcRotation(axis, front) {\n    const b = front.z > 0.0\n        ? new Quaternion(0.0, 0.0, 0.0, 1.0)\n        : new Quaternion(0.0, 0.0, 1.0, 0.0);\n    if (Math.abs(axis.z) > 0.9999) {\n        return b;\n    }\n    return Quaternion.lookRotation(axis, front);\n}\n\nfunction createArcVerticesArray(thetaStart, thetaLength, segments, cosAxis, sinAxis, radius = 1.0) {\n    const vertices = [];\n    for (let i = 0; i < segments; i++) {\n        const t = thetaStart + thetaLength * i / (segments - 1);\n        const vector = new Vector3();\n        vector[cosAxis] = radius * Math.cos(t);\n        vector[sinAxis] = radius * Math.sin(t);\n        vertices.push(vector);\n    }\n    return vertices;\n}\n\nconst className$2 = ClassName('rotationgizmo');\nconst VEC3_ZERO = new Vector3(0.0, 0.0, 0.0);\nconst VEC3_XP$2 = new Vector3(1.0, 0.0, 0.0);\nconst VEC3_YP$2 = new Vector3(0.0, 1.0, 0.0);\nconst VEC3_ZP$2 = new Vector3(0.0, 0.0, 1.0);\nconst VEC3_ZN = new Vector3(0.0, 0.0, -1);\nconst VEC3_XP70 = new Vector3(0.7, 0.0, 0.0);\nconst VEC3_YP70 = new Vector3(0.0, 0.7, 0.0);\nconst VEC3_ZP70 = new Vector3(0.0, 0.0, 0.7);\nconst VEC3_XN70 = new Vector3(-0.7, 0.0, 0.0);\nconst VEC3_YN70 = new Vector3(0.0, -0.7, 0.0);\nconst VEC3_ZN70 = new Vector3(0.0, 0.0, -0.7);\nconst QUAT_IDENTITY$2 = new Quaternion(0.0, 0.0, 0.0, 1.0);\nfunction createLabel(doc, circleClass, labelText) {\n    const label = doc.createElementNS(SVG_NS, 'g');\n    const circle = doc.createElementNS(SVG_NS, 'circle');\n    circle.classList.add(className$2(circleClass));\n    circle.setAttributeNS(null, 'cx', '0');\n    circle.setAttributeNS(null, 'cy', '0');\n    circle.setAttributeNS(null, 'r', '8');\n    label.appendChild(circle);\n    const text = doc.createElementNS(SVG_NS, 'text');\n    text.classList.add(className$2('labeltext'));\n    text.setAttributeNS(null, 'y', '4');\n    text.setAttributeNS(null, 'text-anchor', 'middle');\n    text.setAttributeNS(null, 'font-size', '10');\n    text.textContent = labelText;\n    label.appendChild(text);\n    return label;\n}\nclass RotationInputGizmoView {\n    get xArcBElement() { return this.xArcBC_.element; }\n    get yArcBElement() { return this.yArcBC_.element; }\n    get zArcBElement() { return this.zArcBC_.element; }\n    get xArcFElement() { return this.xArcFC_.element; }\n    get yArcFElement() { return this.yArcFC_.element; }\n    get zArcFElement() { return this.zArcFC_.element; }\n    get rArcElement() { return this.rArcC_.element; }\n    constructor(doc, config) {\n        this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        this.onModeChange_ = this.onModeChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$2());\n        if (config.pickerLayout === 'popup') {\n            this.element.classList.add(className$2(undefined, 'p'));\n        }\n        const padElem = doc.createElement('div');\n        padElem.classList.add(className$2('p'));\n        config.viewProps.bindTabIndex(padElem);\n        this.element.appendChild(padElem);\n        this.padElement = padElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(className$2('g'));\n        this.padElement.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        this.projector_ = new PointProjector();\n        this.projector_.viewport = [0, 0, 136, 136];\n        const arcArray = createArcVerticesArray(0.0, Math.PI, 33, 'x', 'y');\n        const arcArrayR = createArcVerticesArray(0.0, 2.0 * Math.PI, 65, 'x', 'y', 1.1);\n        // back arc\n        this.xArcB_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.xArcB_.element.classList.add(className$2('arcx'));\n        this.svgElem_.appendChild(this.xArcB_.element);\n        this.yArcB_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.yArcB_.element.classList.add(className$2('arcy'));\n        this.svgElem_.appendChild(this.yArcB_.element);\n        this.zArcB_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.zArcB_.element.classList.add(className$2('arcz'));\n        this.svgElem_.appendChild(this.zArcB_.element);\n        this.xArcBC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.xArcBC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.xArcBC_.element);\n        this.yArcBC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.yArcBC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.yArcBC_.element);\n        this.zArcBC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.zArcBC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.zArcBC_.element);\n        // axes\n        const axesElem = doc.createElementNS(SVG_NS, 'g');\n        svgElem.classList.add(className$2('axes'));\n        this.svgElem_.appendChild(axesElem);\n        this.axesElem_ = axesElem;\n        this.xAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_XP70], this.projector_);\n        this.xAxis_.element.classList.add(className$2('axisx'));\n        this.axesElem_.appendChild(this.xAxis_.element);\n        this.yAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_YP70], this.projector_);\n        this.yAxis_.element.classList.add(className$2('axisy'));\n        this.axesElem_.appendChild(this.yAxis_.element);\n        this.zAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_ZP70], this.projector_);\n        this.zAxis_.element.classList.add(className$2('axisz'));\n        this.axesElem_.appendChild(this.zAxis_.element);\n        this.xnAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_XN70], this.projector_);\n        this.xnAxis_.element.classList.add(className$2('axisn'));\n        this.axesElem_.appendChild(this.xnAxis_.element);\n        this.ynAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_YN70], this.projector_);\n        this.ynAxis_.element.classList.add(className$2('axisn'));\n        this.axesElem_.appendChild(this.ynAxis_.element);\n        this.znAxis_ = new SVGLineStrip(doc, [VEC3_ZERO, VEC3_ZN70], this.projector_);\n        this.znAxis_.element.classList.add(className$2('axisn'));\n        this.axesElem_.appendChild(this.znAxis_.element);\n        // front arc\n        this.xArcF_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.xArcF_.element.classList.add(className$2('arcx'));\n        this.svgElem_.appendChild(this.xArcF_.element);\n        this.yArcF_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.yArcF_.element.classList.add(className$2('arcy'));\n        this.svgElem_.appendChild(this.yArcF_.element);\n        this.zArcF_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.zArcF_.element.classList.add(className$2('arcz'));\n        this.svgElem_.appendChild(this.zArcF_.element);\n        this.xArcFC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.xArcFC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.xArcFC_.element);\n        this.yArcFC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.yArcFC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.yArcFC_.element);\n        this.zArcFC_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.zArcFC_.element.classList.add(className$2('arcc'));\n        this.svgElem_.appendChild(this.zArcFC_.element);\n        // roll arc\n        this.rArc_ = new SVGLineStrip(doc, arcArrayR, this.projector_);\n        this.rArc_.element.classList.add(className$2('arcr'));\n        this.rArc_.setRotation(QUAT_IDENTITY$2);\n        this.svgElem_.appendChild(this.rArc_.element);\n        this.rArcC_ = new SVGLineStrip(doc, arcArrayR, this.projector_);\n        this.rArcC_.element.classList.add(className$2('arcc'));\n        this.rArcC_.setRotation(QUAT_IDENTITY$2);\n        this.svgElem_.appendChild(this.rArcC_.element);\n        // labels\n        const labelsElem = doc.createElementNS(SVG_NS, 'g');\n        svgElem.classList.add(className$2('labels'));\n        this.svgElem_.appendChild(labelsElem);\n        this.labelsElem_ = labelsElem;\n        this.xLabel = createLabel(doc, 'labelcirclex', 'X');\n        this.labelsElem_.appendChild(this.xLabel);\n        this.yLabel = createLabel(doc, 'labelcircley', 'Y');\n        this.labelsElem_.appendChild(this.yLabel);\n        this.zLabel = createLabel(doc, 'labelcirclez', 'Z');\n        this.labelsElem_.appendChild(this.zLabel);\n        this.xnLabel = createLabel(doc, 'labelcirclen', '-X');\n        this.labelsElem_.appendChild(this.xnLabel);\n        this.ynLabel = createLabel(doc, 'labelcirclen', '-Y');\n        this.labelsElem_.appendChild(this.ynLabel);\n        this.znLabel = createLabel(doc, 'labelcirclen', '-Z');\n        this.labelsElem_.appendChild(this.znLabel);\n        // arc hover\n        const onHoverXArc = () => {\n            this.xArcB_.element.classList.add(className$2('arcx_hover'));\n            this.xArcF_.element.classList.add(className$2('arcx_hover'));\n        };\n        const onLeaveXArc = () => {\n            this.xArcB_.element.classList.remove(className$2('arcx_hover'));\n            this.xArcF_.element.classList.remove(className$2('arcx_hover'));\n        };\n        this.xArcBC_.element.addEventListener('mouseenter', onHoverXArc);\n        this.xArcBC_.element.addEventListener('mouseleave', onLeaveXArc);\n        this.xArcFC_.element.addEventListener('mouseenter', onHoverXArc);\n        this.xArcFC_.element.addEventListener('mouseleave', onLeaveXArc);\n        const onHoverYArc = () => {\n            this.yArcB_.element.classList.add(className$2('arcy_hover'));\n            this.yArcF_.element.classList.add(className$2('arcy_hover'));\n        };\n        const onLeaveYArc = () => {\n            this.yArcB_.element.classList.remove(className$2('arcy_hover'));\n            this.yArcF_.element.classList.remove(className$2('arcy_hover'));\n        };\n        this.yArcBC_.element.addEventListener('mouseenter', onHoverYArc);\n        this.yArcBC_.element.addEventListener('mouseleave', onLeaveYArc);\n        this.yArcFC_.element.addEventListener('mouseenter', onHoverYArc);\n        this.yArcFC_.element.addEventListener('mouseleave', onLeaveYArc);\n        const onHoverZArc = () => {\n            this.zArcB_.element.classList.add(className$2('arcz_hover'));\n            this.zArcF_.element.classList.add(className$2('arcz_hover'));\n        };\n        const onLeaveZArc = () => {\n            this.zArcB_.element.classList.remove(className$2('arcz_hover'));\n            this.zArcF_.element.classList.remove(className$2('arcz_hover'));\n        };\n        this.zArcBC_.element.addEventListener('mouseenter', onHoverZArc);\n        this.zArcBC_.element.addEventListener('mouseleave', onLeaveZArc);\n        this.zArcFC_.element.addEventListener('mouseenter', onHoverZArc);\n        this.zArcFC_.element.addEventListener('mouseleave', onLeaveZArc);\n        const onHoverRArc = () => {\n            this.rArc_.element.classList.add(className$2('arcr_hover'));\n        };\n        const onLeaveRArc = () => {\n            this.rArc_.element.classList.remove(className$2('arcr_hover'));\n        };\n        this.rArcC_.element.addEventListener('mouseenter', onHoverRArc);\n        this.rArcC_.element.addEventListener('mouseleave', onLeaveRArc);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        config.mode.emitter.on('change', this.onModeChange_);\n        this.mode_ = config.mode;\n        this.update_();\n    }\n    get allFocusableElements() {\n        return [this.padElement];\n    }\n    update_() {\n        const q = this.value.rawValue.quat.normalized;\n        // rotate axes\n        this.xAxis_.setRotation(q);\n        this.yAxis_.setRotation(q);\n        this.zAxis_.setRotation(q);\n        this.xnAxis_.setRotation(q);\n        this.ynAxis_.setRotation(q);\n        this.znAxis_.setRotation(q);\n        // \"\"\"z-sort\"\"\" axes\n        const xp = VEC3_XP$2.applyQuaternion(q);\n        const yp = VEC3_YP$2.applyQuaternion(q);\n        const zp = VEC3_ZP$2.applyQuaternion(q);\n        const xn = xp.negated;\n        const yn = yp.negated;\n        const zn = zp.negated;\n        [\n            { el: this.xAxis_.element, v: xp },\n            { el: this.yAxis_.element, v: yp },\n            { el: this.zAxis_.element, v: zp },\n            { el: this.xnAxis_.element, v: xn },\n            { el: this.ynAxis_.element, v: yn },\n            { el: this.znAxis_.element, v: zn },\n        ]\n            .map(({ el, v }) => {\n            this.axesElem_.removeChild(el);\n            return { el, v };\n        })\n            .sort((a, b) => a.v.z - b.v.z)\n            .forEach(({ el }) => {\n            this.axesElem_.appendChild(el);\n        });\n        // rotate arcs\n        this.xArcB_.setRotation(createArcRotation(xp, VEC3_ZN));\n        this.yArcB_.setRotation(createArcRotation(yp, VEC3_ZN));\n        this.zArcB_.setRotation(createArcRotation(zp, VEC3_ZN));\n        this.xArcBC_.setRotation(createArcRotation(xp, VEC3_ZN));\n        this.yArcBC_.setRotation(createArcRotation(yp, VEC3_ZN));\n        this.zArcBC_.setRotation(createArcRotation(zp, VEC3_ZN));\n        this.xArcF_.setRotation(createArcRotation(xp, VEC3_ZP$2));\n        this.yArcF_.setRotation(createArcRotation(yp, VEC3_ZP$2));\n        this.zArcF_.setRotation(createArcRotation(zp, VEC3_ZP$2));\n        this.xArcFC_.setRotation(createArcRotation(xp, VEC3_ZP$2));\n        this.yArcFC_.setRotation(createArcRotation(yp, VEC3_ZP$2));\n        this.zArcFC_.setRotation(createArcRotation(zp, VEC3_ZP$2));\n        // rotate labels\n        [\n            { el: this.xLabel, v: VEC3_XP70 },\n            { el: this.yLabel, v: VEC3_YP70 },\n            { el: this.zLabel, v: VEC3_ZP70 },\n            { el: this.xnLabel, v: VEC3_XN70 },\n            { el: this.ynLabel, v: VEC3_YN70 },\n            { el: this.znLabel, v: VEC3_ZN70 },\n        ].forEach(({ el, v }) => {\n            const [x, y] = this.projector_.project(v.applyQuaternion(q));\n            el.setAttributeNS(null, 'transform', `translate( ${x}, ${y} )`);\n        });\n        // \"\"\"z-sort\"\"\" labels\n        [\n            { el: this.xLabel, v: xp },\n            { el: this.yLabel, v: yp },\n            { el: this.zLabel, v: zp },\n            { el: this.xnLabel, v: xn },\n            { el: this.ynLabel, v: yn },\n            { el: this.znLabel, v: zn },\n        ].map(({ el, v }) => {\n            this.labelsElem_.removeChild(el);\n            return { el, v };\n        })\n            .sort((a, b) => a.v.z - b.v.z)\n            .forEach(({ el }) => {\n            this.labelsElem_.appendChild(el);\n        });\n    }\n    onValueChange_() {\n        this.update_();\n    }\n    onFoldableChange_() {\n        this.update_();\n    }\n    onModeChange_() {\n        const mode = this.mode_.rawValue;\n        const x = mode === 'angle-x' ? 'add' : 'remove';\n        const y = mode === 'angle-y' ? 'add' : 'remove';\n        const z = mode === 'angle-z' ? 'add' : 'remove';\n        const r = mode === 'angle-r' ? 'add' : 'remove';\n        this.xArcB_.element.classList[x](className$2('arcx_active'));\n        this.yArcB_.element.classList[y](className$2('arcy_active'));\n        this.zArcB_.element.classList[z](className$2('arcz_active'));\n        this.xArcF_.element.classList[x](className$2('arcx_active'));\n        this.yArcF_.element.classList[y](className$2('arcy_active'));\n        this.zArcF_.element.classList[z](className$2('arcz_active'));\n        this.rArc_.element.classList[r](className$2('arcr_active'));\n    }\n}\n\nfunction saturate(x) {\n    return clamp(x, 0.0, 1.0);\n}\n\n/**\n * hand-picked random polynomial that looks cool\n * clamped in [0.0 - 1.0]\n */\nfunction iikanjiEaseout(x) {\n    if (x <= 0.0) {\n        return 0.0;\n    }\n    if (x >= 1.0) {\n        return 1.0;\n    }\n    const xt = 1.0 - x;\n    const y = xt * (xt * (xt * (xt * (xt * (xt * (xt * (-6) + 7))))));\n    return saturate(1.0 - y);\n}\n\nfunction linearstep(a, b, x) {\n    return saturate((x - a) / (b - a));\n}\n\nconst INV_SQRT2 = 1.0 / Math.sqrt(2.0);\nconst VEC3_XP$1 = new Vector3(1.0, 0.0, 0.0);\nconst VEC3_YP$1 = new Vector3(0.0, 1.0, 0.0);\nconst VEC3_ZP$1 = new Vector3(0.0, 0.0, 1.0);\nconst QUAT_IDENTITY$1 = new Quaternion(0.0, 0.0, 0.0, 1.0);\nconst QUAT_TOP = new Quaternion(INV_SQRT2, 0.0, 0.0, INV_SQRT2);\nconst QUAT_RIGHT = new Quaternion(0.0, -INV_SQRT2, 0.0, INV_SQRT2);\nconst QUAT_BOTTOM = new Quaternion(-INV_SQRT2, 0.0, 0.0, INV_SQRT2);\nconst QUAT_LEFT = new Quaternion(0.0, INV_SQRT2, 0.0, INV_SQRT2);\nconst QUAT_BACK = new Quaternion(0.0, 1.0, 0.0, 0.0);\nclass RotationInputGizmoController {\n    constructor(doc, config) {\n        this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n        this.onPointerDown_ = this.onPointerDown_.bind(this);\n        this.onPointerMove_ = this.onPointerMove_.bind(this);\n        this.onPointerUp_ = this.onPointerUp_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.mode_ = createValue('free');\n        this.view = new RotationInputGizmoView(doc, {\n            value: this.value,\n            mode: this.mode_,\n            viewProps: this.viewProps,\n            pickerLayout: config.pickerLayout,\n        });\n        this.ptHandler_ = new PointerHandler(this.view.padElement);\n        this.ptHandler_.emitter.on('down', this.onPointerDown_);\n        this.ptHandler_.emitter.on('move', this.onPointerMove_);\n        this.ptHandler_.emitter.on('up', this.onPointerUp_);\n        this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n        const ptHandlerXArcB = new PointerHandler(this.view.xArcBElement);\n        ptHandlerXArcB.emitter.on('down', () => this.changeModeIfNotAuto_('angle-x'));\n        ptHandlerXArcB.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerXArcF = new PointerHandler(this.view.xArcFElement);\n        ptHandlerXArcF.emitter.on('down', () => this.changeModeIfNotAuto_('angle-x'));\n        ptHandlerXArcF.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerYArcB = new PointerHandler(this.view.yArcBElement);\n        ptHandlerYArcB.emitter.on('down', () => this.changeModeIfNotAuto_('angle-y'));\n        ptHandlerYArcB.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerYArcF = new PointerHandler(this.view.yArcFElement);\n        ptHandlerYArcF.emitter.on('down', () => this.changeModeIfNotAuto_('angle-y'));\n        ptHandlerYArcF.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerZArcB = new PointerHandler(this.view.zArcBElement);\n        ptHandlerZArcB.emitter.on('down', () => this.changeModeIfNotAuto_('angle-z'));\n        ptHandlerZArcB.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerZArcF = new PointerHandler(this.view.zArcFElement);\n        ptHandlerZArcF.emitter.on('down', () => this.changeModeIfNotAuto_('angle-z'));\n        ptHandlerZArcF.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        const ptHandlerRArc = new PointerHandler(this.view.rArcElement);\n        ptHandlerRArc.emitter.on('down', () => this.changeModeIfNotAuto_('angle-r'));\n        ptHandlerRArc.emitter.on('up', () => this.changeModeIfNotAuto_('free'));\n        [\n            { el: this.view.xLabel, q: QUAT_RIGHT },\n            { el: this.view.yLabel, q: QUAT_TOP },\n            { el: this.view.zLabel, q: QUAT_IDENTITY$1 },\n            { el: this.view.xnLabel, q: QUAT_LEFT },\n            { el: this.view.ynLabel, q: QUAT_BOTTOM },\n            { el: this.view.znLabel, q: QUAT_BACK },\n        ].forEach(({ el, q }) => {\n            const ptHandler = new PointerHandler(el);\n            ptHandler.emitter.on('down', () => this.autoRotate_(q));\n        });\n        this.px_ = null;\n        this.py_ = null;\n        this.angleState_ = null;\n    }\n    handlePointerEvent_(d) {\n        if (!d.point) {\n            return;\n        }\n        const mode = this.mode_.rawValue;\n        const x = d.point.x;\n        const y = d.point.y;\n        if (mode === 'auto') ;\n        else if (mode === 'free') {\n            if (this.px_ != null && this.py_ != null) {\n                const dx = x - this.px_;\n                const dy = y - this.py_;\n                const l = Math.sqrt(dx * dx + dy * dy);\n                if (l === 0.0) {\n                    return;\n                }\n                const axis = new Vector3(dy / l, dx / l, 0.0);\n                const quat = Quaternion.fromAxisAngle(axis, l / 68.0);\n                this.value.rawValue = this.value.rawValue.premultiply(quat);\n            }\n            this.px_ = x;\n            this.py_ = y;\n        }\n        else if (mode === 'angle-r') {\n            const cx = d.bounds.width / 2.0;\n            const cy = d.bounds.height / 2.0;\n            const angle = Math.atan2(y - cy, x - cx);\n            if (this.angleState_ == null) {\n                const axis = new Vector3(0.0, 0.0, 1.0);\n                this.angleState_ = {\n                    initialRotation: this.value.rawValue,\n                    initialAngle: angle,\n                    axis,\n                    reverseAngle: true,\n                };\n            }\n            else {\n                const { initialRotation, initialAngle, axis } = this.angleState_;\n                const angleDiff = -sanitizeAngle(angle - initialAngle);\n                const quat = Quaternion.fromAxisAngle(axis, angleDiff);\n                this.value.rawValue = initialRotation.premultiply(quat);\n            }\n        }\n        else {\n            const cx = d.bounds.width / 2.0;\n            const cy = d.bounds.height / 2.0;\n            const angle = Math.atan2(y - cy, x - cx);\n            if (this.angleState_ == null) {\n                const axis = mode === 'angle-x' ? VEC3_XP$1 :\n                    mode === 'angle-y' ? VEC3_YP$1 :\n                        VEC3_ZP$1;\n                const reverseAngle = axis.applyQuaternion(this.value.rawValue.quat).z > 0.0;\n                this.angleState_ = {\n                    initialRotation: this.value.rawValue,\n                    initialAngle: angle,\n                    axis,\n                    reverseAngle,\n                };\n            }\n            else {\n                const { initialRotation, initialAngle, axis, reverseAngle } = this.angleState_;\n                let angleDiff = sanitizeAngle(angle - initialAngle);\n                angleDiff = reverseAngle ? -angleDiff : angleDiff;\n                const quat = Quaternion.fromAxisAngle(axis, angleDiff);\n                this.value.rawValue = initialRotation.multiply(quat);\n            }\n        }\n    }\n    onPointerDown_(ev) {\n        this.handlePointerEvent_(ev.data);\n    }\n    onPointerMove_(ev) {\n        this.handlePointerEvent_(ev.data);\n    }\n    onPointerUp_() {\n        this.px_ = null;\n        this.py_ = null;\n        this.angleState_ = null;\n    }\n    onPadKeyDown_(ev) {\n        if (isArrowKey(ev.key)) {\n            ev.preventDefault();\n        }\n        const x = getStepForKey(1.0, getHorizontalStepKeys(ev));\n        const y = getStepForKey(1.0, getVerticalStepKeys(ev));\n        if (x !== 0 || y !== 0) {\n            const axis = new Vector3(-y, x, 0.0);\n            const quat = Quaternion.fromAxisAngle(axis, Math.PI / 16.0);\n            this.value.rawValue = this.value.rawValue.premultiply(quat);\n        }\n    }\n    changeModeIfNotAuto_(mode) {\n        if (this.mode_.rawValue !== 'auto') {\n            this.mode_.rawValue = mode;\n        }\n    }\n    autoRotate_(to) {\n        this.mode_.rawValue = 'auto';\n        const from = this.value.rawValue;\n        const beginTime = Date.now();\n        const update = () => {\n            const now = Date.now();\n            const t = iikanjiEaseout(linearstep(0.0, 300.0, now - beginTime));\n            this.value.rawValue = from.slerp(to, t);\n            if (t === 1.0) {\n                this.mode_.rawValue = 'free';\n                return;\n            }\n            requestAnimationFrame(update);\n        };\n        requestAnimationFrame(update);\n    }\n}\n\nconst className$1 = ClassName('rotationswatch');\nconst VEC3_XP = new Vector3(1.0, 0.0, 0.0);\nconst VEC3_YP = new Vector3(0.0, 1.0, 0.0);\nconst VEC3_ZP = new Vector3(0.0, 0.0, 1.0);\nconst QUAT_IDENTITY = new Quaternion(0.0, 0.0, 0.0, 1.0);\nclass RotationInputSwatchView {\n    constructor(doc, config) {\n        this.onValueChange_ = this.onValueChange_.bind(this);\n        config.value.emitter.on('change', this.onValueChange_);\n        this.value = config.value;\n        this.element = doc.createElement('div');\n        this.element.classList.add(className$1());\n        config.viewProps.bindClassModifiers(this.element);\n        const buttonElem = doc.createElement('button');\n        buttonElem.classList.add(className$1('b'));\n        config.viewProps.bindDisabled(buttonElem);\n        this.element.appendChild(buttonElem);\n        this.buttonElement = buttonElem;\n        const svgElem = doc.createElementNS(SVG_NS, 'svg');\n        svgElem.classList.add(className$1('g'));\n        buttonElem.appendChild(svgElem);\n        this.svgElem_ = svgElem;\n        this.projector_ = new PointProjector();\n        this.projector_.viewport = [0, 0, 20, 20];\n        const arcArray = createArcVerticesArray(0.0, Math.PI, 33, 'x', 'y');\n        const arcArrayR = createArcVerticesArray(0.0, 2.0 * Math.PI, 65, 'x', 'y');\n        // arc\n        this.rArc_ = new SVGLineStrip(doc, arcArrayR, this.projector_);\n        this.rArc_.element.classList.add(className$1('arcr'));\n        svgElem.appendChild(this.rArc_.element);\n        this.rArc_.setRotation(QUAT_IDENTITY);\n        this.xArc_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.xArc_.element.classList.add(className$1('arc'));\n        svgElem.appendChild(this.xArc_.element);\n        this.yArc_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.yArc_.element.classList.add(className$1('arc'));\n        svgElem.appendChild(this.yArc_.element);\n        this.zArc_ = new SVGLineStrip(doc, arcArray, this.projector_);\n        this.zArc_.element.classList.add(className$1('arc'));\n        svgElem.appendChild(this.zArc_.element);\n        this.update_();\n    }\n    update_() {\n        const q = this.value.rawValue.quat.normalized;\n        // rotate axes\n        const xp = VEC3_XP.applyQuaternion(q);\n        const yp = VEC3_YP.applyQuaternion(q);\n        const zp = VEC3_ZP.applyQuaternion(q);\n        this.xArc_.setRotation(createArcRotation(xp, VEC3_ZP));\n        this.yArc_.setRotation(createArcRotation(yp, VEC3_ZP));\n        this.zArc_.setRotation(createArcRotation(zp, VEC3_ZP));\n    }\n    onValueChange_() {\n        this.update_();\n    }\n}\n\nclass RotationInputSwatchController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.view = new RotationInputSwatchView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n    }\n}\n\nconst className = ClassName('rotation');\nclass RotationInputView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.foldable.bindExpandedClass(this.element, className(undefined, 'expanded'));\n        bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className(undefined, 'cpl')));\n        if (config.rotationMode === 'quaternion') {\n            this.element.classList.add(className('quat'));\n        }\n        const headElem = doc.createElement('div');\n        headElem.classList.add(className('h'));\n        this.element.appendChild(headElem);\n        const swatchElem = doc.createElement('div');\n        swatchElem.classList.add(className('s'));\n        headElem.appendChild(swatchElem);\n        this.swatchElement = swatchElem;\n        const textElem = doc.createElement('div');\n        textElem.classList.add(className('t'));\n        headElem.appendChild(textElem);\n        this.textElement = textElem;\n        if (config.pickerLayout === 'inline') {\n            const pickerElem = doc.createElement('div');\n            pickerElem.classList.add(className('g'));\n            this.element.appendChild(pickerElem);\n            this.pickerElement = pickerElem;\n        }\n        else {\n            this.pickerElement = null;\n        }\n    }\n}\n\nclass RotationInputController {\n    constructor(doc, config) {\n        this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n        this.onButtonClick_ = this.onButtonClick_.bind(this);\n        this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n        this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.foldable_ = Foldable.create(config.expanded);\n        this.swatchC_ = new RotationInputSwatchController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        const buttonElem = this.swatchC_.view.buttonElement;\n        buttonElem.addEventListener('blur', this.onButtonBlur_);\n        buttonElem.addEventListener('click', this.onButtonClick_);\n        this.textC_ = new PointNdTextController(doc, {\n            assembly: config.assembly, // TODO: resolve type puzzle\n            axes: config.axes,\n            parser: config.parser,\n            value: this.value,\n            viewProps: this.viewProps,\n        });\n        this.view = new RotationInputView(doc, {\n            rotationMode: config.rotationMode,\n            foldable: this.foldable_,\n            pickerLayout: config.pickerLayout,\n        });\n        this.view.swatchElement.appendChild(this.swatchC_.view.element);\n        this.view.textElement.appendChild(this.textC_.view.element);\n        this.popC_ =\n            config.pickerLayout === 'popup'\n                ? new PopupController(doc, {\n                    viewProps: this.viewProps,\n                })\n                : null;\n        const gizmoC = new RotationInputGizmoController(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n            pickerLayout: config.pickerLayout,\n        });\n        gizmoC.view.allFocusableElements.forEach((elem) => {\n            elem.addEventListener('blur', this.onPopupChildBlur_);\n            elem.addEventListener('keydown', this.onPopupChildKeydown_);\n        });\n        this.gizmoC_ = gizmoC;\n        if (this.popC_) {\n            this.view.element.appendChild(this.popC_.view.element);\n            this.popC_.view.element.appendChild(gizmoC.view.element);\n            connectValues({\n                primary: this.foldable_.value('expanded'),\n                secondary: this.popC_.shows,\n                forward: (p) => p,\n                backward: (_, s) => s,\n            });\n        }\n        else if (this.view.pickerElement) {\n            this.view.pickerElement.appendChild(this.gizmoC_.view.element);\n            bindFoldable(this.foldable_, this.view.pickerElement);\n        }\n    }\n    onButtonBlur_(e) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.view.element;\n        const nextTarget = forceCast(e.relatedTarget);\n        if (!nextTarget || !elem.contains(nextTarget)) {\n            this.popC_.shows.rawValue = false;\n        }\n    }\n    onButtonClick_() {\n        this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n        if (this.foldable_.get('expanded')) {\n            this.gizmoC_.view.allFocusableElements[0].focus();\n        }\n    }\n    onPopupChildBlur_(ev) {\n        if (!this.popC_) {\n            return;\n        }\n        const elem = this.popC_.view.element;\n        const nextTarget = findNextTarget(ev);\n        if (nextTarget && elem.contains(nextTarget)) {\n            // Next target is in the picker\n            return;\n        }\n        if (nextTarget &&\n            nextTarget === this.swatchC_.view.buttonElement &&\n            !supportsTouch(elem.ownerDocument)) {\n            // Next target is the trigger button\n            return;\n        }\n        this.popC_.shows.rawValue = false;\n    }\n    onPopupChildKeydown_(ev) {\n        if (this.popC_) {\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        else if (this.view.pickerElement) {\n            if (ev.key === 'Escape') {\n                this.swatchC_.view.buttonElement.focus();\n            }\n        }\n    }\n}\n\nfunction createAxisEuler(digits, constraint) {\n    const step = Math.pow(0.1, digits);\n    return {\n        baseStep: step,\n        constraint: constraint,\n        textProps: ValueMap.fromObject({\n            formatter: createNumberFormatter(digits),\n            keyScale: step,\n            pointerScale: step,\n        }),\n    };\n}\n\nfunction createDimensionConstraint(params) {\n    if (!params) {\n        return undefined;\n    }\n    const constraints = [];\n    if (!isEmpty(params.step)) {\n        constraints.push(new StepConstraint(params.step));\n    }\n    if (!isEmpty(params.max) || !isEmpty(params.min)) {\n        constraints.push(new RangeConstraint({\n            max: params.max,\n            min: params.min,\n        }));\n    }\n    return new CompositeConstraint(constraints);\n}\n\nfunction createEulerAssembly(order, unit) {\n    return {\n        toComponents: (r) => r.getComponents(),\n        fromComponents: (c) => new Euler(c[0], c[1], c[2], order, unit),\n    };\n}\n\nfunction parseEuler(exValue, order, unit) {\n    if (typeof (exValue === null || exValue === void 0 ? void 0 : exValue.x) === 'number' &&\n        typeof (exValue === null || exValue === void 0 ? void 0 : exValue.y) === 'number' &&\n        typeof (exValue === null || exValue === void 0 ? void 0 : exValue.z) === 'number') {\n        return new Euler(exValue.x, exValue.y, exValue.z, order, unit);\n    }\n    else {\n        return new Euler(0.0, 0.0, 0.0, order, unit);\n    }\n}\n\nfunction parseEulerOrder(value) {\n    switch (value) {\n        case 'XYZ':\n        case 'XZY':\n        case 'YXZ':\n        case 'YZX':\n        case 'ZXY':\n        case 'ZYX':\n            return value;\n        default:\n            return undefined;\n    }\n}\n\nfunction parseEulerUnit(value) {\n    switch (value) {\n        case 'rad':\n        case 'deg':\n        case 'turn':\n            return value;\n        default:\n            return undefined;\n    }\n}\n\nconst RotationInputPluginEuler = createPlugin({\n    id: 'rotation',\n    type: 'input',\n    accept(exValue, params) {\n        var _a, _b;\n        // Parse parameters object\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('rotation'),\n            label: p.optional.string,\n            picker: p.optional.custom(parsePickerLayout),\n            expanded: p.optional.boolean,\n            rotationMode: p.required.constant('euler'),\n            x: p.optional.custom(parsePointDimensionParams),\n            y: p.optional.custom(parsePointDimensionParams),\n            z: p.optional.custom(parsePointDimensionParams),\n            order: p.optional.custom(parseEulerOrder),\n            unit: p.optional.custom(parseEulerUnit),\n        }));\n        return result ? {\n            initialValue: parseEuler(exValue, (_a = result.order) !== null && _a !== void 0 ? _a : 'XYZ', (_b = result.unit) !== null && _b !== void 0 ? _b : 'rad'),\n            params: result,\n        } : null;\n    },\n    binding: {\n        reader({ params }) {\n            return (exValue) => {\n                var _a, _b;\n                return parseEuler(exValue, (_a = params.order) !== null && _a !== void 0 ? _a : 'XYZ', (_b = params.unit) !== null && _b !== void 0 ? _b : 'rad');\n            };\n        },\n        constraint({ params }) {\n            var _a, _b;\n            return new PointNdConstraint({\n                assembly: createEulerAssembly((_a = params.order) !== null && _a !== void 0 ? _a : 'XYZ', (_b = params.unit) !== null && _b !== void 0 ? _b : 'rad'),\n                components: [\n                    createDimensionConstraint('x' in params ? params.x : undefined),\n                    createDimensionConstraint('y' in params ? params.y : undefined),\n                    createDimensionConstraint('z' in params ? params.z : undefined),\n                ]\n            });\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                target.writeProperty('x', inValue.x);\n                target.writeProperty('y', inValue.y);\n                target.writeProperty('z', inValue.z);\n            };\n        },\n    },\n    controller({ document, value, constraint, params, viewProps }) {\n        var _a, _b;\n        if (!(constraint instanceof PointNdConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const expanded = 'expanded' in params ? params.expanded : undefined;\n        const picker = 'picker' in params ? params.picker : undefined;\n        const unit = (_a = params.unit) !== null && _a !== void 0 ? _a : 'rad';\n        const digits = {\n            rad: 2,\n            deg: 0,\n            turn: 2,\n        }[unit];\n        return new RotationInputController(document, {\n            axes: [\n                createAxisEuler(digits, constraint.components[0]),\n                createAxisEuler(digits, constraint.components[1]),\n                createAxisEuler(digits, constraint.components[2]),\n            ],\n            assembly: createEulerAssembly((_b = params.order) !== null && _b !== void 0 ? _b : 'XYZ', unit),\n            rotationMode: 'euler',\n            expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n            parser: parseNumber,\n            pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n            value,\n            viewProps: viewProps,\n        }); // TODO: resolve type puzzle\n    },\n});\n\nconst QuaternionAssembly = {\n    toComponents: (r) => [\n        r.x,\n        r.y,\n        r.z,\n        r.w,\n    ],\n    fromComponents: (c) => new Quaternion(c[0], c[1], c[2], c[3]),\n};\n\nfunction createAxisQuaternion(constraint) {\n    return {\n        baseStep: 0.01,\n        constraint: constraint,\n        textProps: ValueMap.fromObject({\n            formatter: (value) => {\n                if (Math.abs(value) < 0.995) {\n                    return value.toFixed(2).replace('0.', '.');\n                }\n                else {\n                    return value.toFixed(1);\n                }\n            },\n            keyScale: 0.01,\n            pointerScale: 0.01,\n        }),\n    };\n}\n\nfunction parseQuaternion(exValue) {\n    if (typeof (exValue === null || exValue === void 0 ? void 0 : exValue.x) === 'number' &&\n        typeof (exValue === null || exValue === void 0 ? void 0 : exValue.y) === 'number' &&\n        typeof (exValue === null || exValue === void 0 ? void 0 : exValue.z) === 'number' &&\n        typeof (exValue === null || exValue === void 0 ? void 0 : exValue.w) === 'number') {\n        return new Quaternion(exValue.x, exValue.y, exValue.z, exValue.w);\n    }\n    else {\n        return new Quaternion(0.0, 0.0, 0.0, 1.0);\n    }\n}\n\nconst RotationInputPluginQuaternion = createPlugin({\n    id: 'rotation',\n    type: 'input',\n    accept(exValue, params) {\n        // Parse parameters object\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('rotation'),\n            label: p.optional.string,\n            picker: p.optional.custom(parsePickerLayout),\n            expanded: p.optional.boolean,\n            rotationMode: p.optional.constant('quaternion'),\n            x: p.optional.custom(parsePointDimensionParams),\n            y: p.optional.custom(parsePointDimensionParams),\n            z: p.optional.custom(parsePointDimensionParams),\n            w: p.optional.custom(parsePointDimensionParams),\n        }));\n        return result ? {\n            initialValue: parseQuaternion(exValue),\n            params: result,\n        } : null;\n    },\n    binding: {\n        reader(_args) {\n            return (exValue) => {\n                return parseQuaternion(exValue);\n            };\n        },\n        constraint({ params }) {\n            return new PointNdConstraint({\n                assembly: QuaternionAssembly,\n                components: [\n                    createDimensionConstraint('x' in params ? params.x : undefined),\n                    createDimensionConstraint('y' in params ? params.y : undefined),\n                    createDimensionConstraint('z' in params ? params.z : undefined),\n                    createDimensionConstraint('w' in params ? params.w : undefined),\n                ]\n            });\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                target.writeProperty('x', inValue.x);\n                target.writeProperty('y', inValue.y);\n                target.writeProperty('z', inValue.z);\n                target.writeProperty('w', inValue.w);\n            };\n        },\n    },\n    controller({ document, value, constraint, params, viewProps }) {\n        if (!(constraint instanceof PointNdConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const expanded = 'expanded' in params ? params.expanded : undefined;\n        const picker = 'picker' in params ? params.picker : undefined;\n        return new RotationInputController(document, {\n            axes: [\n                createAxisQuaternion(constraint.components[0]),\n                createAxisQuaternion(constraint.components[1]),\n                createAxisQuaternion(constraint.components[2]),\n                createAxisQuaternion(constraint.components[3]),\n            ],\n            assembly: QuaternionAssembly,\n            rotationMode: 'quaternion',\n            expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n            parser: parseNumber,\n            pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n            value,\n            viewProps: viewProps,\n        }); // TODO;\n    },\n});\n\nconst id = 'rotation';\nconst css = '.tp-rotationgizmov_p,.tp-rotationswatchv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rotationswatchv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rotationswatchv_b:hover{background-color:var(--btn-bg-h)}.tp-rotationswatchv_b:focus{background-color:var(--btn-bg-f)}.tp-rotationswatchv_b:active{background-color:var(--btn-bg-a)}.tp-rotationswatchv_b:disabled{opacity:.5}.tp-rotationgizmov_p{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-rotationgizmov_p:hover{background-color:var(--in-bg-h)}.tp-rotationgizmov_p:focus{background-color:var(--in-bg-f)}.tp-rotationgizmov_p:active{background-color:var(--in-bg-a)}.tp-rotationgizmov_p:disabled{opacity:.5}.tp-rotationv{position:relative}.tp-rotationv_quat .tp-txtv_i{padding-left:0}.tp-rotationv_root{background-color:var(--mo-bg);width:100%;height:calc(2*var(--cnt-usz))}.tp-rotationv_h{display:flex}.tp-rotationv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz);margin-right:4px}.tp-rotationv_g{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-rotationv.tp-rotationv-expanded .tp-rotationv_g{margin-top:var(--cnt-usp);opacity:1}.tp-rotationv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-rotationswatchv path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationswatchv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-rotationswatchv_arc{fill:none;stroke:var(--btn-bg);stroke-width:1px}.tp-rotationswatchv_arcr{fill:var(--btn-fg);stroke:var(--btn-bg);stroke-width:1px}.tp-rotationgizmov{padding-left:calc(var(--cnt-usz) + 4px)}.tp-rotationgizmov path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationgizmov_p{cursor:move;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-rotationgizmov_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-rotationgizmov_axisx{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_axisy{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_axisz{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_axisn{stroke:var(--in-fg);stroke-width:2px}.tp-rotationgizmov_arcx{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_hover{stroke:#eb103f}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_active{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_arcy{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_hover{stroke:#4eeb10}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_active{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_arcz{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_hover{stroke:#1068eb}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_active{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_arcr{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_hover{stroke:#ebd510}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_active{stroke:#ebd510;stroke-width:2px}.tp-rotationgizmov_arcc{fill:none;stroke:rgba(0,0,0,0);stroke-width:5px;pointer-events:auto}.tp-rotationgizmov_labelcirclex{fill:#eb103f;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclex:hover{opacity:.7}.tp-rotationgizmov_labelcircley{fill:#4eeb10;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcircley:hover{opacity:.7}.tp-rotationgizmov_labelcirclez{fill:#1068eb;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclez:hover{opacity:.7}.tp-rotationgizmov_labelcirclen{fill:var(--in-fg);cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclen:hover{opacity:.7}.tp-rotationgizmov_labeltext{fill:var(--btn-fg);stroke:var(--btn-fg);stroke-width:1px}.tp-rotationgizmov_p:focus .tp-rotationgizmov_m{background-color:var(--in-fg);border-width:0}';\nconst plugins = [\n    RotationInputPluginEuler,\n    RotationInputPluginQuaternion,\n];\n\nexport { RotationInputPluginEuler, RotationInputPluginQuaternion, css, id, plugins };\n","<script context=\"module\"></script>\n\n<script>\n\timport GenericSlider from '../internal/GenericSlider.svelte'\n\timport {} from 'svelte'\n\texport let value\n\texport let wide = void 0\n\tlet ref\n\tfunction updateWide(wide2) {\n\t\tconst inputField = ref?.element.querySelector('div.tp-sldtxtv_t')\n\t\tif (wide2) {\n\t\t\tinputField?.style.setProperty('display', 'none')\n\t\t} else {\n\t\t\tinputField?.style.removeProperty('display')\n\t\t}\n\t}\n\t$: ref && wide !== void 0 && updateWide(wide)\n</script>\n\n<GenericSlider bind:value bind:ref on:change {...$$restProps} />\n","import { ClassName, PointNdTextController, createPlugin, TpError, ValueMap, createNumberTextPropsObject, parseNumber, createRangeConstraint, createStepConstraint, CompositeConstraint, parseRecord, createNumberTextInputParamsParser } from '@tweakpane/core';\n\nclass StepperConstraint {\n    constructor(step, edge) {\n        this.step = step;\n        this.edge = edge;\n    }\n    constrain(value) {\n        var _a, _b;\n        return (_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value)) !== null && _b !== void 0 ? _b : value;\n    }\n}\n\nclass Stepper {\n    constructor(val) {\n        this.val = val;\n    }\n    static isObject(obj) {\n        if (typeof obj !== \"object\" || obj === null) {\n            return false;\n        }\n        const val = obj.val;\n        if (typeof val !== \"number\") {\n            return false;\n        }\n        return true;\n    }\n    static equals(v1, v2) {\n        return v1.val === v2.val;\n    }\n    toObject() {\n        return {\n            val: this.val,\n        };\n    }\n}\nconst StepperAssembly = {\n    fromComponents: (comps) => comps[0],\n    toComponents: (p) => [p],\n};\n\nconst className$1 = ClassName(\"step\");\nclass StepperTextView {\n    constructor(doc, config) {\n        this.buttonsView_ = config.buttonsView;\n        this.textView_ = config.textView;\n        this.element = doc.createElement(\"div\");\n        this.element.classList.add(className$1());\n        const buttonsElem = doc.createElement(\"div\");\n        buttonsElem.classList.add(className$1(\"s\"));\n        buttonsElem.appendChild(this.buttonsView_.element);\n        this.element.appendChild(buttonsElem);\n        const textElem = doc.createElement(\"div\");\n        textElem.classList.add(className$1(\"t\"));\n        textElem.appendChild(this.textView_.element);\n        this.element.appendChild(textElem);\n    }\n}\n\nconst className = ClassName(\"step\");\nclass StepperButtonsView {\n    constructor(doc, config) {\n        this.element = doc.createElement(\"div\");\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        const btnMinus = doc.createElement(\"button\");\n        btnMinus.textContent = \"-\";\n        btnMinus.classList.add(className(\"b\"));\n        config.viewProps.bindDisabled(btnMinus);\n        this.element.appendChild(btnMinus);\n        this.btnMinus = btnMinus;\n        const btnPlus = doc.createElement(\"button\");\n        btnPlus.textContent = \"+\";\n        btnPlus.classList.add(className(\"b\"));\n        config.viewProps.bindDisabled(btnPlus);\n        this.element.appendChild(btnPlus);\n        this.btnPlus = btnPlus;\n    }\n}\n\nclass StepperButtonsController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.step = config.constraint ? config.constraint.step : 1;\n        this.view = new StepperButtonsView(doc, {\n            value: this.value,\n            viewProps: config.viewProps,\n        });\n        this.view.btnMinus.addEventListener(\"click\", () => {\n            var _a;\n            const v = (_a = this.value.rawValue) !== null && _a !== void 0 ? _a : 0;\n            this.value.setRawValue(v - this.step, {\n                forceEmit: true,\n                last: true,\n            });\n        });\n        this.view.btnPlus.addEventListener(\"click\", () => {\n            var _a;\n            const v = (_a = this.value.rawValue) !== null && _a !== void 0 ? _a : 0;\n            this.value.setRawValue(v + this.step, {\n                forceEmit: true,\n                last: true,\n            });\n        });\n    }\n}\n\nclass StepperTextController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.sc_ = new StepperButtonsController(doc, config);\n        const axis = {\n            constraint: config.constraint.edge,\n            textProps: config.textProps,\n        };\n        this.tc_ = new PointNdTextController(doc, {\n            assembly: StepperAssembly,\n            axes: [axis],\n            parser: config.parser,\n            value: this.value,\n            viewProps: config.viewProps,\n        });\n        this.view = new StepperTextView(doc, {\n            buttonsView: this.sc_.view,\n            textView: this.tc_.view,\n        });\n    }\n    get textController() {\n        return this.tc_;\n    }\n}\n\n// NOTE: JSDoc comments of `InputBindingPlugin` can be useful to know details about each property\n// `InputBindingPlugin<In, Ex, P>` means...\n// - The plugin receives the bound value as `Ex`,\n// - converts `Ex` into `In` and holds it\n// - P is the type of the parsed parameters\nconst StepperInputPlugin = createPlugin({\n    id: \"input-stepper\",\n    type: \"input\",\n    accept: (exValue, params) => {\n        if (typeof exValue !== \"number\") {\n            return null;\n        }\n        const result = parseRecord(params, (p) => (Object.assign(Object.assign({}, createNumberTextInputParamsParser(p)), { \n            // `view` option may be useful to provide a custom control for primitive values\n            view: p.required.constant(\"stepper\") })));\n        // Return a typed value and params to accept the user input\n        return result\n            ? {\n                initialValue: exValue,\n                params: result,\n            }\n            : null;\n    },\n    binding: {\n        //reader: (_args) => stepperFromUnknown,\n        //writer: (_args) => writeStepper,\n        reader(_args) {\n            return (exValue) => {\n                // Convert an external unknown value into the internal value\n                return typeof exValue === \"number\" ? exValue : 0;\n            };\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                // Use `target.write()` to write the primitive value to the target,\n                // or `target.writeProperty()` to write a property of the target\n                target.write(inValue);\n            };\n        },\n        constraint(args) {\n            const constraints = [];\n            const cr = createRangeConstraint(args.params);\n            if (cr) {\n                constraints.push(cr);\n            }\n            const cs = createStepConstraint(args.params);\n            if (cs) {\n                constraints.push(cs);\n            }\n            return new StepperConstraint(args.params.step ? args.params.step : 1, new CompositeConstraint(constraints));\n        },\n    },\n    controller(args) {\n        const v = args.value;\n        const c = args.constraint;\n        if (!(c instanceof StepperConstraint)) {\n            throw TpError.shouldNeverHappen();\n        }\n        const textProps = ValueMap.fromObject(createNumberTextPropsObject(args.params, v.rawValue));\n        return new StepperTextController(args.document, {\n            constraint: c,\n            parser: parseNumber,\n            textProps: textProps,\n            value: v,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst id = \"inputs\";\nconst css = \".tp-stepv,.tp-stepv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-stepv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-stepv_b:hover{background-color:var(--btn-bg-h)}.tp-stepv_b:focus{background-color:var(--btn-bg-f)}.tp-stepv_b:active{background-color:var(--btn-bg-a)}.tp-stepv_b:disabled{opacity:.5}.tp-stepv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-stepv:hover{background-color:var(--in-bg-h)}.tp-stepv:focus{background-color:var(--in-bg-f)}.tp-stepv:active{background-color:var(--in-bg-a)}.tp-stepv:disabled{opacity:.5}.tp-stepv{display:flex;gap:var(--cnt-hp);background:none}.tp-stepv:hover,.tp-stepv:active{background:none}.tp-stepv_t{flex:1}.tp-stepv.tp-v-disabled{opacity:.5}.tp-stepv_b{position:relative;width:var(--cnt-usz)}\";\nconst plugins = [StepperInputPlugin];\n\nexport { Stepper, StepperAssembly, StepperButtonsController, StepperButtonsView, StepperTextController, StepperTextView, css, id, plugins };\n","<script context=\"module\"></script>\n\n<script>\n\timport GenericInput from '../internal/GenericInput.svelte'\n\timport { onDestroy } from 'svelte'\n\texport let value\n\texport let live = true\n\tconst options = { view: 'text' }\n\tlet ref\n\tonDestroy(() => {\n\t\tupdateListeners(live ?? true, true)\n\t})\n\tfunction onInput(event) {\n\t\tevent.target?.dispatchEvent(new Event('change'))\n\t}\n\tfunction updateListeners(live2, destroy = false) {\n\t\tconst input = ref?.controller.valueController.view.element.querySelector('input')\n\t\tinput?.removeEventListener('input', onInput)\n\t\t!destroy && live2 && input?.addEventListener('input', onInput)\n\t}\n\t$: ref && live !== void 0 && updateListeners(live)\n</script>\n\n<GenericInput bind:value bind:ref on:change {options} {...$$restProps} />\n","import { ClassName, forceCast, createPlugin, parseRecord } from '@tweakpane/core';\n\nconst className = ClassName('txtr');\nclass TextAreaView {\n    constructor(doc, config) {\n        this.onChange_ = this.onChange_.bind(this);\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        //this.onChange_ = this.onChange_.bind(this);\n        const inputElem = doc.createElement('textarea');\n        inputElem.rows = config.rows;\n        inputElem.cols = 22;\n        inputElem.placeholder = config.placeholder;\n        inputElem.classList.add(className('i'));\n        config.viewProps.bindDisabled(inputElem);\n        this.element.appendChild(inputElem);\n        this.inputElement = inputElem;\n        config.value.emitter.on('change', this.onChange_);\n        this.value_ = config.value;\n        this.refresh();\n    }\n    refresh() {\n        this.inputElement.value = this.value_.rawValue;\n    }\n    onChange_() {\n        this.refresh();\n    }\n}\n\n/**\n * @hidden\n */\nclass TextAreaController {\n    constructor(doc, config) {\n        this.onInputChange_ = this.onInputChange_.bind(this);\n        this.value = config.value;\n        this.viewProps = config.viewProps;\n        this.rows = config.rows;\n        this.placeholder = config.placeholder;\n        // console.log( this.rows )\n        this.view = new TextAreaView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n            rows: this.rows,\n            placeholder: this.placeholder,\n        });\n        this.view.inputElement.addEventListener('keyup', this.onInputChange_);\n    }\n    onInputChange_(e) {\n        //console.log( e.key )\n        //if( e.key === 'Enter' ){\n        const inputElem = forceCast(e.currentTarget);\n        const value = inputElem.value;\n        this.value.rawValue = value;\n        this.view.refresh();\n        //}\n    }\n}\n\n// NOTE: You can see JSDoc comments of `InputBindingPlugin` for details about each property\n//\n// `InputBindingPlugin<In, Ex, P>` means...\n// - The plugin receives the bound value as `Ex`,\n// - converts `Ex` into `In` and holds it\n// - P is the type of the parsed parameters\n//\nconst TweakpaneTextareaPlugin = createPlugin({\n    id: 'input-template',\n    type: 'input',\n    accept(exValue, params) {\n        if (typeof exValue !== 'string') {\n            // Return null to deny the user input\n            return null;\n        }\n        // Parse parameters object\n        // console.log(params)\n        const result = parseRecord(params, (p) => ({\n            // `view` option may be useful to provide a custom control for primitive values\n            view: p.required.constant('textarea'),\n            rows: p.optional.number,\n            placeholder: p.optional.string,\n        }));\n        if (!result) {\n            return null;\n        }\n        // Return a typed value and params to accept the user input\n        return {\n            initialValue: exValue,\n            params: result,\n        };\n    },\n    binding: {\n        reader(_args) {\n            return (exValue) => {\n                // Convert an external unknown value into the internal value\n                return typeof exValue === 'string' ? exValue : '';\n            };\n        },\n        writer(_args) {\n            return (target, inValue) => {\n                // Use `target.write()` to write the primitive value to the target,\n                // or `target.writeProperty()` to write a property of the target\n                target.write(inValue);\n            };\n        },\n    },\n    controller(args) {\n        var _a, _b;\n        // Create a controller for the plugin\n        return new TextAreaController(args.document, {\n            value: args.value,\n            rows: (_a = args.params.rows) !== null && _a !== void 0 ? _a : 3,\n            placeholder: (_b = args.params.placeholder) !== null && _b !== void 0 ? _b : 'Enter text here',\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst id = 'textarea';\nconst css = '.tp-txtrv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-txtrv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtrv:hover{background-color:var(--in-bg-h)}.tp-txtrv:focus{background-color:var(--in-bg-f)}.tp-txtrv:active{background-color:var(--in-bg-a)}.tp-txtrv:disabled{opacity:.5}.tp-txtrv{display:block;height:auto;padding-bottom:0;overflow:hidden;position:relative}.tp-txtrv.tp-v-disabled{opacity:.5}.tp-txtrv .tp-txtrv_i{font-family:var(--font-family);background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-size:11px;padding:4px;line-height:16px;min-width:0;width:100%;border:none;height:100%;resize:none;margin-bottom:-8px}.tp-txtrv .tp-txtrv_i:focus{outline:none}';\n// Export your plugin(s) as constant `plugins`\nconst plugins = [TweakpaneTextareaPlugin];\n\nexport { css, id, plugins };\n","<script>\n\timport ClsPad from '../internal/ClsPad.svelte'\n\timport InternalPaneInline from '../internal/InternalPaneInline.svelte'\n\timport { getElementIndex, isRootPane, updateCollapsibility } from '../utils.js'\n\timport { BROWSER } from 'esm-env'\n\timport { getContext, onDestroy, onMount, setContext } from 'svelte'\n\timport { writable } from 'svelte/store'\n\texport let title = 'Folder'\n\texport let disabled = false\n\texport let expanded = true\n\texport let userExpandable = true\n\texport let theme = void 0\n\tconst parentStore = getContext('parentStore')\n\tconst folderStore = writable()\n\tconst userCreatedPane = getContext('userCreatedPane')\n\tlet indexElement\n\tlet index\n\tlet folderRef = void 0\n\tsetContext('parentStore', folderStore)\n\tfunction create() {\n\t\t$folderStore = $parentStore.addFolder({\n\t\t\tdisabled,\n\t\t\texpanded,\n\t\t\tindex,\n\t\t\ttitle,\n\t\t})\n\t\t$folderStore.on('fold', () => {\n\t\t\texpanded = $folderStore.expanded\n\t\t})\n\t\tfolderRef = $folderStore\n\t}\n\tonMount(() => {\n\t\tindex = indexElement ? getElementIndex(indexElement) : 0\n\t})\n\tonDestroy(() => {\n\t\t$folderStore?.dispose()\n\t})\n\t$: $parentStore && !folderRef && index !== void 0 && create()\n\t$: folderRef && updateCollapsibility(userExpandable, folderRef.element, 'tp-fldv_b', 'tp-fldv_m')\n\t$: folderRef && (folderRef.title = title)\n\t$: folderRef && (folderRef.disabled = disabled)\n\t$: folderRef && expanded !== void 0 && (folderRef.expanded = expanded)\n\t$: theme &&\n\t\t$parentStore &&\n\t\t(userCreatedPane || !isRootPane($parentStore)) &&\n\t\tconsole.warn(\n\t\t\t'Set theme on the <Pane> component, not on its children! (Check nested <Folder> components for a theme prop.)',\n\t\t)\n</script>\n\n{#if parentStore}\n\t{#if BROWSER}\n\t\t<div bind:this={indexElement} style=\"display: none;\">\n\t\t\t<slot />\n\t\t</div>\n\t{:else}\n\t\t<ClsPad keysAdd={['containerUnitSize']} {theme} />\n\t\t{#if expanded}\n\t\t\t<ClsPad keysAdd={['containerVerticalPadding', 'containerVerticalPadding']} {theme} />\n\t\t\t<slot />\n\t\t{/if}\n\t{/if}\n{:else}\n\t<InternalPaneInline {theme} userCreatedPane={false}>\n\t\t<svelte:self bind:expanded {disabled} {title} {userExpandable}>\n\t\t\t<slot />\n\t\t</svelte:self>\n\t</InternalPaneInline>\n{/if}\n","// index.ts\nimport { writable as internal } from \"svelte/store\";\nvar stores = {\n  local: {},\n  session: {}\n};\nfunction getStorage(type) {\n  return type === \"local\" ? localStorage : sessionStorage;\n}\nfunction writable(key, initialValue, options) {\n  console.warn(\"writable() has been deprecated. Please use persisted() instead.\\n\\nchange:\\n\\nimport { writable } from 'svelte-persisted-store'\\n\\nto:\\n\\nimport { persisted } from 'svelte-persisted-store'\");\n  return persisted(key, initialValue, options);\n}\nfunction persisted(key, initialValue, options) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  if (options == null ? void 0 : options.onError) console.warn(\"onError has been deprecated. Please use onWriteError instead\");\n  const serializer = (_a = options == null ? void 0 : options.serializer) != null ? _a : JSON;\n  const storageType = (_b = options == null ? void 0 : options.storage) != null ? _b : \"local\";\n  const syncTabs = (_c = options == null ? void 0 : options.syncTabs) != null ? _c : true;\n  const onWriteError = (_e = (_d = options == null ? void 0 : options.onWriteError) != null ? _d : options == null ? void 0 : options.onError) != null ? _e : (e) => console.error(`Error when writing value from persisted store \"${key}\" to ${storageType}`, e);\n  const onParseError = (_f = options == null ? void 0 : options.onParseError) != null ? _f : (newVal, e) => console.error(`Error when parsing ${newVal ? '\"' + newVal + '\"' : \"value\"} from persisted store \"${key}\"`, e);\n  const beforeRead = (_g = options == null ? void 0 : options.beforeRead) != null ? _g : (val) => val;\n  const beforeWrite = (_h = options == null ? void 0 : options.beforeWrite) != null ? _h : (val) => val;\n  const browser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\n  const storage = browser ? getStorage(storageType) : null;\n  function updateStorage(key2, value) {\n    const newVal = beforeWrite(value);\n    try {\n      storage == null ? void 0 : storage.setItem(key2, serializer.stringify(newVal));\n    } catch (e) {\n      onWriteError(e);\n    }\n  }\n  function maybeLoadInitial() {\n    function serialize(json2) {\n      try {\n        return serializer.parse(json2);\n      } catch (e) {\n        onParseError(json2, e);\n      }\n    }\n    const json = storage == null ? void 0 : storage.getItem(key);\n    if (json == null) return initialValue;\n    const serialized = serialize(json);\n    if (serialized == null) return initialValue;\n    const newVal = beforeRead(serialized);\n    return newVal;\n  }\n  if (!stores[storageType][key]) {\n    const initial = maybeLoadInitial();\n    const store = internal(initial, (set2) => {\n      if (browser && storageType == \"local\" && syncTabs) {\n        const handleStorage = (event) => {\n          if (event.key === key && event.newValue) {\n            let newVal;\n            try {\n              newVal = serializer.parse(event.newValue);\n            } catch (e) {\n              onParseError(event.newValue, e);\n              return;\n            }\n            const processedVal = beforeRead(newVal);\n            set2(processedVal);\n          }\n        };\n        window.addEventListener(\"storage\", handleStorage);\n        return () => window.removeEventListener(\"storage\", handleStorage);\n      }\n    });\n    const { subscribe, set } = store;\n    stores[storageType][key] = {\n      set(value) {\n        set(value);\n        updateStorage(key, value);\n      },\n      update(callback) {\n        return store.update((last) => {\n          const value = callback(last);\n          updateStorage(key, value);\n          return value;\n        });\n      },\n      reset() {\n        this.set(initialValue);\n      },\n      subscribe\n    };\n  }\n  return stores[storageType][key];\n}\nexport {\n  persisted,\n  writable\n};\n//# sourceMappingURL=index.js.map","<script context=\"module\">\n\tconst localStorePrefix = 'svelte-tweakpane-ui-draggable-position-'\n\tconst localStoreDefaultId = '1'\n\tconst localStoreIds = []\n\tlet zIndexGlobal = 1e3\n</script>\n\n<script>\n\timport GenericPane from './GenericPane.svelte'\n\timport { clamp, getSwatchButton, pickerIsOpen, removeKeys } from '../utils.js'\n\timport { onDestroy, onMount } from 'svelte'\n\timport { persisted } from 'svelte-persisted-store'\n\tconst titlebarWindowShadeSingleClick = true\n\tconst titlebarWindowShadeDoubleClick = false\n\tconst pointerCancelOnWindowBlur = true\n\tconst dragMovementDistanceThreshold = 3\n\tlet initialDragEvent\n\texport let storePositionLocally = true\n\texport let localStoreId = localStoreDefaultId\n\texport let tpPane = void 0\n\tlet positionStore\n\tif (storePositionLocally) {\n\t\tpositionStore = persisted(`${localStorePrefix}${localStoreId}`, {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\texpanded: true,\n\t\t\twidth: 350,\n\t\t})\n\t}\n\texport let expanded = $positionStore?.expanded ?? true\n\texport let collapseChildrenToFit = false\n\texport let x = $positionStore?.x ?? 0\n\texport let y = $positionStore?.y ?? 0\n\texport let width = $positionStore?.width ?? 256\n\texport let resizable = true\n\texport let userExpandable = true\n\texport let minWidth = 200\n\texport let maxWidth = 600\n\texport let title = 'Tweakpane'\n\texport let scale = 1\n\texport let padding = '0'\n\tlet containerElement\n\tlet dragBarElement\n\tlet widthHandleElement\n\tlet containerHeight\n\tlet containerHeightScaled\n\tlet containerWidth\n\tlet documentWidth\n\tlet documentHeight\n\tlet zIndexLocal = zIndexGlobal\n\tfunction addStorageId() {\n\t\tif (localStoreId !== void 0) {\n\t\t\tif (localStoreIds.includes(localStoreId)) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'Multiple instances of <Pane> with `mode=\"draggable\"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.',\n\t\t\t\t)\n\t\t\t}\n\t\t\tlocalStoreIds.push(localStoreId)\n\t\t}\n\t}\n\tfunction removeStorageId() {\n\t\tif (localStoreId) {\n\t\t\tlocalStoreIds.splice(localStoreIds.indexOf(localStoreId), 1)\n\t\t\tlocalStorage.removeItem(`${localStorePrefix}${localStoreId}`)\n\t\t}\n\t}\n\tfunction updateLocalStoreId(id) {\n\t\tif (\n\t\t\tid !== void 0 &&\n\t\t\tpositionStore !== void 0 &&\n\t\t\texpanded !== void 0 &&\n\t\t\twidth !== void 0 &&\n\t\t\tx !== void 0 &&\n\t\t\ty !== void 0\n\t\t) {\n\t\t\tpositionStore = persisted(`${localStorePrefix}${localStoreId}`, {\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\texpanded,\n\t\t\t\twidth,\n\t\t\t})\n\t\t}\n\t}\n\tfunction setDocumentSize() {\n\t\tif (x !== void 0 && y !== void 0 && width !== void 0) {\n\t\t\tconst documentWidthPrevious = documentWidth\n\t\t\tconst documentHeightPrevious = documentHeight\n\t\t\tdocumentWidth = document.documentElement.clientWidth\n\t\t\tdocumentHeight = document.documentElement.clientHeight\n\t\t\tconst dx = documentWidth - documentWidthPrevious\n\t\t\tconst dy = documentHeight - documentHeightPrevious\n\t\t\tconst centerPercentX = (x + width / 2) / documentWidth\n\t\t\tconst centerPercentY = (y + containerHeightScaled / 2) / documentHeight\n\t\t\tif (!Number.isNaN(dx) && centerPercentX >= 0.5) {\n\t\t\t\tx += dx\n\t\t\t}\n\t\t\tif (!Number.isNaN(dy) && centerPercentY >= 0.5) {\n\t\t\t\ty += dy\n\t\t\t}\n\t\t}\n\t}\n\tconst clickBlocker = (event) => {\n\t\tevent.stopPropagation()\n\t}\n\tlet startWidth = 0\n\tlet startOffsetX = 0\n\tlet startOffsetY = 0\n\tlet moveDistance = 0\n\tconst doubleClickListener = (event) => {\n\t\tevent.stopPropagation()\n\t\tif (event.target) {\n\t\t\tif (width !== void 0 && event.target === widthHandleElement) {\n\t\t\t\twidth = width < maxAvailablePanelWidth ? maxAvailablePanelWidth : minWidth\n\t\t\t} else if (\n\t\t\t\t// Consider pointer movement threshold check...\n\t\t\t\t// e.g. if (moveDistance < dragMovementDistanceThreshold && userExpandable)...\n\t\t\t\ttitlebarWindowShadeDoubleClick &&\n\t\t\t\tevent.target === dragBarElement &&\n\t\t\t\ttpPane\n\t\t\t) {\n\t\t\t\ttpPane.expanded = !tpPane.expanded\n\t\t\t}\n\t\t}\n\t}\n\tconst dragStartListener = (event) => {\n\t\tif (x !== void 0 && y !== void 0 && event.button === 0 && event.target instanceof HTMLElement) {\n\t\t\tmoveDistance = 0\n\t\t\tinitialDragEvent = event\n\t\t\tremoveDragStartListeners()\n\t\t\taddDragMoveAndEndListeners()\n\t\t\tif (event.target === dragBarElement) {\n\t\t\t\tdragBarElement.style.cursor = 'grabbing'\n\t\t\t}\n\t\t\tcontainerElement.style.transition = 'width 0s ease'\n\t\t\tevent.target.setPointerCapture(event.pointerId)\n\t\t\tstartWidth = width ?? 0\n\t\t\tstartOffsetX = x - event.pageX\n\t\t\tstartOffsetY = y - event.pageY\n\t\t}\n\t}\n\tconst dragMoveListener = (event) => {\n\t\tif (\n\t\t\tevent.target instanceof HTMLElement &&\n\t\t\twidth !== void 0 &&\n\t\t\tminWidth !== void 0 &&\n\t\t\tx !== void 0 &&\n\t\t\ty !== void 0\n\t\t) {\n\t\t\tif (event.target === dragBarElement) {\n\t\t\t\tmoveDistance += Math.hypot(event.movementX, event.movementY)\n\t\t\t\tx = event.pageX + startOffsetX\n\t\t\t\ty = event.pageY + startOffsetY\n\t\t\t} else if (event.target === widthHandleElement) {\n\t\t\t\twidth = clamp(event.pageX + startOffsetX + startWidth - x, minWidth, maxAvailablePanelWidth)\n\t\t\t}\n\t\t}\n\t}\n\tconst blurListener = () => {\n\t\tif (pointerCancelOnWindowBlur && initialDragEvent?.target instanceof HTMLElement) {\n\t\t\tconst { target } = initialDragEvent\n\t\t\tconst bounds = target.getBoundingClientRect()\n\t\t\tconst pointerCancelEvent = new PointerEvent('pointercancel', {\n\t\t\t\tbubbles: true,\n\t\t\t\tclientX: bounds.left + bounds.width / 2,\n\t\t\t\tclientY: bounds.top + bounds.height / 2,\n\t\t\t\tcomposed: true,\n\t\t\t\tpointerId: initialDragEvent.pointerId,\n\t\t\t\tpointerType: initialDragEvent.pointerType,\n\t\t\t})\n\t\t\ttarget.dispatchEvent(pointerCancelEvent)\n\t\t}\n\t}\n\tconst dragEndListener = (event) => {\n\t\tevent.stopImmediatePropagation()\n\t\tif (event.target instanceof HTMLElement) {\n\t\t\tif (event.target.hasPointerCapture(event.pointerId)) {\n\t\t\t\tevent.target.releasePointerCapture(event.pointerId)\n\t\t\t}\n\t\t\tif (event.target === dragBarElement) {\n\t\t\t\tdragBarElement.style.removeProperty('cursor')\n\t\t\t}\n\t\t\tcontainerElement.style.removeProperty('transition')\n\t\t\tif (\n\t\t\t\tevent.type === 'pointerup' &&\n\t\t\t\ttitlebarWindowShadeSingleClick &&\n\t\t\t\tevent.target === dragBarElement &&\n\t\t\t\tmoveDistance < dragMovementDistanceThreshold &&\n\t\t\t\tuserExpandable &&\n\t\t\t\ttpPane\n\t\t\t) {\n\t\t\t\ttpPane.expanded = !tpPane.expanded\n\t\t\t}\n\t\t\tinitialDragEvent = void 0\n\t\t\tremoveDragMoveAndEndListeners()\n\t\t\taddDragStartListeners()\n\t\t}\n\t}\n\tconst addDragStartListeners = () => {\n\t\tdragBarElement.addEventListener('pointerdown', dragStartListener)\n\t\twidthHandleElement?.addEventListener('pointerdown', dragStartListener)\n\t}\n\tconst removeDragStartListeners = () => {\n\t\tdragBarElement.removeEventListener('pointerdown', dragStartListener)\n\t\twidthHandleElement?.removeEventListener('pointerdown', dragStartListener)\n\t}\n\tconst addDragMoveAndEndListeners = () => {\n\t\twindow.addEventListener('blur', blurListener)\n\t\tdragBarElement.addEventListener('pointermove', dragMoveListener)\n\t\tdragBarElement.addEventListener('pointerup', dragEndListener)\n\t\tdragBarElement.addEventListener('pointercancel', dragEndListener)\n\t\twidthHandleElement?.addEventListener('pointermove', dragMoveListener)\n\t\twidthHandleElement?.addEventListener('pointerup', dragEndListener)\n\t\twidthHandleElement?.addEventListener('pointercancel', dragEndListener)\n\t}\n\tconst removeDragMoveAndEndListeners = () => {\n\t\twindow.removeEventListener('blur', blurListener)\n\t\tdragBarElement.removeEventListener('pointermove', dragMoveListener)\n\t\tdragBarElement.removeEventListener('pointerup', dragEndListener)\n\t\tdragBarElement.removeEventListener('pointercancel', dragEndListener)\n\t\twidthHandleElement?.removeEventListener('pointermove', dragMoveListener)\n\t\twidthHandleElement?.removeEventListener('pointerup', dragEndListener)\n\t\twidthHandleElement?.removeEventListener('pointercancel', dragEndListener)\n\t}\n\tconst touchScrollBlocker = (event) => {\n\t\tevent.preventDefault()\n\t}\n\tonMount(() => {\n\t\tsetDocumentSize()\n\t\tif (tpPane) {\n\t\t\tcontainerElement.append(tpPane.element)\n\t\t} else {\n\t\t\tconsole.warn('no tpPane in draggable')\n\t\t}\n\t\tcontainerElement.addEventListener('touchmove', touchScrollBlocker, { passive: false })\n\t\tconst dragBarElementCheck = containerElement.querySelector('.tp-rotv_t')\n\t\tif (dragBarElementCheck) {\n\t\t\tdragBarElement = dragBarElementCheck\n\t\t\tdragBarElement.addEventListener('click', clickBlocker)\n\t\t\tdragBarElement.addEventListener('dblclick', doubleClickListener)\n\t\t\twidthHandleElement = dragBarElement.parentElement?.appendChild(document.createElement('div'))\n\t\t\tif (widthHandleElement) {\n\t\t\t\twidthHandleElement.className = 'tp-custom-width-handle'\n\t\t\t\twidthHandleElement.textContent = '\\u2194'\n\t\t\t\twidthHandleElement.addEventListener('click', clickBlocker)\n\t\t\t\twidthHandleElement.addEventListener('dblclick', doubleClickListener)\n\t\t\t}\n\t\t\taddDragStartListeners()\n\t\t}\n\t})\n\tonDestroy(() => {\n\t\tremoveDragStartListeners()\n\t\tremoveDragMoveAndEndListeners()\n\t\tdragBarElement.removeEventListener('click', clickBlocker)\n\t\tdragBarElement.removeEventListener('dblclick', doubleClickListener)\n\t\twidthHandleElement?.removeEventListener('click', clickBlocker)\n\t\twidthHandleElement?.removeEventListener('dblclick', doubleClickListener)\n\t\tcontainerElement?.removeEventListener('touchmove', touchScrollBlocker)\n\t\tif (localStoreId !== void 0) {\n\t\t\tlocalStoreIds.splice(localStoreIds.indexOf(localStoreId), 1)\n\t\t}\n\t})\n\tfunction updateResizability(isResizable) {\n\t\tif (widthHandleElement) {\n\t\t\twidthHandleElement.style.display = isResizable ? 'block' : 'none'\n\t\t}\n\t}\n\t$: tpPane && resizable && updateResizability(resizable)\n\tfunction recursiveCollapse(children, maxToCollapse = Number.MAX_SAFE_INTEGER) {\n\t\tif (maxToCollapse > 0) {\n\t\t\tfor (const child of children) {\n\t\t\t\tif ('expanded' in child) {\n\t\t\t\t\tif (child.expanded) {\n\t\t\t\t\t\tmaxToCollapse--\n\t\t\t\t\t\tchild.expanded = false\n\t\t\t\t\t}\n\t\t\t\t\tif ('children' in child) {\n\t\t\t\t\t\trecursiveCollapse(child.children, maxToCollapse)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst swatchButton = getSwatchButton(child)\n\t\t\t\t\tif (swatchButton && pickerIsOpen(child)) {\n\t\t\t\t\t\tmaxToCollapse--\n\t\t\t\t\t\tswatchButton.click()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t$: if (\n\t\tcontainerHeightScaled !== void 0 &&\n\t\tdocumentWidth !== void 0 &&\n\t\tdocumentHeight !== void 0 &&\n\t\tx !== void 0 &&\n\t\ty !== void 0 &&\n\t\twidth !== void 0 &&\n\t\tminWidth !== void 0 &&\n\t\tmaxWidth !== void 0\n\t) {\n\t\tif (collapseChildrenToFit && containerHeightScaled > documentHeight && tpPane) {\n\t\t\trecursiveCollapse(tpPane.children)\n\t\t}\n\t\tx = clamp(x, 0, Math.max(0, documentWidth - containerWidth))\n\t\ty = clamp(y, 0, Math.max(0, documentHeight - containerHeightScaled))\n\t\tif (documentWidth < containerWidth) {\n\t\t\twidth = Math.max(minWidth, Math.min(maxWidth, documentWidth))\n\t\t}\n\t}\n\t$: maxAvailablePanelWidth = Math.min(maxWidth ?? 600, documentWidth - (x ?? 0))\n\t$: localStoreId, storePositionLocally && addStorageId()\n\t$: localStoreId, !storePositionLocally && removeStorageId()\n\t$: localStoreId !== `${localStorePrefix}${localStoreId}` && updateLocalStoreId(localStoreId)\n\t$: storePositionLocally &&\n\t\tlocalStoreId !== void 0 &&\n\t\tx !== void 0 &&\n\t\ty !== void 0 &&\n\t\twidth !== void 0 &&\n\t\texpanded !== void 0 &&\n\t\tpositionStore?.set({ x, y, expanded, width })\n\t$: {\n\t\tif (containerElement) {\n\t\t\tif (scale === void 0 || scale === 1) {\n\t\t\t\tcontainerHeightScaled = containerHeight\n\t\t\t} else {\n\t\t\t\tconst style = window.getComputedStyle(containerElement)\n\t\t\t\tconst vPadding =\n\t\t\t\t\tNumber.parseFloat(style.paddingTop) + Number.parseFloat(style.paddingBottom)\n\t\t\t\tcontainerHeightScaled = (containerHeight - vPadding) * scale + vPadding\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<svelte:window on:resize={setDocumentSize} />\n\n<div\n\tbind:clientHeight={containerHeight}\n\tbind:clientWidth={containerWidth}\n\tbind:this={containerElement}\n\ton:focus|capture={() => {\n\t\tzIndexLocal = ++zIndexGlobal\n\t}}\n\ton:pointerdown|capture={() => {\n\t\tzIndexLocal = ++zIndexGlobal\n\t}}\n\tclass=\"draggable-container\"\n\tclass:not-collapsable={!userExpandable}\n\tclass:not-resizable={!resizable}\n\tstyle:left=\"{x}px\"\n\tstyle:padding\n\tstyle:top=\"{y}px\"\n\tstyle:width=\"{width}px\"\n\tstyle:z-index={zIndexLocal}\n>\n\t<GenericPane bind:expanded bind:tpPane {scale} {title} {...removeKeys($$restProps, 'position')}>\n\t\t<slot />\n\t</GenericPane>\n</div>\n\n<style>\n\tdiv.draggable-container {\n\t\tposition: fixed;\n\t\tz-index: auto;\n\t\tpadding: 20px;\n\t\t/* 0.2s matches Tweakpane's internal animation duration */\n\t\ttransition: width 0.2s ease;\n\t}\n\n\t/* stylelint-disable-next-line selector-class-pattern */\n\tdiv.draggable-container :global(div.tp-rotv_t) {\n\t\tcursor: grab;\n\t\toverflow: hidden;\n\t\t/* Ensure draggable hit zone does not collapse if title is missing */\n\t\t/* Fixes #1 */\n\t\theight: 100%;\n\t}\n\n\tdiv.draggable-container.not-collapsable :global(div.tp-rotv_t) {\n\t\t/* TODO remove the magic numbers */\n\t\t/* Expand the drag bar to fill the missing window shade icon space */\n\t\tmargin-left: -28px;\n\t\tpadding-left: 28px;\n\t}\n\n\tdiv.draggable-container.not-resizable :global(div.tp-rotv_t) {\n\t\t/* TODO remove the magic numbers */\n\t\t/* Expand the drag bar to fill the missing width drag icon space */\n\t\tmargin-right: -28px;\n\t\tpadding-right: 28px;\n\t}\n\n\tdiv.draggable-container :global(div.tp-lblv_l) {\n\t\twhite-space: nowrap;\n\t}\n\n\tdiv.draggable-container :global(div.tp-rotv_m) {\n\t\tright: unset;\n\t\tleft: 0;\n\t\t/* inflate the icon into a better hit zone */\n\t\tmargin: auto calc((var(--cnt-usz) + (var(--cnt-hp)) - 6px) / 2);\n\t}\n\n\tdiv.draggable-container :global(div.tp-custom-width-handle) {\n\t\tcursor: col-resize;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\taspect-ratio: 1;\n\t\theight: 100%;\n\t\tfont-size: 1.5em;\n\t\tcolor: var(--tp-container-fg);\n\t\topacity: 0.5;\n\t}\n</style>\n","<script>\n\timport GenericPane from './GenericPane.svelte'\n\timport { removeKeys } from '../utils.js'\n\texport let expanded = void 0\n\texport let x = void 0\n\texport let y = void 0\n\texport let width = void 0\n\texport let title = 'Tweakpane'\n\texport let tpPane = void 0\n\tlet paneContainer\n\t$: tpPane?.element.parentElement && (paneContainer = tpPane.element.parentElement)\n\t$: paneContainer !== void 0 &&\n\t\tx !== void 0 &&\n\t\t(paneContainer.style.setProperty('right', 'unset'),\n\t\tpaneContainer.style.setProperty('left', `${x}px`))\n\t$: paneContainer !== void 0 && y !== void 0 && paneContainer.style.setProperty('top', `${y}px`)\n\t$: paneContainer !== void 0 &&\n\t\twidth !== void 0 &&\n\t\tpaneContainer.style.setProperty('width', `${width}px`)\n</script>\n\n<div style=\"display: none;\">\n\t<GenericPane bind:expanded bind:tpPane {title} {...removeKeys($$restProps, 'position')}>\n\t\t<slot />\n\t</GenericPane>\n</div>\n","<script context=\"module\"></script>\n\n<script>\n\timport InternalPaneDraggable from '../internal/InternalPaneDraggable.svelte'\n\timport InternalPaneFixed from '../internal/InternalPaneFixed.svelte'\n\timport InternalPaneInline from '../internal/InternalPaneInline.svelte'\n\timport { removeKeys } from '../utils'\n\timport { BROWSER } from 'esm-env'\n\timport { beforeUpdate } from 'svelte'\n\texport let expanded = void 0\n\texport let position = void 0\n\texport let width = void 0\n\texport let tpPane = void 0\n\texport let x = void 0\n\texport let y = void 0\n\tbeforeUpdate(() => {\n\t\tif ($$props.position === 'inline' || $$props.position === 'fixed') {\n\t\t\tx = $$props.x\n\t\t\ty = $$props.y\n\t\t\twidth = $$props.width\n\t\t\texpanded = $$props.expanded\n\t\t}\n\t})\n</script>\n\n<!-- Only prerender inline panes, because fixed / absolute positioned objects don't affect layout\n-->\n{#if position === undefined || position === 'draggable'}\n\t{#if BROWSER}\n\t\t<InternalPaneDraggable bind:expanded bind:tpPane bind:width bind:x bind:y {...$$restProps}>\n\t\t\t<slot />\n\t\t</InternalPaneDraggable>\n\t{:else}\n\t\t<div style=\"display: none;\">\n\t\t\t<slot />\n\t\t</div>\n\t{/if}\n{:else if position === 'inline'}\n\t<InternalPaneInline\n\t\tbind:expanded\n\t\tbind:tpPane\n\t\t{width}\n\t\t{...removeKeys($$restProps, 'storePositionLocally')}\n\t>\n\t\t<slot />\n\t</InternalPaneInline>\n{:else if position === 'fixed'}\n\t{#if BROWSER}\n\t\t<InternalPaneFixed bind:expanded bind:tpPane bind:x bind:y {width} {...$$restProps}>\n\t\t\t<slot />\n\t\t</InternalPaneFixed>\n\t{:else}\n\t\t<div style=\"display: none;\">\n\t\t\t<slot />\n\t\t</div>\n\t{/if}\n{/if}\n","import { BladeApi, BladeController, LabelController, ClassName, ManualTicker, IntervalTicker, Constants, createPlugin, ValueMap, parseRecord } from '@tweakpane/core';\n\nclass ProfilerBladeApi extends BladeApi {\n    measureStart(name) {\n        this.controller.valueController.measureStart(name);\n    }\n    measureEnd() {\n        return this.controller.valueController.measureEnd();\n    }\n    measure(name, fn) {\n        this.controller.valueController.measure(name, fn);\n    }\n    measureAsync(name, fn) {\n        return this.controller.valueController.measureAsync(name, fn);\n    }\n    get measureHandler() {\n        return this.controller.valueController.measureHandler;\n    }\n    set measureHandler(measureHandler) {\n        this.controller.valueController.measureHandler = measureHandler;\n    }\n}\n\nclass ProfilerBladeController extends BladeController {\n    constructor(doc, config) {\n        const bc = config.valueController;\n        const lc = new LabelController(doc, {\n            blade: config.blade,\n            props: config.labelProps,\n            valueController: bc,\n        });\n        super({\n            blade: config.blade,\n            view: lc.view,\n            viewProps: bc.viewProps,\n        });\n        this.valueController = bc;\n        this.labelController = lc;\n    }\n}\n\nclass ProfilerBladeDefaultMeasureHandler {\n    measureStart() {\n        const begin = performance.now();\n        return () => performance.now() - begin;\n    }\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nclass ConsecutiveCacheMap {\n    constructor() {\n        this.map = new Map();\n        this.keySet = new Set();\n    }\n    get(key) {\n        return this.map.get(key);\n    }\n    getOrCreate(key, create) {\n        if (!this.keySet.has(key)) {\n            this.keySet.add(key);\n        }\n        let value = this.map.get(key);\n        if (value == null) {\n            value = create();\n            this.map.set(key, value);\n        }\n        return value;\n    }\n    set(key, value) {\n        if (!this.keySet.has(key)) {\n            this.keySet.add(key);\n        }\n        this.map.set(key, value);\n    }\n    resetUsedSet() {\n        this.keySet.clear();\n    }\n    vaporize(onVaporize) {\n        for (const [key, value] of this.map.entries()) {\n            if (!this.keySet.has(key)) {\n                this.map.delete(key);\n                onVaporize === null || onVaporize === void 0 ? void 0 : onVaporize([key, value]);\n            }\n        }\n    }\n}\n\nfunction arrayClear(array) {\n    array.splice(0, array.length);\n}\n\n/**\n * I don't like reduce\n */\nfunction arraySum(array) {\n    let sum = 0.0;\n    array.forEach((v) => sum += v);\n    return sum;\n}\n\n/**\n * Useful for tap tempo\n */\nclass HistoryMeanCalculator {\n    constructor(length) {\n        this.__recalcForEach = 0;\n        this.__countUntilRecalc = 0;\n        this.__history = [];\n        this.__index = 0;\n        this.__count = 0;\n        this.__cache = 0;\n        this.__length = length;\n        this.__recalcForEach = length;\n        for (let i = 0; i < length; i++) {\n            this.__history[i] = 0;\n        }\n    }\n    get mean() {\n        const count = Math.min(this.__count, this.__length);\n        return count === 0 ? 0.0 : this.__cache / count;\n    }\n    get recalcForEach() {\n        return this.__recalcForEach;\n    }\n    set recalcForEach(value) {\n        const delta = value - this.__recalcForEach;\n        this.__recalcForEach = value;\n        this.__countUntilRecalc = Math.max(0, this.__countUntilRecalc + delta);\n    }\n    reset() {\n        this.__index = 0;\n        this.__count = 0;\n        this.__cache = 0;\n        this.__countUntilRecalc = 0;\n        for (let i = 0; i < this.__length; i++) {\n            this.__history[i] = 0;\n        }\n    }\n    push(value) {\n        const prev = this.__history[this.__index];\n        this.__history[this.__index] = value;\n        this.__count++;\n        this.__index = (this.__index + 1) % this.__length;\n        if (this.__countUntilRecalc === 0) {\n            this.recalc();\n        }\n        else {\n            this.__countUntilRecalc--;\n            this.__cache -= prev;\n            this.__cache += value;\n        }\n    }\n    recalc() {\n        this.__countUntilRecalc = this.__recalcForEach;\n        const sum = this.__history\n            .slice(0, Math.min(this.__count, this.__length))\n            .reduce((sum, v) => sum + v, 0);\n        this.__cache = sum;\n    }\n}\n\n// yoinked from https://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\nfunction binarySearch(array, elementOrCompare) {\n    if (typeof elementOrCompare !== 'function') {\n        return binarySearch(array, (element) => (element < elementOrCompare));\n    }\n    const compare = elementOrCompare;\n    let start = 0;\n    let end = array.length;\n    while (start < end) {\n        const center = (start + end) >> 1;\n        const centerElement = array[center];\n        const compareResult = compare(centerElement);\n        if (compareResult) {\n            start = center + 1;\n        }\n        else {\n            end = center;\n        }\n    }\n    return start;\n}\n\n/**\n * Useful for fps calc\n */\nclass HistoryPercentileCalculator {\n    constructor(length) {\n        this.__history = [];\n        this.__sorted = [];\n        this.__index = 0;\n        this.__length = length;\n    }\n    get median() {\n        return this.percentile(50.0);\n    }\n    percentile(percentile) {\n        if (this.__history.length === 0) {\n            return 0.0;\n        }\n        return this.__sorted[Math.round(percentile * 0.01 * (this.__history.length - 1))];\n    }\n    reset() {\n        this.__index = 0;\n        this.__history = [];\n        this.__sorted = [];\n    }\n    push(value) {\n        const prev = this.__history[this.__index];\n        this.__history[this.__index] = value;\n        this.__index = (this.__index + 1) % this.__length;\n        // remove the prev from sorted array\n        if (this.__sorted.length === this.__length) {\n            const prevIndex = binarySearch(this.__sorted, prev);\n            this.__sorted.splice(prevIndex, 1);\n        }\n        const index = binarySearch(this.__sorted, value);\n        this.__sorted.splice(index, 0, value);\n    }\n}\n\nfunction dot(a, b) {\n    let sum = 0.0;\n    for (let i = 0; i < a.length; i++) {\n        sum += a[i] * b[i];\n    }\n    return sum;\n}\n\nfunction saturate(x) {\n    return Math.min(Math.max(x, 0.0), 1.0);\n}\n\nfunction rgbArrayToCssString(array) {\n    const arrayPrepared = array.map((v) => saturate(v) * 256.0);\n    return `rgb( ${arrayPrepared.join(', ')} )`;\n}\n\n/**\n * Generate Trubo colormap\n *\n * Yoinked from https://gist.github.com/mikhailov-work/0d177465a8151eb6ede1768d51d476c7\n *\n * Copyright 2019 Google LLC.\n * Apache-2.0 License\n */\nfunction genTurboColormap(x) {\n    const v4KRed = [0.13572138, 4.61539260, -42.66032258, 132.13108234];\n    const v4KGreen = [0.09140261, 2.19418839, 4.84296658, -14.18503333];\n    const v4KBlue = [0.10667330, 12.64194608, -60.58204836, 110.36276771];\n    const v2KRed = [-152.94239396, 59.28637943];\n    const v2KGreen = [4.27729857, 2.82956604];\n    const v2KBlue = [-89.90310912, 27.34824973];\n    x = saturate(x);\n    const v4 = [1.0, x, x * x, x * x * x];\n    const v2 = [v4[2], v4[3]].map((v) => v * v4[2]);\n    const color = [\n        dot(v4, v4KRed) + dot(v2, v2KRed),\n        dot(v4, v4KGreen) + dot(v2, v2KGreen),\n        dot(v4, v4KBlue) + dot(v2, v2KBlue)\n    ];\n    return rgbArrayToCssString(color);\n}\n\n// Create a class name generator from the view name\n// ClassName('tmp') will generate a CSS class name like `tp-tmpv`\nconst className = ClassName('profiler');\n// Custom view class should implement `View` interface\nclass ProfilerView {\n    constructor(doc, config) {\n        this.targetDelta = config.targetDelta;\n        this.deltaUnit = config.deltaUnit;\n        this.fractionDigits = config.fractionDigits;\n        this.calcMode = config.calcMode;\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        this.svgRootElement_ = doc.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this.svgRootElement_.classList.add(className('root'));\n        this.element.appendChild(this.svgRootElement_);\n        this.entryContainerElement_ = doc.createElementNS('http://www.w3.org/2000/svg', 'g');\n        this.entryContainerElement_.classList.add(className('container'));\n        this.entryContainerElement_.setAttribute('transform', 'translate( 1, 1 )');\n        this.svgRootElement_.appendChild(this.entryContainerElement_);\n        this.tooltipElement_ = doc.createElement('div');\n        this.tooltipElement_.classList.add(className('tooltip'));\n        this.tooltipElement_.style.display = 'none';\n        this.element.appendChild(this.tooltipElement_);\n        this.tooltipInsideElement_ = doc.createElement('div');\n        this.tooltipInsideElement_.classList.add(className('tooltipinside'));\n        this.tooltipElement_.appendChild(this.tooltipInsideElement_);\n        this.labelElement_ = doc.createElement('div');\n        this.labelElement_.classList.add(className('label'));\n        this.labelElement_.textContent = this.deltaToDisplayDelta_(0.0);\n        this.element.appendChild(this.labelElement_);\n        this.entryElementCacheMap_ = new ConsecutiveCacheMap();\n        this.hoveringEntry_ = null;\n    }\n    update(rootEntry) {\n        const rootEntryDelta = this.entryToDelta_(rootEntry);\n        this.labelElement_.textContent = this.deltaToDisplayDelta_(rootEntryDelta);\n        this.entryElementCacheMap_.resetUsedSet();\n        const unit = 160.0 / Math.max(this.targetDelta, rootEntryDelta);\n        let x = 0.0;\n        for (const child of rootEntry.children) {\n            const childElement = this.addEntry_(child, '', this.entryContainerElement_, unit);\n            childElement.setAttribute('transform', `translate( ${x}, ${0.0} )`);\n            x += this.entryToDelta_(child) * unit;\n        }\n        this.entryElementCacheMap_.vaporize(([path, element]) => {\n            element.remove();\n            if (this.hoveringEntry_ === path) {\n                this.hoveringEntry_ = null;\n            }\n        });\n        this.updateTooltip_();\n    }\n    updateTooltip_() {\n        const path = this.hoveringEntry_;\n        if (path) {\n            const element = this.entryElementCacheMap_.get(path);\n            const dataDelta = element === null || element === void 0 ? void 0 : element.getAttribute('data-delta');\n            const displayDelta = this.deltaToDisplayDelta_(parseFloat(dataDelta !== null && dataDelta !== void 0 ? dataDelta : '0.0'));\n            const text = `${path}\\n${displayDelta}`;\n            this.tooltipElement_.style.display = 'block';\n            this.tooltipInsideElement_.textContent = text;\n        }\n        else {\n            this.tooltipElement_.style.display = 'none';\n        }\n    }\n    addEntry_(entry, parentPath, parent, unit) {\n        const path = `${parentPath}/${entry.name}`;\n        const g = this.entryElementCacheMap_.getOrCreate(path, () => {\n            const newG = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n            newG.classList.add(className('entry'));\n            parent.appendChild(newG);\n            this.entryElementCacheMap_.set(path, newG);\n            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            rect.classList.add(className('entryrect'));\n            newG.appendChild(rect);\n            rect.addEventListener('mouseenter', () => {\n                this.hoveringEntry_ = path;\n                this.updateTooltip_();\n            });\n            rect.addEventListener('mouseleave', () => {\n                this.hoveringEntry_ = null;\n                this.updateTooltip_();\n            });\n            return newG;\n        });\n        const delta = this.entryToDelta_(entry);\n        g.setAttribute('data-delta', `${delta}`);\n        const rect = g.childNodes[0];\n        rect.setAttribute('width', `${Math.max(0.01, delta * unit - 1.0)}px`);\n        rect.setAttribute('height', `${9}px`);\n        const turboX = 0.15 + 0.7 * saturate(delta / this.targetDelta);\n        rect.setAttribute('fill', genTurboColormap(turboX));\n        if (entry.children.length > 0) {\n            let x = 0.0;\n            entry.children.forEach((child) => {\n                const childElement = this.addEntry_(child, path, g, unit);\n                childElement.setAttribute('transform', `translate( ${x}, ${10.0} )`);\n                x += this.entryToDelta_(child) * unit;\n            });\n        }\n        return g;\n    }\n    entryToDelta_(entry) {\n        if (this.calcMode === 'frame') {\n            return entry.delta;\n        }\n        else if (this.calcMode === 'mean') {\n            return entry.deltaMean;\n        }\n        else if (this.calcMode === 'median') {\n            return entry.deltaMedian;\n        }\n        else {\n            throw new Error('Unreachable! calcMode must be one of \"frame\", \"mean\", or \"median\"');\n        }\n    }\n    deltaToDisplayDelta_(delta) {\n        return `${delta.toFixed(this.fractionDigits)} ${this.deltaUnit}`;\n    }\n}\n\nclass ProfilerController {\n    constructor(doc, config) {\n        this.targetDelta = config.targetDelta;\n        this.bufferSize = config.bufferSize;\n        this.onTick_ = this.onTick_.bind(this);\n        this.ticker_ = config.ticker;\n        this.ticker_.emitter.on('tick', this.onTick_);\n        this.viewProps = config.viewProps;\n        this.view = new ProfilerView(doc, {\n            targetDelta: this.targetDelta,\n            deltaUnit: config.deltaUnit,\n            fractionDigits: config.fractionDigits,\n            calcMode: config.calcMode,\n            viewProps: this.viewProps,\n        });\n        this.viewProps.handleDispose(() => {\n            this.ticker_.dispose();\n        });\n        this.measureHandler = config.measureHandler;\n        this.rootCalcCacheStack_ = [this.createNewEntryCalcCache_()];\n    }\n    measureStart(name) {\n        const parentCalcCache = this.rootCalcCacheStack_[this.rootCalcCacheStack_.length - 1];\n        const calcCache = parentCalcCache.childrenCacheMap.getOrCreate(name, () => this.createNewEntryCalcCache_());\n        calcCache.childrenCacheMap.resetUsedSet();\n        arrayClear(calcCache.childrenPromiseDelta);\n        this.rootCalcCacheStack_.push(calcCache);\n        calcCache.measureEnd = this.measureHandler.measureStart();\n    }\n    measureEnd() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const calcCache = this.rootCalcCacheStack_[this.rootCalcCacheStack_.length - 1];\n            const parentCalcCache = this.rootCalcCacheStack_[this.rootCalcCacheStack_.length - 2];\n            const promiseDelta = Promise.resolve(calcCache.measureEnd());\n            calcCache.measureEnd = null;\n            parentCalcCache.childrenPromiseDelta.push(promiseDelta);\n            this.rootCalcCacheStack_.pop();\n            calcCache.childrenCacheMap.vaporize();\n            const children = yield Promise.all(calcCache.childrenPromiseDelta);\n            const sumChildrenDelta = arraySum(children);\n            const selfDelta = (yield promiseDelta) - sumChildrenDelta;\n            calcCache.meanCalc.push(selfDelta);\n            calcCache.medianCalc.push(selfDelta);\n            calcCache.latest = selfDelta;\n        });\n    }\n    measure(name, fn) {\n        this.measureStart(name);\n        fn();\n        this.measureEnd();\n    }\n    measureAsync(name, fn) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.measureStart(name);\n            yield fn();\n            this.measureEnd();\n        });\n    }\n    renderEntry() {\n        return this.renderEntryFromCalcCache_('', this.rootCalcCacheStack_[0]);\n    }\n    renderEntryFromCalcCache_(name, calcCache) {\n        const children = [];\n        for (const childName of calcCache.childrenCacheMap.keySet) {\n            const child = calcCache.childrenCacheMap.get(childName);\n            children.push(this.renderEntryFromCalcCache_(childName, child));\n        }\n        const selfDelta = calcCache.latest;\n        const selfDeltaMean = calcCache.meanCalc.mean;\n        const selfDeltaMedian = calcCache.medianCalc.median;\n        const childrenDeltaSum = arraySum(children.map((child) => child.delta));\n        const childrenDeltaMeanSum = arraySum(children.map((child) => child.deltaMean));\n        const childrenDeltaMedianSum = arraySum(children.map((child) => child.deltaMedian));\n        const delta = selfDelta + childrenDeltaSum;\n        const deltaMean = selfDeltaMean + childrenDeltaMeanSum;\n        const deltaMedian = selfDeltaMedian + childrenDeltaMedianSum;\n        return {\n            name,\n            delta,\n            deltaMean,\n            deltaMedian,\n            selfDelta,\n            selfDeltaMean,\n            selfDeltaMedian,\n            children,\n        };\n    }\n    onTick_() {\n        this.view.update(this.renderEntry());\n    }\n    createNewEntryCalcCache_() {\n        return {\n            meanCalc: new HistoryMeanCalculator(this.bufferSize),\n            medianCalc: new HistoryPercentileCalculator(this.bufferSize),\n            latest: 0.0,\n            measureEnd: null,\n            childrenCacheMap: new ConsecutiveCacheMap(),\n            childrenPromiseDelta: [],\n        };\n    }\n}\n\nfunction createTicker(document, interval) {\n    return interval === 0\n        ? new ManualTicker()\n        : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n}\n\nfunction parseCalcMode(value) {\n    switch (value) {\n        case 'frame':\n        case 'mean':\n        case 'median':\n            return value;\n        default:\n            return undefined;\n    }\n}\nfunction parseMeasureHandler(value) {\n    if (typeof value === 'object' && value != null && 'measureStart' in value) {\n        return value;\n    }\n    else {\n        if (typeof value === 'object' && value != null && 'measure' in value) {\n            console.warn('The API of `ProfilerBladeDefaultMeasureHandler` has been changed in v0.4.0! Please define `measureStart` instead of `measure`. Fallback to the default measure handler.');\n        }\n        return undefined;\n    }\n}\nconst ProfilerBladePlugin = createPlugin({\n    id: 'profiler',\n    type: 'blade',\n    accept(params) {\n        // Parse parameters object\n        const result = parseRecord(params, (p) => ({\n            view: p.required.constant('profiler'),\n            targetDelta: p.optional.number,\n            bufferSize: p.optional.number,\n            deltaUnit: p.optional.string,\n            fractionDigits: p.optional.number,\n            calcMode: p.optional.custom(parseCalcMode),\n            label: p.optional.string,\n            interval: p.optional.number,\n            measureHandler: p.optional.custom(parseMeasureHandler),\n        }));\n        return result ? { params: result } : null;\n    },\n    controller(args) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n        const targetDelta = (_b = args.params.targetDelta) !== null && _b !== void 0 ? _b : 16.67;\n        const bufferSize = (_c = args.params.bufferSize) !== null && _c !== void 0 ? _c : 30;\n        const deltaUnit = (_d = args.params.deltaUnit) !== null && _d !== void 0 ? _d : 'ms';\n        const fractionDigits = (_e = args.params.fractionDigits) !== null && _e !== void 0 ? _e : 2;\n        const calcMode = (_f = args.params.calcMode) !== null && _f !== void 0 ? _f : 'mean';\n        const measureHandler = (_g = args.params.measureHandler) !== null && _g !== void 0 ? _g : new ProfilerBladeDefaultMeasureHandler();\n        return new ProfilerBladeController(args.document, {\n            blade: args.blade,\n            labelProps: ValueMap.fromObject({\n                label: args.params.label\n            }),\n            valueController: new ProfilerController(args.document, {\n                ticker: createTicker(args.document, interval),\n                targetDelta,\n                bufferSize,\n                deltaUnit,\n                fractionDigits,\n                calcMode,\n                viewProps: args.viewProps,\n                measureHandler,\n            })\n        });\n    },\n    api(args) {\n        if (!(args.controller instanceof ProfilerBladeController)) {\n            return null;\n        }\n        return new ProfilerBladeApi(args.controller);\n    }\n});\n\nconst id = 'profiler';\nconst css = '.tp-profilerv{position:relative}.tp-profilerv_root{background-color:var(--mo-bg);width:100%;height:calc(2*var(--cnt-usz))}.tp-profilerv_entryrect{rx:var(--bld-br);ry:var(--bld-br);stroke:rgba(0,0,0,0);stroke-width:1px;filter:saturate(0.5)}.tp-profilerv_entryrect:hover{filter:saturate(1)}.tp-profilerv_tooltip{position:absolute;right:100%;top:0;overflow:hidden;background:var(--bs-bg)}.tp-profilerv_tooltipinside{padding:0 4px;overflow:visible;white-space:pre;text-align:right;background:var(--mo-bg);color:var(--in-fg)}.tp-profilerv_label{color:var(--mo-fg);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}';\nconst plugins = [\n    ProfilerBladePlugin,\n];\n\nexport { ProfilerBladeDefaultMeasureHandler, ProfilerBladePlugin, css, id, ProfilerBladePlugin as plugin, plugins };\n","import { ClassName, SVG_NS, mapRange, createPlugin, ValueMap, parseRecord } from '@tweakpane/core';\n\nclass LinearDrawerProvider {\n    constructor() {\n        this.drawer = (point) => `L ${point[0]} ${point[1]}`;\n    }\n}\nclass CubicBézierDrawerProvider {\n    constructor() {\n        this.drawer = (point, index, points) => {\n            // start control point\n            const [cpsX, cpsY] = this.controlPoint(points[index - 1], points[index - 2], point);\n            // end control point\n            const [cpeX, cpeY] = this.controlPoint(point, points[index - 1], points[index + 1], true);\n            return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point[0]},${point[1]}`;\n        };\n    }\n    controlPoint(current, previous, next, reverse) {\n        // When 'current' is the first or last point of the array  'previous' or 'next' don't exist. Replace with 'current'\n        const a = previous || current;\n        const b = next || current;\n        const smoothing = 0.2;\n        const lenX = b[0] - a[0];\n        const lenY = b[1] - a[1];\n        const length = Math.sqrt(Math.pow(lenX, 2) + Math.pow(lenY, 2)) * smoothing;\n        const angle = Math.atan2(lenY, lenX) + (reverse ? Math.PI : 0);\n        const x = current[0] + Math.cos(angle) * length;\n        const y = current[1] + Math.sin(angle) * length;\n        return [x, y];\n    }\n}\n\nconst className = ClassName('wfm');\n/**\n * @hidden\n */\nclass WaveformView {\n    constructor(doc, config) {\n        this.element = doc.createElement('div');\n        this.element.classList.add(className());\n        config.viewProps.bindClassModifiers(this.element);\n        this.svgElem = doc.createElementNS(SVG_NS, 'svg');\n        this.svgElem.classList.add(className('g'));\n        this.element.appendChild(this.svgElem);\n        this.pathElem = doc.createElementNS(SVG_NS, 'path');\n        this.svgElem.appendChild(this.pathElem);\n        this.props = config.props;\n        this.value = config.value;\n        this.value.emitter.on('change', this.onValueChange_.bind(this));\n        switch (this.props.get('lineStyle')) {\n            case 'linear':\n                this.lineDrawerProvider = new LinearDrawerProvider();\n                break;\n            case 'bezier':\n                this.lineDrawerProvider = new CubicBézierDrawerProvider();\n                break;\n            default:\n                this.lineDrawerProvider = new LinearDrawerProvider();\n                break;\n        }\n        this.refresh();\n        config.viewProps.handleDispose(() => {\n            this.value.emitter.off('change', this.onValueChange_);\n        });\n    }\n    svgPath(points, drawer) {\n        const d = points.reduce((acc, point, i, a) => i === 0 ? `M ${point[0]},${point[1]}` : `${acc} ${drawer(point, i, a)}`, '');\n        return d;\n    }\n    refresh() {\n        var _a, _b;\n        const bounds = this.svgElem.getBoundingClientRect();\n        const latestValue = this.value.rawValue[0];\n        if (latestValue) {\n            const min = (_a = this.props.get('min')) !== null && _a !== void 0 ? _a : Math.min(...latestValue) - 1;\n            const max = (_b = this.props.get('max')) !== null && _b !== void 0 ? _b : Math.max(...latestValue) + 1;\n            const range = max - min;\n            const points = [];\n            const maxIndex = latestValue.length - 1;\n            // Grid\n            const gridWidth = latestValue.length > 32 ? 0 : bounds.width / (latestValue.length - 1);\n            const gridHeight = range > 50 ? 0 : bounds.height / range;\n            this.element.style.backgroundSize = `${gridWidth}px ${gridHeight}px`;\n            // Graph\n            latestValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([Math.floor(x), Math.floor(y)]);\n            });\n            const d = this.svgPath(points, this.lineDrawerProvider.drawer);\n            this.pathElem.setAttributeNS(null, 'd', d);\n        }\n    }\n    onValueChange_() {\n        this.refresh();\n    }\n}\n\n// Custom controller class should implement `Controller` interface\nclass WaveformController {\n    constructor(doc, config) {\n        this.value = config.value;\n        this.props = config.props;\n        this.viewProps = config.viewProps;\n        this.viewProps.handleDispose(() => {\n            // Nothing to do\n        });\n        this.view = new WaveformView(doc, {\n            value: this.value,\n            viewProps: this.viewProps,\n            props: this.props,\n        });\n    }\n}\n\nfunction shouldShowWaveform(params) {\n    return 'view' in params && params.view === 'waveform';\n}\nfunction isWaveformType(value) {\n    if (typeof value === 'object') {\n        return 'length' in value;\n    }\n    return false;\n}\nconst WaveformPlugin = createPlugin({\n    id: 'monitor-waveform',\n    type: 'monitor',\n    accept: (value, params) => {\n        if (!isWaveformType(value)) {\n            return null;\n        }\n        const result = parseRecord(params, (p) => ({\n            max: p.optional.number,\n            min: p.optional.number,\n            style: p.optional.custom((value) => value === 'linear' || value === 'bezier' ? value : undefined),\n            view: p.optional.string,\n        }));\n        return result ? { initialValue: value, params: result } : null;\n    },\n    binding: {\n        defaultBufferSize: (params) => (shouldShowWaveform(params) ? 64 : 1),\n        reader: (_args) => (exValue) => {\n            if (isWaveformType(exValue)) {\n                return exValue;\n            }\n            return [];\n        },\n    },\n    controller: (args) => {\n        var _a, _b, _c;\n        return new WaveformController(args.document, {\n            props: ValueMap.fromObject({\n                max: (_a = ('max' in args.params ? args.params.max : null)) !== null && _a !== void 0 ? _a : null,\n                min: (_b = ('min' in args.params ? args.params.min : null)) !== null && _b !== void 0 ? _b : null,\n                lineStyle: (_c = ('style' in args.params ? args.params.style : null)) !== null && _c !== void 0 ? _c : 'linear',\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    },\n});\n\nconst id = 'waveform';\nconst css = '.tp-wfmv_g{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-wfmv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-wfmv_g::-webkit-scrollbar{height:8px;width:8px}.tp-wfmv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-wfmv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-wfmv{position:relative;background-image:linear-gradient(to right, var(--cnt-bg), 1px, transparent 1px),linear-gradient(to bottom, var(--cnt-bg), 1px, transparent 1px)}.tp-wfmv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-wfmv_g path{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-wfmv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-wfmv_t.tp-wfmv_t-a{visibility:visible}.tp-wfmv_t.tp-wfmv_t-in{transition:none}.tp-wfmv.tp-v-disabled .tp-wfmv_g{opacity:.5}.tp-wfmv .tp-ttv{background-color:var(--mo-fg)}.tp-wfmv .tp-ttv::before{border-top-color:var(--mo-fg)}';\nconst plugins = [WaveformPlugin];\n\nexport { css, id, plugins };\n","<script>\n  import { get } from \"svelte/store\";\n  import {\n    Pane,\n    Folder,\n    Slider,\n    List,\n    Checkbox,\n    Button,\n    Color,\n    Text,\n  } from \"svelte-tweakpane-ui\";\n\n  import {\n    layerStackStore,\n    blendingOptions,\n  } from \"$apps/shared/stores/layer-stack.js\";\n  import { maskLayerStore } from \"$apps/shared/stores/mask-layer.js\";\n  import { noiseLayerStore } from \"$apps/shared/stores/noise-layer.js\";\n  import {\n    noiseTypeStore,\n    noiseTypeOptions,\n    perlinStore,\n    flowStore,\n    fbmStore,\n    turbulenceStore,\n  } from \"$apps/shared/stores/noise.js\";\n  import { noiseSamplingStore } from \"$apps/shared/stores/noise-sampling.js\";\n  import { typographyLayerStore } from \"$apps/shared/stores/typography-layer.js\";\n  import {\n    fontFamilyOptions,\n    typographyStore,\n  } from \"$apps/shared/stores/typography.js\";\n  import { simulationStore } from \"$apps/shared/stores/simulation.js\";\n  import {\n    COLOR_MODE,\n    colorModeOptions,\n    uiStore,\n  } from \"$apps/shared/stores/ui.js\";\n\n  const gradientLabels = [\n    \"Gradient Color 1\",\n    \"Gradient Color 2\",\n    \"Gradient Color 3\",\n  ];\n\n  function resetAll() {\n    layerStackStore.reset();\n\n    // --- Mask layer ---\n    maskLayerStore.reset();\n\n    // --- Noise layer ---\n    noiseLayerStore.reset();\n    noiseTypeStore.reset();\n    perlinStore.reset();\n    flowStore.reset();\n    fbmStore.reset();\n    turbulenceStore.reset();\n\n    // --- Typography layer ---\n    typographyLayerStore.reset();\n    typographyStore.reset();\n\n    // --- Simulation ---\n    simulationStore.reset();\n\n    // --- UI ---\n    uiStore.reset();\n  }\n</script>\n\n<Pane>\n  <Folder title=\"Layer Stack\">\n    <List\n      label=\"Blending Mode\"\n      value={$layerStackStore.blendingMode}\n      options={blendingOptions}\n      on:change={(e) => layerStackStore.setBlendingMode(e.detail.value)}\n    />\n\n    <Folder title=\"Mask Layer\" expanded={false}>\n      <Checkbox\n        label=\"Enable Masking\"\n        value={$maskLayerStore.enableMasking}\n        on:change={(e) => maskLayerStore.setEnableMasking(e.detail.value)}\n      />\n      <Slider\n        label=\"Radius\"\n        min={0}\n        max={500}\n        step={1}\n        value={$maskLayerStore.radius}\n        on:change={(e) => maskLayerStore.setRadius(e.detail.value)}\n      />\n      <Slider\n        label=\"Fade Out Duration\"\n        min={0}\n        max={10}\n        step={0.01}\n        value={$maskLayerStore.fadeOutDuration}\n        on:change={(e) => maskLayerStore.setFadeOutDuration(e.detail.value)}\n      />\n      <Slider\n        label=\"Auto Fade Duration\"\n        min={0}\n        max={10}\n        step={0.01}\n        value={$maskLayerStore.autoFadeDuration}\n        on:change={(e) => maskLayerStore.setAutoFadeDuration(e.detail.value)}\n      />\n    </Folder>\n\n    <Folder title=\"Noise Layer\" expanded={false}>\n      <Checkbox\n        label=\"Layer Enabled\"\n        value={$noiseLayerStore.enabled}\n        on:change={(e) => noiseLayerStore.setEnabled(e.detail.value)}\n      />\n      <Slider\n        label=\"Gain\"\n        min={0}\n        max={20}\n        step={0.1}\n        value={$noiseLayerStore.gain}\n        on:change={(e) => noiseLayerStore.setGain(e.detail.value)}\n      />\n      <List\n        label=\"Noise Type\"\n        bind:value={$noiseTypeStore}\n        options={noiseTypeOptions}\n      />\n\n      {#if $noiseTypeStore === \"PerlinNoise2DTime\"}\n        <Folder title=\"PerlinNoise2DTime Params\">\n          <Slider\n            label=\"Seed\"\n            value={$perlinStore.seed}\n            min={0}\n            max={4294967295}\n            step={1}\n            on:change={(e) => perlinStore.setSeed(e.detail.value)}\n          />\n        </Folder>\n      {/if}\n\n      {#if $noiseTypeStore === \"FlowNoise2DTime\"}\n        <Folder title=\"FlowNoise2DTime Params\">\n          <Slider\n            label=\"Seed\"\n            value={$flowStore.seed}\n            min={0}\n            max={4294967295}\n            step={1}\n            on:change={(e) => flowStore.setSeed(e.detail.value)}\n          />\n          <Slider\n            label=\"Spin Variation\"\n            value={$flowStore.spinVariation}\n            min={0}\n            max={1}\n            step={0.01}\n            on:change={(e) => flowStore.setSpinVariation(e.detail.value)}\n          />\n          <Slider\n            label=\"N\"\n            value={$flowStore.N}\n            min={1}\n            max={512}\n            step={1}\n            on:change={(e) => flowStore.setN(e.detail.value)}\n          />\n        </Folder>\n      {/if}\n\n      {#if $noiseTypeStore === \"FBMNoise2DTime\"}\n        <Folder title=\"FBMNoise2DTime Params\">\n          <List\n            label=\"Base Type\"\n            value={$fbmStore.baseType}\n            options={[\n              { text: \"PerlinNoise2DTime\", value: \"PerlinNoise2DTime\" },\n              { text: \"FlowNoise2DTime\", value: \"FlowNoise2DTime\" },\n            ]}\n            on:change={(e) => fbmStore.setBaseType(e.detail.value)}\n          />\n\n          {#if $fbmStore.baseType === \"PerlinNoise2DTime\"}\n            <Folder title=\"Perlin Base Params\">\n              <Slider\n                label=\"Seed\"\n                value={$fbmStore.perlinBaseParams.seed}\n                min={0}\n                max={4294967295}\n                step={1}\n                on:change={(e) =>\n                  fbmStore.setPerlinBaseParams({\n                    ...$turbulenceStore.perlinBaseParams,\n                    seed: e.detail.value,\n                  })}\n              />\n            </Folder>\n          {:else if $fbmStore.baseType === \"FlowNoise2DTime\"}\n            <Folder title=\"Flow Base Params\">\n              <Slider\n                label=\"Flow Seed\"\n                value={$fbmStore.flowBaseParams.seed}\n                min={0}\n                max={4294967295}\n                step={1}\n                on:change={(e) =>\n                  fbmStore.setFlowBaseParams({\n                    ...$fbmStore.flowBaseParams,\n                    seed: e.detail.value,\n                  })}\n              />\n              <Slider\n                label=\"Spin Variation\"\n                value={$fbmStore.flowBaseParams.spinVariation}\n                min={0}\n                max={1}\n                step={0.01}\n                on:change={(e) =>\n                  fbmStore.setFlowBaseParams({\n                    ...$fbmStore.flowBaseParams,\n                    spinVariation: e.detail.value,\n                  })}\n              />\n              <Slider\n                label=\"N\"\n                value={$flowStore.N}\n                min={1}\n                max={512}\n                step={1}\n                on:change={(e) => flowStore.setN(e.detail.value)}\n              />\n            </Folder>\n          {/if}\n\n          <Folder title=\"Octave Params\">\n            <Slider\n              label=\"Octaves\"\n              value={$fbmStore.octaves}\n              min={1}\n              max={8}\n              step={1}\n              on:change={(e) => fbmStore.setOctaves(e.detail.value)}\n            />\n            <Slider\n              label=\"Persistence\"\n              value={$fbmStore.persistence}\n              min={0}\n              max={1}\n              step={0.01}\n              on:change={(e) => fbmStore.setPersistence(e.detail.value)}\n            />\n            <Slider\n              label=\"Lacunarity\"\n              value={$fbmStore.lacunarity}\n              min={1}\n              max={4}\n              step={0.01}\n              on:change={(e) => fbmStore.setLacunarity(e.detail.value)}\n            />\n          </Folder>\n        </Folder>\n      {/if}\n\n      {#if $noiseTypeStore === \"TurbulenceNoise2DTime\"}\n        <Folder title=\"TurbulenceNoise2DTime Params\">\n          <List\n            label=\"Base Type\"\n            value={$turbulenceStore.baseType}\n            options={[\n              { text: \"PerlinNoise2DTime\", value: \"PerlinNoise2DTime\" },\n              { text: \"FlowNoise2DTime\", value: \"FlowNoise2DTime\" },\n            ]}\n            on:change={(e) => turbulenceStore.setBaseType(e.detail.value)}\n          />\n\n          {#if $turbulenceStore.baseType === \"PerlinNoise2DTime\"}\n            <Folder title=\"Perlin Base Params\">\n              <Slider\n                label=\"Seed\"\n                value={$turbulenceStore.perlinBaseParams.seed}\n                min={0}\n                max={4294967295}\n                step={1}\n                on:change={(e) =>\n                  turbulenceStore.setPerlinBaseParams({\n                    ...$turbulenceStore.perlinBaseParams,\n                    seed: e.detail.value,\n                  })}\n              />\n            </Folder>\n          {:else if $turbulenceStore.baseType === \"FlowNoise2DTime\"}\n            <Folder title=\"Flow Base Params\">\n              <Slider\n                label=\"Flow Seed\"\n                value={$turbulenceStore.flowBaseParams.seed}\n                min={0}\n                max={4294967295}\n                step={1}\n                on:change={(e) =>\n                  turbulenceStore.setFlowBaseParams({\n                    ...$turbulenceStore.flowBaseParams,\n                    seed: e.detail.value,\n                  })}\n              />\n              <Slider\n                label=\"Spin Variation\"\n                value={$turbulenceStore.flowBaseParams.spinVariation}\n                min={0}\n                max={1}\n                step={0.01}\n                on:change={(e) =>\n                  turbulenceStore.setFlowBaseParams({\n                    ...$turbulenceStore.flowBaseParams,\n                    spinVariation: e.detail.value,\n                  })}\n              />\n              <Slider\n                label=\"N\"\n                value={$flowStore.N}\n                min={1}\n                max={512}\n                step={1}\n                on:change={(e) => flowStore.setN(e.detail.value)}\n              />\n            </Folder>\n          {/if}\n\n          <Folder title=\"Octave Params\">\n            <Slider\n              label=\"Octaves\"\n              value={$turbulenceStore.octaves}\n              min={1}\n              max={8}\n              step={1}\n              on:change={(e) => turbulenceStore.setOctaves(e.detail.value)}\n            />\n            <Slider\n              label=\"Persistence\"\n              value={$turbulenceStore.persistence}\n              min={0}\n              max={1}\n              step={0.01}\n              on:change={(e) => turbulenceStore.setPersistence(e.detail.value)}\n            />\n            <Slider\n              label=\"Lacunarity\"\n              value={$turbulenceStore.lacunarity}\n              min={1}\n              max={4}\n              step={0.01}\n              on:change={(e) => turbulenceStore.setLacunarity(e.detail.value)}\n            />\n          </Folder>\n        </Folder>\n      {/if}\n\n      <Slider\n        label=\"Frequency\"\n        min={0.001}\n        max={1}\n        step={0.001}\n        value={$noiseSamplingStore.frequency}\n        on:change={(e) => noiseSamplingStore.setFrequency(e.detail.value)}\n      />\n      <Slider\n        label=\"Noise Time Scale\"\n        min={0.1}\n        max={1000}\n        step={0.1}\n        value={$noiseSamplingStore.timeScale}\n        on:change={(e) => noiseSamplingStore.setTimeScale(e.detail.value)}\n      />\n    </Folder>\n\n    <Folder title=\"Typography Layer\" expanded={false}>\n      <Checkbox\n        label=\"Layer Enabled\"\n        value={$typographyLayerStore.enabled}\n        on:change={(e) => typographyLayerStore.setEnabled(e.detail.value)}\n      />\n      <Slider\n        label=\"Gain\"\n        min={0}\n        max={20}\n        step={0.1}\n        value={$typographyLayerStore.gain}\n        on:change={(e) => typographyLayerStore.setGain(e.detail.value)}\n      />\n\n      <Folder title=\"Text\" expanded={false}>\n        <Text\n          value={$typographyStore.text}\n          label=\"Text\"\n          on:change={(e) => typographyStore.setText(e.detail.value)}\n        />\n        <List\n          value={$typographyStore.fontFamily}\n          label=\"Font Family\"\n          options={fontFamilyOptions}\n          on:change={(e) => typographyStore.setFontFamily(e.detail.value)}\n        />\n        <Checkbox\n          value={$typographyStore.fontSizeAuto}\n          label=\"Auto Font Size\"\n          on:change={(e) => typographyStore.setFontSizeAuto(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.padding}\n          label=\"Padding for Auto Font Size\"\n          min={0}\n          max={100}\n          step={1}\n          disabled={!$typographyStore.fontSizeAuto}\n          on:change={(e) => typographyStore.setPadding(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.fontSizeManual}\n          label=\"Manual Font Size\"\n          min={8}\n          max={200}\n          step={1}\n          disabled={$typographyStore.fontSizeAuto}\n          on:change={(e) => typographyStore.setFontSizeManual(e.detail.value)}\n        />\n      </Folder>\n\n      <Folder title=\"Fill & Stroke\" expanded={false}>\n        <Color\n          value={$typographyStore.fillStyle}\n          label=\"Fill Style\"\n          on:change={(e) => typographyStore.setFillStyle(e.detail.value)}\n        />\n        <Color\n          value={$typographyStore.strokeStyle}\n          label=\"Stroke Style\"\n          on:change={(e) => typographyStore.setStrokeStyle(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.strokeWidth}\n          label=\"Stroke Width\"\n          min={0}\n          max={10}\n          step={1}\n          on:change={(e) => typographyStore.setStrokeWidth(e.detail.value)}\n        />\n        <Checkbox\n          value={$typographyStore.useGradient}\n          label=\"Use Gradient Fill\"\n          on:change={(e) => typographyStore.setUseGradient(e.detail.value)}\n        />\n        {#each [0, 1, 2] as idx}\n          <Color\n            value={$typographyStore.gradientColors[idx]}\n            label={gradientLabels[idx]}\n            on:change={(e) => {\n              const newColors = [...$typographyStore.gradientColors];\n              newColors[idx] = e.detail.value;\n              typographyStore.setGradientColors(newColors);\n            }}\n          />\n        {/each}\n      </Folder>\n\n      <Folder title=\"Glow & Shadow\" expanded={false}>\n        <Color\n          value={$typographyStore.glowColor}\n          label=\"Glow Color\"\n          on:change={(e) => typographyStore.setGlowColor(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.glowSize}\n          label=\"Glow Size\"\n          min={0}\n          max={100}\n          step={1}\n          on:change={(e) => typographyStore.setGlowSize(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.shadowOffsetX}\n          label=\"Shadow Offset X\"\n          min={-50}\n          max={50}\n          step={1}\n          on:change={(e) => typographyStore.setShadowOffsetX(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.shadowOffsetY}\n          label=\"Shadow Offset Y\"\n          min={-50}\n          max={50}\n          step={1}\n          on:change={(e) => typographyStore.setShadowOffsetY(e.detail.value)}\n        />\n      </Folder>\n\n      <Folder title=\"Blur\" expanded={false}>\n        <Slider\n          value={$typographyStore.blurAmount}\n          label=\"Blur Amount\"\n          min={0}\n          max={50}\n          step={1}\n          on:change={(e) => typographyStore.setBlurAmount(e.detail.value)}\n        />\n      </Folder>\n\n      <Folder title=\"Inner Glow\" expanded={false}>\n        <Color\n          value={$typographyStore.innerGlowColor}\n          label=\"Inner Glow Color\"\n          on:change={(e) => typographyStore.setInnerGlowColor(e.detail.value)}\n        />\n        <Slider\n          value={$typographyStore.innerGlowBlur}\n          label=\"Inner Glow Blur\"\n          min={0}\n          max={50}\n          step={1}\n          on:change={(e) => typographyStore.setInnerGlowBlur(e.detail.value)}\n        />\n      </Folder>\n\n      <Folder title=\"Background\" expanded={false}>\n        <Color\n          value={$typographyStore.backgroundColor}\n          label=\"Background Color\"\n          on:change={(e) => typographyStore.setBackgroundColor(e.detail.value)}\n        />\n      </Folder>\n    </Folder>\n  </Folder>\n\n  <Folder title=\"Simulation\">\n    <Checkbox\n      label=\"Animating\"\n      value={$simulationStore.animating}\n      on:change={(e) => simulationStore.setAnimating(e.detail.value)}\n    />\n    <Slider\n      label=\"Time Scale\"\n      min={0.1}\n      max={20}\n      step={0.1}\n      value={$simulationStore.timeScale}\n      on:change={(e) => simulationStore.setSpeed(e.detail.value)}\n    />\n    <Checkbox\n      label=\"Use advanceTime()\"\n      value={$simulationStore.useAdvanceTime}\n      on:change={(e) => simulationStore.setUseAdvanceTime(e.detail.value)}\n    />\n  </Folder>\n\n  <Folder title=\"UI\">\n    <List\n      label=\"Color Mode\"\n      value={$uiStore.colorMode}\n      options={colorModeOptions}\n      on:change={(e) => uiStore.setColorMode(e.detail.value)}\n    />\n    <Checkbox\n      label=\"Show Scale Visualization\"\n      value={$uiStore.showScaleVisualization}\n      on:change={(e) => uiStore.setShowScaleVisualization(e.detail.value)}\n    />\n  </Folder>\n\n  <Folder title=\"Actions\" expanded={true}>\n    <Button\n      title=\"Pause\"\n      on:click={() =>\n        simulationStore.update((a) => ({ ...a, animating: false }))}\n    />\n    <Button\n      title=\"Resume\"\n      on:click={() =>\n        simulationStore.update((a) => ({ ...a, animating: true }))}\n    />\n    <Button title=\"Reset to Defaults\" on:click={resetAll} />\n  </Folder>\n</Pane>\n","import { get } from \"svelte/store\";\n\nimport { buildTypographyCanvas } from \"$lib/typography/build-typography-canvas.js\";\nimport { ImageDataAdapter } from \"$lib/layers/image-data-adapter.js\";\n\nimport { NullNoise2DTime } from \"$lib/noise/null-noise-2d-time.js\";\nimport { instantiateNoise } from \"$lib/noise/instantiate-noise.js\";\nimport { NoiseAdapter } from \"$lib/layers/noise-adapter.js\";\n\nimport { LayerStack } from \"$lib/layers/layer-stack.js\";\nimport { MaskDecoratorCircle } from \"$lib/layers/mask-decorator-circle.js\";\nimport {\n  additiveBlending,\n  subtractBlending,\n  multiplyBlending,\n  screenBlending,\n  overlayBlending,\n  maxBlending,\n  minBlending,\n  averageBlending,\n} from \"$lib/layers/blending.js\";\n\nimport { FpsChart } from \"$apps/shared/utils/fps-chart.js\";\n\nimport { layerStackStore } from \"$apps/shared/stores/layer-stack.js\";\nimport { maskLayerStore } from \"$apps/shared/stores/mask-layer.js\";\nimport {\n  noiseLayerStore,\n  noiseLayerDirtyFlagStore,\n} from \"$apps/shared/stores/noise-layer.js\";\nimport {\n  noiseTypeStore,\n  noiseTypeToStore,\n  noiseDirtyFlagsStore,\n} from \"$apps/shared/stores/noise.js\";\nimport {\n  noiseSamplingDirtyFlagsStore,\n  noiseSamplingStore,\n} from \"$apps/shared/stores/noise-sampling.js\";\nimport {\n  typographyLayerStore,\n  typographyLayerDirtyFlagStore,\n} from \"$apps/shared/stores/typography-layer.js\";\nimport {\n  typographyStore,\n  typographyDirtyFlagStore,\n} from \"$apps/shared/stores/typography.js\";\nimport { simulationStore } from \"$apps/shared/stores/simulation.js\";\nimport { COLOR_MODE, uiStore } from \"$apps/shared/stores/ui.js\";\n\nimport Controls from \"./Controls.svelte\";\n\n// --- Controls ---\n\nconst controls = new Controls({\n  target: document.getElementById(\"ui\"),\n});\n\n// --- Charts ---\n\nconst fpsChart = new FpsChart(document.getElementById(\"fps-canvas\"));\n\n// --- Demo canvas updating and rendering ---\n\nconst canvas = document.getElementById(\"demo-canvas\");\nconst ctx = canvas.getContext(\"2d\");\nconst width = canvas.width,\n  height = canvas.height;\n\nconst state = {\n  t: 0,\n};\n\n// Typography layer\nconst blankImageData = new ImageData(width, height);\nconst typographyLayer = new ImageDataAdapter(\n  blankImageData,\n  width,\n  height,\n  true,\n  1,\n  2\n);\n\nfunction updateTypography() {\n  const layerParams = get(typographyLayerStore);\n  typographyLayer.enabled = layerParams.enabled;\n\n  if (typographyLayer.enabled) {\n    // Layer\n    if (get(typographyLayerDirtyFlagStore)) {\n      typographyLayer.gain = layerParams.gain;\n      typographyLayerDirtyFlagStore.clear();\n    }\n\n    // Typography\n    if (get(typographyDirtyFlagStore)) {\n      const typographyParams = get(typographyStore);\n      const typographyCanvas = buildTypographyCanvas(\n        typographyParams,\n        width,\n        height\n      );\n      typographyLayer.imageData = typographyCanvas\n        .getContext(\"2d\")\n        .getImageData(0, 0, width, height);\n\n      typographyDirtyFlagStore.clear();\n    }\n  }\n}\n\nupdateTypography();\n\n// Noise layer\nlet noise = new NullNoise2DTime();\n\nconst noiseLayerParams = get(noiseLayerStore);\nconst noiseSamplingParams = get(noiseSamplingStore);\nconst noiseLayer = new NoiseAdapter(\n  noise,\n  noiseLayerParams.enabled,\n  noiseLayerParams.gain,\n  noiseSamplingParams.frequency,\n  noiseSamplingParams.timeScale\n);\n\nfunction updateNoise() {\n  const noiseLayerParams = get(noiseLayerStore);\n\n  noiseLayer.enabled = noiseLayerParams.enabled;\n\n  if (noiseLayer.enabled) {\n    // Layer\n    if (get(noiseLayerDirtyFlagStore)) {\n      noiseLayer.gain = noiseLayerParams.gain;\n      noiseLayerDirtyFlagStore.clear();\n    }\n\n    // Noise sampling parameters\n    const noiseSamplingParams = get(noiseSamplingStore);\n    if (get(noiseSamplingDirtyFlagsStore)) {\n      noiseLayer.frequency = noiseSamplingParams.frequency;\n      noiseLayer.noiseTimeScale = noiseSamplingParams.timeScale;\n    }\n\n    // Noise\n    const noiseType = get(noiseTypeStore);\n    const noiseStore = noiseTypeToStore[noiseType];\n    if (!noiseStore) throw new Error(\"Unknown noise type: \" + noiseType);\n\n    const flags = get(noiseDirtyFlagsStore);\n    if (flags[noiseType] || flags.noiseType) {\n      // The noiseType or a parameter of the current noiseType changed\n      const noiseParams = get(noiseStore);\n      noise = instantiateNoise(noiseType, noiseParams);\n      noiseLayer.attachNoise(noise);\n      noiseDirtyFlagsStore.clear(noiseType);\n      noiseDirtyFlagsStore.clear(\"noiseType\");\n    }\n  }\n}\n\nupdateNoise();\n\n// Noise layer mask\nconst maskLayerParams = get(maskLayerStore);\n\nconst maskLayer = new MaskDecoratorCircle(noiseLayer, {\n  enableMasking: maskLayerParams.enableMasking,\n  radius: maskLayerParams.radius,\n  fadeOutDuration: maskLayerParams.fadeOutDuration,\n  autoFadeDuration: maskLayerParams.autoFadeDuration,\n});\n\nlet isMouseDown = false;\n\nfunction handleMouseDown(ev) {\n  if (!maskLayer.enabled || !maskLayer.enableMasking) return;\n  isMouseDown = true;\n  const rect = canvas.getBoundingClientRect();\n  const x = ((ev.clientX - rect.left) / rect.width) * width;\n  const y = ((ev.clientY - rect.top) / rect.height) * height;\n  maskLayer.activate(x, y, state.t);\n}\n\nfunction handleMouseMove(ev) {\n  if (!maskLayer.enabled || !maskLayer.enableMasking) return;\n  if (!isMouseDown) return;\n  const rect = canvas.getBoundingClientRect();\n  const x = ((ev.clientX - rect.left) / rect.width) * width;\n  const y = ((ev.clientY - rect.top) / rect.height) * height;\n  maskLayer.update(x, y, state.t);\n}\n\nfunction handleMouseUp(ev) {\n  if (!maskLayer.enabled || !maskLayer.enableMasking) return;\n  if (!isMouseDown) return;\n  isMouseDown = false;\n  maskLayer.deactivate(state.t);\n}\n\nfunction addMaskListeners() {\n  canvas.addEventListener(\"mousedown\", handleMouseDown);\n  canvas.addEventListener(\"mousemove\", handleMouseMove);\n  canvas.addEventListener(\"mouseup\", handleMouseUp);\n}\n\nfunction removeMaskListeners() {\n  canvas.removeEventListener(\"mousedown\", handleMouseDown);\n  canvas.removeEventListener(\"mousemove\", handleMouseMove);\n  canvas.removeEventListener(\"mouseup\", handleMouseUp);\n}\n\nlet maskListenersAttached = false;\n\nfunction updateMask() {\n  const maskLayerParams = get(maskLayerStore);\n  maskLayer.enableMasking = maskLayerParams.enableMasking;\n  maskLayer.radius = maskLayerParams.radius;\n  maskLayer.fadeOutDuration = maskLayerParams.fadeOutDuration;\n  maskLayer.autoFadeDuration = maskLayerParams.autoFadeDuration;\n\n  if (maskLayer.enableMasking && !maskListenersAttached) {\n    addMaskListeners();\n    maskListenersAttached = true;\n  } else if (!maskLayer.enableMasking && maskListenersAttached) {\n    removeMaskListeners();\n    maskListenersAttached = false;\n  }\n}\n\n// Layer stack\nconst blendingFunctions = {\n  additive: additiveBlending,\n  subtract: subtractBlending,\n  multiply: multiplyBlending,\n  screen: screenBlending,\n  overlay: overlayBlending,\n  max: maxBlending,\n  min: minBlending,\n  average: averageBlending,\n};\n\nconst stack = new LayerStack(\n  [typographyLayer, maskLayer],\n  blendingFunctions[get(layerStackStore).blendingMode]\n);\n\n// Main loop\nfunction update(now, dt) {\n  stack.blendingFunc = blendingFunctions[get(layerStackStore).blendingMode];\n\n  updateTypography();\n  updateNoise();\n  updateMask();\n\n  const { animating, timeScale, useAdvanceTime } = get(simulationStore);\n\n  if (animating) {\n    const newT = state.t + dt * timeScale;\n    state.t = newT;\n\n    if (useAdvanceTime) {\n      stack.advanceTime(dt * timeScale);\n    } else {\n      stack.setTime(newT);\n    }\n  }\n\n  fpsChart.record(now);\n}\n\nfunction renderGrid(\n  ctx,\n  width,\n  height,\n  frequency,\n  color = \"rgba(255, 255, 255, 0.2)\"\n) {\n  const cellSize = 1 / frequency;\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 1;\n  ctx.beginPath();\n  // Vertical lines\n  for (let x = 0; x < width; x += cellSize) {\n    ctx.moveTo(x, 0);\n    ctx.lineTo(x, height);\n  }\n  // Horizontal lines\n  for (let y = 0; y < height; y += cellSize) {\n    ctx.moveTo(0, y);\n    ctx.lineTo(width, y);\n  }\n  ctx.stroke();\n}\n\nfunction renderPieChart(\n  ctx,\n  x,\n  y,\n  radius,\n  progress,\n  color = \"rgba(255, 0, 0, 0.5)\"\n) {\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n  ctx.arc(x, y, radius, -Math.PI / 2, -Math.PI / 2 + Math.PI * 2 * progress);\n  ctx.closePath();\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\nfunction render() {\n  const { frequency, noiseTimeScale } = get(noiseLayerStore);\n  const { colorMode, showScaleVisualization } = get(uiStore);\n\n  const img = ctx.createImageData(width, height);\n  let i = 0;\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const value = stack.getValue(x, y);\n      let r, g, b;\n      switch (colorMode) {\n        case COLOR_MODE.HEIGHT_BANDS: {\n          const bands = 12;\n          const bandIndex = Math.floor(value * bands);\n          const isBlack = bandIndex % 2 === 0;\n          r = g = b = isBlack ? 0 : 255;\n          break;\n        }\n        case COLOR_MODE.GEOGRAPHICAL: {\n          if (value >= 0.5) {\n            r = 0;\n            g = Math.floor(255 * value);\n            b = 0;\n          } else {\n            r = 0;\n            g = 0;\n            b = Math.floor(255 * value);\n          }\n          break;\n        }\n        case COLOR_MODE.GRAYSCALE:\n        default: {\n          const c = Math.floor(255 * value);\n          r = g = b = c;\n          break;\n        }\n      }\n\n      img.data[i++] = r;\n      img.data[i++] = g;\n      img.data[i++] = b;\n      img.data[i++] = 255;\n    }\n  }\n  ctx.putImageData(img, 0, 0);\n\n  if (showScaleVisualization) {\n    renderGrid(ctx, width, height, frequency);\n    const period = 1 / (frequency * noiseTimeScale);\n    const progress = (state.t % period) / period;\n    renderPieChart(ctx, width - 50, 50, 20, progress);\n  }\n\n  fpsChart.draw();\n}\n\nlet lastNow;\nlet firstFrame = true;\n\nfunction loop(now) {\n  if (firstFrame) {\n    lastNow = now;\n    firstFrame = false;\n    requestAnimationFrame(loop);\n    return;\n  }\n  const dt = (now - lastNow) / 1000;\n  lastNow = now;\n  update(now, dt);\n  render();\n  requestAnimationFrame(loop);\n}\n\nrequestAnimationFrame(loop);\n","export class FpsChart {\n  constructor(canvas, { width = 100, height = 10, maxFps = 60 } = {}) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    this.width = width;\n    this.height = height;\n    this.maxFps = maxFps;\n    this.history = new Array(width).fill(0);\n    this.frameCount = 0;\n    this.lastFpsUpdate = performance.now();\n    this.currentFps = 0;\n  }\n\n  record(now = performance.now()) {\n    this.frameCount++;\n    const elapsed = now - this.lastFpsUpdate;\n    if (elapsed >= 200) {\n      this.currentFps = this.frameCount / (elapsed / 1000);\n      this.frameCount = 0;\n      this.lastFpsUpdate = now;\n      this.history.push(this.currentFps);\n      if (this.history.length > this.width) this.history.shift();\n    }\n  }\n\n  draw() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.ctx.fillStyle = \"#4af\";\n    for (let i = 0; i < this.history.length; i++) {\n      const h = Math.round((this.history[i] / this.maxFps) * this.height);\n      this.ctx.fillRect(i, this.height - h, 1, h);\n    }\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.font = \"8px monospace\";\n    this.ctx.fillText(Math.round(this.currentFps) + \" fps\", 2, 8);\n  }\n}\n","/**\n * Adapter for image data, conforming to the Layer API.\n * Samples pixel values from an image data array and returns them normalized to the range [0,1].\n *\n * Participation is controlled by the `enabled` flag. If the layer is disabled,\n * the LayerStack must not call `getValue`, `setTime`, or `advanceTime` on it.\n * Calling `getValue` on a disabled layer will throw an exception.\n *\n * @implements {Layer}\n */\nexport class ImageDataAdapter {\n  /**\n   * Whether this layer is active in the stack.\n   * @type {boolean}\n   * @public\n   */\n  enabled = true;\n\n  /**\n   * Output multiplier for layer values.\n   * @type {number}\n   * @public\n   */\n  gain = 1.0;\n\n  /**\n   * The underlying ImageData object.\n   * @type {ImageData}\n   * @public\n   */\n  imageData;\n\n  /**\n   * The width of the image.\n   * @type {number}\n   * @public\n   */\n  width;\n\n  /**\n   * The height of the image.\n   * @type {number}\n   * @public\n   */\n  height;\n\n  /**\n   * The channel to sample (0=red, 1=green, 2=blue, 3=alpha).\n   * @type {number}\n   * @public\n   */\n  channel;\n\n  /**\n   * Create a new ImageDataAdapter.\n   * @param {ImageData} imageData - The image data.\n   * @param {number} width - image width\n   * @param {number} height - image height\n   * @param {boolean} [enabled=true] - Whether the layer is enabled.\n   * @param {number} [gain=1] - Output multiplier for layer values.\n   * @param {number} [channel=3] - The channel to sample: 0=red, 1=green, 2=blue, 3=alpha.\n   */\n  constructor(imageData, width, height, enabled = true, gain = 1, channel = 3) {\n    this.imageData = imageData;\n    this.width = width;\n    this.height = height;\n    this.enabled = enabled;\n    this.gain = gain;\n    this.channel = channel;\n  }\n\n  /**\n   * Get the normalized value at (x, y) from the specified channel.\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} Normalized value [0,1].\n   */\n  getValue(x, y) {\n    if (!this.enabled) {\n      throw new Error(\"getValue() called on disabled layer\");\n    }\n    const xi = Math.floor(x);\n    const yi = Math.floor(y);\n    if (xi >= 0 && xi < this.width && yi >= 0 && yi < this.height) {\n      const idx = (yi * this.width + xi) * 4;\n      return (this.imageData.data[idx + this.channel] / 255) * this.gain;\n    }\n    return 0;\n  }\n\n  get time() {\n    // No time-based behavior, but required by Layer API.\n    return undefined;\n  }\n\n  setTime(t) {\n    if (!this.enabled) {\n      throw new Error(\"setTime() called on disabled layer\");\n    }\n    // No-op\n  }\n\n  advanceTime(dt) {\n    if (!this.enabled) {\n      throw new Error(\"advanceTime() called on disabled layer\");\n    }\n    // No-op\n  }\n}\n","import { TypographyBuilder } from \"./typography-builder.js\";\n\n/**\n * Builds a canvas element containing rendered typography using the given parameters.\n *\n * @param {Object} params - Typography parameters (text, fontFamily, fontSize, padding, fillStyle, etc.).\n * @param {number} width - The width of the canvas to create.\n * @param {number} height - The height of the canvas to create.\n * @returns {HTMLCanvasElement} The canvas element with the rendered typography.\n */\nexport function buildTypographyCanvas(params, width, height) {\n  const builder = TypographyBuilder.create(width, height)\n    .text(params.text)\n    .fontFamily(params.fontFamily)\n    .padding(params.padding)\n    .fillStyle(params.fillStyle)\n    .strokeStyle(params.strokeStyle, params.strokeWidth)\n    .background(params.backgroundColor)\n    .glow(\n      params.glowColor,\n      params.glowSize,\n      params.shadowOffsetX,\n      params.shadowOffsetY\n    )\n    .blur(params.blurAmount)\n    .innerGlow(params.innerGlowColor, params.innerGlowBlur);\n\n  if (params.useGradient) {\n    builder.gradient(params.gradientColors);\n  }\n  if (params.fontSizeAuto) {\n    builder.autoFontSize(true);\n  } else {\n    builder.fontSize(params.fontSizeManual);\n  }\n\n  return builder.toCanvas();\n}\n","/**\n * NullNoise2DTime is a dummy 2D noise implementation that always returns zero.\n *\n * This class implements the Noise2DTime interface but produces a constant, featureless field.\n *\n * Implements the Noise2DTime API:\n * - get time(): Readonly accessor for the current time parameter (always zero).\n * - setTime(t): No operation.\n * - advanceTime(dt): No operation.\n * - getValue(x, y): Always returns 0.\n *\n * @implements {Noise2DTime}\n */\nexport class NullNoise2DTime {\n  /**\n   * The current time parameter (always zero for NullNoise2DTime).\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return 0;\n  }\n\n  /**\n   * Set the time parameter (no-op for NullNoise2DTime).\n   * @param {number} t\n   */\n  setTime(t) {}\n\n  /**\n   * Advance the internal time by a delta (no-op for NullNoise2DTime).\n   * @param {number} dt\n   */\n  advanceTime(dt) {}\n\n  /**\n   * Returns the noise value at (x, y), always zero for NullNoise2DTime.\n   * @param {number} x\n   * @param {number} y\n   * @returns {number} Always 0.\n   */\n  getValue(x, y) {\n    return 0;\n  }\n}\n","/**\n * Adapter for Noise2DTime instances, conforming to the Layer API.\n * Samples noise values for (x, y) and returns them normalized to the range [0,1], scaled by gain.\n *\n * Participation is controlled by the `enabled` flag. If the layer is disabled,\n * the LayerStack must not call `getValue`, `setTime`, or `advanceTime` on it.\n * Calling `getValue` on a disabled layer will throw an exception.\n *\n * @implements {Layer}\n */\nexport class NoiseAdapter {\n  /**\n   * Whether this layer is active in the stack.\n   * If false, the LayerStack must not query this layer for values or state.\n   * @type {boolean}\n   * @public\n   */\n  enabled = true;\n\n  /**\n   * Output multiplier for layer values.\n   * @type {number}\n   * @public\n   */\n  gain = 1.0;\n\n  /**\n   * Frequency multiplier for noise coordinates.\n   * @type {number}\n   * @public\n   */\n  frequency;\n\n  /**\n   * Time scale multiplier for noise time evolution.\n   * @type {number}\n   * @public\n   */\n  noiseTimeScale;\n\n  /**\n   * Cached last simulation time set on this adapter.\n   * Used to synchronize newly attached noise instances.\n   * @type {number}\n   * @private\n   */\n  #lastTime = 0;\n\n  /**\n   * The wrapped Noise2DTime instance (private).\n   * @type {Noise2DTime}\n   * @private\n   */\n  #noise;\n\n  /**\n   * Create a new NoiseAdapter.\n   * @param {Noise2DTime} noise - A concrete Noise2DTime instance.\n   * @param {boolean} [enabled=true] - Whether the layer is enabled.\n   * @param {number} [gain=1] - Output multiplier.\n   * @param {number} [frequency=1] - Noise frequency.\n   * @param {number} [noiseTimeScale=1] - Noise temporal evolution scale.\n   */\n  constructor(\n    noise,\n    enabled = true,\n    gain = 1,\n    frequency = 1,\n    noiseTimeScale = 1\n  ) {\n    this.#noise = noise;\n    this.enabled = enabled;\n    this.gain = gain;\n    this.frequency = frequency;\n    this.noiseTimeScale = noiseTimeScale;\n  }\n\n  /**\n   * Read-only access to the wrapped Noise2DTime instance.\n   * @returns {Noise2DTime}\n   */\n  get noise() {\n    return this.#noise;\n  }\n\n  /**\n   * Attach a new Noise2DTime instance to this adapter and synchronize its internal time.\n   * The new noise instance will immediately receive the last simulation time set on the adapter,\n   * mapped through the current frequency and noiseTimeScale.\n   *\n   * @param {Noise2DTime} newNoise - The new Noise2DTime instance to attach.\n   */\n  attachNoise(newNoise) {\n    this.#noise = newNoise;\n    this.#noise.setTime(this.#lastTime * this.noiseTimeScale * this.frequency);\n  }\n\n  /**\n   * Get the normalized noise value at (x, y) for the given frequency, scaled by gain.\n   * Throws if the layer is disabled.\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} Normalized value [0,1], scaled by gain.\n   * @throws {Error} if the layer is disabled.\n   */\n  getValue(x, y) {\n    if (!this.enabled) {\n      throw new Error(\"getValue() called on disabled layer\");\n    }\n    // Map output from [-1,1] to [0,1] and scale by gain\n    return (\n      this.gain *\n      0.5 *\n      (this.#noise.getValue(x * this.frequency, y * this.frequency) + 1)\n    );\n  }\n\n  /**\n   * The current time state of the layer.\n   * @type {number}\n   * @readonly\n   */\n  get time() {\n    return this.#noise.time;\n  }\n\n  /**\n   * Set the current time for the underlying noise, applying noiseTimeScale and frequency.\n   * Throws if the layer is disabled.\n   * @param {number} t - Time value.\n   * @throws {Error} if the layer is disabled.\n   */\n  setTime(t) {\n    if (!this.enabled) {\n      throw new Error(\"setTime() called on disabled layer\");\n    }\n    this.#lastTime = t;\n    this.#noise.setTime(t * this.noiseTimeScale * this.frequency);\n  }\n\n  /**\n   * Advance the current time for the underlying noise, applying noiseTimeScale and frequency.\n   * Throws if the layer is disabled.\n   * @param {number} dt - Time delta.\n   * @throws {Error} if the layer is disabled.\n   */\n  advanceTime(dt) {\n    if (!this.enabled) {\n      throw new Error(\"advanceTime() called on disabled layer\");\n    }\n    this.#lastTime += dt;\n    this.#noise.advanceTime(dt * this.noiseTimeScale * this.frequency);\n  }\n}\n","import { multiplyBlending } from \"./blending.js\";\n\n/**\n * A stack of layers that can be composited using a custom blending function.\n * Each layer must conform to the Layer API, which defines the required methods.\n *\n * The blending function determines how layer values are combined. The default blending\n * function multiplies the values of all layers.\n */\nexport class LayerStack {\n  /**\n   * Create a new LayerStack.\n   * @param {Array<Layer>} layers - Array of layers to include in the stack. Each must conform to the Layer API.\n   * @param {Function} [blendingFunc] - Custom blending function (layers, x, y) => value.\n   *   If not provided, uses the default multiplicative blending.\n   */\n  constructor(layers = [], blendingFunc) {\n    this.layers = layers;\n    this.blendingFunc = blendingFunc || multiplyBlending;\n    this.time = 0;\n  }\n\n  /**\n   * Get the blended value at (x, y).\n   * @param {number} x - X coordinate.\n   * @param {number} y - Y coordinate.\n   * @returns {number} Blended value.\n   */\n  getValue(x, y) {\n    return this.blendingFunc(this.layers, x, y);\n  }\n\n  /**\n   * Set the current time for all time-aware layers.\n   * @param {number} t - Time value.\n   */\n  setTime(t) {\n    this.time = t;\n    for (const layer of this.layers) {\n      if (layer.enabled) {\n        layer.setTime(t);\n      }\n    }\n  }\n\n  /**\n   * Advance the current time for all time-aware layers.\n   * @param {number} dt - Time delta.\n   */\n  advanceTime(dt) {\n    this.time += dt;\n    for (const layer of this.layers) {\n      if (layer.enabled) {\n        layer.advanceTime(dt);\n      }\n    }\n  }\n}\n"],"names":["noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","callback","undefined","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","exclude_internal_props","props","result","compute_rest_props","keys","rest","Set","has","set_store_value","ret","set","globals","window","globalThis","global","insert","target","node","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","set_style","key","important","style","removeProperty","setProperty","crossorigin","current_component","is_crossorigin","parent","error","toggle_class","toggle","classList","set_current_component","get_current_component","Error","onMount","on_mount","onDestroy","createEventDispatcher","type","detail","cancelable","bubbles","CustomEvent","custom_event","call","defaultPrevented","setContext","context","getContext","get","bubble","this","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","add_flush_callback","seen_callbacks","flushidx","saved_component","update","e","pop","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","ensure_array_like","array_like_or_iterator","Array","from","get_spread_update","levels","updates","to_null_out","accounted_for","n","get_spread_object","spread_props","bind","index","bound","create_component","mount_component","m","new_on_destroy","map","filter","destroy_component","detaching","filtered","targets","indexOf","flush_render_callbacks","init","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","Map","skip_bound","root","ready","fill","make_dirty","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","$on","splice","$set","obj","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","TypographyBuilder","width","height","fontFamily","fontSize","isFontSizeAuto","padding","fillStyle","strokeStyle","strokeWidth","glowColor","glowSize","shadowOffsetX","shadowOffsetY","blurAmount","gradientColors","backgroundColor","innerGlowColor","innerGlowBlur","measureCanvas","measureCtx","constructor","autoFontSize","enable","color","glow","offsetX","offsetY","blur","amount","innerGlow","gradient","colors","background","getMaxFontSize","maxFontSize","textWidth","textHeight","font","measureText","getFontStr","createCanvas","outputCanvas","outputCtx","clearRect","styledCanvas","styledCtx","fillRect","shadowColor","shadowBlur","textAlign","textBaseline","x","y","createLinearGradient","addColorStop","fillText","lineWidth","strokeText","drawImage","maskCanvas","maskCtx","maskData","getImageData","glowCanvas","glowCtx","tempCanvas","tempCtx","glowData","putImageData","toCanvas","Grad","z","dot3","grad3","PerlinNoise2DTime","perm","gradP","time","opts","seed","setTime","t","advanceTime","dt","getValue","perlin3","sourceP","rand","s","lcg","j","fade","lerp","X","floor","Y","Z","n000","n001","n010","n011","n100","n101","n110","n111","u","v","w","FlowNoise2DTime","v0","v1","f","smoothStep","randHash","randHashFInterval","min","N","basis","originalBasis","spinRate","rotCos","rotSin","lastTime","spinVariation","theta","PI","cos","sin","reinitialize","rnd","dummy","getHashIndex","iWrapped","jWrapped","orig","bx","by","floorX","floorY","n00","n10","n01","n11","fx","fy","sx","sy","v00","v10","v01","v11","vlerpX0","vlerpX1","noiseClasses","FBMNoise2DTime","baseNoise","octaves","persistence","lacunarity","total","amplitude","maxAmplitude","frequency","TurbulenceNoise2DTime","abs","multiplyBlending","layers","anyEnabled","layer","enabled","smoothstep","edge0","edge1","blendingOptions","layerStackStore","defaults","blendingMode","setBlendingMode","mode","state","reset","createLayerStackParams","maskLayerStore","enableMasking","radius","fadeOutDuration","autoFadeDuration","setEnableMasking","setRadius","setFadeOutDuration","setAutoFadeDuration","createMaskLayerStore","noiseLayerStore","gain","setEnabled","setGain","createNoiseLayerStore","noiseLayerDirtyFlagStore","createNoiseLayerDirtyFlagStore","nullNoiseStore","createNullNoiseParams","perlinStore","setSeed","createPerlinParams","flowStore","setSpinVariation","setN","createFlowParams","fbmStore","baseType","perlinBaseParams","flowBaseParams","setBaseType","setPerlinBaseParams","setFlowBaseParams","setOctaves","setPersistence","setLacunarity","createFBMParams","turbulenceStore","createTurbulenceParams","noiseTypeToStore","NullNoise","noiseTypeOptions","noiseTypeStore","DEFAULT","createNoiseTypeParam","noiseDirtyFlagsStore","noiseType","flags","flag","clearAll","createNoiseDirtyFlags","noiseSamplingStore","timeScale","setFrequency","setTimeScale","createNoiseSamplingStore","noiseSamplingDirtyFlagsStore","createNoiseSamplingDirtyFlagStore","typographyLayerStore","createTypographyLayerParams","typographyLayerDirtyFlagStore","createTypographyLayerDirtyFlag","FONT_FAMILIES","freeze","ARIAL","VERDANA","TIMES_NEW_ROMAN","fontFamilyOptions","typographyStore","fontSizeAuto","fontSizeManual","useGradient","setText","setFontFamily","setFontSizeAuto","setFontSizeManual","setPadding","setFillStyle","setStrokeStyle","setStrokeWidth","setGlowColor","setGlowSize","setShadowOffsetX","setShadowOffsetY","setBlurAmount","setInnerGlowColor","setInnerGlowBlur","setBackgroundColor","setGradientColors","setUseGradient","createTypographyStore","typographyDirtyFlagStore","createTypographyDirtyFlagStore","simulationStore","animating","useAdvanceTime","setSpeed","setAnimating","setUseAdvanceTime","createSimulationParams","COLOR_MODE","GRAYSCALE","HEIGHT_BANDS","GEOGRAPHICAL","colorModeOptions","uiStore","colorMode","showScaleVisualization","setColorMode","setShowScaleVisualization","show","createUIParams","isEmpty","isObject","isRecord","deepEqualsArray","a1","a2","deepMerge","r1","r2","reduce","v2","__svelte","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","notcompatible","id","propertynotfound","shouldneverhappen","TpError","alreadyDisposed","notBindable","notCompatible","bundleId","propertyNotFound","shouldNeverHappen","config","_a","message","stack","toString","BindingTarget","obj_","isBindable","read","write","writeProperty","valueObj","Emitter","observers_","on","eventName","opt_options","observers","off","observer","emit","ComplexValue","initialValue","constraint_","constraint","equals_","equals","emitter","rawValue_","rawValue","setRawValue","forceEmit","last","constrainedValue","constrain","prevValue","sender","previousRawValue","PrimitiveValue","value_","ReadonlyPrimitiveValue","onValueBeforeChange_","onValueChange_","ev","createValue","ValueMap","valueMap","valMap_","createCore","fromObject","core","DefiniteRangeConstraint","values","RangeConstraint","StepConstraint","step","origin","round","NumberLiteralNode","evaluate","Number","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","join","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","startsWith","parseBinaryOperationExpression","parser","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","parseEcmaNumberExpression","numberFromUnknown","pv","createNumberFormatter","digits","toFixed","mapRange","start1","end1","start2","end2","getDecimalDigits","String","split","replace","constrainRange","loopRange","getSuitableDecimalDigits","getSuitableKeyScale","getSuitablePointerScale","base","log10","createStepConstraint","createRangeConstraint","createNumberTextPropsObject","_b","_c","formatter","format","keyScale","pointerScale","createNumberTextInputParamsParser","optional","function","number","createPointAxis","textProps","BladeApi","controller","view","disabled","viewProps","hidden","dispose","importState","exportState","TpEvent","TpChangeEvent","super","TpFoldEvent","expanded","TpTabSelectEvent","TpMouseEvent","nativeEvent","native","BindingApi","emitter_","label","labelController","binding","tag","bh","refresh","fetch","createMicroParserBuilder","parse","succeeded","createMicroParserBuilders","custom","boolean","string","constant","raw","object","keyToParserMap","tmp","parseObject","array","itemParser","parseItem","isArray","item","MicroParsers","required","parseRecord","importBladeState","superImport","exportBladeState","superExport","thisState","isValueBladeController","bc","isBindingValue","SVG_NS","forceReflow","offsetHeight","supportsTouch","doc","ontouchstart","getWindowDocument","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","elem","createElementNS","innerHTML","insertElementAt","parentElement","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","bindValue","applyValue","bindValueMap","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","cn","LabelView","bindClassModifiers","labelElem","remove","removeChildNodes","appendChild","frag","createDocumentFragment","line","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","valueController","importProps","exportProps","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","LabeledValueBladeController","lc","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","ButtonApi","title","buttonController","valueToClassName","className","active","applyClass","bindValueToTextContent","textContent","ButtonView","buttonElem","bindDisabled","buttonElement","titleElem","ButtonController","onClick_","ButtonBladeController","buttonProps","labelProps","VERSION","prerelease","coreComps","major","parseInt","minor","patch","createPlugin","plugin","accept","args","api","RackApi","pool","onRackValueChange_","controller_","pool_","rack","createApi","addBinding","opt_params","ownerDocument","createBinding","createBindingTarget","createBindingApi","addFolder","addBlade","addFolderAsBlade","addButton","addButtonAsBlade","addTab","addTabAsBlade","opt_index","createBlade","bladeController","ContainerBladeApi","rackApi_","rackController","ContainerBladeController","every","isContainerBladeController","NestedOrderedSet","extract","items_","cache_","onSubListAdd_","onSubListRemove_","extract_","items","allItems","find","includes","subList","findSubBladeControllerSet","Rack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildValueChange_","onChildViewPropsChange_","onRackLayout_","blade_","bcSet_","finder","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","bcs","findValueBladeController","RackController","onRackAdd_","onRackRemove_","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","applyHeight","foldable","bindFoldable","h","folder","containerElement","transition","disableTransitionTemporarily","clientHeight","computeExpandedFolderHeight","propertyName","FolderApi","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","onTitleClick_","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","getGlobalDisabled_","globalDisabled","opt_initialValue","disposed","bindTabIndex","tabIndex","updateGlobalDisabled_","prevParent","TabPageView","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","itemController","TabApi","onSelect_","tab","selectedIndex","pages","addPage","pc","papi","removePage","TabPageApi","Tab","onItemSelectedChange_","keepSelection_","firstSelIndex","findIndex","TabView","itemsElement","contentsElem","contentsElement","TabController","ListInputBindingApi","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","parseListOptions","normalizeListOptions","createListConstraint","ListView","props_","selectElem","selectElement","optionElem","update_","ListController","onSelectChange_","currentTarget","PopupView","shows","PopupController","TextView","onChange_","inputElem","inputElement","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","boolToString","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset","rect","getBoundingClientRect","pageX","scrollX","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","offset","bounds","point","preventDefault","focus","touch","targetTouches","clientX","clientY","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","sliderController","textController","CSS_VAR_MAP","containerUnitSize","getCssVar","PlainView","createPointDimensionParser","parsePointDimensionParams","createDimensionConstraint","cs","rs","parsePickerLayout","writePrimitive","CheckboxView","wrapperElem","checked","CheckboxController","onLabelMouseDown_","stopPropagation","readonly","reader","_args","createConstraint","writer","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgbInt","hp","sp","vp","rp","gp","bp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","sd","rgb","lp","g","cmax","cmin","getColorMaxComponents","constrainColorComponents","components","ms","hue","convertColorType","to","fms","tms","convertColor","intComps","IntColor","black","comps_","getComponents","opt_mode","toRgbaObject","rgbComps","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","textsView_","textsView","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","inputViews","parseColorType","parseColorInputParams","picker","getKeyScaleForColor","forAlpha","extractColorType","FloatColor","TYPE_TO_CONSTRUCTOR_MAP","int","float","createColor","mapColorType","isIntColor","ci","convertIntToFloat","isFloatColor","cf","convertFloatToInt","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","turn","parseCssNumberOrAngle","unit","parseFunctionalRgbColorComponents","isNaN","parseFunctionalRgbColor","parseFunctionalRgbaColorComponents","parseFunctionalRgbaColor","parseFunctionalHslColorComponents","parseFunctionalHslColor","parseHslaColorComponents","parseFunctionalHslaColor","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","notation","detectStringColorFormat","prev","detection","detectStringColor","createColorStringParser","composeParsers","readIntColorString","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","colorToObjectRgbString","names","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","stringifier","formatters","findColorStringifier","fas","f1","f2","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","APaletteController","ColorTextsView","modeElem","modeElem_","optElem","createModeSelectElement","modeMarkerElem","inputsElem","inputsElem_","inputViews_","applyInputViews_","compElem","createComponentControllers","cc","colorType","createComponentController","pickedMode","ColorTextsController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","isColorMode","createHexController","HPaletteView","HPaletteController","SvPaletteView","canvasElem","canvasElement","willReadFrequently","getCanvasContext","hsvComps","imgData","iy","ix","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","textsC_","textsController","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","isRgbColorComponent","isRgbColorObject","isRgbaColorObject","isColorObject","equalsColor","comps1","comps2","createColorComponentsFromRgbObject","createColorObjectWriter","inValue","writeRgbaColorObject","writeRgbColorObject","shouldSupportAlpha","inputParams","createColorObjectBindingReader","colorFromObject","createColorObjectFormatter","isForColor","colorToNumber","createColorNumberWriter","createColorStringWriter","PointNdConstraint","asm_","assembly","toComponents","fromComponents","PointNdTextView","textViews","axisElem","PointNdTextController","acs_","axes","createAxisController","ac","textControllers","SliderInputBindingApi","rc","textPropsObj","drc","Point2d","toObject","Point2dAssembly","Point2dView","Point2dPickerView","onFoldableChange_","onPropsChange_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","keyScales","invertsY","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","xKeyScale","yKeyScale","point2dFromUnknown","writePoint2d","getSuitableMaxDimensionValue","getSuitableMax","xr","yr","shouldInvertY","yParams","inverted","dParams","Point3d","Point3dAssembly","point3dFromUnknown","writePoint3d","Point4d","Point4dAssembly","point4dFromUnknown","writePoint4d","Constants","defaultInterval","defaultRows","MultiLogView","onValueUpdate_","formatter_","textareaElem","rows","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","SingleLogView","lastValue","SingleLogController","GraphLogMonitorBindingApi","GraphLogView","onCursorChange_","cursor_","graphElement","clientWidth","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","createFormatter","shouldShowGraph","defaultBufferSize","createGraphMonitor","createTextMonitor","multiline","standard","baseBackgroundColor","baseBorderRadius","baseFontFamily","baseShadowColor","bladeBorderRadius","bladeHorizontalPadding","bladeValueWidth","buttonBackgroundColor","buttonBackgroundColorActive","buttonBackgroundColorFocus","buttonBackgroundColorHover","buttonForegroundColor","containerBackgroundColor","containerBackgroundColorActive","containerBackgroundColorFocus","containerBackgroundColorHover","containerForegroundColor","containerHorizontalPadding","containerUnitSpacing","containerVerticalPadding","grooveForegroundColor","inputBackgroundColor","inputBackgroundColorActive","inputBackgroundColorFocus","inputBackgroundColorHover","inputForegroundColor","labelForegroundColor","monitorBackgroundColor","monitorForegroundColor","pluginImageDraggingColor","acc","keyToCssVariableMap","stringToCssValue","expandVariableKey","variableName","getValueOrFallback","theme","div","if_block","create_if_block","getPixelValue","$$props","keysAdd","keysSubtract","extra","$$invalidate","sub","extra2","getTotal","isRootPane","container","clamp","getElementIndex","sibling","previousElementSibling","removeKeys","clickBlocker","isTrusted","updateCollapsibility","isUserExpandableEnabled","titleBarClass","iconClass","titleBarElement","querySelector","iconElement","capture","display","console","warn","objectToTuple","pickerIsOpen","Boolean","isObject$1","isBinding","numberToString","InputBindingValue","cn$r","cn$q","excludeValue","BindingController","_s","InputBindingController","inject","isInputBindingController","isInputBindingValue","MonitorBindingValue","ticker","newValue","newBuffer","createPushedBuffer","MonitorBindingController","isMonitorBindingController","isMonitorBindingValue","cn$p","Semver","VERSION$1","ButtonBladePlugin","FolderBladePlugin","cn$o","cn$n","cn$m","cn$l","TabBladePlugin","cn$k","cn$j","cn$i","computeOffset$1","cn$h","cn$g","cn$f","createSliderTextProps","cn$e","BooleanInputPlugin","createConstraint$6","cn$d","cn$c","cn$b","cn$a","createConstraint$5","cn$9","cn$8","cn$7","shouldSupportAlpha$1","NumberColorInputPlugin","ObjectColorInputPlugin","StringColorInputPlugin","cn$6","NumberInputPlugin","createConstraint$4","cn$5","cn$4","Point2dInputPlugin","createConstraint$3","Point3dInputPlugin","createConstraint$2","Point4dInputPlugin","createConstraint$1","StringInputPlugin","cn$3","cn$2","BooleanMonitorPlugin","cn$1","NumberMonitorPlugin","StringMonitorPlugin","ReadWriteBinding","reader_","writer_","ReadonlyBinding","createTicker","PluginPool","apiCache","pluginsMap_","blades","inputs","monitors","apiCache_","getAll","register","ver","unshift","createInput_","valueArgs","createInputBindingController","createMonitor_","bindingArgs","createMonitorBindingController","ic","mc","createBladeController","createInputBindingApi_","createMonitorBindingApi_","isBindingController","sharedCache","map_","ListBladeApi","SeparatorBladeApi","SliderBladeApi","TextBladeApi","ListBladePlugin","RootApi","RootController","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","SliderBladePlugin","vc","TextBladePlugin","Pane","opt_config","createDefaultPluginPool","containerElem_","body","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","css","styleElem","dataset","tpStyle","head","embedStyle","plugins","userExpandable","scale","userCreatedPane","tpPane","parentStore","existingParentStore","pluginsRegistered","updateExpanded","expanded2","$existingParentStore","$parentStore","TpPane","scale2","clampedScale","transformOrigin","transform","setScale","rootDocument","documentElement","getPropertyValue","entries","standardValue","rootValue","applyTheme","fixedContainer","append","$$value","dispatch","indexElement","button","ref","_ref","ButtonCellApi","TpButtonGridEvent","cell","ButtonGridApi","cellToApiMap_","gc","cellControllers","ButtonGridController","cellConfig","cellCs_","gridTemplateColumns","ButtonGridBladeController","cells","CubicBezierApi","interpolate","x1","x2","cb","curve","CubicBezier","y1","y2","x01","y01","x12","y12","x23","y23","xr0","yr0","xr1","yr1","cache","CACHE_RESOLUTION","CubicBezierAssembly","cubicBezierToString","COMPS_EMPTY","cubicBezierFromString","className$7","CubicBezierView","iconElem","className$6","CubicBezierPickerView","graphElem","waitToBeAddedToDom","ob","MutationObserver","ml","addedNodes","disconnect","observe","attributes","childList","subtree","className$5","CubicBezierGraphView","previewElement","guideElem_","handleElems_","vectorElems_","sel_","selection","h1","h2","input","getVertMargin_","valueToPosition","vm","positionToValue","p1","p2","bezier","vElem","className$4","CubicBezierPreviewView","stopped_","startTime_","requestId_","onDispose_","onTimer_","ticksElem","ticksElem_","play","updateMarker_","Date","getTime","requestAnimationFrame","cancelAnimationFrame","progress","TICK_COUNT","PREVIEW_DURATION","getDistance","sqrt","CubicBezierGraphController","keyScale_","prevView_","stopImmediatePropagation","ptHandler","updateValue_","locksAngle","atan2","la","lockAngle","d1","d2","xStep","yStep","CubicBezierPickerController","gc_","axis","xAxis","yAxis","tc_","CubicBezierController","FpsGraphBladeApi","fps","begin","end","Fpswatch","start_","duration_","fps_","frameCount_","timestamps_","duration","now","calculateFps_","nowTime","ts","frameCount","compactTimestamps_","df","className$3","FpsView","unitElement","FpsGraphController","stopwatch_","graphC_","FpsGraphBladeController","fc","_d","Interval","IntervalAssembly","IntervalConstraint","edge","_e","_f","_g","_h","className$2","RangeSliderTextView","className$1","RangeSliderView","onSliderPropsChange_","barElement","knobElems","knobElements","valueToX_","xs","RangeSliderController","grabbing_","grabOffset_","ofs_","valueFromData_","pmin","pmax","applyPointToValue_","rmin","rmax","RangeSliderTextController","sc_","intervalFromUnknown","writeInterval","exValue","midValue","RadioCellApi","TpRadioGridChangeEvent","RadioGridApi","findCellByValue","capi","RadioView","RadioController","RadioGridController","cellValues_","onCellInputChange_","groupName","createRadioGridInputPlugin","isType","toStringFunction","Function","prototype","toStringObject","LegacyCache","_keys","_values","createCache","WeakMap","getCleanClone","Constructor","getRegExpFlags","regExp","ignoreCase","unicode","sticky","getTagLegacy","substring","getTag","Symbol","toStringTag","defineProperty","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","hasOwnProperty","propertyIsEnumerable","SUPPORTS_SYMBOL","getStrictProperties","concat","copyOwnPropertiesStrict","clone","properties","length_1","property","descriptor","copier","copyArrayBuffer","arrayBuffer","_state","copyMapLoose","copyObjectLoose","symbols","length_3","symbol","copyPrimitiveWrapper","primitiveObject","valueOf","copySelf","copySetLoose","getPrototypeOf","__proto__","DEFAULT_LOOSE_OPTIONS","length_2","blob","dataView","date","source","lastIndex","DEFAULT_STRICT_OPTIONS","createCopier","tagSpecificCopiers","Arguments","ArrayBuffer","Blob","DataView","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","RegExp","WeakSet","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Uint64Array","getTagSpecificCopiers","tagSpecificCopier","combineComparators","comparatorA","comparatorB","createIsCircular","areItemsEqual","cachedA","cachedB","hasOwn","sameValueZeroEqual","areArraysEqual","areDatesEqual","areErrorsEqual","cause","areFunctionsEqual","areMapsEqual","aResult","bResult","matchedIndices","aIterable","next","done","bIterable","hasMatch","matchIndex","aEntry","bEntry","areNumbersEqual","areObjectsEqual","isPropertyEqual","areObjectsEqualStrict","descriptorA","descriptorB","configurable","enumerable","arePrimitiveWrappersEqual","areRegExpsEqual","areSetsEqual","areTypedArraysEqual","areUrlsEqual","hostname","pathname","protocol","port","hash","username","password","$$typeof","isTypedArray","isView","createCustomEqual","strict","circular","shallowEqual","createInternalComparator","compare","createCustomInternalComparator","createState","createCustomConfig","areArraysEqual$1","areMapsEqual$1","areObjectsEqual$1","areSetsEqual$1","createEqualityComparatorConfig","comparator","createEqualityComparator","_indexOrKeyA","_indexOrKeyB","_parentA","_parentB","meta","createIsEqual","onTweakpaneChange","safeCopy","File","lastModified","HTMLImageElement","copy2","Image","copy","lastObject","internalChange","object2","genericbinding_spread_levels","optionsInternal","genericinput_spread_levels","buttonClass","gotBinding","initialExpanded","internalExpanded","querySelectorAll","click","internalValue","newInternalValue","containerClassName","inputClassName","deleteButtonClassName","FilePluginView","setAttribute","filetypes","lineCount","fileIcon","warning","invalidFiletypeMessage","deleteButton","changeDraggingState","FilePluginController","onFile","onDrop","onDragOver","onDragLeave","onDeleteClick","handleValueChange","_event","files","file","isFileValid","showWarning","setTimeout","fileExtension","DragEvent","dataTransfer","filesArray","fileObj","containerEl","textEl","fileIconEl","border","loadImage","image","crossOrigin","PluginView","extensions","image_","random","imageFit","onclick","clickCallback","changeImage","el","placeholderImage","PluginController","onDragStart","setValue","imgId","getData","img","getElementById","url","setData","setDragImage","handleImage","updateImage","handlePlaceholderImage","URL","createObjectURL","createPlaceholderImage","DEFAULT_EXTENSIONS","formatProxy","acceptUrl","blade_spread_levels","getInternalOptions","options2","isObjectStyleListOptions","value2","listBlade","bladeOptions","getInitialValue","internalOptions","RingView","tickElems_","labelElems_","boundsWidth_","onShowsTooltipChange_","formatters_","unit_","seriesId","showsTooltip","offsetElem_","waitToBeAdded_","IntersectionObserver","entry","intersectionRatio","rebuildScaleIfNeeded_","bw","tpu","ticks","uw","pixels","tickCount","ceil","tickWidth","updateScale_","uv","halfUnitCount","ov","opacity","tv","lv","ring","RingController","ox_","ov_","tooltipEnabled_","tooltipEnabled","showsTooltip_","RingTextView","ringElem","ringView","RingTextController","rc_","ringFormatter","ringUnit","cr","parseSeries","getRingSeries","series","wide","createRingFormatter","Rotation","multiply","quat","premultiply","slerp","mod","lofi","sanitizeAngle","Euler","fromQuaternion","order","toMat3","asin","reunit","Quaternion","fromEuler","toEuler","reorder","prev2Next","fromAxisAngle","halfAngle","sinHalfAngle","eulerr","euler","compo","ti","tj","tk","cj","ck","sj","sk","lookRotation","look","up","normal","tangent","binormal","orthoNormalize","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","lengthSq","normalized","negated","ban360s","br","cosHalfTheta","sqrSinHalfTheta","EPSILON","sinHalfTheta","halfTheta","ratioA","ratioB","PointProjector","fov","aspect","viewport","project","vcx","vcy","vw","vh","tan","sz","SVGLineStrip","vertices","projector","setRotation","rotation","pathStr","vertex","iVertex","transformed","applyQuaternion","Vector3","cross","dotNT","q","iz","iw","createArcRotation","front","createArcVerticesArray","thetaStart","thetaLength","segments","cosAxis","sinAxis","vector","VEC3_ZERO","VEC3_XP$2","VEC3_YP$2","VEC3_ZP$2","VEC3_ZN","VEC3_XP70","VEC3_YP70","VEC3_ZP70","VEC3_XN70","VEC3_YN70","VEC3_ZN70","QUAT_IDENTITY$2","createLabel","circleClass","labelText","circle","RotationInputGizmoView","xArcBElement","xArcBC_","yArcBElement","yArcBC_","zArcBElement","zArcBC_","xArcFElement","xArcFC_","yArcFElement","yArcFC_","zArcFElement","zArcFC_","rArcElement","rArcC_","onModeChange_","projector_","arcArray","arcArrayR","xArcB_","yArcB_","zArcB_","axesElem","axesElem_","xAxis_","yAxis_","zAxis_","xnAxis_","ynAxis_","znAxis_","xArcF_","yArcF_","zArcF_","rArc_","labelsElem","labelsElem_","xLabel","yLabel","zLabel","xnLabel","ynLabel","znLabel","onHoverXArc","onLeaveXArc","onHoverYArc","onLeaveYArc","onHoverZArc","onLeaveZArc","mode_","xp","yp","zp","xn","yn","zn","sort","saturate","INV_SQRT2","VEC3_XP$1","VEC3_YP$1","VEC3_ZP$1","QUAT_IDENTITY$1","QUAT_TOP","QUAT_RIGHT","QUAT_BOTTOM","QUAT_LEFT","QUAT_BACK","RotationInputGizmoController","ptHandlerXArcB","changeModeIfNotAuto_","ptHandlerXArcF","ptHandlerYArcB","ptHandlerYArcF","ptHandlerZArcB","ptHandlerZArcF","ptHandlerRArc","autoRotate_","px_","py_","angleState_","cx","cy","initialRotation","initialAngle","reverseAngle","angleDiff","beginTime","xt","iikanjiEaseout","VEC3_XP","VEC3_YP","VEC3_ZP","QUAT_IDENTITY","RotationInputSwatchView","xArc_","yArc_","zArc_","RotationInputSwatchController","RotationInputView","rotationMode","RotationInputController","gizmoC","gizmoC_","createAxisEuler","baseStep","createEulerAssembly","parseEuler","parseEulerOrder","parseEulerUnit","QuaternionAssembly","createAxisQuaternion","parseQuaternion","wide2","inputField","updateWide","StepperConstraint","StepperAssembly","StepperTextView","buttonsView_","buttonsView","buttonsElem","StepperButtonsView","btnMinus","btnPlus","StepperButtonsController","StepperTextController","onInput","dispatchEvent","Event","live","updateListeners","live2","destroy","TextAreaView","cols","placeholder","TextAreaController","create_if_block_2","folderStore","folderRef","$folderStore","stores","session","persisted","onError","serializer","storageType","storage","syncTabs","onWriteError","onParseError","newVal","beforeRead","val","beforeWrite","browser","localStorage","sessionStorage","updateStorage","key2","setItem","internal","json","getItem","serialized","json2","serialize","maybeLoadInitial","set2","handleStorage","processedVal","attribute","removeAttribute","getAttribute","getComputedStyle","position","iframe","contentWindow","onload","localStorePrefix","localStoreDefaultId","localStoreIds","zIndexGlobal","initialDragEvent","positionStore","storePositionLocally","localStoreId","dragBarElement","widthHandleElement","containerHeight","containerHeightScaled","containerWidth","documentWidth","documentHeight","$positionStore","collapseChildrenToFit","resizable","minWidth","maxWidth","zIndexLocal","setDocumentSize","documentWidthPrevious","documentHeightPrevious","centerPercentX","centerPercentY","startWidth","startOffsetX","startOffsetY","moveDistance","doubleClickListener","maxAvailablePanelWidth","dragStartListener","HTMLElement","removeDragStartListeners","addDragMoveAndEndListeners","setPointerCapture","pointerId","dragMoveListener","hypot","movementX","movementY","blurListener","pointerCancelEvent","PointerEvent","composed","pointerType","dragEndListener","hasPointerCapture","releasePointerCapture","removeDragMoveAndEndListeners","addDragStartListeners","touchScrollBlocker","recursiveCollapse","maxToCollapse","MAX_SAFE_INTEGER","child","swatchButton","dragBarElementCheck","isResizable","vPadding","paddingTop","paddingBottom","removeItem","$$subscribe_positionStore","paneContainer","ProfilerBladeApi","measureStart","measureEnd","measure","measureAsync","measureHandler","ProfilerBladeController","ProfilerBladeDefaultMeasureHandler","performance","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","rejected","apply","SuppressedError","ConsecutiveCacheMap","keySet","getOrCreate","resetUsedSet","vaporize","onVaporize","arraySum","sum","HistoryMeanCalculator","__recalcForEach","__countUntilRecalc","__history","__index","__count","__cache","__length","mean","count","recalcForEach","delta","recalc","binarySearch","elementOrCompare","center","HistoryPercentileCalculator","__sorted","median","percentile","prevIndex","genTurboColormap","v4","ProfilerView","targetDelta","deltaUnit","fractionDigits","calcMode","svgRootElement_","entryContainerElement_","tooltipElement_","tooltipInsideElement_","labelElement_","deltaToDisplayDelta_","entryElementCacheMap_","hoveringEntry_","rootEntry","rootEntryDelta","entryToDelta_","addEntry_","path","updateTooltip_","dataDelta","parentPath","newG","turboX","deltaMean","deltaMedian","ProfilerController","ticker_","rootCalcCacheStack_","createNewEntryCalcCache_","calcCache","childrenCacheMap","childrenPromiseDelta","parentCalcCache","promiseDelta","sumChildrenDelta","all","selfDelta","meanCalc","medianCalc","latest","renderEntry","renderEntryFromCalcCache_","childName","selfDeltaMean","selfDeltaMedian","parseCalcMode","parseMeasureHandler","LinearDrawerProvider","drawer","cpsX","cpsY","controlPoint","cpeX","cpeY","current","previous","reverse","lenX","lenY","WaveformView","pathElem","lineDrawerProvider","svgPath","latestValue","range","gridWidth","gridHeight","backgroundSize","WaveformController","isWaveformType","checkbox_changes","slider0_changes","slider1_changes","slider2_changes","slider_changes","list_changes","if_block0","create_if_block_7","if_block1","create_if_block_6","if_block2","create_if_block_3","if_block3","text_1_changes","color0_changes","color1_changes","iterations","color_changes","checkbox0_changes","checkbox1_changes","$noiseTypeStore","$turbulenceStore","$fbmStore","newColors","$typographyStore","idx","shouldShowWaveform","lineStyle","fpsChart","canvas","maxFps","history","lastFpsUpdate","currentFps","record","elapsed","shift","draw","blankImageData","ImageData","typographyLayer","imageData","channel","xi","yi","updateTypography","layerParams","typographyCanvas","builder","buildTypographyCanvas","noise","noiseLayerParams","noiseSamplingParams","noiseLayer","noiseTimeScale","attachNoise","newNoise","updateNoise","noiseStore","noiseParams","baseParams","BaseNoiseClass","octaveParams","OctaveNoiseClass","NoiseClass","instantiateNoise","maskLayerParams","maskLayer","centerX","centerY","fading","fadeOutStartTime","lastUpdateTime","activate","log","deactivate","checkAutoFade","fadeElapsed","dist","maskAlpha","isMouseDown","handleMouseDown","handleMouseMove","handleMouseUp","maskListenersAttached","updateMask","blendingFunctions","additive","subtract","screen","overlay","found","maxValue","minValue","average","blendingFunc","render","createImageData","bands","cellSize","beginPath","moveTo","lineTo","stroke","renderGrid","period","arc","closePath","renderPieChart","lastNow","firstFrame","loop","newT"],"mappings":"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"}